<HTML>
<HEAD>
<TITLE>matriz.c.html</TITLE>
</HEAD>
<BODY BGcolor=#FFFFFF TEXT=#000000>
<PRE>
 <FONT color=#0000ff>/*</FONT>
<FONT color=#0000ff>   *</FONT>
<FONT color=#0000ff>   *  AUTOR: Luis</FONT>
<FONT color=#0000ff>   *  VERSIÓN: 0.0</FONT>
<FONT color=#0000ff>   *</FONT>
<FONT color=#0000ff>   *  DESCRIPCIÓN: Archivo fuente matriz.c. Implementa un TAD matriz</FONT>
<FONT color=#0000ff>   *</FONT>
<FONT color=#0000ff>   */</FONT>        
<FONT color=#a620f7>#include </FONT><FONT color=#ff00ff>&lt;stdlib.h&gt;</FONT> <FONT color=#0000ff>/*</FONT><FONT color=#0000ff> calloc, free....*/</FONT>
<FONT color=#a620f7>#include </FONT><FONT color=#ff00ff>&lt;string.h&gt;</FONT> <FONT color=#0000ff>/*</FONT><FONT color=#0000ff> memcpy */</FONT>
<FONT color=#a620f7>#include </FONT><FONT color=#ff00ff>&lt;assert.h&gt;</FONT> <FONT color=#0000ff>/*</FONT><FONT color=#0000ff> aserciones */</FONT>
<FONT color=#a620f7>#include </FONT><FONT color=#ff00ff>&quot;matriz.h&quot;</FONT>

<FONT color=#0000ff>/*</FONT>
<FONT color=#0000ff> * Macro para obtener una posición. El puntero se convierte a (char *) porque</FONT>
<FONT color=#0000ff> * algunos compiladores no permiten sumar a punteros void. La posición que </FONT>
<FONT color=#0000ff> * ocupa un elemento será su fila más su columna. Esto hay que multiplicarlo por </FONT>
<FONT color=#0000ff> * el tamaño de cada elemento.</FONT>
<FONT color=#0000ff> *</FONT>
<FONT color=#0000ff> */</FONT>
<FONT color=#a620f7>#define POS( pM, i, j)((</FONT><B><FONT color=#288a51>char</FONT></B><FONT color=#a620f7> *) pM-&gt;elementos + pM-&gt;tamagno * (i * pM-&gt;n +j))</FONT>

<B><FONT color=#288a51>void</FONT></B> MatrizCrea( Matriz *pM, <B><FONT color=#288a51>int</FONT></B> m, <B><FONT color=#288a51>int</FONT></B> n, <B><FONT color=#288a51>int</FONT></B> tamagno)
{
    assert (m&gt;<FONT color=#ff00ff>0</FONT>);
    assert (n&gt;<FONT color=#ff00ff>0</FONT>);
    assert (tamagno&gt;<FONT color=#ff00ff>0</FONT>);
    pM-&gt;m = m;
    pM-&gt;n = n;
    pM-&gt;tamagno = tamagno;
    pM-&gt;elementos = calloc ( m*n, tamagno);
    assert (pM-&gt;elementos != <FONT color=#ff00ff>NULL</FONT>);
}

<B><FONT color=#288a51>void</FONT></B> MatrizDestruye(Matriz *pM)
{
    assert ( pM-&gt;elementos != <FONT color=#ff00ff>NULL</FONT> );
    free (pM-&gt;elementos);
}

<B><FONT color=#288a51>void</FONT></B> MatrizObten(Matriz *pM, <B><FONT color=#288a51>int</FONT></B> i, <B><FONT color=#288a51>int</FONT></B> j, <B><FONT color=#288a51>void</FONT></B> *elemento)
{
    assert(i &gt;= <FONT color=#ff00ff>0</FONT> &amp;&amp; i &lt; pM-&gt;m);
    assert(j &gt;= <FONT color=#ff00ff>0</FONT> &amp;&amp; j &lt; pM-&gt;n);
    memcpy(elemento, POS(pM, i, j), pM-&gt;tamagno);
}

<B><FONT color=#288a51>void</FONT></B> MatrizCambia(Matriz *pM, <B><FONT color=#288a51>int</FONT></B> i, <B><FONT color=#288a51>int</FONT></B> j, <B><FONT color=#288a51>void</FONT></B> *elemento)
{
   assert(i &gt;= <FONT color=#ff00ff>0</FONT> &amp;&amp; i &lt; pM-&gt;m);
   assert(j &gt;= <FONT color=#ff00ff>0</FONT> &amp;&amp; j &lt; pM-&gt;n);
   memcpy(POS(pM, i, j),elemento, pM-&gt;tamagno);
}                     
</PRE>
</BODY>
</HTML>
