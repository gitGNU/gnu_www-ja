<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by Texinfo 5.2dev+dev, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Perl pod documentation: perlopentut</title>

<meta name="description" content="Perl pod documentation: perlopentut">
<meta name="keywords" content="Perl pod documentation: perlopentut">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html#Top" rel="up" title="Top">
<link href="perlpacktut.html#perlpacktut" rel="next" title="perlpacktut">
<link href="perlop.html#perlop-Bigger-Numbers" rel="prev" title="perlop Bigger Numbers">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="perlopentut"></a>
<div class="header">
<p>
Next: <a href="perlpacktut.html#perlpacktut" accesskey="n" rel="next">perlpacktut</a>, Previous: <a href="perlop.html#perlop" accesskey="p" rel="prev">perlop</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="perlopentut-1"></a>
<h2 class="chapter">49 perlopentut</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#perlopentut-NAME" accesskey="1">perlopentut NAME</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlopentut-DESCRIPTION" accesskey="2">perlopentut DESCRIPTION</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlopentut-Opening-Text-Files" accesskey="3">perlopentut Opening Text Files</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlopentut-Opening-Binary-Files" accesskey="4">perlopentut Opening Binary Files</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlopentut-Opening-Pipes" accesskey="5">perlopentut Opening Pipes</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlopentut-Low_002dlevel-File-Opens-via-sysopen" accesskey="6">perlopentut Low-level File Opens via sysopen</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlopentut-SEE-ALSO" accesskey="7">perlopentut SEE ALSO</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlopentut-AUTHOR-and-COPYRIGHT" accesskey="8">perlopentut AUTHOR and COPYRIGHT</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="perlopentut-NAME"></a>
<div class="header">
<p>
Next: <a href="#perlopentut-DESCRIPTION" accesskey="n" rel="next">perlopentut DESCRIPTION</a>, Up: <a href="#perlopentut" accesskey="u" rel="up">perlopentut</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="NAME-48"></a>
<h3 class="section">49.1 NAME</h3>

<p>perlopentut - simple recipes for opening files and pipes in Perl
</p>
<hr>
<a name="perlopentut-DESCRIPTION"></a>
<div class="header">
<p>
Next: <a href="#perlopentut-Opening-Text-Files" accesskey="n" rel="next">perlopentut Opening Text Files</a>, Previous: <a href="#perlopentut-NAME" accesskey="p" rel="prev">perlopentut NAME</a>, Up: <a href="#perlopentut" accesskey="u" rel="up">perlopentut</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="DESCRIPTION-47"></a>
<h3 class="section">49.2 DESCRIPTION</h3>

<p>Whenever you do I/O on a file in Perl, you do so through what in Perl is
called a <strong>filehandle</strong>.  A filehandle is an internal name for an external
file.  It is the job of the <code>open</code> function to make the association
between the internal name and the external name, and it is the job
of the <code>close</code> function to break that association.
</p>
<p>For your convenience, Perl sets up a few special filehandles that are
already open when you run.  These include <code>STDIN</code>, <code>STDOUT</code>, <code>STDERR</code>,
and <code>ARGV</code>.  Since those are pre-opened, you can use them right away
without having to go to the trouble of opening them yourself:
</p>
<pre class="verbatim">    print STDERR &quot;This is a debugging message.\n&quot;;

    print STDOUT &quot;Please enter something: &quot;;
    $response = &lt;STDIN&gt; // die &quot;how come no input?&quot;;
    print STDOUT &quot;Thank you!\n&quot;;

    while (&lt;ARGV&gt;) { ... }
</pre>
<p>As you see from those examples, <code>STDOUT</code> and <code>STDERR</code> are output
handles, and <code>STDIN</code> and <code>ARGV</code> are input handles.  They are
in all capital letters because they are reserved to Perl, much
like the <code>@ARGV</code> array and the <code>%ENV</code> hash are.  Their external
associations were set up by your shell.
</p>
<p>You will need to open every other filehandle on your own. Although there
are many variants, the most common way to call Perl&rsquo;s open() function
is with three arguments and one return value:
</p>
<p><code>    <em>OK</em> = open(<em>HANDLE</em>, <em>MODE</em>, <em>PATHNAME</em>)</code>
</p>
<p>Where:
</p>
<dl compact="compact">
<dt><em>OK</em></dt>
<dd><a name="perlopentut-OK"></a>
<p>will be some defined value if the open succeeds, but
<code>undef</code> if it fails;
</p>
</dd>
<dt><em>HANDLE</em></dt>
<dd><a name="perlopentut-HANDLE"></a>
<p>should be an undefined scalar variable to be filled in by the
<code>open</code> function if it succeeds;
</p>
</dd>
<dt><em>MODE</em></dt>
<dd><a name="perlopentut-MODE"></a>
<p>is the access mode and the encoding format to open the file with;
</p>
</dd>
<dt><em>PATHNAME</em></dt>
<dd><a name="perlopentut-PATHNAME"></a>
<p>is the external name of the file you want opened.
</p>
</dd>
</dl>

<p>Most of the complexity of the <code>open</code> function lies in the many
possible values that the <em>MODE</em> parameter can take on.
</p>
<p>One last thing before we show you how to open files: opening
files does not (usually) automatically lock them in Perl.  See
<a href="../perlfaq5/index.html">(perlfaq5)</a> for how to lock.
</p>
<hr>
<a name="perlopentut-Opening-Text-Files"></a>
<div class="header">
<p>
Next: <a href="#perlopentut-Opening-Binary-Files" accesskey="n" rel="next">perlopentut Opening Binary Files</a>, Previous: <a href="#perlopentut-DESCRIPTION" accesskey="p" rel="prev">perlopentut DESCRIPTION</a>, Up: <a href="#perlopentut" accesskey="u" rel="up">perlopentut</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="Opening-Text-Files"></a>
<h3 class="section">49.3 Opening Text Files</h3>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#perlopentut-Opening-Text-Files-for-Reading" accesskey="1">perlopentut Opening Text Files for Reading</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlopentut-Opening-Text-Files-for-Writing" accesskey="2">perlopentut Opening Text Files for Writing</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="perlopentut-Opening-Text-Files-for-Reading"></a>
<div class="header">
<p>
Next: <a href="#perlopentut-Opening-Text-Files-for-Writing" accesskey="n" rel="next">perlopentut Opening Text Files for Writing</a>, Up: <a href="#perlopentut-Opening-Text-Files" accesskey="u" rel="up">perlopentut Opening Text Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="Opening-Text-Files-for-Reading"></a>
<h4 class="subsection">49.3.1 Opening Text Files for Reading</h4>

<p>If you want to read from a text file, first open it in
read-only mode like this:
</p>
<pre class="verbatim">    my $filename = &quot;/some/path/to/a/textfile/goes/here&quot;;
    my $encoding = &quot;:encoding(UTF-8)&quot;;
    my $handle   = undef;     # this will be filled in on success

    open($handle, &quot;&lt; $encoding&quot;, $filename)
        || die &quot;$0: can't open $filename for reading: $!&quot;;
</pre>
<p>As with the shell, in Perl the <code>&quot;&lt;&quot;</code> is used to open the file in
read-only mode.  If it succeeds, Perl allocates a brand new filehandle for
you and fills in your previously undefined <code>$handle</code> argument with a
reference to that handle.
</p>
<p>Now you may use functions like <code>readline</code>, <code>read</code>, <code>getc</code>, and
<code>sysread</code> on that handle.  Probably the most common input function
is the one that looks like an operator:
</p>
<pre class="verbatim">    $line = readline($handle);
    $line = &lt;$handle&gt;;          # same thing
</pre>
<p>Because the <code>readline</code> function returns <code>undef</code> at end of file or
upon error, you will sometimes see it used this way:
</p>
<pre class="verbatim">    $line = &lt;$handle&gt;;
    if (defined $line) {
        # do something with $line
    }
    else {
        # $line is not valid, so skip it
    }
</pre>
<p>You can also just quickly <code>die</code> on an undefined value this way:
</p>
<pre class="verbatim">    $line = &lt;$handle&gt; // die &quot;no input found&quot;;
</pre>
<p>However, if hitting EOF is an expected and normal event, you do not want to
exit simply because you have run out of input.  Instead, you probably just want
to exit an input loop.  You can then test to see if an actual error has caused
the loop to terminate, and act accordingly:
</p>
<pre class="verbatim">    while (&lt;$handle&gt;) {
        # do something with data in $_
    }
    if ($!) {
        die &quot;unexpected error while reading from $filename: $!&quot;;
    }
</pre>
<p><strong>A Note on Encodings</strong>: Having to specify the text encoding every time
might seem a bit of a bother.  To set up a default encoding for <code>open</code> so
that you don&rsquo;t have to supply it each time, you can use the <code>open</code> pragma:
</p>
<pre class="verbatim">    use open qw&lt; :encoding(UTF-8) &gt;;
</pre>
<p>Once you&rsquo;ve done that, you can safely omit the encoding part of the
open mode:
</p>
<pre class="verbatim">    open($handle, &quot;&lt;&quot;, $filename)
        || die &quot;$0: can't open $filename for reading: $!&quot;;
</pre>
<p>But never use the bare <code>&quot;&lt;&quot;</code> without having set up a default encoding
first.  Otherwise, Perl cannot know which of the many, many, many possible
flavors of text file you have, and Perl will have no idea how to correctly
map the data in your file into actual characters it can work with.  Other
common encoding formats including <code>&quot;ASCII&quot;</code>, <code>&quot;ISO-8859-1&quot;</code>,
<code>&quot;ISO-8859-15&quot;</code>, <code>&quot;Windows-1252&quot;</code>, <code>&quot;MacRoman&quot;</code>, and even <code>&quot;UTF-16LE&quot;</code>.
See <a href="perlunitut.html#perlunitut-NAME">perlunitut NAME</a> for more about encodings.
</p>
<hr>
<a name="perlopentut-Opening-Text-Files-for-Writing"></a>
<div class="header">
<p>
Previous: <a href="#perlopentut-Opening-Text-Files-for-Reading" accesskey="p" rel="prev">perlopentut Opening Text Files for Reading</a>, Up: <a href="#perlopentut-Opening-Text-Files" accesskey="u" rel="up">perlopentut Opening Text Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="Opening-Text-Files-for-Writing"></a>
<h4 class="subsection">49.3.2 Opening Text Files for Writing</h4>

<p>When you want to write to a file, you first have to decide what to do about
any existing contents of that file.  You have two basic choices here: to
preserve or to clobber.
</p>
<p>If you want to preserve any existing contents, then you want to open the file
in append mode.  As in the shell, in Perl you use <code>&quot;&gt;&gt;&quot;</code> to open an
existing file in append mode.  <code>&quot;&gt;&gt;&quot;</code> creates the file if it does not
already exist.
</p>
<pre class="verbatim">    my $handle   = undef;
    my $filename = &quot;/some/path/to/a/textfile/goes/here&quot;;
    my $encoding = &quot;:encoding(UTF-8)&quot;;

    open($handle, &quot;&gt;&gt; $encoding&quot;, $filename)
        || die &quot;$0: can't open $filename for appending: $!&quot;;
</pre>
<p>Now you can write to that filehandle using any of <code>print</code>, <code>printf</code>,
<code>say</code>, <code>write</code>, or <code>syswrite</code>.
</p>
<p>As noted above, if the file does not already exist, then the append-mode open
will create it for you.  But if the file does already exist, its contents are
safe from harm because you will be adding your new text past the end of the
old text.
</p>
<p>On the other hand, sometimes you want to clobber whatever might already be
there.  To empty out a file before you start writing to it, you can open it
in write-only mode:
</p>
<pre class="verbatim">    my $handle   = undef;
    my $filename = &quot;/some/path/to/a/textfile/goes/here&quot;;
    my $encoding = &quot;:encoding(UTF-8)&quot;;

    open($handle, &quot;&gt; $encoding&quot;, $filename)
        || die &quot;$0: can't open $filename in write-open mode: $!&quot;;
</pre>
<p>Here again Perl works just like the shell in that the <code>&quot;&gt;&quot;</code> clobbers
an existing file.
</p>
<p>As with the append mode, when you open a file in write-only mode,
you can now write to that filehandle using any of <code>print</code>, <code>printf</code>,
<code>say</code>, <code>write</code>, or <code>syswrite</code>.
</p>
<p>What about read-write mode?  You should probably pretend it doesn&rsquo;t exist,
because opening text files in read-write mode is unlikely to do what you
would like.  See <a href="../perlfaq5/index.html">(perlfaq5)</a> for details.
</p>
<hr>
<a name="perlopentut-Opening-Binary-Files"></a>
<div class="header">
<p>
Next: <a href="#perlopentut-Opening-Pipes" accesskey="n" rel="next">perlopentut Opening Pipes</a>, Previous: <a href="#perlopentut-Opening-Text-Files" accesskey="p" rel="prev">perlopentut Opening Text Files</a>, Up: <a href="#perlopentut" accesskey="u" rel="up">perlopentut</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="Opening-Binary-Files"></a>
<h3 class="section">49.4 Opening Binary Files</h3>

<p>If the file to be opened contains binary data instead of text characters,
then the <code>MODE</code> argument to <code>open</code> is a little different.  Instead of
specifying the encoding, you tell Perl that your data are in raw bytes.
</p>
<pre class="verbatim">    my $filename = &quot;/some/path/to/a/binary/file/goes/here&quot;;
    my $encoding = &quot;:raw :bytes&quot;
    my $handle   = undef;     # this will be filled in on success
</pre>
<p>And then open as before, choosing <code>&quot;&lt;&quot;</code>, <code>&quot;&gt;&gt;&quot;</code>, or
<code>&quot;&gt;&quot;</code> as needed:
</p>
<pre class="verbatim">    open($handle, &quot;&lt; $encoding&quot;, $filename)
        || die &quot;$0: can't open $filename for reading: $!&quot;;

    open($handle, &quot;&gt;&gt; $encoding&quot;, $filename)
        || die &quot;$0: can't open $filename for appending: $!&quot;;

    open($handle, &quot;&gt; $encoding&quot;, $filename)
        || die &quot;$0: can't open $filename in write-open mode: $!&quot;;
</pre>
<p>Alternately, you can change to binary mode on an existing handle this way:
</p>
<pre class="verbatim">    binmode($handle)    || die &quot;cannot binmode handle&quot;;
</pre>
<p>This is especially handy for the handles that Perl has already opened for you.
</p>
<pre class="verbatim">    binmode(STDIN)      || die &quot;cannot binmode STDIN&quot;;
    binmode(STDOUT)     || die &quot;cannot binmode STDOUT&quot;;
</pre>
<p>You can also pass <code>binmode</code> an explicit encoding to change it on the fly.
This isn&rsquo;t exactly &quot;binary&quot; mode, but we still use <code>binmode</code> to do it:
</p>
<pre class="verbatim">  binmode(STDIN,  &quot;:encoding(MacRoman)&quot;) || die &quot;cannot binmode STDIN&quot;;
  binmode(STDOUT, &quot;:encoding(UTF-8)&quot;)    || die &quot;cannot binmode STDOUT&quot;;
</pre>
<p>Once you have your binary file properly opened in the right mode, you can
use all the same Perl I/O functions as you used on text files.  However,
you may wish to use the fixed-size <code>read</code> instead of the variable-sized
<code>readline</code> for your input.
</p>
<p>Here&rsquo;s an example of how to copy a binary file:
</p>
<pre class="verbatim">    my $BUFSIZ   = 64 * (2 ** 10);
    my $name_in  = &quot;/some/input/file&quot;;
    my $name_out = &quot;/some/output/flie&quot;;

    my($in_fh, $out_fh, $buffer);

    open($in_fh,  &quot;&lt;&quot;, $name_in)
        || die &quot;$0: cannot open $name_in for reading: $!&quot;;
    open($out_fh, &quot;&gt;&quot;, $name_out)
        || die &quot;$0: cannot open $name_out for writing: $!&quot;;

    for my $fh ($in_fh, $out_fh)  {
        binmode($fh)               || die &quot;binmode failed&quot;;
    }

    while (read($in_fh, $buffer, $BUFSIZ)) {
        unless (print $out_fh $buffer) {
            die &quot;couldn't write to $name_out: $!&quot;;
        }
    }

    close($in_fh)       || die &quot;couldn't close $name_in: $!&quot;;
    close($out_fh)      || die &quot;couldn't close $name_out: $!&quot;;
</pre>
<hr>
<a name="perlopentut-Opening-Pipes"></a>
<div class="header">
<p>
Next: <a href="#perlopentut-Low_002dlevel-File-Opens-via-sysopen" accesskey="n" rel="next">perlopentut Low-level File Opens via sysopen</a>, Previous: <a href="#perlopentut-Opening-Binary-Files" accesskey="p" rel="prev">perlopentut Opening Binary Files</a>, Up: <a href="#perlopentut" accesskey="u" rel="up">perlopentut</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="Opening-Pipes"></a>
<h3 class="section">49.5 Opening Pipes</h3>

<p>To be announced.
</p>
<hr>
<a name="perlopentut-Low_002dlevel-File-Opens-via-sysopen"></a>
<div class="header">
<p>
Next: <a href="#perlopentut-SEE-ALSO" accesskey="n" rel="next">perlopentut SEE ALSO</a>, Previous: <a href="#perlopentut-Opening-Pipes" accesskey="p" rel="prev">perlopentut Opening Pipes</a>, Up: <a href="#perlopentut" accesskey="u" rel="up">perlopentut</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="Low_002dlevel-File-Opens-via-sysopen"></a>
<h3 class="section">49.6 Low-level File Opens via sysopen</h3>

<p>To be announced.  Or deleted.
</p>
<hr>
<a name="perlopentut-SEE-ALSO"></a>
<div class="header">
<p>
Next: <a href="#perlopentut-AUTHOR-and-COPYRIGHT" accesskey="n" rel="next">perlopentut AUTHOR and COPYRIGHT</a>, Previous: <a href="#perlopentut-Low_002dlevel-File-Opens-via-sysopen" accesskey="p" rel="prev">perlopentut Low-level File Opens via sysopen</a>, Up: <a href="#perlopentut" accesskey="u" rel="up">perlopentut</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="SEE-ALSO-24"></a>
<h3 class="section">49.7 SEE ALSO</h3>

<p>To be announced.
</p>
<hr>
<a name="perlopentut-AUTHOR-and-COPYRIGHT"></a>
<div class="header">
<p>
Previous: <a href="#perlopentut-SEE-ALSO" accesskey="p" rel="prev">perlopentut SEE ALSO</a>, Up: <a href="#perlopentut" accesskey="u" rel="up">perlopentut</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="AUTHOR-and-COPYRIGHT"></a>
<h3 class="section">49.8 AUTHOR and COPYRIGHT</h3>

<p>Copyright 2013 Tom Christiansen.
</p>
<p>This documentation is free; you can redistribute it and/or modify it under
the same terms as Perl itself.
</p>
<hr>
<div class="header">
<p>
Previous: <a href="#perlopentut-SEE-ALSO" accesskey="p" rel="prev">perlopentut SEE ALSO</a>, Up: <a href="#perlopentut" accesskey="u" rel="up">perlopentut</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>



</body>
</html>
