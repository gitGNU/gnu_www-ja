<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by Texinfo 5.1.90+dev, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Perl pod documentation: perlclib</title>

<meta name="description" content="Perl pod documentation: perlclib">
<meta name="keywords" content="Perl pod documentation: perlclib">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html#Top" rel="up" title="Top">
<link href="perlcommunity.html#perlcommunity" rel="next" title="perlcommunity">
<link href="perlcheat.html#perlcheat-SEE-ALSO" rel="prev" title="perlcheat SEE ALSO">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="perlclib"></a>
<div class="header">
<p>
Next: <a href="perlcommunity.html#perlcommunity" accesskey="n" rel="next">perlcommunity</a>, Previous: <a href="perlcheat.html#perlcheat" accesskey="p" rel="prev">perlcheat</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="perlclib-1"></a>
<h2 class="chapter">9 perlclib</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#perlclib-NAME" accesskey="1">perlclib NAME</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlclib-DESCRIPTION" accesskey="2">perlclib DESCRIPTION</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlclib-SEE-ALSO" accesskey="3">perlclib SEE ALSO</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="perlclib-NAME"></a>
<div class="header">
<p>
Next: <a href="#perlclib-DESCRIPTION" accesskey="n" rel="next">perlclib DESCRIPTION</a>, Up: <a href="#perlclib" accesskey="u" rel="up">perlclib</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="NAME-8"></a>
<h3 class="section">9.1 NAME</h3>

<p>perlclib - Internal replacements for standard C library functions
</p>
<hr>
<a name="perlclib-DESCRIPTION"></a>
<div class="header">
<p>
Next: <a href="#perlclib-SEE-ALSO" accesskey="n" rel="next">perlclib SEE ALSO</a>, Previous: <a href="#perlclib-NAME" accesskey="p" rel="prev">perlclib NAME</a>, Up: <a href="#perlclib" accesskey="u" rel="up">perlclib</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="DESCRIPTION-8"></a>
<h3 class="section">9.2 DESCRIPTION</h3>

<p>One thing Perl porters should note is that <samp>perl</samp> doesn&rsquo;t tend to use that
much of the C standard library internally; you&rsquo;ll see very little use of, 
for example, the <samp>ctype.h</samp> functions in there. This is because Perl
tends to reimplement or abstract standard library functions, so that we
know exactly how they&rsquo;re going to operate.
</p>
<p>This is a reference card for people who are familiar with the C library
and who want to do things the Perl way; to tell them which functions
they ought to use instead of the more normal C functions. 
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#perlclib-Conventions" accesskey="1">perlclib Conventions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlclib-File-Operations" accesskey="2">perlclib File Operations</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlclib-File-Input-and-Output" accesskey="3">perlclib File Input and Output</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlclib-File-Positioning" accesskey="4">perlclib File Positioning</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlclib-Memory-Management-and-String-Handling" accesskey="5">perlclib Memory Management and String Handling</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlclib-Character-Class-Tests" accesskey="6">perlclib Character Class Tests</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlclib-stdlib_002eh-functions" accesskey="7">perlclib <samp>stdlib.h</samp> functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#perlclib-Miscellaneous-functions" accesskey="8">perlclib Miscellaneous functions</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<a name="perlclib-Conventions"></a>
<div class="header">
<p>
Next: <a href="#perlclib-File-Operations" accesskey="n" rel="next">perlclib File Operations</a>, Up: <a href="#perlclib-DESCRIPTION" accesskey="u" rel="up">perlclib DESCRIPTION</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="Conventions"></a>
<h4 class="subsection">9.2.1 Conventions</h4>

<p>In the following tables:
</p>
<dl compact="compact">
<dt><code>t</code></dt>
<dd><a name="perlclib-t"></a>
<p>is a type.
</p>
</dd>
<dt><code>p</code></dt>
<dd><a name="perlclib-p"></a>
<p>is a pointer.
</p>
</dd>
<dt><code>n</code></dt>
<dd><a name="perlclib-n"></a>
<p>is a number.
</p>
</dd>
<dt><code>s</code></dt>
<dd><a name="perlclib-s"></a>
<p>is a string.
</p>
</dd>
</dl>

<p><code>sv</code>, <code>av</code>, <code>hv</code>, etc. represent variables of their respective types.
</p>
<hr>
<a name="perlclib-File-Operations"></a>
<div class="header">
<p>
Next: <a href="#perlclib-File-Input-and-Output" accesskey="n" rel="next">perlclib File Input and Output</a>, Previous: <a href="#perlclib-Conventions" accesskey="p" rel="prev">perlclib Conventions</a>, Up: <a href="#perlclib-DESCRIPTION" accesskey="u" rel="up">perlclib DESCRIPTION</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="File-Operations"></a>
<h4 class="subsection">9.2.2 File Operations</h4>

<p>Instead of the <samp>stdio.h</samp> functions, you should use the Perl abstraction
layer. Instead of <code>FILE*</code> types, you need to be handling <code>PerlIO*</code>
types.  Don&rsquo;t forget that with the new PerlIO layered I/O abstraction 
<code>FILE*</code> types may not even be available. See also the <code>perlapio</code>
documentation for more information about the following functions:
</p>
<pre class="verbatim">    Instead Of:                 Use:

    stdin                       PerlIO_stdin()
    stdout                      PerlIO_stdout()
    stderr                      PerlIO_stderr()

    fopen(fn, mode)             PerlIO_open(fn, mode)
    freopen(fn, mode, stream)   PerlIO_reopen(fn, mode, perlio) (Deprecated)
    fflush(stream)              PerlIO_flush(perlio)
    fclose(stream)              PerlIO_close(perlio)
</pre>
<hr>
<a name="perlclib-File-Input-and-Output"></a>
<div class="header">
<p>
Next: <a href="#perlclib-File-Positioning" accesskey="n" rel="next">perlclib File Positioning</a>, Previous: <a href="#perlclib-File-Operations" accesskey="p" rel="prev">perlclib File Operations</a>, Up: <a href="#perlclib-DESCRIPTION" accesskey="u" rel="up">perlclib DESCRIPTION</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="File-Input-and-Output"></a>
<h4 class="subsection">9.2.3 File Input and Output</h4>

<pre class="verbatim">    Instead Of:                 Use:

    fprintf(stream, fmt, ...)   PerlIO_printf(perlio, fmt, ...)

    [f]getc(stream)             PerlIO_getc(perlio)
    [f]putc(stream, n)          PerlIO_putc(perlio, n)
    ungetc(n, stream)           PerlIO_ungetc(perlio, n)
</pre>
<p>Note that the PerlIO equivalents of <code>fread</code> and <code>fwrite</code> are slightly
different from their C library counterparts:
</p>
<pre class="verbatim">    fread(p, size, n, stream)   PerlIO_read(perlio, buf, numbytes)
    fwrite(p, size, n, stream)  PerlIO_write(perlio, buf, numbytes)

    fputs(s, stream)            PerlIO_puts(perlio, s)
</pre>
<p>There is no equivalent to <code>fgets</code>; one should use <code>sv_gets</code> instead:
</p>
<pre class="verbatim">    fgets(s, n, stream)         sv_gets(sv, perlio, append)
</pre>
<hr>
<a name="perlclib-File-Positioning"></a>
<div class="header">
<p>
Next: <a href="#perlclib-Memory-Management-and-String-Handling" accesskey="n" rel="next">perlclib Memory Management and String Handling</a>, Previous: <a href="#perlclib-File-Input-and-Output" accesskey="p" rel="prev">perlclib File Input and Output</a>, Up: <a href="#perlclib-DESCRIPTION" accesskey="u" rel="up">perlclib DESCRIPTION</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="File-Positioning"></a>
<h4 class="subsection">9.2.4 File Positioning</h4>

<pre class="verbatim">    Instead Of:                 Use:

    feof(stream)                PerlIO_eof(perlio)
    fseek(stream, n, whence)    PerlIO_seek(perlio, n, whence)
    rewind(stream)              PerlIO_rewind(perlio)

    fgetpos(stream, p)          PerlIO_getpos(perlio, sv)
    fsetpos(stream, p)          PerlIO_setpos(perlio, sv)

    ferror(stream)              PerlIO_error(perlio)
    clearerr(stream)            PerlIO_clearerr(perlio)
</pre>
<hr>
<a name="perlclib-Memory-Management-and-String-Handling"></a>
<div class="header">
<p>
Next: <a href="#perlclib-Character-Class-Tests" accesskey="n" rel="next">perlclib Character Class Tests</a>, Previous: <a href="#perlclib-File-Positioning" accesskey="p" rel="prev">perlclib File Positioning</a>, Up: <a href="#perlclib-DESCRIPTION" accesskey="u" rel="up">perlclib DESCRIPTION</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="Memory-Management-and-String-Handling"></a>
<h4 class="subsection">9.2.5 Memory Management and String Handling</h4>

<pre class="verbatim">    Instead Of:                         Use:

    t* p = malloc(n)                    Newx(p, n, t)
    t* p = calloc(n, s)                 Newxz(p, n, t)
    p = realloc(p, n)                   Renew(p, n, t)
    memcpy(dst, src, n)                 Copy(src, dst, n, t)
    memmove(dst, src, n)                Move(src, dst, n, t)
    memcpy(dst, src, sizeof(t))         StructCopy(src, dst, t)
    memset(dst, 0, n * sizeof(t))       Zero(dst, n, t)
    memzero(dst, 0)                     Zero(dst, n, char)
    free(p)                             Safefree(p)

    strdup(p)                   savepv(p)
    strndup(p, n)               savepvn(p, n) (Hey, strndup doesn't exist!)

    strstr(big, little)         instr(big, little)
    strcmp(s1, s2)              strLE(s1, s2) / strEQ(s1, s2) / strGT(s1,s2)
    strncmp(s1, s2, n)          strnNE(s1, s2, n) / strnEQ(s1, s2, n)
</pre>
<p>Notice the different order of arguments to <code>Copy</code> and <code>Move</code> than used
in <code>memcpy</code> and <code>memmove</code>.
</p>
<p>Most of the time, though, you&rsquo;ll want to be dealing with SVs internally
instead of raw <code>char *</code> strings:
</p>
<pre class="verbatim">    strlen(s)                   sv_len(sv)
    strcpy(dt, src)             sv_setpv(sv, s)
    strncpy(dt, src, n)         sv_setpvn(sv, s, n)
    strcat(dt, src)             sv_catpv(sv, s)
    strncat(dt, src)            sv_catpvn(sv, s)
    sprintf(s, fmt, ...)        sv_setpvf(sv, fmt, ...)
</pre>
<p>Note also the existence of <code>sv_catpvf</code> and <code>sv_vcatpvfn</code>, combining
concatenation with formatting.
</p>
<p>Sometimes instead of zeroing the allocated heap by using Newxz() you
should consider &quot;poisoning&quot; the data.  This means writing a bit
pattern into it that should be illegal as pointers (and floating point
numbers), and also hopefully surprising enough as integers, so that
any code attempting to use the data without forethought will break
sooner rather than later.  Poisoning can be done using the Poison()
macros, which have similar arguments to Zero():
</p>
<pre class="verbatim">    PoisonWith(dst, n, t, b)    scribble memory with byte b
    PoisonNew(dst, n, t)        equal to PoisonWith(dst, n, t, 0xAB)
    PoisonFree(dst, n, t)       equal to PoisonWith(dst, n, t, 0xEF)
    Poison(dst, n, t)           equal to PoisonFree(dst, n, t)
</pre>
<hr>
<a name="perlclib-Character-Class-Tests"></a>
<div class="header">
<p>
Next: <a href="#perlclib-stdlib_002eh-functions" accesskey="n" rel="next">perlclib <samp>stdlib.h</samp> functions</a>, Previous: <a href="#perlclib-Memory-Management-and-String-Handling" accesskey="p" rel="prev">perlclib Memory Management and String Handling</a>, Up: <a href="#perlclib-DESCRIPTION" accesskey="u" rel="up">perlclib DESCRIPTION</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="Character-Class-Tests"></a>
<h4 class="subsection">9.2.6 Character Class Tests</h4>

<p>There are two types of character class tests that Perl implements: one
type deals in <code>char</code>s and are thus <strong>not</strong> Unicode aware (and hence
deprecated unless you <strong>know</strong> you should use them) and the other type
deal in <code>UV</code>s and know about Unicode properties. In the following
table, <code>c</code> is a <code>char</code>, and <code>u</code> is a Unicode codepoint.
</p>
<pre class="verbatim">    Instead Of:                 Use:            But better use:

    isalnum(c)                  isALNUM(c)      isALNUM_uni(u)
    isalpha(c)                  isALPHA(c)      isALPHA_uni(u)
    iscntrl(c)                  isCNTRL(c)      isCNTRL_uni(u)
    isdigit(c)                  isDIGIT(c)      isDIGIT_uni(u)
    isgraph(c)                  isGRAPH(c)      isGRAPH_uni(u)
    islower(c)                  isLOWER(c)      isLOWER_uni(u)
    isprint(c)                  isPRINT(c)      isPRINT_uni(u)
    ispunct(c)                  isPUNCT(c)      isPUNCT_uni(u)
    isspace(c)                  isSPACE(c)      isSPACE_uni(u)
    isupper(c)                  isUPPER(c)      isUPPER_uni(u)
    isxdigit(c)                 isXDIGIT(c)     isXDIGIT_uni(u)

    tolower(c)                  toLOWER(c)      toLOWER_uni(u)
    toupper(c)                  toUPPER(c)      toUPPER_uni(u)
</pre>
<hr>
<a name="perlclib-stdlib_002eh-functions"></a>
<div class="header">
<p>
Next: <a href="#perlclib-Miscellaneous-functions" accesskey="n" rel="next">perlclib Miscellaneous functions</a>, Previous: <a href="#perlclib-Character-Class-Tests" accesskey="p" rel="prev">perlclib Character Class Tests</a>, Up: <a href="#perlclib-DESCRIPTION" accesskey="u" rel="up">perlclib DESCRIPTION</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="stdlib_002eh-functions"></a>
<h4 class="subsection">9.2.7 <samp>stdlib.h</samp> functions</h4>

<pre class="verbatim">    Instead Of:                 Use: 

    atof(s)                     Atof(s)
    atol(s)                     Atol(s)
    strtod(s, &amp;p)               Nothing.  Just don't use it.
    strtol(s, &amp;p, n)            Strtol(s, &amp;p, n)
    strtoul(s, &amp;p, n)           Strtoul(s, &amp;p, n)
</pre>
<p>Notice also the <code>grok_bin</code>, <code>grok_hex</code>, and <code>grok_oct</code> functions in
<samp>numeric.c</samp> for converting strings representing numbers in the respective
bases into <code>NV</code>s.
</p>
<p>In theory <code>Strtol</code> and <code>Strtoul</code> may not be defined if the machine perl is
built on doesn&rsquo;t actually have strtol and strtoul. But as those 2
functions are part of the 1989 ANSI C spec we suspect you&rsquo;ll find them
everywhere by now.
</p>
<pre class="verbatim">    int rand()                  double Drand01()
    srand(n)                    { seedDrand01((Rand_seed_t)n); 
                                  PL_srand_called = TRUE; }

    exit(n)                     my_exit(n)
    system(s)                   Don't. Look at pp_system or use my_popen

    getenv(s)                   PerlEnv_getenv(s)
    setenv(s, val)              my_putenv(s, val)
</pre>
<hr>
<a name="perlclib-Miscellaneous-functions"></a>
<div class="header">
<p>
Previous: <a href="#perlclib-stdlib_002eh-functions" accesskey="p" rel="prev">perlclib <samp>stdlib.h</samp> functions</a>, Up: <a href="#perlclib-DESCRIPTION" accesskey="u" rel="up">perlclib DESCRIPTION</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="Miscellaneous-functions"></a>
<h4 class="subsection">9.2.8 Miscellaneous functions</h4>

<p>You should not even <strong>want</strong> to use <samp>setjmp.h</samp> functions, but if you
think you do, use the <code>JMPENV</code> stack in <samp>scope.h</samp> instead.
</p>
<p>For <code>signal</code>/<code>sigaction</code>, use <code>rsignal(signo, handler)</code>.
</p>
<hr>
<a name="perlclib-SEE-ALSO"></a>
<div class="header">
<p>
Previous: <a href="#perlclib-DESCRIPTION" accesskey="p" rel="prev">perlclib DESCRIPTION</a>, Up: <a href="#perlclib" accesskey="u" rel="up">perlclib</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>
<a name="SEE-ALSO-3"></a>
<h3 class="section">9.3 SEE ALSO</h3>

<p><a href="../perlapi/index.html">(perlapi)</a>, <a href="perlapio.html#perlapio-NAME">perlapio NAME</a>, <a href="perlguts.html#perlguts-NAME">perlguts NAME</a>
</p>
<hr>
<div class="header">
<p>
Previous: <a href="#perlclib-DESCRIPTION" accesskey="p" rel="prev">perlclib DESCRIPTION</a>, Up: <a href="#perlclib" accesskey="u" rel="up">perlclib</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>]</p>
</div>



</body>
</html>
