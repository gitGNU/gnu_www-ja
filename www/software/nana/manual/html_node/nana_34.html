<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.52
     from ../texi/nana.texi on 6 November 1998 -->

<TITLE>GNU Nana: improved support for assertions and logging in C and C++ - Syslog</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="nana_1.html">first</A>, <A HREF="nana_33.html">previous</A>, <A HREF="nana_35.html">next</A>, <A HREF="nana_42.html">last</A> section, <A HREF="nana_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC34" HREF="nana_toc.html#TOC34">Syslog</A></H2>
<P>
<SAMP>`syslog'</SAMP> is a comprehensive logging system written by Eric Allman
which is available on most Unix systems. It provides facilities for
sorting messages by source or severity and mechanisms for sending
messages off to files, terminals or other machines. See chapter 12 of
the "Unix System Administration Handbook (2nd Edition)" 
by Nemeth, Snyder, Seebass and Hein for an excellent tutorial on
<SAMP>`syslog'</SAMP>.

</P>
<P>
The rules used by <SAMP>`syslog'</SAMP> are normally defined in
<SAMP>`/etc/syslog.conf'</SAMP>. Each line specifies the destination for
messages with particular sources and priorities.  For example:

</P>

<PRE>
# log mail messages at priority info to mailinfo
mail.info /var/log/mailinfo
# log all ftp information to syslog on a remote machine
ftp.* @remote-machine.cs.ntu.edu.au
# all critical errors to console
*.crit   /dev/console
</PRE>

<P>
To use <SAMP>`syslog'</SAMP> we merely redefine the default handlers and
parameter values for <SAMP>`nana'</SAMP>. For example:

</P>

<PRE>
#include &#60;syslog.h&#62;
#define L_DEFAULT_HANDLER syslog /* replaces fprintf(3) by syslog(3) */
#define L_DEFAULT_PARAMS LOG_USER /* default priority for syslog info */
#include &#60;nana.h&#62;

int main() {
     openlog("nana", /* identifier for these log messages */
        LOG_PID, /* also log the process id */
        LOG_DAEMON /* facility */
     );

     L("temperature is falling to %d", 35); /* logged at LOG_USER priority */
     LP(LOG_CRIT, "the snow is falling in Darwin"); /* LOG_CRIT message */
        
     closelog();
     return 0;
}
</PRE>

<P>
This program results in the following addition to <SAMP>`/var/adm/messages'</SAMP>:

</P>

<PRE>
Jun 12 16:04:46 chingiz nana[2671]: the temperature is falling to 35
Jun 12 16:04:46 chingiz nana[2671]: the snow is falling in Darwin
</PRE>

<P>
In addition the <SAMP>`LOG_CRIT'</SAMP> message about snow falling in Darwin is
sent to the console for immediate action. 

</P>
<P>
<STRONG>Note:</STRONG> <SAMP>`syslog'</SAMP> normally uses <SAMP>`UDP'</SAMP> for its network
communications and that <SAMP>`UDP'</SAMP> does not guarantee delivery. 

</P>
<P><HR><P>
Go to the <A HREF="nana_1.html">first</A>, <A HREF="nana_33.html">previous</A>, <A HREF="nana_35.html">next</A>, <A HREF="nana_42.html">last</A> section, <A HREF="nana_toc.html">table of contents</A>.
</BODY>
</HTML>
