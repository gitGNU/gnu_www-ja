<html lang="en">
<head>
<title>GNU MP 4.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="How to install and use the GNU multiple precision arithmetic library, version 4.1.">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
<!--
This manual describes how to install and use the GNU multiple precision
arithmetic library, version 4.1.

<p>Copyright 1991, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002
Free Software Foundation, Inc.

<p>Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant Sections,
with the Front-Cover Texts being "A GNU Manual", and with the Back-Cover
Texts being "You have freedom to copy and modify this GNU Manual, like GNU
software".  A copy of the license is included in <a href="GNU-Free-Documentation-License.html#GNU%20Free%20Documentation%20License">GNU Free Documentation License</a>.-->
</head>
<body>
<p>
Node:<a name="Formatted%20Output%20Strings">Formatted Output Strings</a>,
Next:<a rel=next accesskey=n href="Formatted-Output-Functions.html#Formatted%20Output%20Functions">Formatted Output Functions</a>,
Previous:<a rel=previous accesskey=p href="Formatted-Output.html#Formatted%20Output">Formatted Output</a>,
Up:<a rel=up accesskey=u href="Formatted-Output.html#Formatted%20Output">Formatted Output</a>
<hr><br>

<h3>Format Strings</h3>

<p><code>gmp_printf</code> and friends accept format strings similar to the standard C
<code>printf</code> (see <a href="../libc/Formatted-Output.html#Formatted%20Output">Formatted Output</a>).  A format specification is of the form

<br><pre>% [flags] [width] [.[precision]] [type] conv
</pre>

<p>GMP adds types <code>Z</code>, <code>Q</code> and <code>F</code> for <code>mpz_t</code>, <code>mpq_t</code>
and <code>mpf_t</code> respectively, and <code>N</code> for an <code>mp_limb_t</code> array. 
<code>Z</code>, <code>Q</code> and <code>N</code> behave like integers.  <code>Q</code> will print a
<code>/</code> and a denominator, if needed.  <code>F</code> behaves like a float.  For
example,

<br><pre>mpz_t z;
gmp_printf ("%s is an mpz %Zd\n", "here", z);

mpq_t q;
gmp_printf ("a hex rational: %#40Qx\n", q);

mpf_t f;
int   n;
gmp_printf ("fixed point mpf %.*Ff with %d digits\n", n, f, n);

const mp_limb_t *ptr;
mp_size_t       size;
gmp_printf ("limb array %Nx\n", ptr, size);
</pre>

<p>For <code>N</code> the limbs are expected least significant first, as per the
<code>mpn</code> functions (see <a href="Low-level-Functions.html#Low-level%20Functions">Low-level Functions</a>).  A negative size can be
given to print the value as a negative.

<p>All the standard C <code>printf</code> types behave the same as the C library
<code>printf</code>, and can be freely intermixed with the GMP extensions.  In the
current implementation the standard parts of the format string are simply
handed to <code>printf</code> and only the GMP extensions handled directly.

<p>The flags accepted are as follows.  GLIBC style <code>'</code> is only for the
standard C types (not the GMP types), and only if the C library supports it.

<blockquote>
<p><table><tr align="left"><td valign="top"><code>0</code> </td><td valign="top">pad with zeros (rather than spaces)
<br></td></tr><tr align="left"><td valign="top"><code>#</code> </td><td valign="top">show the base with <code>0x</code>, <code>0X</code> or <code>0</code>
<br></td></tr><tr align="left"><td valign="top"><code>+</code> </td><td valign="top">always show a sign
<br></td></tr><tr align="left"><td valign="top">(space)    </td><td valign="top">show a space or a <code>-</code> sign
<br></td></tr><tr align="left"><td valign="top"><code>'</code> </td><td valign="top">group digits, GLIBC style (not GMP types)
<br></td></tr></table>
</blockquote>

<p>The optional width and precision can be given as a number within the format
string, or as a <code>*</code> to take an extra parameter of type <code>int</code>, the
same as the standard <code>printf</code>.

<p>The standard types accepted are as follows.  <code>h</code> and <code>l</code> are
portable, the rest will depend on the compiler (or include files) for the type
and the C library for the output.

<blockquote>
<p><table><tr align="left"><td valign="top"><code>h</code>  </td><td valign="top"><code>short</code>
<br></td></tr><tr align="left"><td valign="top"><code>hh</code> </td><td valign="top"><code>char</code>
<br></td></tr><tr align="left"><td valign="top"><code>j</code>  </td><td valign="top"><code>intmax_t</code> or <code>uintmax_t</code>
<br></td></tr><tr align="left"><td valign="top"><code>l</code>  </td><td valign="top"><code>long</code> or <code>wchar_t</code>
<br></td></tr><tr align="left"><td valign="top"><code>ll</code> </td><td valign="top">same as <code>L</code>
<br></td></tr><tr align="left"><td valign="top"><code>L</code>  </td><td valign="top"><code>long long</code> or <code>long double</code>
<br></td></tr><tr align="left"><td valign="top"><code>q</code>  </td><td valign="top"><code>quad_t</code> or <code>u_quad_t</code>
<br></td></tr><tr align="left"><td valign="top"><code>t</code>  </td><td valign="top"><code>ptrdiff_t</code>
<br></td></tr><tr align="left"><td valign="top"><code>z</code>  </td><td valign="top"><code>size_t</code>
<br></td></tr></table>
</blockquote>

<p>The GMP types are

<blockquote>
<p><table><tr align="left"><td valign="top"><code>F</code>  </td><td valign="top"><code>mpf_t</code>, float conversions
<br></td></tr><tr align="left"><td valign="top"><code>Q</code>  </td><td valign="top"><code>mpq_t</code>, integer conversions
<br></td></tr><tr align="left"><td valign="top"><code>N</code>  </td><td valign="top"><code>mp_limb_t</code> array, integer conversions
<br></td></tr><tr align="left"><td valign="top"><code>Z</code>  </td><td valign="top"><code>mpz_t</code>, integer conversions
<br></td></tr></table>
</blockquote>

<p>The conversions accepted are as follows.  <code>a</code> and <code>A</code> are always
supported for <code>mpf_t</code> but depend on the C library for standard C float
types.  <code>m</code> and <code>p</code> depend on the C library.

<blockquote>
<p><table><tr align="left"><td valign="top"><code>a</code> <code>A</code> </td><td valign="top">hex floats, GLIBC style
<br></td></tr><tr align="left"><td valign="top"><code>c</code>            </td><td valign="top">character
<br></td></tr><tr align="left"><td valign="top"><code>d</code>            </td><td valign="top">decimal integer
<br></td></tr><tr align="left"><td valign="top"><code>e</code> <code>E</code> </td><td valign="top">scientific format float
<br></td></tr><tr align="left"><td valign="top"><code>f</code>            </td><td valign="top">fixed point float
<br></td></tr><tr align="left"><td valign="top"><code>i</code>            </td><td valign="top">same as <code>d</code>
<br></td></tr><tr align="left"><td valign="top"><code>g</code> <code>G</code> </td><td valign="top">fixed or scientific float
<br></td></tr><tr align="left"><td valign="top"><code>m</code>            </td><td valign="top"><code>strerror</code> string, GLIBC style
<br></td></tr><tr align="left"><td valign="top"><code>n</code>            </td><td valign="top">store characters written so far
<br></td></tr><tr align="left"><td valign="top"><code>o</code>            </td><td valign="top">octal integer
<br></td></tr><tr align="left"><td valign="top"><code>p</code>            </td><td valign="top">pointer
<br></td></tr><tr align="left"><td valign="top"><code>s</code>            </td><td valign="top">string
<br></td></tr><tr align="left"><td valign="top"><code>u</code>            </td><td valign="top">unsigned integer
<br></td></tr><tr align="left"><td valign="top"><code>x</code> <code>X</code> </td><td valign="top">hex integer
<br></td></tr></table>
</blockquote>

<p><code>o</code>, <code>x</code> and <code>X</code> are unsigned for the standard C types, but for
types <code>Z</code>, <code>Q</code> and <code>N</code> they are signed.  <code>u</code> is not
meaningful for <code>Z</code>, <code>Q</code> and <code>N</code>.

<p><code>n</code> can be used with any type, even the GMP types.

<p>Other types or conversions that might be accepted by the C library
<code>printf</code> cannot be used through <code>gmp_printf</code>, this includes for
instance extensions registered with GLIBC <code>register_printf_function</code>. 
Also currently there's no support for POSIX <code>$</code> style numbered arguments
(perhaps this will be added in the future).

<p>The precision field has it's usual meaning for integer <code>Z</code> and float
<code>F</code> types, but is currently undefined for <code>Q</code> and should not be used
with that.

<p><code>mpf_t</code> conversions only ever generate as many digits as can be
accurately represented by the operand, the same as <code>mpf_get_str</code> does. 
Zeros will be used if necessary to pad to the requested precision.  This
happens even for an <code>f</code> conversion of an <code>mpf_t</code> which is an
integer, for instance 2^1024 in an <code>mpf_t</code> of 128 bits
precision will only produce about 20 digits, then pad with zeros to the
decimal point.  An empty precision field like <code>%.Fe</code> or <code>%.Ff</code> can
be used to specifically request just the significant digits.

<p>The decimal point character (or string) is taken from the current locale
settings on systems which provide <code>localeconv</code> (see <a href="../libc/Locales.html#Locales">Locales and Internationalization</a>).  The C
library will normally do the same for standard float output.

</body></html>

