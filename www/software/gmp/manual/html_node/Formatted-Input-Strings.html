<html lang="en">
<head>
<title>GNU MP 4.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="How to install and use the GNU multiple precision arithmetic library, version 4.1.">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
<!--
This manual describes how to install and use the GNU multiple precision
arithmetic library, version 4.1.

<p>Copyright 1991, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002
Free Software Foundation, Inc.

<p>Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant Sections,
with the Front-Cover Texts being "A GNU Manual", and with the Back-Cover
Texts being "You have freedom to copy and modify this GNU Manual, like GNU
software".  A copy of the license is included in <a href="GNU-Free-Documentation-License.html#GNU%20Free%20Documentation%20License">GNU Free Documentation License</a>.-->
</head>
<body>
<p>
Node:<a name="Formatted%20Input%20Strings">Formatted Input Strings</a>,
Next:<a rel=next accesskey=n href="Formatted-Input-Functions.html#Formatted%20Input%20Functions">Formatted Input Functions</a>,
Previous:<a rel=previous accesskey=p href="Formatted-Input.html#Formatted%20Input">Formatted Input</a>,
Up:<a rel=up accesskey=u href="Formatted-Input.html#Formatted%20Input">Formatted Input</a>
<hr><br>

<h3>Formatted Input Strings</h3>

<p><code>gmp_scanf</code> and friends accept format strings similar to the standard C
<code>scanf</code> (see <a href="../libc/Formatted-Input.html#Formatted%20Input">Formatted Input</a>).  A format specification is of the form

<br><pre>% [flags] [width] [type] conv
</pre>

<p>GMP adds types <code>Z</code>, <code>Q</code> and <code>F</code> for <code>mpz_t</code>, <code>mpq_t</code>
and <code>mpf_t</code> respectively.  <code>Z</code> and <code>Q</code> behave like integers. 
<code>Q</code> will read a <code>/</code> and a denominator, if present.  <code>F</code> behaves
like a float.

<p>GMP variables don't require an <code>&amp;</code> when passed to <code>gmp_scanf</code>, since
they're already "call-by-reference".  For example,

<br><pre>/* to read say "a(5) = 1234" */
int   n;
mpz_t z;
gmp_scanf ("a(%d) = %Zd\n", &amp;n, z);

mpq_t q1, q2;
gmp_sscanf ("0377 + 0x10/0x11", "%Qi + %Qi", q1, q2);

/* to read say "topleft (1.55,-2.66)" */
mpf_t x, y;
char  buf[32];
gmp_scanf ("%31s (%Ff,%Ff)", buf, x, y);
</pre>

<p>All the standard C <code>scanf</code> types behave the same as in the C library
<code>scanf</code>, and can be freely intermixed with the GMP extensions.  In the
current implementation the standard parts of the format string are simply
handed to <code>scanf</code> and only the GMP extensions handled directly.

<p>The flags accepted are as follows.  <code>a</code> and <code>'</code> will depend on
support from the C library, and <code>'</code> cannot be used with GMP types.

<blockquote>
<p><table><tr align="left"><td valign="top"><code>*</code> </td><td valign="top">read but don't store
<br></td></tr><tr align="left"><td valign="top"><code>a</code> </td><td valign="top">allocate a buffer (string conversions)
<br></td></tr><tr align="left"><td valign="top"><code>'</code> </td><td valign="top">group digits, GLIBC style (not GMP types)
<br></td></tr></table>
</blockquote>

<p>The standard types accepted are as follows.  <code>h</code> and <code>l</code> are
portable, the rest will depend on the compiler (or include files) for the type
and the C library for the input.

<blockquote>
<p><table><tr align="left"><td valign="top"><code>h</code>  </td><td valign="top"><code>short</code>
<br></td></tr><tr align="left"><td valign="top"><code>hh</code> </td><td valign="top"><code>char</code>
<br></td></tr><tr align="left"><td valign="top"><code>j</code>  </td><td valign="top"><code>intmax_t</code> or <code>uintmax_t</code>
<br></td></tr><tr align="left"><td valign="top"><code>l</code>  </td><td valign="top"><code>long</code> or <code>wchar_t</code>
<br></td></tr><tr align="left"><td valign="top"><code>ll</code> </td><td valign="top">same as <code>L</code>
<br></td></tr><tr align="left"><td valign="top"><code>L</code>  </td><td valign="top"><code>long long</code> or <code>long double</code>
<br></td></tr><tr align="left"><td valign="top"><code>q</code>  </td><td valign="top"><code>quad_t</code> or <code>u_quad_t</code>
<br></td></tr><tr align="left"><td valign="top"><code>t</code>  </td><td valign="top"><code>ptrdiff_t</code>
<br></td></tr><tr align="left"><td valign="top"><code>z</code>  </td><td valign="top"><code>size_t</code>
<br></td></tr></table>
</blockquote>

<p>The GMP types are

<blockquote>
<p><table><tr align="left"><td valign="top"><code>F</code>  </td><td valign="top"><code>mpf_t</code>, float conversions
<br></td></tr><tr align="left"><td valign="top"><code>Q</code>  </td><td valign="top"><code>mpq_t</code>, integer conversions
<br></td></tr><tr align="left"><td valign="top"><code>Z</code>  </td><td valign="top"><code>mpz_t</code>, integer conversions
<br></td></tr></table>
</blockquote>

<p>The conversions accepted are as follows.  <code>p</code> and <code>[</code> will depend on
support from the C library, the rest are standard.

<blockquote>
<p><table><tr align="left"><td valign="top"><code>c</code>            </td><td valign="top">character or characters
<br></td></tr><tr align="left"><td valign="top"><code>d</code>            </td><td valign="top">decimal integer
<br></td></tr><tr align="left"><td valign="top"><code>e</code> <code>E</code> <code>f</code> <code>g</code> <code>G</code>
                            </td><td valign="top">float
<br></td></tr><tr align="left"><td valign="top"><code>i</code>            </td><td valign="top">integer with base indicator
<br></td></tr><tr align="left"><td valign="top"><code>n</code>            </td><td valign="top">characters written so far
<br></td></tr><tr align="left"><td valign="top"><code>o</code>            </td><td valign="top">octal integer
<br></td></tr><tr align="left"><td valign="top"><code>p</code>            </td><td valign="top">pointer
<br></td></tr><tr align="left"><td valign="top"><code>s</code>            </td><td valign="top">string of non-whitespace characters
<br></td></tr><tr align="left"><td valign="top"><code>u</code>            </td><td valign="top">decimal integer
<br></td></tr><tr align="left"><td valign="top"><code>x</code> <code>X</code> </td><td valign="top">hex integer
<br></td></tr><tr align="left"><td valign="top"><code>[</code>            </td><td valign="top">string of characters in a set
<br></td></tr></table>
</blockquote>

<p><code>e</code>, <code>E</code>, <code>f</code>, <code>g</code> and <code>G</code> are identical, they all
read either fixed point or scientific format, and either <code>e</code> or <code>E</code>
for the exponent in scientific format.

<p><code>x</code> and <code>X</code> are identical, both accept both upper and lower case
hexadecimal.

<p><code>o</code>, <code>u</code>, <code>x</code> and <code>X</code> all read positive or negative
values.  For the standard C types these are described as "unsigned"
conversions, but that merely affects certain overflow handling, negatives are
still allowed (see <code>strtoul</code>, <a href="../libc/Parsing-of-Integers.html#Parsing%20of%20Integers">Parsing of Integers</a>).  For GMP types there are no overflows, and
<code>d</code> and <code>u</code> are identical.

<p><code>Q</code> type reads the numerator and (optional) denominator as given.  If the
value might not be in canonical form then <code>mpq_canonicalize</code> must be
called before using it in any calculations (see <a href="Rational-Number-Functions.html#Rational%20Number%20Functions">Rational Number Functions</a>).

<p><code>Qi</code> will read a base specification separately for the numerator and
denominator.  For example <code>0x10/11</code> would be 16/11, whereas
<code>0x10/0x11</code> would be 16/17.

<p><code>n</code> can be used with any of the types above, even the GMP types. 
<code>*</code> to suppress assignment is allowed, though the field would then do
nothing at all.

<p>Other conversions or types that might be accepted by the C library
<code>scanf</code> cannot be used through <code>gmp_scanf</code>.

<p>Whitespace is read and discarded before a field, except for <code>c</code> and
<code>[</code> conversions.

<p>For float conversions, the decimal point character (or string) expected is
taken from the current locale settings on systems which provide
<code>localeconv</code> (see <a href="../libc/Locales.html#Locales">Locales and Internationalization</a>).  The C library will normally do the same for
standard float input.

</body></html>

