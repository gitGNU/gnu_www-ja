<html lang="en">
<head>
<title>GNU MP 4.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="How to install and use the GNU multiple precision arithmetic library, version 4.1.">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
<!--
This manual describes how to install and use the GNU multiple precision
arithmetic library, version 4.1.

<p>Copyright 1991, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002
Free Software Foundation, Inc.

<p>Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant Sections,
with the Front-Cover Texts being "A GNU Manual", and with the Back-Cover
Texts being "You have freedom to copy and modify this GNU Manual, like GNU
software".  A copy of the license is included in <a href="GNU-Free-Documentation-License.html#GNU%20Free%20Documentation%20License">GNU Free Documentation License</a>.-->
</head>
<body>
<p>
Node:<a name="ABI%20and%20ISA">ABI and ISA</a>,
Next:<a rel=next accesskey=n href="Notes-for-Package-Builds.html#Notes%20for%20Package%20Builds">Notes for Package Builds</a>,
Previous:<a rel=previous accesskey=p href="Build-Options.html#Build%20Options">Build Options</a>,
Up:<a rel=up accesskey=u href="Installing-GMP.html#Installing%20GMP">Installing GMP</a>
<hr><br>

<h3>ABI and ISA</h3>

<p>ABI (Application Binary Interface) refers to the calling conventions between
functions, meaning what registers are used and what sizes the various C data
types are.  ISA (Instruction Set Architecture) refers to the instructions and
registers a CPU has available.

<p>Some 64-bit ISA CPUs have both a 64-bit ABI and a 32-bit ABI defined, the
latter for compatibility with older CPUs in the family.  GMP supports some
CPUs like this in both ABIs.  In fact within GMP <code>ABI</code> means a
combination of chip ABI, plus how GMP chooses to use it.  For example in some
32-bit ABIs, GMP may support a limb as either a 32-bit <code>long</code> or a 64-bit
<code>long long</code>.

<p>By default GMP chooses the best ABI available for a given system, and this
generally gives significantly greater speed.  But an ABI can be chosen
explicitly to make GMP compatible with other libraries, or particular
application requirements.  For example,

<br><pre>./configure ABI=32
</pre>

<p>In all cases it's vital that all object code used in a given program is
compiled for the same ABI.

<p>Usually a limb is implemented as a <code>long</code>.  When a <code>long long</code> limb
is used this is encoded in the generated <code>gmp.h</code>.  This is convenient for
applications, but it does mean that <code>gmp.h</code> will vary, and can't be just
copied around.  <code>gmp.h</code> remains compiler independent though, since all
compilers for a particular ABI will be expected to use the same limb type.

<p>Currently no attempt is made to follow whatever conventions a system has for
installing library or header files built for a particular ABI.  This will
probably only matter when installing multiple builds of GMP, and it might be
as simple as configuring with a special <code>libdir</code>, or it might require
more than that.  Note that builds for different ABIs need to done separately,
with a fresh <code>./configure</code> and <code>make</code> each.

<dl>
<br><p>
<br><dt>HPPA 2.0 (<code>hppa2.0*</code>)
<dd>
<dl>
<dt><code>ABI=2.0w</code>
<dd>
The 2.0w ABI uses 64-bit limbs and pointers and is available on HP-UX 11 or up
when using <code>cc</code>.  <code>gcc</code> support for this is in progress. 
Applications must be compiled with

<br><pre>cc  +DD64
</pre>

<br><dt><code>ABI=2.0n</code>
<dd>
The 2.0n ABI means the 32-bit HPPA 1.0 ABI but with a 64-bit limb using
<code>long long</code>.  This is available on HP-UX 10 or up when using
<code>cc</code>.  No <code>gcc</code> support is planned for this.  Applications
must be compiled with

<br><pre>cc  +DA2.0 +e
</pre>

<br><dt><code>ABI=1.0</code>
<dd>
HPPA 2.0 CPUs can run all HPPA 1.0 and 1.1 code in the 32-bit HPPA 1.0 ABI. 
No special compiler options are needed for applications. 
</dl>

<p>All three ABIs are available for CPUs <code>hppa2.0w</code> and <code>hppa2.0</code>, but
for CPU <code>hppa2.0n</code> only 2.0n or 1.0 are allowed.

<br><p>
<br><dt>MIPS under IRIX 6 (<code>mips*-*-irix[6789]</code>)
<dd>
IRIX 6 supports the n32 and 64 ABIs and always has a 64-bit MIPS 3 or better
CPU.  In both these ABIs GMP uses a 64-bit limb.  A new enough <code>gcc</code>
is required (2.95 for instance).

<dl>
<dt><code>ABI=n32</code>
<dd>
The n32 ABI is 32-bit pointers and integers, but with a 64-bit limb using a
<code>long long</code>.  Applications must be compiled with

<br><pre>gcc  -mabi=n32
cc   -n32
</pre>

<br><dt><code>ABI=64</code>
<dd>
The 64-bit ABI is 64-bit pointers and integers.  Applications must be compiled
with

<br><pre>gcc  -mabi=64
cc   -64
</pre>
</dl>

<p>Note that MIPS GNU/Linux, as of kernel version 2.2, doesn't have the necessary
support for n32 or 64 and so only gets a 32-bit limb and the MIPS 2 code.

<br><p>
<br><dt>PowerPC 64 (<code>powerpc64*</code>)
<dd>
<dl>
<dt><code>ABI=aix64</code>
<dd>
The AIX 64 ABI uses 64-bit limbs and pointers and is available on systems
<code>powerpc64*-*-aix*</code>.  Applications must be compiled (and linked) with

<br><pre>gcc  -maix64
xlc  -q64
</pre>

<br><dt><code>ABI=32L</code>
<dd>
This uses the 32-bit ABI but a 64-bit limb using GCC <code>long long</code> in
64-bit registers.  Applications must be compiled with

<br><pre>gcc  -mpowerpc64
</pre>

<br><dt><code>ABI=32</code>
<dd>
This is the basic 32-bit PowerPC ABI.  No special compiler options are needed
for applications. 
</dl>

<br><p>
<br><dt>Sparc V9 (<code>sparcv9</code> and <code>ultrasparc*</code>)
<dd>
<dl>
<dt><code>ABI=64</code>
<dd>
The 64-bit V9 ABI is available on Solaris 2.7 and up and GNU/Linux.  GCC 2.95
or up, or Sun <code>cc</code> is required.  Applications must be compiled with

<br><pre>gcc  -m64 -mptr64 -Wa,-xarch=v9 -mcpu=v9
cc   -xarch=v9
</pre>

<br><dt><code>ABI=32</code>
<dd>
On Solaris 2.6 and earlier, and on Solaris 2.7 with the kernel in 32-bit mode,
only the plain V8 32-bit ABI can be used, since the kernel doesn't save all
registers.  GMP still uses as much of the V9 ISA as it can in these
circumstances.  No special compiler options are required for applications,
though using something like the following requesting V9 code within the V8 ABI
is recommended.

<br><pre>gcc  -mv8plus
cc   -xarch=v8plus
</pre>

<p><code>gcc</code> 2.8 and earlier only supports <code>-mv8</code> though. 
</dl>

<p>Don't be confused by the names of these sparc <code>-m</code> and <code>-x</code> options,
they're called <code>arch</code> but they effectively control the ABI.

<p>On Solaris 2.7 with the kernel in 32-bit-mode, a normal native build will
reject <code>ABI=64</code> because the resulting executables won't run. 
<code>ABI=64</code> can still be built if desired by making it look like a
cross-compile, for example

<br><pre>./configure --build=none --host=sparcv9-sun-solaris2.7 ABI=64
</pre>
</dl>

</body></html>

