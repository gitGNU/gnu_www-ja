<html lang="en">
<head>
<title>GNU MP 4.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="How to install and use the GNU multiple precision arithmetic library, version 4.1.">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
<!--
This manual describes how to install and use the GNU multiple precision
arithmetic library, version 4.1.

<p>Copyright 1991, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002
Free Software Foundation, Inc.

<p>Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant Sections,
with the Front-Cover Texts being "A GNU Manual", and with the Back-Cover
Texts being "You have freedom to copy and modify this GNU Manual, like GNU
software".  A copy of the license is included in <a href="GNU-Free-Documentation-License.html#GNU%20Free%20Documentation%20License">GNU Free Documentation License</a>.-->
</head>
<body>
<p>
Node:<a name="Known%20Build%20Problems">Known Build Problems</a>,
Previous:<a rel=previous accesskey=p href="Notes-for-Particular-Systems.html#Notes%20for%20Particular%20Systems">Notes for Particular Systems</a>,
Up:<a rel=up accesskey=u href="Installing-GMP.html#Installing%20GMP">Installing GMP</a>
<hr><br>

<h3>Known Build Problems</h3>

<p>You might find more up-to-date information at <a href="http://swox.com/gmp/">http://swox.com/gmp/</a>.

<dl>
<dt>DJGPP
<dd>
The DJGPP port of <code>bash</code> 2.03 is unable to run the <code>configure</code>
script, it exits silently, having died writing a preamble to
<code>config.log</code>.  Use <code>bash</code> 2.04 or higher.

<p><code>make all</code> was found to run out of memory during the final
<code>libgmp.la</code> link on one system tested, despite having 64Mb available.  A
separate <code>make libgmp.la</code> helped, perhaps recursing into the various
subdirectories uses up memory.

<br><dt><code>DESTDIR</code> and shared <code>libgmpxx</code>
<dd>

<p><code>make install DESTDIR=/my/staging/area</code> or the same with a <code>prefix</code>
override to install to a temporary directory is not fully supported by current
versions of libtool when building a shared version of a library which depends
on another being built at the same time, like <code>libgmpxx</code> and
<code>libgmp</code>.

<p>The problem is that <code>libgmpxx</code> is relinked at the install stage to ensure
that if the system puts a hard-coded path to <code>libgmp</code> within
<code>libgmpxx</code> then that path will be correct.  Naturally the linker is
directed to look only at the final location, not the staging area, so if
<code>libgmp</code> is not already in that final location then the link will fail.

<p>On systems which don't hard-code library paths, for instance SVR4 style
systems such as GNU/Linux, a workaround is to insert a suitable <code>-L</code> in
the <code>relink_command</code> of <code>libgmpxx.la</code> after building but before
installing.  This can be automated with something like

<br><pre>sed '/^relink_command/s:libgmp.la:-L /my/staging/area libgmp.la:' \
    &lt;libgmpxx.la &gt;libgmpxx.new
mv libgmpxx.new libgmpxx.la
</pre>

<br><dt>GNU binutils <code>strip</code>
<dd>

<p>GNU binutils <code>strip</code> should not be used on the static libraries
<code>libgmp.a</code> and <code>libmp.a</code>, neither directly nor via <code>make
install-strip</code>.  It can be used on the shared libraries <code>libgmp.so</code> and
<code>libmp.so</code> though.

<p>Currently (binutils 2.10.0), <code>strip</code> unpacks an archive then operates
on the files, but GMP contains multiple object files of the same name
(eg. three versions of <code>init.o</code>), and they overwrite each other, leaving
only the one that happens to be last.

<p>If stripped static libraries are wanted, the suggested workaround is to build
normally, strip the separate object files, and do another <code>make all</code> to
rebuild.  Alternately <code>CFLAGS</code> with <code>-g</code> omitted can always be used
if it's just debugging which is unwanted.

<br><dt><code>make</code> syntax error
<dd>
On certain versions of SCO OpenServer 5 and IRIX 6.5 the native <code>make</code>
is unable to handle the long dependencies list for <code>libgmp.la</code>.  The
symptom is a "syntax error" on the following line of the top-level
<code>Makefile</code>.

<br><pre>libgmp.la: $(libgmp_la_OBJECTS) $(libgmp_la_DEPENDENCIES)
</pre>

<p>Either use GNU Make, or as a workaround remove
<code>$(libgmp_la_DEPENDENCIES)</code> from that line (which will make the initial
build work, but if any recompiling is done <code>libgmp.la</code> might not be
rebuilt).

<br><dt>NeXT prior to 3.3
<dd>
The system compiler on old versions of NeXT was a massacred and old GCC, even
if it called itself <code>cc</code>.  This compiler cannot be used to build GMP, you
need to get a real GCC, and install that.  (NeXT may have fixed this in
release 3.3 of their system.)

<br><dt>POWER and PowerPC
<dd>
Bugs in GCC 2.7.2 (and 2.6.3) mean it can't be used to compile GMP on POWER or
PowerPC.  If you want to use GCC for these machines, get GCC 2.7.2.1 (or
later).

<br><dt>Sequent Symmetry
<dd>
Use the GNU assembler instead of the system assembler, since the latter has
serious bugs.

<br><dt>Solaris 2.6
<dd>
The system <code>sed</code> prints an error "Output line too long" when libtool
builds <code>libgmp.la</code>.  This doesn't seem to cause any obvious ill effects,
but GNU <code>sed</code> is recommended, to avoid any doubt.

<br><dt>Sparc Solaris 2.7 with gcc 2.95.2 in ABI=32
<dd>
A shared library build of GMP seems to fail in this combination, it builds but
then fails the tests, apparently due to some incorrect data relocations within
<code>gmp_randinit_lc_2exp_size</code>.  The exact cause is unknown,
<code>--disable-shared</code> is recommended.

<br><dt>Windows DLL test programs
<dd>
When creating a DLL version of <code>libgmp</code>, libtool creates wrapper scripts
like <code>t-mul</code> for programs that would normally be <code>t-mul.exe</code>, in
order to setup the right library paths etc.  This works fine, but the absence
of <code>t-mul.exe</code> etc causes <code>make</code> to think they need recompiling
every time, which is an annoyance when re-running a <code>make check</code>. 
</dl>

</body></html>

