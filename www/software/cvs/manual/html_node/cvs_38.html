<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.52
     from ../texi/cvs.texinfo on 7 November 1998 -->

<TITLE>CVS--Concurrent Versions System - Conflicts example</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_37.html">previous</A>, <A HREF="cvs_39.html">next</A>, <A HREF="cvs_148.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC40" HREF="cvs_toc.html#TOC40">Conflicts example</A></H2>
<P>
<A NAME="IDX151"></A>
<A NAME="IDX152"></A>
<A NAME="IDX153"></A>

</P>
<P>
Suppose revision 1.4 of <TT>`driver.c'</TT> contains this:

</P>

<PRE>
#include &#60;stdio.h&#62;

void main()
{
    parse();
    if (nerr == 0)
        gencode();
    else
        fprintf(stderr, "No code generated.\n");
    exit(nerr == 0 ? 0 : 1);
}
</PRE>

<P>
Revision 1.6 of <TT>`driver.c'</TT> contains this:

</P>

<PRE>
#include &#60;stdio.h&#62;

int main(int argc,
         char **argv)
{
    parse();
    if (argc != 1)
    {
        fprintf(stderr, "tc: No args expected.\n");
        exit(1);
    }
    if (nerr == 0)
        gencode();
    else
        fprintf(stderr, "No code generated.\n");
    exit(!!nerr);
}
</PRE>

<P>
Your working copy of <TT>`driver.c'</TT>, based on revision
1.4, contains this before you run <SAMP>`cvs update'</SAMP>:

</P>

<PRE>
#include &#60;stdlib.h&#62;
#include &#60;stdio.h&#62;

void main()
{
    init_scanner();
    parse();
    if (nerr == 0)
        gencode();
    else
        fprintf(stderr, "No code generated.\n");
    exit(nerr == 0 ? EXIT_SUCCESS : EXIT_FAILURE);
}
</PRE>

<P>
You run <SAMP>`cvs update'</SAMP>:

</P>

<PRE>
$ cvs update driver.c
RCS file: /usr/local/cvsroot/yoyodyne/tc/driver.c,v
retrieving revision 1.4
retrieving revision 1.6
Merging differences between 1.4 and 1.6 into driver.c
rcsmerge warning: overlaps during merge
cvs update: conflicts found in driver.c
C driver.c
</PRE>

<P>
<A NAME="IDX154"></A>
CVS tells you that there were some conflicts.
Your original working file is saved unmodified in
<TT>`.#driver.c.1.4'</TT>.  The new version of
<TT>`driver.c'</TT> contains this:

</P>

<PRE>
#include &#60;stdlib.h&#62;
#include &#60;stdio.h&#62;

int main(int argc,
         char **argv)
{
    init_scanner();
    parse();
    if (argc != 1)
    {
        fprintf(stderr, "tc: No args expected.\n");
        exit(1);
    }
    if (nerr == 0)
        gencode();
    else
        fprintf(stderr, "No code generated.\n");
&#60;&#60;&#60;&#60;&#60;&#60;&#60; driver.c
    exit(nerr == 0 ? EXIT_SUCCESS : EXIT_FAILURE);
=======
    exit(!!nerr);
&#62;&#62;&#62;&#62;&#62;&#62;&#62; 1.6
}
</PRE>

<P>
<A NAME="IDX155"></A>
<A NAME="IDX156"></A>
<A NAME="IDX157"></A>
<A NAME="IDX158"></A>
<A NAME="IDX159"></A>

</P>
<P>
Note how all non-overlapping modifications are incorporated in your working
copy, and that the overlapping section is clearly marked with
<SAMP>`&#60;&#60;&#60;&#60;&#60;&#60;&#60;'</SAMP>, <SAMP>`======='</SAMP> and <SAMP>`&#62;&#62;&#62;&#62;&#62;&#62;&#62;'</SAMP>.

</P>
<P>
<A NAME="IDX160"></A>
<A NAME="IDX161"></A>
You resolve the conflict by editing the file, removing the markers and
the erroneous line.  Suppose you end up with this file:

<PRE>
#include &#60;stdlib.h&#62;
#include &#60;stdio.h&#62;

int main(int argc,
         char **argv)
{
    init_scanner();
    parse();
    if (argc != 1)
    {
        fprintf(stderr, "tc: No args expected.\n");
        exit(1);
    }
    if (nerr == 0)
        gencode();
    else
        fprintf(stderr, "No code generated.\n");
    exit(nerr == 0 ? EXIT_SUCCESS : EXIT_FAILURE);
}
</PRE>

<P>
You can now go ahead and commit this as revision 1.7.

</P>

<PRE>
$ cvs commit -m "Initialize scanner. Use symbolic exit values." driver.c
Checking in driver.c;
/usr/local/cvsroot/yoyodyne/tc/driver.c,v  &#60;--  driver.c
new revision: 1.7; previous revision: 1.6
done
</PRE>

<P>
For your protection, CVS will refuse to check in a
file if a conflict occurred and you have not resolved
the conflict.  Currently to resolve a conflict, you
must change the timestamp on the file, and must also
insure that the file contains no conflict markers.  If
your file legitimately contains conflict markers (that
is, occurrences of <SAMP>`&#62;&#62;&#62;&#62;&#62;&#62;&#62; '</SAMP> at the start of a
line that don't mark a conflict), then CVS has
trouble handling this and you need to start hacking on
the <CODE>CVS/Entries</CODE> file or other such workarounds.

</P>
<P>
<A NAME="IDX162"></A>
If you use release 1.04 or later of pcl-cvs (a GNU
Emacs front-end for CVS) you can use an Emacs
package called emerge to help you resolve conflicts.
See the documentation for pcl-cvs.

</P>
<P><HR><P>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_37.html">previous</A>, <A HREF="cvs_39.html">next</A>, <A HREF="cvs_148.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
</BODY>
</HTML>
