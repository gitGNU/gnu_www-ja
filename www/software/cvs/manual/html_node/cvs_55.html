<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.52
     from ../texi/cvs.texinfo on 7 November 1998 -->

<TITLE>CVS--Concurrent Versions System - Merging more than once</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_54.html">previous</A>, <A HREF="cvs_56.html">next</A>, <A HREF="cvs_148.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC57" HREF="cvs_toc.html#TOC57">Merging from a branch several times</A></H2>

<P>
Continuing our example, the revision tree now looks
like this:

</P>

<PRE>
+-----+    +-----+    +-----+    +-----+    +-----+
! 1.1 !----! 1.2 !----! 1.3 !----! 1.4 !----! 1.5 !      &#60;- The main trunk
+-----+    +-----+    +-----+    +-----+    +-----+
                !                           *
                !                          *
                !   +---------+    +---------+
Branch R1fix -&#62; +---! 1.2.2.1 !----! 1.2.2.2 !
                    +---------+    +---------+
</PRE>

<P>
where the starred line represents the merge from the
<SAMP>`R1fix'</SAMP> branch to the main trunk, as just
discussed.

</P>
<P>
Now suppose that development continues on the
<SAMP>`R1fix'</SAMP> branch:

</P>

<PRE>
+-----+    +-----+    +-----+    +-----+    +-----+
! 1.1 !----! 1.2 !----! 1.3 !----! 1.4 !----! 1.5 !      &#60;- The main trunk
+-----+    +-----+    +-----+    +-----+    +-----+
                !                           *
                !                          *
                !   +---------+    +---------+    +---------+
Branch R1fix -&#62; +---! 1.2.2.1 !----! 1.2.2.2 !----! 1.2.2.3 !
                    +---------+    +---------+    +---------+
</PRE>

<P>
and then you want to merge those new changes onto the
main trunk.  If you just use the <CODE>cvs update -j
R1fix m.c</CODE> command again, CVS will attempt to
merge again the changes which you have already merged,
which can have undesirable side effects.

</P>
<P>
So instead you need to specify that you only want to
merge the changes on the branch which have not yet been
merged into the trunk.  To do that you specify two
<SAMP>`-j'</SAMP> options, and CVS merges the changes from
the first revision to the second revision.  For
example, in this case the simplest way would be

</P>

<PRE>
cvs update -j 1.2.2.2 -j R1fix m.c    # Merge changes from 1.2.2.2 to the
                                      # head of the R1fix branch
</PRE>

<P>
The problem with this is that you need to specify the
1.2.2.2 revision manually.  A slightly better approach
might be to use the date the last merge was done:

</P>

<PRE>
cvs update -j R1fix:yesterday -j R1fix m.c
</PRE>

<P>
Better yet, tag the R1fix branch after every merge into
the trunk, and then use that tag for subsequent merges:

</P>

<PRE>
cvs update -j merged_from_R1fix_to_trunk -j R1fix m.c
</PRE>

<P><HR><P>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_54.html">previous</A>, <A HREF="cvs_56.html">next</A>, <A HREF="cvs_148.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
</BODY>
</HTML>
