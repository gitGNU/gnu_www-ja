<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.52
     from ../texi/cvs.texinfo on 7 November 1998 -->

<TITLE>CVS--Concurrent Versions System - commit examples</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_96.html">previous</A>, <A HREF="cvs_98.html">next</A>, <A HREF="cvs_148.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC101" HREF="cvs_toc.html#TOC101">commit examples</A></H3>



<H4><A NAME="SEC102" HREF="cvs_toc.html#TOC102">New major release number</A></H4>

<P>
When you make a major release of your product, you
might want the revision numbers to track your major
release number.  You should normally not care about
the revision numbers, but this is a thing that many
people want to do, and it can be done without doing any
harm.

</P>
<P>
To bring all your files up to the RCS revision 3.0
(including those that haven't changed), you might do:

</P>

<PRE>
$ cvs commit -r 3.0
</PRE>

<P>
Note that it is generally a bad idea to try to make the
RCS revision number equal to the current release number
of your product.  You should think of the revision
number as an internal number that the CVS package
maintains, and that you generally never need to care
much about.  Using the <CODE>tag</CODE> and <CODE>rtag</CODE>
commands you can give symbolic names to the releases
instead.  See section <A HREF="cvs_123.html#SEC130">tag--Add a symbolic tag to checked out versions of files</A> and See section <A HREF="cvs_119.html#SEC126">rtag--Add a symbolic tag to a module</A>.

</P>
<P>
Note that the number you specify with <SAMP>`-r'</SAMP> must be
larger than any existing revision number.  That is, if
revision 3.0 exists, you cannot <SAMP>`cvs commit
-r 1.3'</SAMP>.

</P>


<H4><A NAME="SEC103" HREF="cvs_toc.html#TOC103">Committing to a branch</A></H4>

<P>
You can commit to a branch revision (one that has an
even number of dots) with the <SAMP>`-r'</SAMP> option.  To
create a branch revision, use the <SAMP>`-b'</SAMP> option
of the <CODE>rtag</CODE> or <CODE>tag</CODE> commands (see section <A HREF="cvs_123.html#SEC130">tag--Add a symbolic tag to checked out versions of files</A>
or see section <A HREF="cvs_119.html#SEC126">rtag--Add a symbolic tag to a module</A>).  Then, either <CODE>checkout</CODE> or
<CODE>update</CODE> can be used to base your sources on the
newly created branch.  From that point on, all
<CODE>commit</CODE> changes made within these working sources
will be automatically added to a branch revision,
thereby not disturbing main-line development in any
way.  For example, if you had to create a patch to the
1.2 version of the product, even though the 2.0 version
is already under development, you might do:

</P>

<PRE>
$ cvs rtag -b -r FCS1_2 FCS1_2_Patch product_module
$ cvs checkout -r FCS1_2_Patch product_module
$ cd product_module
[[ hack away ]]
$ cvs commit
</PRE>

<P>
This works automatically since the <SAMP>`-r'</SAMP> option is
sticky.

</P>


<H4><A NAME="SEC104" HREF="cvs_toc.html#TOC104">Creating the branch after editing</A></H4>

<P>
Say you have been working on some extremely
experimental software, based on whatever revision you
happened to checkout last week.  If others in your
group would like to work on this software with you, but
without disturbing main-line development, you could
commit your change to a new branch.  Others can then
checkout your experimental stuff and utilize the full
benefit of CVS conflict resolution.  The scenario might
look like:

</P>

<PRE>
[[ hacked sources are present ]]
$ cvs tag -b EXPR1
$ cvs update -r EXPR1
$ cvs commit
</PRE>

<P>
The <CODE>update</CODE> command will make the <SAMP>`-r
EXPR1'</SAMP> option sticky on all files.  Note that your
changes to the files will never be removed by the
<CODE>update</CODE> command.  The <CODE>commit</CODE> will
automatically commit to the correct branch, because the
<SAMP>`-r'</SAMP> is sticky.  You could also do like this:

</P>

<PRE>
[[ hacked sources are present ]]
$ cvs tag -b EXPR1
$ cvs commit -r EXPR1
</PRE>

<P>
but then, only those files that were changed by you
will have the <SAMP>`-r EXPR1'</SAMP> sticky flag.  If you hack
away, and commit without specifying the <SAMP>`-r EXPR1'</SAMP>
flag, some files may accidentally end up on the main
trunk.

</P>
<P>
To work with you on the experimental change, others
would simply do

</P>

<PRE>
$ cvs checkout -r EXPR1 whatever_module
</PRE>

<P><HR><P>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_96.html">previous</A>, <A HREF="cvs_98.html">next</A>, <A HREF="cvs_148.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
</BODY>
</HTML>
