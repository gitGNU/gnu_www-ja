<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.52
     from ../texi/cvs.texinfo on 7 November 1998 -->

<TITLE>CVS--Concurrent Versions System - Password authentication server</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_24.html">previous</A>, <A HREF="cvs_26.html">next</A>, <A HREF="cvs_148.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
<P><HR><P>


<H4><A NAME="SEC27" HREF="cvs_toc.html#TOC27">Setting up the server for password authentication</A></H4>

<P>
<A NAME="IDX102"></A>
<A NAME="IDX103"></A>
<A NAME="IDX104"></A>
On the server side, the file <TT>`/etc/inetd.conf'</TT>
needs to be edited so <CODE>inetd</CODE> knows to run the
command <CODE>cvs pserver</CODE> when it receives a
connection on the right port.  By default, the port
number is 2401; it would be different if your client
were compiled with <CODE>CVS_AUTH_PORT</CODE> defined to
something else, though.

</P>
<P>
        If your <CODE>inetd</CODE> allows raw port numbers in
<TT>`/etc/inetd.conf'</TT>, then the following (all on a
single line in <TT>`inetd.conf'</TT>) should be sufficient:

</P>

<PRE>
2401  stream  tcp  nowait  root  /usr/local/bin/cvs
cvs -b /usr/local/bin pserver
</PRE>

<P>
The <SAMP>`-b'</SAMP> option specifies the directory which contains
the RCS binaries on the server.  You could also use the
<SAMP>`-T'</SAMP> option to specify a temporary directory.

</P>
<P>
        If your <CODE>inetd</CODE> wants a symbolic service
name instead of a raw port number, then put this in
<TT>`/etc/services'</TT>:

</P>

<PRE>
cvspserver      2401/tcp
</PRE>

<P>
        and put <CODE>cvspserver</CODE> instead of
<CODE>2401</CODE> in <TT>`inetd.conf'</TT>.

</P>
<P>
        Once the above is taken care of, restart your
<CODE>inetd</CODE>, or do whatever is necessary to force it
to reread its initialization files.

</P>

<P>
<A NAME="IDX105"></A>
<A NAME="IDX106"></A>
Because the client stores and transmits passwords in
cleartext (almost--see section <A HREF="cvs_27.html#SEC29">Security considerations with password authentication</A> for details), a separate CVS password
file may be used, so people don't compromise their
regular passwords when they access the repository.
This file is <TT>`$CVSROOT/CVSROOT/passwd'</TT>
(see section <A HREF="cvs_19.html#SEC20">The administrative files</A>).  Its format is
similar to <TT>`/etc/passwd'</TT>, except that it only has
two fields, username and password.  For example:

</P>

<PRE>
bach:ULtgRLXo7NRxs
cwang:1sOp854gDF3DY
</PRE>

<P>
The password is encrypted according to the standard
Unix <CODE>crypt()</CODE> function, so it is possible to
paste in passwords directly from regular Unix
<TT>`passwd'</TT> files.

</P>
<P>
When authenticating a password, the server first checks
for the user in the CVS <TT>`passwd'</TT> file.  If it
finds the user, it compares against that password.  If
it does not find the user, or if the CVS
<TT>`passwd'</TT> file does not exist, then the server
tries to match the password using the system's
user-lookup routine.  When using the CVS
<TT>`passwd'</TT> file, the server runs under as the
username specified in the the third argument in the
entry, or as the first argument if there is no third
argument (in this way CVS allows imaginary
usernames provided the CVS <TT>`passwd'</TT> file
indicates corresponding valid system usernames).  In
any case, CVS will have no privileges which the
(valid) user would not have.

</P>
<P>
Right now, the only way to put a password in the
CVS <TT>`passwd'</TT> file is to paste it there from
somewhere else.  Someday, there may be a <CODE>cvs
passwd</CODE> command.

</P>
<P><HR><P>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_24.html">previous</A>, <A HREF="cvs_26.html">next</A>, <A HREF="cvs_148.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
</BODY>
</HTML>
