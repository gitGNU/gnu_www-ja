<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.52
     from ../texi/cvs.texinfo on 7 November 1998 -->

<TITLE>CVS--Concurrent Versions System - editinfo example</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_135.html">previous</A>, <A HREF="cvs_137.html">next</A>, <A HREF="cvs_148.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC143" HREF="cvs_toc.html#TOC143">Editinfo example</A></H3>

<P>
The following is a little silly example of a
<TT>`editinfo'</TT> file, together with the corresponding
<TT>`rcsinfo'</TT> file, the log message template and an
editor script.  We begin with the log message template.
We want to always record a bug-id number on the first
line of the log message.  The rest of log message is
free text.  The following template is found in the file
<TT>`/usr/cvssupport/tc.template'</TT>.

</P>

<PRE>
BugId:    
</PRE>

<P>
The script <TT>`/usr/cvssupport/bugid.edit'</TT> is used to
edit the log message.

</P>

<PRE>
#!/bin/sh
#
#       bugid.edit filename
#
#  Call $EDITOR on FILENAME, and verify that the
#  resulting file contains a valid bugid on the first
#  line.
if [ "x$EDITOR" = "x" ]; then EDITOR=vi; fi
if [ "x$CVSEDITOR" = "x" ]; then CVSEDITOR=$EDITOR; fi
$CVSEDITOR $1
until head -1|grep '^BugId:[ ]*[0-9][0-9]*$' &#60; $1
do  echo -n  "No BugId found.  Edit again? ([y]/n)"
    read ans
    case ${ans} in
        n*) exit 1;;
    esac
    $CVSEDITOR $1
done
</PRE>

<P>
The <TT>`editinfo'</TT> file contains this line:

</P>

<PRE>
^tc     /usr/cvssupport/bugid.edit
</PRE>

<P>
The <TT>`rcsinfo'</TT> file contains this line:

</P>

<PRE>
^tc     /usr/cvssupport/tc.template
</PRE>

<P><HR><P>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_135.html">previous</A>, <A HREF="cvs_137.html">next</A>, <A HREF="cvs_148.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
</BODY>
</HTML>
