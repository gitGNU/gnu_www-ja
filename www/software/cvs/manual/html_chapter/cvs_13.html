<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.52
     from ../texi/cvs.texinfo on 7 November 1998 -->

<TITLE>CVS--Concurrent Versions System - Tracking third-party sources</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_12.html">previous</A>, <A HREF="cvs_14.html">next</A>, <A HREF="cvs_25.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC63" HREF="cvs_toc.html#TOC63">Tracking third-party sources</A></H1>
<P>
<A NAME="IDX250"></A>
<A NAME="IDX251"></A>

</P>
<P>
If you modify a program to better fit your site, you
probably want to include your modifications when the next
release of the program arrives.  CVS can help you with
this task.

</P>
<P>
<A NAME="IDX252"></A>
<A NAME="IDX253"></A>
<A NAME="IDX254"></A>
In the terminology used in CVS, the supplier of the
program is called a <EM>vendor</EM>.  The unmodified
distribution from the vendor is checked in on its own
branch, the <EM>vendor branch</EM>.  CVS reserves branch
1.1.1 for this use.

</P>
<P>
When you modify the source and commit it, your revision
will end up on the main trunk.  When a new release is
made by the vendor, you commit it on the vendor branch
and copy the modifications onto the main trunk.

</P>
<P>
Use the <CODE>import</CODE> command to create and update
the vendor branch.  After a successful <CODE>import</CODE>
the vendor branch is made the `head' revision, so
anyone that checks out a copy of the file gets that
revision.  When a local modification is committed it is
placed on the main trunk, and made the `head'
revision.

</P>



<H2><A NAME="SEC64" HREF="cvs_toc.html#TOC64">Importing a module for the first time</A></H2>
<P>
<A NAME="IDX255"></A>

</P>
<P>
Use the <CODE>import</CODE> command to check in the sources
for the first time.  When you use the <CODE>import</CODE>
command to track third-party sources, the <EM>vendor
tag</EM> and <EM>release tags</EM> are useful.  The
<EM>vendor tag</EM> is a symbolic name for the branch
(which is always 1.1.1, unless you use the <SAMP>`-b
<VAR>branch</VAR>'</SAMP> flag---See section <A HREF="cvs_20.html#SEC113">import options</A>).  The
<EM>release tags</EM> are symbolic names for a particular
release, such as <SAMP>`FSF_0_04'</SAMP>.

</P>
<P>
<A NAME="IDX256"></A>
Suppose you use <CODE>wdiff</CODE> (a variant of <CODE>diff</CODE>
that ignores changes that only involve whitespace), and
are going to make private modifications that you want
to be able to use even when new releases are made in
the future.  You start by importing the source to your
repository:

</P>

<PRE>
$ tar xfz wdiff-0.04.tar.gz
$ cd wdiff-0.04
$ cvs import -m "Import of FSF v. 0.04" fsf/wdiff FSF_DIST WDIFF_0_04
</PRE>

<P>
The vendor tag is named <SAMP>`FSF_DIST'</SAMP> in the above
example, and the only release tag assigned is
<SAMP>`WDIFF_0_04'</SAMP>.

</P>


<H2><A NAME="SEC65" HREF="cvs_toc.html#TOC65">Updating a module with the import command</A></H2>

<P>
When a new release of the source arrives, you import it into the
repository with the same <CODE>import</CODE> command that you used to set up
the repository in the first place.  The only difference is that you
specify a different release tag this time.

</P>

<PRE>
$ tar xfz wdiff-0.05.tar.gz
$ cd wdiff-0.05
$ cvs import -m "Import of FSF v. 0.05" fsf/wdiff FSF_DIST WDIFF_0_05
</PRE>

<P>
For files that have not been modified locally, the newly created
revision becomes the head revision.  If you have made local
changes, <CODE>import</CODE> will warn you that you must merge the changes
into the main trunk, and tell you to use <SAMP>`checkout -j'</SAMP> to do so.

</P>

<PRE>
$ cvs checkout -jFSF_DIST:yesterday -jFSF_DIST wdiff
</PRE>

<P>
The above command will check out the latest revision of
<SAMP>`wdiff'</SAMP>, merging the changes made on the vendor branch <SAMP>`FSF_DIST'</SAMP>
since yesterday into the working copy.  If any conflicts arise during
the merge they should be resolved in the normal way (see section <A HREF="cvs_7.html#SEC40">Conflicts example</A>).  Then, the modified files may be committed.

</P>
<P>
Using a date, as suggested above, assumes that you do
not import more than one release of a product per
day. If you do, you can always use something like this
instead:

</P>

<PRE>
$ cvs checkout -jWDIFF_0_04 -jWDIFF_0_05 wdiff
</PRE>

<P>
In this case, the two above commands are equivalent.

</P>


<H2><A NAME="SEC66" HREF="cvs_toc.html#TOC66">How to handle binary files with cvs import</A></H2>

<P>
Use the <SAMP>`-k'</SAMP> wrapper option to tell import which
files are binary.  See section <A HREF="cvs_21.html#SEC138">The cvswrappers file</A>.

</P>
<P><HR><P>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_12.html">previous</A>, <A HREF="cvs_14.html">next</A>, <A HREF="cvs_25.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
</BODY>
</HTML>
