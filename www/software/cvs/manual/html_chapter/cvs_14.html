<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.52
     from ../texi/cvs.texinfo on 7 November 1998 -->

<TITLE>CVS--Concurrent Versions System - Moving and renaming files</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_13.html">previous</A>, <A HREF="cvs_15.html">next</A>, <A HREF="cvs_25.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC67" HREF="cvs_toc.html#TOC67">Moving and renaming files</A></H1>
<P>
<A NAME="IDX257"></A>
<A NAME="IDX258"></A>
<A NAME="IDX259"></A>

</P>
<P>
Moving files to a different directory or renaming them
is not difficult, but some of the ways in which this
works may be non-obvious.  (Moving or renaming a
directory is even harder.  See section <A HREF="cvs_15.html#SEC71">Moving and renaming directories</A>).

</P>
<P>
The examples below assume that the file <VAR>old</VAR> is renamed to
<VAR>new</VAR>.

</P>



<H2><A NAME="SEC68" HREF="cvs_toc.html#TOC68">The Normal way to Rename</A></H2>

<P>
The normal way to move a file is to copy <VAR>old</VAR> to
<VAR>new</VAR>, and then issue the normal CVS commands
to remove <VAR>old</VAR> from the repository, and add
<VAR>new</VAR> to it.  (Both <VAR>old</VAR> and <VAR>new</VAR> could
contain relative paths, for example <TT>`foo/bar.c'</TT>).

</P>

<PRE>
$ mv <VAR>old</VAR> <VAR>new</VAR>
$ cvs remove <VAR>old</VAR>
$ cvs add <VAR>new</VAR> 
$ cvs commit -m "Renamed <VAR>old</VAR> to <VAR>new</VAR>" <VAR>old</VAR> <VAR>new</VAR>
</PRE>

<P>
This is the simplest way to move a file, it is not
error-prone, and it preserves the history of what was
done.  Note that to access the history of the file you
must specify the old or the new name, depending on what
portion of the history you are accessing.  For example,
<CODE>cvs log <VAR>old</VAR></CODE> will give the log up until the
time of the rename.

</P>
<P>
When <VAR>new</VAR> is committed its revision numbers will
start at 1.0 again, so if that bothers you, use the
<SAMP>`-r rev'</SAMP> option to commit (see section <A HREF="cvs_20.html#SEC100">commit options</A>)

</P>


<H2><A NAME="SEC69" HREF="cvs_toc.html#TOC69">Moving the history file</A></H2>

<P>
This method is more dangerous, since it involves moving
files inside the repository.  Read this entire section
before trying it out!

</P>

<PRE>
$ cd $CVSROOT/<VAR>module</VAR>
$ mv <VAR>old</VAR>,v <VAR>new</VAR>,v
</PRE>

<P>
Advantages:

</P>

<UL>
<LI>

The log of changes is maintained intact.

<LI>

The revision numbers are not affected.
</UL>

<P>
Disadvantages:

</P>

<UL>
<LI>

Old releases of the module cannot easily be fetched from the
repository.  (The file will show up as <VAR>new</VAR> even
in revisions from the time before it was renamed).

<LI>

There is no log information of when the file was renamed.

<LI>

Nasty things might happen if someone accesses the history file
while you are moving it.  Make sure no one else runs any of the CVS
commands while you move it.
</UL>



<H2><A NAME="SEC70" HREF="cvs_toc.html#TOC70">Copying the history file</A></H2>

<P>
This way also involves direct modifications to the
repository.  It is safe, but not without drawbacks.

</P>

<PRE>
# Copy the RCS file inside the repository
$ cd $CVSROOT/<VAR>module</VAR>
$ cp <VAR>old</VAR>,v <VAR>new</VAR>,v
# Remove the old file
$ cd ~/<VAR>module</VAR>
$ rm <VAR>old</VAR>
$ cvs remove <VAR>old</VAR>
$ cvs commit <VAR>old</VAR>
# Remove all tags from <VAR>new</VAR>
$ cvs update <VAR>new</VAR>
$ cvs log <VAR>new</VAR>             # Remember the non-branch tag names
$ cvs tag -d <VAR>tag1</VAR> <VAR>new</VAR>
$ cvs tag -d <VAR>tag2</VAR> <VAR>new</VAR>
...
</PRE>

<P>
By removing the tags you will be able to check out old
revisions of the module.

</P>
<P>
Advantages:

</P>

<UL>
<LI>

Checking out old revisions works correctly, as long as
you use <SAMP>`-r<VAR>tag</VAR>'</SAMP> and not <SAMP>`-D<VAR>date</VAR>'</SAMP>
to retrieve the revisions.

<LI>

The log of changes is maintained intact.

<LI>

The revision numbers are not affected.
</UL>

<P>
Disadvantages:

</P>

<UL>
<LI>

You cannot easily see the history of the file across the rename.

<LI>

Unless you use the <SAMP>`-r rev'</SAMP> (see section <A HREF="cvs_20.html#SEC100">commit options</A>) flag when <VAR>new</VAR> is committed its revision
numbers will start at 1.0 again.
</UL>

<P><HR><P>
Go to the <A HREF="cvs_1.html">first</A>, <A HREF="cvs_13.html">previous</A>, <A HREF="cvs_15.html">next</A>, <A HREF="cvs_25.html">last</A> section, <A HREF="cvs_toc.html">table of contents</A>.
</BODY>
</HTML>
