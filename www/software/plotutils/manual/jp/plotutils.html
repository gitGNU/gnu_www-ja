<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on August, 3 2009 by texi2html 1.76 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<head>
<title>The Plotutils Package: Top</title>

<meta name="description" content="The Plotutils Package: Top">
<meta name="keywords" content="The Plotutils Package: Top">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.76">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Top"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="settitle">The Plotutils Package
</h1>
<p>このファイルは、GNU plotting utilities パッケージのバージョン 2.6
の解説文書である。
このパッケージには GNU libplot 4.4 も含まれており、
ベクトル形式の画像とデータ・プロットを扱うプログラムと関数ライブラリからなる。
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC1">1. はじめに</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     GNU plotting utilities について
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC2">2. <code>graph</code> コマンド</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               graph - データセットをプロットするプログラム
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC15">3. <code>plot</code> コマンド</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                plot - 画像形式を変換するプログラム
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC19">4. <code>pic2plot</code> コマンド</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            pic2plot - pic 言語形式のファイルを変換するプログラム
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC23">5. <code>tek2plot</code> コマンド</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            tek2plot - 伝統ある Tektronix 形式を変換するプログラム
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC27">6. <code>plotfont</code> コマンド</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            plotfont -
  フォントのキャラクタ・マップを生成するプログラム
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC31">7. <code>spline</code> コマンド</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              spline - 補間を行うプログラム
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC35">8. <code>ode</code> コマンド</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 ode - 連立常微分方程式を解くプログラム
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC45">9. <code>libplot</code> ライブラリ</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             特定の出力形式に依存しない 2D
  プロットを、ベクトル形式の画像として生成するためのライブラリ
</td></tr>
<tr><td align="left" valign="top"><a href="#Appendices">&bull; Appendices</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          付録、フォント、色名、開発に加わった人々, etc.
</td></tr>
</table>

<hr size="1">
<a name="Plotutils-Intro"></a>
<a name="SEC1"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC2" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[ &lt;&lt; ]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC2" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 1. はじめに </h1>

<p>GNU plotting utilities (plotutils)
には８つのコマンドライン用のプログラムがある。画像を生成する
<code>graph</code>、<code>plot</code>、<code>pic2plot</code>、<code>tek2plot</code>、<code>plotfont</code>
と、数値処理を行う <code>spline</code>、<code>ode</code>、<code>double</code> である。GNU
plotting utilities
は、これらのプログラムと、それらが内部で利用している描画関数のライブラリ
<code>libplot</code>
をあわせたパッケージである。<code>libplot</code>
は特定のデバイスに依存しない二次元のベクトル形式画像を描くことを目的としたライブラリであり、
X Window システム上でアニメーションを行う機能もある。
C と and C++ の両方の言語バインディングが用意されている。
</p>
<p>これらのプログラムと <code>libplot</code> は、以下の画像形式を扱うことができる。
</p>
<dl compact="compact">
<dt> X</dt>
<dd><p>出力形式に X
が指定されているときは、画像データはファイルや標準出力には出力されない。画像は
X Window の画面上のウィンドウに描かれる。
</p></dd>
<dt> PNG</dt>
<dd><p>PNG (&quot;portable network graphics&quot;) は現在 web
上で普及しつつある画像形式である。GIF と違って、うっとうしい特許の問題はない。
PNG 形式の画像ファイルは、たとえばフリーの <code>ImageMagick</code>
パッケージのプログラム <code>display</code> などで表示させることができる。
</p></dd>
<dt> PNM</dt>
<dd><p>PNM はベクター、ビットマップ両方の画像形式を扱える &quot;portable anymap&quot;
形式であり、三種類ある。PBM (白黒画像用の portable bitmap)、PGM (portable
graymap)、PPM (カラー画像用の portable pixmap) である。
画像ファイルの形式はこの中から選ばれる。PNM
は例えば <code>netpbm</code> パッケージを使って他の形式に変換したり、<code>display</code>
で表示したりすることができる。
</p></dd>
<dt> GIF</dt>
<dd><p>plotutil が扱うのは本物の GIF ではなく、疑似 GIF 形式である。本物の GIF
と違って LZW 圧縮を使わないため、Unisys の LZW
特許に触れていない。しかし疑似 GIF 形式は たとえば <code>display</code>
など GIF
形式をサポートするソフトウェアならおおよそどれでも、表示したり編集したりできる。
</p></dd>
<dt> SVG</dt>
<dd><p>Scalable Vector Graphics、通称 SVG
形式である。これはウェブ上でベクトル形式の画像を扱うための、XML
ベースの画像形式である。詳細は <a href="http://www.w3.org">W3 Consortium</a> 
にある。また開発者のための情報はそのウェブサイトの
<a href="http://www.w3.org/Graphics">Graphics Activity</a> にある。
</p></dd>
<dt> AI</dt>
<dd><p>Adobe の Illustrator の画像形式。AI 形式は Illustrator
のバージョン 5 以降、および他のソフトウェアで表示、編集できる。
</p></dd>
<dt> PS</dt>
<dd><p><code>idraw</code> で編集できる PostScript である。この形式のファイルは PostScript
プリンタで印刷でき、また他の文書に取り込んだり、フリーのドロー系ソフトである
<code>idraw</code> で編集できる。<a href="#SEC77"><code>idraw</code> の入手先</a> 参照。
</p></dd>
<dt> CGM</dt>
<dd><p>Computer Graphics Metafile 形式。CGM
プラグインがあればどのウェブ・ブラウザでも表示でき、
また他のアプリケーションで取り込むことができる。デフォルトでは WebCGM
にしたがった CGM version 3 の形式のバイナリデータが生成される。WebCGM
はウェブベースのベクトル形式画像の標準である。<a href="http://www.cgmopen.org">CGM Open Consortium</a> で詳細が紹介されている。
</p></dd>
<dt> Fig</dt>
<dd><p>フリーのドロー系ソフト <code>xfig</code> で表示、編集できる形式。<a href="#SEC78"><code>xfig</code> の入手先</a> 参照。
</p></dd>
<dt> PCL 5</dt>
<dd><p>ヒューレット・パッカードのプリンタの制御言語の機能強化版である。
この形式のファイルは LaserJet およびその互換のプリンタで印刷できる
(ただ、多くのインクジェットプリンタは PCL 5 非対応である)。
</p></dd>
<dt> HP-GL</dt>
<dd><p>ヒューレット・パッカードの画像記述言語である。デフォルトでは新しい HP-GL/2
形式で出力される。HP-GL および HP-GL/2
形式のファイルは、文書に取り込んだり、プロッタに出力できたりする。
</p></dd>
<dt> ReGIS</dt>
<dd><p>DEC 端末 (VT340、VT330、VT241、VT240)
やそのエミュレータで表示できる画像形式。DECwindows の端末エミュレータ
<code>dxterm</code> でも表示できる。
</p></dd>
<dt> Tek</dt>
<dd><p>Tektronix 4014 端末の画像形式。Tektronix 4014 端末は <code>xterm</code> や
<code>kermit</code> の MS-DOS 版などに実装されている。
</p></dd>
<dt> Metafile</dt>
<dd><p>特定の出力装置に依存することのない GNU metafile 形式。plotutils の
<code>plot</code> コマンドで、この形式のファイルを上記の他の形式に変換できる。
</p></dd>
</dl>

<p>plotutils のプログラムの中で、もっともよく使われるのは <code>graph</code>
だろう。これは科学技術分野で 2D
のデータプロットを行うことを想定したプログラムである。<code>graph</code>
は、プロットするデータセットを一つまたは複数のデータファイルから読み込み、
一つのプロットを生成する。上記の画像形式はそれぞれ、
<code>graph -T X</code>、<code>graph -T pnm</code>、<code>graph -T gif</code>、<code>graph
-T ai</code>、<code>graph -T ps</code>、<code>graph -T fig</code>、<code>graph -T
pcl</code>、<code>graph -T hpgl</code>、<code>graph -T tek</code>、<code>graph</code>
として指定できる。<samp>`-T'</samp> オプションをつけない場合は、GNU metafile
形式で出力する (生の <code>graph</code> 形式、raw <code>graph</code> format とも言う)。
</p>
<p>入力データはテキスト (ascii plain text) でもバイナリでもよい。また
<code>gnuplot</code> の `table' 形式の出力も読み込める。
出力されるプロットでの座標軸やラベルの有無を指定できる。
ラベル、各座標軸の範囲、
プロットのサイズとディスプレイ上での位置をそれぞれ指定できる。
ラベルの文字には下付き、上付き、またギリシャ文字などの記号が使え、さらに
(ロシア語などの) キリル文字や日本語も使える。
プロットにおいては、各データセットごとにプロットに使う記号、
その記号間を結ぶ線 (があればそ)
の種類や太さを指定できる。領域の塗りつぶしもでき、エラーバーも付けられる。
複数のプロットを同時に一つの画像ファイルとして行うことは、
まったく問題なくできる。
<code>graph</code> を一回実行するだけで、複数のプロットを並べた画像や、
重ねた (inset) 画像を得ることができる。
データセット、座標軸の設定は各プロットでそれぞれ別にできる。
</p>
<p><code>graph -T X</code>、<code>graph -T tek</code>、<code>graph -T regis</code>
およびオプションなしの <code>graph</code>
では、ほかのプロットソフトウェアにはあまりない機能として、
入力を標準入力からパイプで受け取りながら、
リアルタイムで出力をプロットすることができる。そのためには <code>graph</code>
がデータを最後まで読み込まなくてもプロット領域を決められるように、
両方の座標軸の範囲を指定しておく。
</p>
<p><code>plot</code> は一種の「プロット・フィルタ」とも言うべきものである。<code>plot</code>
は GNU graphics metafile 形式 (たとえば <code>graph</code> の生の出力)
を、対応している他の形式に変換して出力する。各形式への変換はそれぞれ、
<code>plot -T X</code>、<code>plot -T png</code>、<code>plot -T pnm</code>、<code>plot -T
gif</code>、<code>plot -T svg</code>、<code>plot -T ai</code>、<code>plot -T ps</code>、<code>plot -T
cgm</code>、<code>plot -T fig</code>、<code>plot -T pcl</code>、<code>plot -T hpgl</code>、<code>plot
-T regis</code>、<code>plot -T tek</code>、<code>plot</code> で行える。
<code>plot</code> は、<code>graph</code>
での描画は一回だけにしたいが複数の形式の画像ファイルがほしい、
という場合に役に立つ。
または、いくつかのシステムにある GNU 版でない <code>graph</code> コマンドのような、
昔の `plot(5)' の形式のファイルを変換したいときにも使える。
</p>
<p><code>pic2plot</code> コマンドは pic 言語で表現されている画像ファイルを
対応している他の形式に変換して出力する。pic
言語はベル研で開発された言語で、
技術文書や解説書などによくあるような長方形と矢印からなる図を記述できる。
各形式への変換はそれぞれ、
<code>pic2plot -T X</code>、<code>pic2plot -T png</code>、<code>pic2plot -T
pnm</code>、<code>pic2plot -T gif</code>、<code>pic2plot -T ai</code>、<code>pic2plot -T
ps</code>、<code>pic2plot -T cgm</code>、<code>pic2plot -T fig</code>、<code>pic2plot -T
pcl</code>、<code>pic2plot -T hpgl</code>、<code>pic2plot -T regis</code>、<code>pic2plot -T
tek</code>、<code>pic2plot</code> で行える。
</p>
<p><code>tek2plot</code> は Tektronix
形式の画像データを対応している他の形式に変換して出力する。
各形式への変換はそれぞれ、
<code>tek2plot -T X</code>、<code>tek2plot -T png</code>、<code>tek2plot -T
pnm</code>、<code>tek2plot -T gif</code>、<code>tek2plot -T svg</code>、<code>tek2plot -T
ai</code>、<code>tek2plot -T ps</code>、<code>tek2plot -T cgm</code>、<code>tek2plot -T
fig</code>、<code>tek2plot -T pcl</code>、<code>tek2plot -T hpgl</code>、<code>tek2plot -T
regis</code>、<code>tek2plot</code> で行える。Tektronix
形式でしか出力しないような古いプログラムがあるときに重宝する。
</p>
<p><code>plotfont</code> は
<code>graph</code>、<code>plot</code>、<code>pic2plot</code>、<code>tek2plot</code>
で使えるフォントのキャラクタ・マップを出力するユーティリティである。
<samp>`-T X'</samp>、<samp>`-T ai'</samp>、<samp>`-T ps'</samp>、<samp>`-T cgm'</samp>、<samp>`-T fig'</samp>
オプションのどれかが指定されたときは、35 種類の PostScript
の標準フォントが使える。<samp>`-T ai'</samp>、<samp>`-T pcl'</samp>、<samp>`-T hpgl'</samp>
オプションが指定されたときは、45 種類の PCL 5 の標準フォント
(つまり &quot;LaserJet&quot; フォント) が使える。<samp>`-T pcl'</samp> と <samp>`-T hpgl'</samp>
では同様に、
多数の Hewlett-Packard
のベクトル・フォントが使える。22 種類の Hershey ベクトル・フォントのセット
(キリル文字フォントや日本語のフォントを含む) は常に使える。X Window
システムでディスプレイに描画するときは、plotutils
のプログラムはどれもスケーラブルなX のフォントを使える。
</p>
<p>描画を行わない (数学的な計算を行う) プログラムのうち、<code>spline</code>
はスカラー値またはベクトル値のデータからスプライン関数による補間曲線を求める。
通常は三次 (cubic) スプラインかテンション付き指数スプラインを求めるが、
<code>graph</code> のように特定の環境のもとではリアルタイム・フィルタとして使える。
このコマンドは与えられるデータから <em>d</em>
次元空間内に指定される任意の点を通るスプライン曲線を求める
(境界条件は自然または周期的のいずれでもよい)。<code>ode</code> コマンドは、
常微分方程式あるいは常微分方程式系の各方程式が陽関数形式で書かれている時、
それを数値積分する。<code>gnuplot</code> と似ているように思えるが、<code>gnuplot</code>
では関数は描画できるが微分方程式はあつかえない。<code>ode</code>
コマンドはそれを補うことができる。<code>double</code> コマンドは、
バイナリおよびテキスト形式のデータの入出力ストリームを加工し、
変換、スケーリング、データの取捨選択を行うプログラムである。
これは開発途中なので、ここでは解説しない。
</p>
<p>上述した描画を行うコマンドは内部で <code>libplot</code> ライブラリを使っている。
<code>libplot</code> ライブラリについてはあとで詳しく解説するが、C および C++
のプログラムに線、折れ線、多角形、(真円および楕円の)
円弧、二次および三次のベジェ曲線、円と楕円、点
(ピクセル)、記号および文字列を描画する機能を提供する。
点と記号と文字列以外に対しては、塗りつぶし機能が実装されている
(線の色と同様に塗りつぶしの色も任意に設定できる)。
文字列に使えるフォントは非常にたくさんある。
X Window システム、SVG、Illustrator、PostScript、CGM、<code>xfig</code>
の各ドライバでは 35 種類の PostScript フォント、SVG、Illustrator、PCL
5、HP-GL/2 のの各ドライバでは 45 種類の PCL 5 フォントが使える。
PCL 5、HP-GL/2
のドライバはヒューレット・パッカードのベクトル・フォントもサポートする。
PNG、PNM、GIF、ReGIS、Tektronix、metafile を含むすべてのドライバで
22 種類の Hershey ベクトル・フォントのセットが使える。
</p>
<p>文字列描画の機能も豊富である。
上付き、下付き文字が使え、
一つの書体に含まれる複数のフォントが一つの文字列中に混在できる。
多くの非アルファベット文字も使える。米 Naval Surface Weapons Center の
Allen V. Hershey が電子化した 1700 個以上の `Hershey glyphs'
(これには興味深い記号が多数含まれている) が <code>libplot</code>
に組み込まれている。EUC-JP (日本語の Extended Unix Code)
エンコードの文字列もあつかえる。
これらについては平仮名とカタカナに加えて漢字も使える。漢字は、第一水準の 2965
文字のうちよく使われる 596 文字を含む 603 文字が <code>libplot</code>
に組み込まれている。
</p>
<hr size="6">
<a name="graph"></a>
<a name="SEC2"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC1" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC3" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 2. <code>graph</code> コマンド </h1>

<p><code>graph</code>
は起動されると、コマンドラインで指定する一つまたは複数のデータファイル、
または標準入力からデータセットを読み込み、一つのプロット画像を生成する。
プロットをどう描画するか、
細かく指示するためのコマンドライン・オプションが多数用意されている。
以下の節に、よく使われるオプションとその例を説明する。
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC3">2.1 <code>graph</code> の使い方</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     graph の使い方と簡単な実行例
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC4">2.2 プロットの回転、および長方形のプロット</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    graph 出力におけるプロットの回転、および画像の縦横比
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC5">2.3 複数のデータセット</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC6">2.4 多重プロット</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC7">2.5 読み込めるデータ形式</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC8">2.6 <code>graph</code> のコマンドライン・オプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
</table>

<hr size="6">
<a name="Simple-Examples"></a>
<a name="SEC3"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC2" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC4" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC2" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.1 <code>graph</code> の使い方 </h2>


<p>デフォルトでは <code>graph</code> コマンドは指定されるファイルから、
指定がないときは標準入力からテキスト形式のデータを読み込む。
データは以下のように二つの数値の組としてあたえられ、それがデータ点の
<em>x</em> および <em>y</em> の値として扱われる。簡単な例を示す。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">0.0  0.0
1.0  0.2
2.0  0.0
3.0  0.4
4.0  0.2
5.0  0.6
</pre></td></tr></table>

<p>データ点は必ずしも各行に一組である必要はなく、また <em>x</em> と <em>y</em>
が同じ行にある必要もない。
しかし空行はデータセットの区切りとして扱われるので、
一つのデータセットの中には空行があってはならない。
</p>
<p>ファイル <tt>`datafile'</tt> に上の例のデータがあるとして、それを <code>graph</code>
でプロットするには、以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps datafile &gt; plot.ps
</pre></td></tr></table>

<p>もしくは以下のようにしても、同じ結果が得られる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps &lt; datafile &gt; plot.ps
</pre></td></tr></table>

<p>この実行例では、EPS (encapsulated PostScript) 形式のファイル <code>plot.ps</code>
が生成される。この形式の画像はプリンタに直接送信して印刷したり、
生成したプロットを他の文書に取り込んだり、<code>gv</code> などの PostScript
を表示するソフトウェアで画面に表示したり、フリーのドロー系ソフト <code>idraw</code>
で編集したりできる。
<samp>`--page-size'</samp> オプション、または環境変数の <code>PAGESIZE</code>
でプロット画像を置く用紙のサイズを指定できる。用紙サイズのデフォルトは &quot;letter&quot;
で、8.5in x 11in である。他に &quot;a4&quot; などの ISO または ANSI
に定める用紙サイズが指定できる。詳細は <a href="#SEC74">ページと描画領域のサイズ</a>
を参照のこと。
</p>
<p>また、以下のようにすると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T svg &lt; datafile &gt; plot.svg
graph -T cgm &lt; datafile &gt; plot.cgm
</pre></td></tr></table>

<p>SVG や WebCGM
プラグインをインストールしたウェブブラウザで表示できる画像が生成される。
また
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T fig &lt; datafile &gt; plot.fig
</pre></td></tr></table>

<p>とするとファイル <code>plot.fig</code>
が生成される。このファイルはフリーのドロー系ソフト <code>xfig</code>
で編集できる Fig 形式である。さらに、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ai &lt; datafile &gt; plot.ai
</pre></td></tr></table>

<p>とすると、Adobe Illustrator 形式のファイル <code>plot.ai</code> が生成される。
以下のコマンド
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T hpgl &lt; datafile &gt; plot.plt
</pre></td></tr></table>

<p>では Hewlett-Packard Graphics Language (HP-GL/2) 形式のファイル <code>plot.plt</code>
が生成される。
これはヒューレット・パッカードのプロッタにそのまま送信して描画することができる。
ここで <code>graph -T pcl</code> とすると PCL 5 形式になる。これは LaserJet
などのレーザープリンタで印刷できる。
</p>
<p><code>graph -T X</code> オプションを付けて実行すると、X Window
の画面上にウィンドウが開かれ、そこにプロットが表示される。
コマンドは以下のようになる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T X &lt; datafile
</pre></td></tr></table>

<p>この場合、ファイルはなにも生成されない。ウィンドウが表示されるだけである。
キーボードから type <samp>`q'</samp>
を入力するか、ウィンドウ内をマウスでクリックすると、ウィンドウが消える。
</p>
<p><code>graph -T png</code> では PNG 形式の、
<code>graph -T pnm</code> では PNM (&quot;portable anymap&quot;) 形式の、
<code>graph -T gif</code> では疑似 GIF 形式のプロット画像が生成される。
フリーの画像表示ソフトウェアである <code>display</code> が使える環境なら、
以下の３つのコマンド、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T png &lt; datafile | display
graph -T pnm &lt; datafile | display
graph -T gif &lt; datafile | display
</pre></td></tr></table>

<p>でプロット画像が表示される。
</p>
<p>また <code>graph -T tek</code> を使うと Tektronix 4014
端末をエミュレートするデバイスでプロットを表示できる。
X Window システムの端末エミュレータである <code>xterm</code> がその一つである。
<code>xterm</code>
のウィンドウ内で以下のようにすると、ウィンドウが開かれてそこに画像が表示される。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T tek &lt; datafile
</pre></td></tr></table>

<p><code>xterm</code> は普段は VT100 端末をエミュレートしているが、
<code>xterm</code> のウィンドウ内で 上のコマンドを実行すると、
別のウィンドウ (`Tektronix window')
が開かれて、その中にプロットが描画される。
日本語端末エミュレータの <code>kterm</code>
でも、正しくインストールされていれば、<code>xterm</code> と同じはずである。
他に、MS-DOS 版の <code>kermit</code> が Tektronix 4014
端末のエミュレート機能を持っている。
</p>
<p>同様に ReGIS をサポートしているグラフィック端末エミュレータ上では <code>graph
-T regis</code> でプロット画像を表示できる。DECwindows の端末エミュレータ
<code>dxterm</code> がその一つである。いくつかの DEC 端末
(特に VT340、VT330、VT241、VT240) でも ReGIS 形式をサポートしている。
</p>
<p><code>graph</code> コマンドの挙動は、実行する環境にあわせて変えることができる。
上に述べた <code>PAGESIZE</code> 環境変数は、
<code>graph -T svg</code>、<code>graph -T ai</code>、<code>graph -T ps</code>、<code>graph -T
cgm</code>、<code>graph -T fig</code>、<code>graph -T pcl</code>、<code>graph -T hpgl</code>
に対して有効である。同様に環境変数 <code>BITMAPSIZE</code> が
<code>graph -T X</code>、<code>graph -T png</code>、<code>graph -T pnm</code>、<code>graph -T
gif</code> のときに有効である。また <code>DISPLAY</code> 環境変数は
<code>graph -T X</code>、<code>TERM</code> 環境変数は <code>graph -T tek</code>
のとき有効である。
この他に、<code>graph -T pcl</code> と <code>graph -T hpgl</code>
のときにだけ有効な環境変数がいくつかある。詳細は
<a href="#SEC14"><code>graph</code> の環境変数</a> を参照のこと。
なお以下に述べる点は、どの出力形式でも共通の事項である。
</p>
<p>デフォルトでは、一つのデータセットの中で連続しているデータ点は、
実線の線分で結ばれ、その結果、多角形または折れ線が描かれる。
これをここでは単に「線」と呼ぶ。描画に使う線の種類
(線種、線のモード) は <samp>`-m'</samp> オプションで指定できる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps -m 2 &lt; datafile &gt; plot.ps
</pre></td></tr></table>

<p>上の例では <samp>`-m 2'</samp> を指定することで、線種 2
でプロットするよう指示している。
プロットが白黒で描画される場合 (デフォルト) は、線は 5
種類の線種のうちのどれか一つで描かれる。線種 1 から 5
はそれぞれ、実線、点線、一点鎖線、細かい破線、長めの破線、である。5
より上の番号で線種を指定していくと、この 5
種類が順番に繰り返し指定されることになる。<samp>`-C'</samp>
オプションを使うと線の色を指定できる。この場合、線種は 25 種類になる。
線種 1 から 5 は赤、緑、青、ピンク (マゼンタ)、水色 (シアン)
である。これは全部実線である。線種 6 から 10 は同じ 5 色の点線である。線種 11
から 16 は同じ 5 色の一点鎖線である。25 よりも大きな数字の線種は、25
までを繰り返すことになる。線種 0
は白黒でもカラーでもなく、その線種を指定されたデータを描画しないことを指示する。
</p>
<p>線で囲まれた多角形を (薄くした色や原色で) 塗りつぶしたいときは
<samp>`-q'</samp> オプションを使えばよい。たとえば
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 1 1 1 9 9 9 9 1 1 1 | graph -T ps -C -m 1 -q 0.3 &gt; plot.ps
</pre></td></tr></table>

<p>このようにすると４つの頂点 (1, 1)、(1, 9)、(9, 9)、(9, 1)
で囲まれた領域が描かれる。データセットには数値が 10 個、つまりデータ点が 5
つあって、最初と最後の点が同じ (1, 1) であることに注意してほしい。
こうすることで、閉じた多角形として四角形が描画される。オプションで線種
1、カラー描画が指定されているので、4 つの各辺は赤い線で描かれる。
オプション <samp>`-q 0.3'</samp> は閉じた多角形の内側を濃さ 30% (の赤)
で塗りつぶすことを指定している。濃さに 0 を指定すると白で、
1.0 を指定すると線と同じ色 (原色) で塗りつぶされる。
濃さに負の値を指定すると塗りつぶしは行われず、透明が設定される
(これがデフォルト)。
</p>
<p>線の太さ (`width') は塗りつぶしの有無に関係なく <samp>`-W'</samp>
オプションで指定できる。たとえば <samp>`-W 0.01'</samp>
とすると、描画領域の大きさに対する割合で 0.01
の太さの線が描かれる。
またプロット上でデータ点を示す記号を、以下のようにして指定できる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps -S 3 0.1 &lt; datafile &gt; plot.ps
</pre></td></tr></table>

<p>ここでは <samp>`-S'</samp> の最初の引数 3 が記号の種類を指定している。
その次の引数 0.1 は記号のプロットされる大きさを「プロット領域 (plotting
box)」に対する割合で指定しており、これは省略してもよい。
プロット領域とは、プロットが描かれる正方形の領域のことである。
記号は番号で指定され、
1 が点、
2 がプラス記号、
3 がアスタリスク、
4 が円 (丸)、
5 がバツ印、
で以下に続く (<a href="#SEC72">プロットに使える記号</a> 参照)。1 番から 31
番までの記号はどの出力デバイスでも同じである。
また記号の描画される色は、その記号と一緒に描かれる線と同じになる。
</p>
<p>場合によっては、
各データ点を結ぶ線は描きたくないが、
各データ点の記号は表示したいことがあるかもしれない。
その場合は線種に「負の番号
(negative linemode)」を指定すればよい。線種が負の線は描画されないが、
その線上のデータ点の記号は、
線種の番号の符号を反転して正にした場合の色で描かれる。たとえば
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps -C -m -3 -S 4 &lt; datafile &gt; plot.ps
</pre></td></tr></table>

<p>とすると青い円でデータ点が描かれる。各データ点を結ぶ線は描かれない。
<samp>`-S'</samp> の 2 番目の引数に、記号の大きさを指定することもできる。
</p>
<p><code>graph</code> では、<samp>`-a'</samp> を使って横軸 (<em>x</em> 軸)
の値を自動的に生成することができる。
このときはデータファイル中で横軸の値を与えてはならない。
データの横軸上の距離は等間隔であると見なされる。<samp>`-a'</samp>
には、最初のデータ点の横軸の値と、データの間隔を指定する。
指定のない場合は、それぞれ 1.0 と 0.0
を指定したことと同じになる。例えば次のコマンド、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 1 0 | graph -T ps -a &gt; plot.ps
</pre></td></tr></table>

<p>は以下と全く同じプロットを描画する。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 1 2 0 | graph -T ps &gt; plot.ps
</pre></td></tr></table>
<p><code>graph</code> に <samp>`-I e'</samp> オプションを指定することで、エラーバーを描画できる。
この場合データセットでは各データ点につき、２つ (<em>x</em>、<em>y</em>) ではなく、
３つ (<em>x</em>、<em>y</em>、<i>error</i>) の数値が必要になる。各データ点で、
データ点の上下に入力された数値の幅を持つ垂直なエラーバーが描かれる。
<samp>`-S'</samp> で記号を指定すればエラーバーとともにデータ点上に記号が描かれる。
記号の種類は、一つのデータセットの各点で同じになる。
<samp>`-a'</samp> オプションも <samp>`-I e'</samp> と組み合わせて使える。
その場合、データセット中には横軸 (<em>x</em> 軸)
の値を含めてはならない。
</p>
<p>デフォルトでは、<em>x</em> 軸と <em>y</em> 軸の範囲、各軸上のラベル (文字列)
の付く目盛りの間隔は自動的に計算されるが、以下のように <samp>`-x'</samp> および
<samp>`-y'</samp> オプションを使えば、指定することもできる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 1 2 0 | graph -T ps -x -1 3 -y -1 2 &gt; plot.ps
</pre></td></tr></table>

<p>これにより <em>x</em> 軸は -1 から 3 の範囲に、<em>y</em> は -1
から 2 の範囲に広げられる。<code>graph</code>
のデフォルトでは各軸で数値の付けられる目盛りは６カ所程度だが、<samp>`-x'</samp> または
<samp>`-y'</samp> の３つめの引数で目盛りの間隔を指定できる。
たとえば、<samp>`-y -1 2'</samp> ではなく <samp>`-y -1 2 1'</samp> を指定すると、
<em>y</em> 軸上の -1、0、1、2
のところで目盛りに数値のラベルが描かれる。
デフォルトでは <code>graph</code> が自動的に
-1、-0.5、0、0.5、1、1.5、2
に数値を描くように設定する。
一般的に、
３つめの引数が指定されたときはその値の整数倍のところに数値が描かれる。
</p>
<p>対数プロットをしたいときは、<samp>`-l'</samp> を指定する。たとえば、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 1 1 2 3 3 1 | graph -T ps -l x &gt; plot.ps
</pre></td></tr></table>

<p>とすると、<em>x</em> 軸は対数でプロットされる。<em>y</em> 軸は通常のままである。
両軸とも対数にしたいときは <samp>`-l x -l y'</samp> を指定する。
デフォルトでは対数軸の上下限は 10 のべき乗に合わせられ、
軸上の目盛りも 10 のべき乗とその整数倍の点に描かれる。
10 のべき乗の点では目盛りに数値が描かれる。
描画範囲が５桁以上の範囲になるときは、
10 のべき乗の整数倍の点の目盛りは省かれる。
</p>
<p>対数プロットの座標軸の範囲が狭くて、目盛りの数を増やしたい場合は、
目盛りの間隔をオプションで指定する。たとえば <samp>`-l x -x 1 9 2'</samp> とすると、
<em>x</em> 軸の描画範囲は 1 から 9 になる。
数値は 2 の整数倍のところ、2、4、6、8 の目盛りに描かれる。
</p>
<p><em>x</em> 軸および <em>y</em> 軸にはそれぞれ、<samp>`-X'</samp> および <samp>`-Y'</samp>
オプションでラベルを付けることができる。たとえば、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 1 1 2 3 3 1 | graph -T ps -l x -X &quot;A Logarithmic Axis&quot; &gt; plot.ps
</pre></td></tr></table>

<p>とすると、一つ前のプロット例の対数軸にラベルを付ける。
デフォルトでは <samp>`-Q'</samp> を付けない限り、<em>y</em> 軸のラベルは (もしあれば)
90度回転して描かれる (X Window システムには、
新しくもて古くてもラベルの回転をサポートしていないものがあり、その場合は
<samp>`-Q'</samp> オプションを明示的に与える必要がある)。<samp>`-L'</samp>
オプションで以下のようにすると、プロット全体のタイトルのラベルを指定できる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 1 1 2 3 3 1 | graph -T ps -l x -L &quot;A Simple Example&quot; &gt; plot.ps
</pre></td></tr></table>

<p>こうすると、図の上部にタイトルのついた図が生成される。
</p>
<p><em>x</em> 軸および <em>y</em> 軸のラベルの文字の大きさを <samp>`-f'</samp>
オプションで、図のタイトルの文字の大きさを <samp>`--title-font-size'</samp>
オプションで指定できる。たとえば、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 1 1 2 3 3 1 | graph -T ps -X &quot;Abscissa&quot; -f 0.1 &gt; plot.ps
</pre></td></tr></table>

<p>とすると、<em>x</em> 軸のラベルと目盛りの数値が非常に大きく
(プロットの描かれる正方形の領域に対する割合で 0.1) 描かれる。
</p>
<p><samp>`-X'</samp>、<samp>`-Y'</samp>、<samp>`-L'</samp>
オプションで指定されるラベルに使われるフォントは <samp>`-F'</samp>
オプションで指定できる。たとえば <samp>`-F Times-Roman'</samp>
とするとラベルのフォントがデフォルト (Helvetica、ただし
<samp>`-T png'</samp>、<samp>`-T pnm'</samp>、<samp>`-T gif'</samp>、<samp>`-T pcl'</samp>、<samp>`-T hpgl'</samp>、<samp>`-T tek'</samp>
のときは異なる) の代わりに
Times-Roman が使われる。フォント名では大文字、小文字を区別しないので、<samp>`-F
times-roman'</samp> でも同じである。使えるフォントは、35 種類の PostScript
の標準フォント (ただし
<code>graph -T png</code>、<code>graph -T pnm</code>、<code>graph -T gif</code>、<code>graph -T pcl</code>、<code>graph -T hpgl</code>、<code>graph -T tek</code>
以外の場合)、45 種類の
PCL 5 フォント (ただし
<code>graph -T svg</code>、<code>graph -T ai</code>、<code>graph -T pcl</code>、<code>graph -T hpgl</code>
の場合のみ)、多数のヒューレット・パッカードのベクトル・フォント
(ただし <code>graph -T pcl</code>、<code>graph -T hpgl</code> の場合のみ)、および 22
種類の Hershey ベクトル・フォントである。Hershey
フォントにはロシア語のキリル文字 HersheyCyrillic と、日本語の HersheyEUC
がある。利用できるフォントについての詳細は <a href="#SEC68">利用できるフォント</a> を参照のこと。
<code>plotfont</code> コマンドを使えば、
利用できるフォントのキャラクタ・マップが得られる (<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照)。
</p>
<p><samp>`-X'</samp>、<samp>`-Y'</samp>、<samp>`-L'</samp> オプションで描かれるラベルのフォントは、
指定の仕方が複雑に感じられるかもしれない。また上述の例に加えて、
上付き、下付き、ルート記号、フォントの切り替えが指定できるが、
これまでに出てきた例には示していない。詳細は <a href="#SEC71">文字列とエスケープ・シーケンス</a>
を参照のこと。
</p>
<p>ここまでの例では、グリッドはデフォルトのままであった
(目盛りとラベルが下および左に付いていて、プロットは正方形)。
これもオプションを使っていくつかの種類が設定できる。
<samp>`-g 0'</samp>、<samp>`-g 1'</samp>、<samp>`-g 2'</samp>、<samp>`-g 3'</samp>
を指定すると、この順に装飾が増える。それぞれ、
グリッド省略、
目盛りと数値の付いた一組の軸、
目盛りと数値の付いた正方形、
目盛りと数値の付いた正方形とグリッド、
である。見て分かる通り、デフォルトは <samp>`-g 2'</samp> である。
<samp>`-g 4'</samp> も指定できるが、これは他のと違って、
原点を通る二本の軸を描画する。
このオプションはデータ点の <em>x</em> または <em>y</em>
の値が正および負の両方にわたっているときに使う。
</p>
<hr size="6">
<a name="Non_002dSquare-Plots"></a>
<a name="SEC4"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC3" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC5" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC2" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.2 プロットの回転、および長方形のプロット </h2>

<p>プロットの形を長方形にしたいときや、
プロットの位置を画面や用紙上で指定したいときは、
以下のようにすればよい。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps -h .3 -w .6 -r .1 -u .1 &lt; datafile &gt; plot.ps
</pre></td></tr></table>

<p>ここで <samp>`-h'</samp> と <samp>`-w'</samp> オプションはプロット領域の高さと幅を指定している。
<samp>`-r'</samp> と <samp>`-u'</samp> オプションはプロット領域の置かれる位置
(プロット領域の左下隅が、どれだけ上および右か) を指定している。
それぞれの単位はプロット領域の大きさ (正方形) に対する割合である。
デフォルトでは、プロット領域の大きさは 0.6
で、場所は上方向と右方向にそれぞれ 0.2 ずつ動いた場所である。である。
したがって、上の例では高さが通常の <em>1/2</em> のプロットが生成される。
また通常に比べると、画像は少し下かつ左寄りに描画される。
</p>
<p>一部のコマンドライン・オプションでは、
サイズをプロット領域に対する割合で指定する。
たとえば <samp>`-S 3 .01'</samp> ではデータ点に描かれる記号に対して、種類は 3
番でフォントサイズは 0.01、
つまりプロット領域の縦あるいは横のどちらか短い方の 0.01 倍を指定する。
<samp>`-h'</samp> または <samp>`-w'</samp> でプロット領域の大きさが変更された場合、
他のオプションで指定されているさまざまなサイズも、それにつれて変更される。
おそらくはこれが正しい、分かりやすい動作と言えよう。
</p>
<p>プロット画像を 90 度反時計回りに回転させるには、<code>graph</code>
のコマンドラインで <samp>`--rotation 90'</samp> オプションを指定する。
そこに <samp>`--rotation 180'</samp> を指定すると、逆さまのプロットになる。
好きな角度を指定できるが、0、90、180、270
以外の角度は前衛芸術家くらいしか使わないだろう。
<samp>`--rotation'</samp> は <samp>`-h'</samp>、<samp>`-w'</samp>、<samp>`-r'</samp>、<code>-u</code>
と組み合わせて使うこともできる。その場合、まずプロット領域が回転させられる。
これは <samp>`--rotation'</samp> は描画領域全体の回転する角度を指定し、
他のオプションはその描画領域内でのプロット領域の位置を指定するからである。
この二つは、論理的に意味が異なる指示である。
</p>
<p>描画領域 (グラフィクス・ディスプレイ、または `viewport')
は抽象的な概念である。<code>graph -T X</code> ではこれは X display
の画面に開かれたウィンドウである。<code>graph -T pnm</code> および <code>graph -T gif</code>
では正方形あるいは長方形のビットマップである。この３つの場合は描画領域の大きさは
<samp>`--bitmap-size'</samp> オプションまたは <code>BITMAPSIZE</code>
環境変数で指定できる。<code>graph -T tek</code> では描画領域は Tektronix
端末の画面の中央に位置する正方形の領域である (Tektronix 端末の画面は縦横比 3:4
の横長である)。<code>graph -T regis</code> では描画領域は ReGIS
端末の画面の中央に位置する正方形の領域である。
<code>graph -T ai</code>、<code>graph -T ps</code>、<code>graph -T pcl</code>、<code>graph -T fig</code>
ではデフォルトでは、8.5in x 11in の用紙 (US letter サイズ)
の中央の 8 インチ四方の領域である。<code>graph -T hpgl</code> でも 8
インチ四方の領域だが、置かれているのは中央ではない。<code>graph -T svg</code> および
<code>graph -T cgm</code> ではデフォルトでは 8 インチ四方の領域だが、
出力ファイルがウェブブラウザで表示されるときには任意の大きさに拡大・縮小される。
</p>
<p><code>graph -T svg</code>、<code>graph -T ai</code>、<code>graph -T ps</code>、<code>graph -T cgm</code>、<code>graph -T fig</code>、<code>graph -T pcl</code>、<code>graph -T hpgl</code>
ではデフォルトの描画領域のサイズが用紙の大きさによって決まるが、これは
<samp>`--page-size'</samp> オプションまたは <code>PAGESIZE</code> 環境変数で指定できる。
たとえば用紙サイズを &quot;a4&quot; に設定すれば A4 サイズ (21cm x
29.7cm) にあわせて描画領域が設定され、適切な大きさの画像が生成される。
描画領域の大きさは、縦、横、あるいはそのどちらかを指定できる。たとえば
&quot;letter,xsize=4in&quot; や &quot;a4,xsize=10cm,ysize=15cm&quot; といった指定ができる。
描画領域の高さ、横幅には、負の値も指定できる (そのときは鏡像になる)。
</p>
<p>描画領域の用紙上のデフォルトの位置に対する相対的な位置をオプションで指定できる。
たとえばまず &quot;letter,yoffset=1.2in&quot; や &quot;a4,xoffset=-5mm,yoffset=2.0cm&quot;
のようにすると、用紙の大きさを指定できる。
そして描画領域の左下隅の位置を、用紙の左下隅に対する相対的な位置で指定する。
たとえば &quot;letter,xorigin=2in,yorigin=3in&quot; や
&quot;a4,xorigin=0.5cm,yorigin=0.5cm&quot; といった指定ができる。
</p>
<p>上述したオプションは、組み合わせて使うことができる。しかし <code>graph -T svg</code>
および <code>graph -T cgm</code> では &quot;xoffset&quot;、&quot;yoffset&quot;、&quot;xorigin&quot;、&quot;yorigin&quot;
は無効である。SVG と WebCGM
形式では、画像が最終的にウェブブラウザ上のどこに表示されるかは、
画像そのものからは指定できないからである。&quot;xsize&quot; と &quot;ysize&quot;
オプションは、画像のデフォルトサイズを指定するものと解釈される
(ウェブブラウザ上では画像の大きさは任意に拡大・縮小されるので、
この指定は単にデフォルト値を与えるにすぎない)。
</p>
<p>用紙サイズおよび描画領域の大きさについての詳細は、<a href="#SEC74">ページと描画領域のサイズ</a>
を参照のこと。
</p>
<hr size="6">
<a name="Multiple-Datasets"></a>
<a name="SEC5"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC4" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC2" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.3 複数のデータセット </h2>

<p>複数のデータセットを、まとめて一つのプロットにしたいことは多い。
そのために、各データセットごとに違う線種を使って区別を付けたり、
違う種類の記号でプロットすることができる。
</p>
<p>以下に、少しだけ複雑な例を挙げる。
たとえば、実験観測データのファイルと、数値が細かい刻みで連続している、データの理論値を示すファイルがあるとする。
後者のファイルは、それ自身で一つのデータセットである。
理論値の方は連続するデータ点を線で結んで、理論曲線としてプロットしたいが、
前者の観測データは線で結ばず、記号でデータ点を示すだけにしたいとする。
実際には各点のデータ点には記号が描かれる。
</p>
<p>この例では他と同様、データセットのプロットに 7
種類の<em>属性</em>を指定して、データセットをどのように描画するかを指示する。
属性には以下の種類があり、コマンドライン・オプションで指定できる。
</p>
<ol>
<li> 色の有無 (color/monochrome)
</li><li> 線種 (linemode)
</li><li> 線幅 (linewidth)
</li><li> 記号の種類 (symbol type)
</li><li> 記号の大きさ (symbol size)
</li><li> 記号のフォント名 (symbol font name)
</li><li> 塗りつぶしの濃さ (fill fraction)
</li></ol>


<p>色の有無 (color/monochrome のどちらか。両方を同時に指定することはできない)
は、見た通りの意味である。<samp>`-C'</samp>
オプションで指定できる。指定はコマンドライン上でトグル動作になる。線種
(linemode) は連続するデータ点を結ぶ線分の種類である。これは <samp>`-m'</samp>
オプションで指定できる。線種に 0
番を指定するとまったく描かないという意味になる。線幅 (linewidth)
は線の太さである。これは <samp>`-W'</samp> オプションで指定できる。記号の種類
(symbol type) と記号の大きさ (symbol size)
は各データセットのデータ点に描かれる記号を指定する。これは
<samp>`-S'</samp> オプションで指定できる。記号のフォント名 (symbol font name) では、32
番より後の記号をどのフォントから取るかを指定する。
これはなにか図章的な記号ではなく、文字を指定することになる。
このオプションは <samp>`--symbol-font-name'</samp> オプションと組み合わせて、
<samp>`-S'</samp> で特殊な記号などを指定して使う。
最後に、データ点を結んで多角形として描かれるデータセットでは、
その多角形の内側を原色や薄い色で塗りつぶすことができる。
「塗りつぶしの濃さ」は <samp>`-q'</samp> オプションで指定できる。
濃さの値が負の場合は塗りつぶしを行わず、透明化するという指示になる。
0 のときは白で、1.0 のときは原色で塗りつぶされる。
</p>
<p>この 7 種類の属性で、データセットのプロットの描き方を指定できる。
またファイルからの読み込み方もデータセットごとに指定できる。
たとえば一つのファイルの中のデータがエラーバーのデータかそうでないか、
などである。
もしファイル中のデータをエラーバーのデータとして扱う場合、
ファイル名の前に <samp>`-I e'</samp> オプションを指定して、それを示さなければならない
(<samp>`-I'</samp> オプションはそれに続くファイルの入力の形式を指定する)。
</p>
<p>３つの異なるファイルのデータを、どうやって一緒にプロットするかを以下に示す。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps -m 0 -S 3 file1 -C -m 3 file2 -C -W 0.02 file3 &gt; output.ps
</pre></td></tr></table>

<p><code>file_1</code> のデータセットは線種 0 番で描かれる。
つまり各データ点は結ばれないが、記号 3 (アスタリスク) が各データ点に描かれる。
<code>file_2</code> のデータセットはカラーで、線種 3 番で描かれる。
カラーの場合、線種 3 番は青い実線である。
コマンドラインでの二つ目の <samp>`-C'</samp> は、<code>file_3</code>
ではカラーモードをオフにする、という指定になる。
３つめのデータセットは描画領域の縦、
横のサイズのいずれか短い方の 0.02 倍の太さの黒い線でデータ点が結ばれる。
</p>
<p><samp>`-q'</samp> や <samp>`-I'</samp> オプションを各ファイルの前に付けると、
上の例はもっと複雑になる。またコマンドラインでは <samp>`-x'</samp>、<samp>`-y'</samp>
で座標軸の範囲を指定することも実際にはある。
そういう、各データセットに対してではなく、プロット全体に対するオプションは、
最初に指定されるファイルよりも前に置くべきである。
たとえば出力形式の指定は以下のように、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps -x 0 1 0.5 -m 0 -S 3 file1 -C -m 3 file2 &gt; output.ps
</pre></td></tr></table>

<p>とする。コマンドラインでは、標準入力を表す特殊なファイル名として <samp>`-'</samp>
が使える。これを使うと、一部はファイルから、他の一部を他のプログラムから
<code>graph</code> へのパイプで渡されるデータから入力して、
プロットを生成することができる。
</p>
<p>一つのファイルに複数のデータセットが入っていてもよい。
その場合、コマンドラインでそのファイルの前に指定されるオプションは、
そのファイル中のデータセットすべてに適用されるが、例外が二つある。
デフォルトではデータセットごとにラインモードが一つずつ後のものになる。
通常は、これが便利なはずである。たとえば以下のようにすると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps -m 3 file1 &gt; output.ps
</pre></td></tr></table>

<p><code>file_1</code> の最初のデータセットは線種 3 で、二つ目のデータセットは
線種 4 で、のようになる。以下のようにして線種の指定を省くと実際、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps file1 file2 &hellip; &gt; output.ps
</pre></td></tr></table>

<p>データセットの入力される順にその線種が 1、2、 &hellip; に設定される。
もし違うようにしたいときは、<samp>`-B'</samp> オプションでこれをオフにするか、
トグルさせることができる。
</p>
<p>データファイルの中で直接、線種と記号の種類を指定することもできる。
その場合コマンドラインではなく、ファイル中に指定子を使って記述する。
例えば以下の行が、テキスト形式の入力ファイル中にあるとき、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#m=-5,S=10
</pre></td></tr></table>

<p>これは、これの後のデータセットの線種を #-5 に切り替え、記号の種類を 10 
番にする。将来的には、7
種の属性をすべてこの方法で指定できるようにする予定である。
</p>
<hr size="6">
<a name="Multiplotting"></a>
<a name="SEC6"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC5" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC7" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC2" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.4 多重プロット </h2>

<p>複数のプロットを一つのページあるいは描画領域の中に描画する、
つまりプロットを合成することをここでは<em>多重プロット</em>と呼ぶ。
小さなプロットを大きなプロットにはめ込む、
または複数のプロットを並べる、といったことである。
</p>
<p><code>graph</code> は、多数の小さなプロットを任意の数だけ多重プロットできる。
このとき <code>graph</code> は小さな各プロットを、
それぞれの「仮想描画領域」に描画する。通常のプロットでは、
仮想描画領域と物理的な実際のディスプレイ上の本当の描画領域は同じである。
多重プロットのときは仮想描画領域はより小さな正方形の領域である。
以下の２つの例でその考え方を示す。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T X datafile1 --reposition .35 .35 .3 datafile2
</pre></td></tr></table>

<p>この例では <code>datafile1</code> は通常通りに描かれる。<samp>`--reposition'</samp>
オプションで <code>datafile2</code> を描く仮想描画領域を指定している。
<samp>`--reposition'</samp>
オプションでの仮想描画領域の位置の指定は、物理的なディスプレイ上の、
全体プロットの描画領域は正方形で、左下隅が (0.0, 0.0) で右上隅が
(1.0, 1.0) であるとして相対的な値を指定する。
上の例では仮想描画領域のサイズは一辺が 0.3 の正方形で、
左上隅が物理的なディスプレイ上の描画領域の (0.35,0.35) に置かれる。
そうして二つ目の小さなプロットが物理的なディスプレイ内の、
最初の大きなプロット内に置かれる。
</p>
<p>物理的なディスプレイ上の描画領域のサイズと場所が
<samp>`-w'</samp>、<samp>`-h'</samp>、<samp>`-r'</samp>、<samp>`-u'</samp> で指定できるが、
これらのオプションは仮想描画領域のサイズと場所を指定するのにも使える。
たとえば、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T X datafile1 --reposition .35 .35 .3 -w .4 -r .3 datafile2
</pre></td></tr></table>

<p>とすると、二つ目の小さなプロットをかなり変更した多重プロットが行われる。
そのプロット領域の横幅は仮想描画領域に対する割合で 0.4 しかない。
しかしプロット領域は仮想描画領域の中央に置かれる。
それはプロット領域の左端と仮想描画領域の左端の距離が、
仮想描画領域の横幅の 0.3 倍だからである。
</p>
<p>最初の小さなプロットの時以外は、
各プロットを描画する前にプロット領域を囲む「消去領域」が削除される
(これは白、または背景色があればそれで塗りつぶされる)。
これにより小さなプロットが重なってしまったりして、
多重プロットの結果が醜くなったりするのを避けている。
デフォルトでは消去領域の縦横の大きさは、
それぞれの小さなプロット領域の 1.3 倍である。これは、そのプロットが小さくて、
かつすでにプロットがあるところに後から描画される場合にはよいが、
複数の小さなプロットを縦横に並べるような多重プロットをしたい場合にはよくない。
そういったときは <samp>`--blankout'</samp> オプションでその大きさを調整できる。
たとえば <samp>`--blankout 1.0'</samp>
と指定すると消去領域と描画領域が同じ大きさになる。
<samp>`--blankout 0.0'</samp> とすると余白を取らなくなる。
消去領域は複数の小さなプロットについてそれぞれ独立に指定できる。
</p>
<p>多重プロットされるそれぞれの小さなプロットは、それぞれ独立している。
通常のオプション (<samp>`-m'</samp>、<samp>`-S'</samp>、<samp>`-x'</samp>、<samp>`-y'</samp> など)
はそれぞれの小さなプロットに、それぞれ指定できる。
それぞれの小さなプロットに対するオプションは、<code>graph</code> のコマンドラインで、
<samp>`--reposition'</samp> オプションのすぐ後ろに指定しなければならない。
それぞれの小さなプロットは一つ、あるいは複数のデータセットをプロットできる。
それぞれの小さなプロットのデータファイルは (もしあるなら)、
<samp>`--reposition'</samp> のすぐ前に指定する。
</p>
<hr size="6">
<a name="Data-Formats"></a>
<a name="SEC7"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC6" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC8" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC2" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.5 読み込めるデータ形式 </h2>

<p><code>graph</code> はデフォルトではテキスト形式のデータを読み込むようになっている。
しかし３種類のバイナリ形式 (単精度浮動小数点、倍精度浮動小数点、整数)
も読み込むことができる。バイナリ形式で読み込むときはその形式を <samp>`-I
f'</samp>、<samp>`-I d'</samp>、<samp>`-I i'</samp>
オプションで指定する。それぞれ単精度、倍精度、整数である。
</p>
<p>バイナリ形式には二つの利点がある。ひとつは、<code>graph</code>
の実行がかなり速くなることである。
これはテキスト形式のデータをバイナリに変換する必要がなくなるからである。
もうひとつは入力ファイルのサイズがずっと小さくなることである。
もし大量のデータを扱うなら、バイナリ形式の方が
保存する記憶容量、実行時間ともに有利である。
</p>
<p>たとえば C 言語のプログラムから以下のようにして単精度実数を出力するとする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;stdio.h&gt;
void write_point (float x, float y)
{
  fwrite(&amp;x, sizeof (float), 1, stdout);
  fwrite(&amp;y, sizeof (float), 1, stdout);
}
</pre></td></tr></table>

<p>こうして作られたデータファイルは、以下のようにするとプロットできる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps -I f &lt; binary_datafile &gt; plot.ps
</pre></td></tr></table>

<p>一つのバイナリ形式のファイルに複数のデータセットが入っていてもよい。
その場合、そのバイナリ形式で表現できる数値の最大値がデータセットの区切りになる。
単精度実数の場合は <code>FLT_MAX</code>、倍精度実数の場合は <code>DBL_MAX</code>、
整数の場合は <code>INT_MAX</code> で表される数値がそれになる。
多くの計算機環境では <code>FLT_MAX</code> は約 3.4x10^38、
<code>DBL_MAX</code> は 1.8x10^308、
<code>INT_MAX</code> は 2^32-1
である。
</p>
<p>複数のファイルからデータを読み込むときに、各ファイルの形式は異なっていてもよい。
たとえば、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph -T ps -I f binary_datafile -I a ascii_datafile &gt; plot.ps
</pre></td></tr></table>

<p>とすると <code>binary_datafile</code> からは <samp>`f'</samp> (単精度実数) で、
<code>ascii_datafile</code> からは <samp>`a'</samp> (普通のテキスト形式) で読み込む。
</p>
<p>現在の所、エラーバーのデータはバイナリ形式では読み込めない。
エラーバーのデータはテキスト形式で <samp>`-I e'</samp> オプションを指定して <code>graph</code>
に入力せねばならない。
</p>
<p><code>graph</code> は、<code>gnuplot</code> が出力する「表形式
(`table' format)」のテキストデータも読み込める。これは <samp>`-I g'</samp> で指定する。
これにはデータセットが複数含まれていてもよい。
</p>
<p>以上をまとめると、読み込めるデータ形式は６種類である。
<samp>`a'</samp> (普通のテキスト形式)、
<samp>`e'</samp> (エラーバーのデータを含むテキスト形式)、
<samp>`g'</samp> (<code>gnuplot</code> が出力する「表形式」のテキストデータ)、
<samp>`f'</samp> (単精度実数のバイナリ形式)、
<samp>`d'</samp> (倍精度実数のバイナリ形式)、
<samp>`i'</samp> (整数のバイナリ形式)
である。入力ファイルはこの６つのうちのどれかであればよい。
</p>
<hr size="6">
<a name="graph-Invocation"></a>
<a name="SEC8"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC7" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC9" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC2" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.6 <code>graph</code> のコマンドライン・オプション </h2>

<p><code>graph</code> プログラムは、
コマンドラインで指定されたファイルまたは標準入力から、
一つまたは複数のデータセットを読み込み、プロットを描画する。
プロット画像の形式の種類は <samp>`-T'</samp> オプションで指定する。
</p>
<p>デフォルトでは <code>graph</code> はコマンドラインで指定されたファイルから、
テキスト形式のデータを読み込む。データは二つの数値の組で、それぞれデータ点の
<em>x</em> および <em>y</em> 座標であると解釈される。
コマンドラインでファイルが指定されていないか、または <samp>`-'</samp>
というファイル名が指定されたときは、標準入力からデータが読み込まれる。
出力は、<samp>`-T X'</samp> オプションが指定された時以外は、標準出力に書き出される。
<samp>`-T X'</samp> オプションが指定されているときは、プロットは X Window
の画面上に描画され、画像データは標準出力には書き出されない。
</p>
<p>プロットの細部を指示するコマンドライン・オプションが多数用意されているが、
そういったオプションを使うときには、
コマンドライン上でのオプションと入力ファイルの指定される順番が重要である。
ファイル名よりも前に指定されているオプションだけが、
そのファイルのデータのプロットに適用される。
</p>
<p>以下にすべてのオプションを解説する。
引数を取るオプションでは、
説明の最初にカッコ書きでその引数の型とデフォルト値を示している。
オプションは以下の５種類に分けられる。
</p>

<p><code>graph</code> の動作は環境変数によっても制御できる。これは後の節で解説する。
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC9">2.6.1 プロット全体を制御するオプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC10">2.6.2 データセットのオプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC11">2.6.3 多重プロットのオプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC12">2.6.4 <code>graph</code> の生出力データのオプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC13">2.6.5 情報を表示するオプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        情報を表示するためのオプション (<samp>`--help'</samp> など)
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC14">2.7 <code>graph</code> の環境変数</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   graph が参照する環境変数
</td></tr>
</table>

<hr size="6">
<a name="Plot-Options"></a>
<a name="SEC9"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC8" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC10" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC8" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.6.1 プロット全体を制御するオプション </h3>

<p>以下のオプションのは、プロットの描画全体に対する制御を行う。
指定されるときは、多くの場合コマンドライン上で一回だけであり、
どのデータ・ファイルよりも前に指定される。
もし多重プロットを行うときは、(<samp>`-T'</samp> オプションを除いて)
複数回指定されうる。そのときは、２回目またはそれ以降のオプションは
<samp>`--reposition <var>x</var> <var>y</var>'</samp> オプションのすぐ後ろに置かなければならない。
</p>
<dl compact="compact">
<dt> <samp>`-T <var>type</var>'</samp></dt>
<dt> <samp>`--output-format <var>type</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;meta&quot;)
出力形式を <var>type</var> に設定する。これには
&quot;X&quot;、&quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot;、&quot;svg&quot;、&quot;ai&quot;、&quot;ps&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;、&quot;regis&quot;、&quot;tek&quot;、&quot;meta&quot;
のいずれかの文字列を指定する。
それぞれ、
X Window システム、PNG 形式、portable anymap (PBM/PGM/PPM) 形式、疑似 GIF
形式、XML ベースの Scalable Vector Graphics 形式、Adobe Illustrator
形式、<code>idraw</code> で編集できる PostScript
形式、ウェブ用のベクトル画像形式である WebCGM 形式、<code>xfig</code>
で編集できる形式、ヒューレット・パッカードの PCL 5 プリンタ言語、
ヒューレット・パッカード・グラフィクス言語 (デフォルトでは HP-GL/2)、
DEC で開発された ReGIS (remote graphics
instruction set) 形式、Tektronix 形式、特定のデバイスに依存しない GNU graphics
metafile 形式である。<samp>`--display-type'</samp> は古いので
<samp>`--output-format'</samp> を使うべきである。
</p>
</dd>
<dt> <samp>`-E <var>x|y</var>'</samp></dt>
<dt> <samp>`--toggle-axis-end <var>x|y</var>'</samp></dt>
<dd><p>指定した軸を、通常描かれる場所から、描画領域の反対側に移動する。
たとえば <samp>`-E y'</samp> を指定すると <em>y</em> 軸がプロットの左側
(これがデフォルト) ではなく、右側に描かれる。
同様に <samp>`-E x'</samp> とすると <em>x</em> 軸が描画領域の下部ではなく、
上部に描かれる。<em>x</em>
軸を上部に描くと、プロットのタイトルラベルが表示されなくなる
(ラベルの場所がなくなるため)。
</p>
</dd>
<dt> <samp>`-f <var>size</var>'</samp></dt>
<dt> <samp>`--font-size <var>size</var>'</samp></dt>
<dd><p>(実数、デフォルトは 0.0525)
座標軸と目盛りのラベルに使う文字列のフォントサイズを <var>size</var> に指定する。
数値は、プロット領域の縦または横の長さの小さい方に対する割合として指定する。
</p>
</dd>
<dt> <samp>`-F <var>font_name</var>'</samp></dt>
<dt> <samp>`--font-name <var>font_name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;Helvetica&quot;、ただし <code>graph -T pcl</code> では
&quot;Univers&quot;、<code>graph -T png</code>、<code>graph -T pnm</code>、<code>graph -T
gif</code>、<code>graph -T hpgl</code>、<code>graph -T regis</code>、<code>graph -T tek</code>、生の
<code>graph</code> の場合は &quot;HersheySerif&quot;)
座標軸と目盛りのラベル、およびプロットのタイトル (があればそれ)
に使うフォントを <var>font_name</var> に指定する。
プロットのタイトルのフォントは <samp>`--title-font-name'</samp> オプションによる指定
(後述) が優先される。フォント名では大文字と小文字は区別されない。
もし指定されたフォントが使えない場合、デフォルトのフォントが使われる。
使えるフォントは、<samp>`-T'</samp> オプションで何を指定するかによって異なる。
すべてのフォントのリストは <a href="#SEC68">利用できるフォント</a> を参照のこと。
<code>plotfont</code> ユーティリティ・プログラムで、
使えるフォントのキャラクタ・マップを表示することができる。<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照。
</p>
</dd>
<dt> <samp>`-g <var>grid_style</var>'</samp></dt>
<dt> <samp>`--grid-style <var>grid_style</var>'</samp></dt>
<dd><p>(0&hellip;4 の範囲の整数、デフォルトは 2)
引数 <var>grid_style</var> でグリッドの描き方を指定する。0 から 3
までは、だんだんと描かれるものが増えて行く。4 では違った描き方になる。
</p>
<ol>
<li> グリッド、目盛り、ラベルを描かない。
</li><li> 両座標軸と、目盛りとラベルを描く。
</li><li> 描画領域の周囲の四辺と目盛りとラベルを描く。
</li><li> 描画領域の周囲の四辺と目盛りとラベルを描く。グリッドも描かれる。
</li><li> 両座標軸を原点を通るように描き、目盛りとラベルも描く。
</li></ol>

</dd>
<dt> <samp>`-h <var>height</var>'</samp></dt>
<dt> <samp>`--height-of-plot <var>height</var>'</samp></dt>
<dd><p>(実数、デフォルトは 0.6)
描画領域 (または、多重プロットの場合は仮想描画領域)
の縦のサイズに対する割合として、プロット領域の縦のサイズを指定する。
その値が 1.0 のときは、プロット領域の大きさは指定できる最大サイズになる。
目盛りとラベルはプロット領域の外側なので、普通は 1.0 よりも小さな値にする。
</p>
</dd>
<dt> <samp>`-H'</samp></dt>
<dt> <samp>`--toggle-frame-on-top'</samp></dt>
<dd><p>プロットのすぐ上に、下に描かれているのと同じフレームを描くよう指示する。
これはプロットの線が太かったり記号が大きかったりして、
他のデータセットが隠れてしまうときに指定する。
</p>
</dd>
<dt> <samp>`-k <var>length</var>'</samp></dt>
<dt> <samp>`--tick-size <var>length</var>'</samp></dt>
<dd><p>(実数、デフォルトは .02)
両座標軸上の目盛りの長さを <var>length</var> で指定する。その値が 1.0 のときは、
プロット領域の縦か横の短い方と同じ長さになる。<var>length</var>
に負の値を指定すると、目盛りはプロットの内側向きではなく、
外側に向けて描かれる。
</p>
</dd>
<dt> <samp>`-K <var>clip_mode</var>'</samp></dt>
<dt> <samp>`--clip-mode <var>clip_mode</var>'</samp></dt>
<dd><p>(整数、デフォルトは 1)
クリップ・モードを <var>clip_mode</var> にする。クリップ・モードは、
データ点が線で結ばれているが、塗りつぶされてはいないときにだけ有効である
(塗りつぶされた領域は別の方法でクリッピングされる)。
</p>
<p>３種類のクリップ・モードが、0、1、2 で指定できる。これは <code>gnuplot</code>
のクリップ・モードの番号と同じである。
モード 0 では、二つのデータ点を結ぶ線は、
どちらの点もプロット領域の中にある時にだけ結ばれる。
モード 1 では、どちらか一つが描画領域内にあれば線が結ばれる。
モード 2 では、どちらも描画領域の外にある場合でも、線が結ばれる。
しかしいずれの場合でも、結ばれた線のプロット領域の中にある部分だけが描かれる。
</p>
</dd>
<dt> <samp>`-l <var>x|y</var>'</samp></dt>
<dt> <samp>`--toggle-log-axis <var>x|y</var>'</samp></dt>
<dd><p>指定された座標軸を対数軸にするかどうかを切り替える。
デフォルトでは、どちらも対数軸ではない。
</p>
</dd>
<dt> <samp>`-L <var>top_label</var>'</samp></dt>
<dt> <samp>`--top-label <var>top_label</var>'</samp></dt>
<dd><p>(文字列、デフォルトは空)
指定された文字列 <var>top_label</var> (プロットのタイトル) をプロットの上部に置く。
文字列にはエスケープ・シーケンスが使える (<a href="#SEC71">文字列とエスケープ・シーケンス</a> 参照)。
<samp>`--title-font-size'</samp> オプションでフォントのサイズを指定できる。
フォントは通常は、<samp>`-F'</samp>
オプションで指定される目盛りや座標軸のラベルのフォントと同じだが、
<samp>`--title-font-name'</samp> でこの文字列のフォントを別に指定できる。
</p>
</dd>
<dt> <samp>`-N <var>x|y</var>'</samp></dt>
<dt> <samp>`--toggle-no-ticks <var>x|y</var>'</samp></dt>
<dd><p>指定された座標軸での目盛りの有無を切り替える。
<samp>`-g <var>grid_style</var>'</samp> での指定 1、2、3、4
でも目盛りとそのラベルの有無を制御できる。
</p>
</dd>
<dt> <samp>`-Q'</samp></dt>
<dt> <samp>`--toggle-rotate-y-label'</samp></dt>
<dd><p><em>y</em> 軸のラベル (<samp>`-Y'</samp> オプションで指定される) を置く向きを、
水平、垂直で切り替える。デフォルトではラベルは回転していて <em>y</em>
軸と平行になる。しかし一部の出力機器 (昔の X Window
や、新しくてもバグのあるもの) ではラベルを回転させられない。そんなときは
<samp>`-T X'</samp> するときに <samp>`-Q'</samp> も指定する必要があるかもしれない。
</p>
</dd>
<dt> <samp>`-r <var>right</var>'</samp></dt>
<dt> <samp>`--right-shift <var>right</var>'</samp></dt>
<dd><p>(実数、デフォルトは 0.2)
プロット領域を右に移動する。指定する移動量 <var>right</var>
は描画領域 (多重プロットのときは仮想描画領域)
の横幅に対する割合である。
これによってプロット領域の左側にあける余白を制御できる。
この値を 0.5 にすると描画領域の左半分が余白になる。
その余白に目盛りとラベルが描かれることになる。
</p>
</dd>
<dt> <samp>`-R <var>x|y</var>'</samp></dt>
<dt> <samp>`--toggle-round-to-next-tick <var>x|y</var>'</samp></dt>
<dd><p>指定された座標軸において、プロット範囲の上下限が数値の付けられている目盛りの整数倍に一致させるかどうかを切り替える。
</p>
<p>このオプションは、<samp>`-x'</samp> および <samp>`-y'</samp>
オプションのどちらか、または両方を指定するときに特に便利である。
もしどちらも指定されない場合、「整数倍」でプロット範囲が決められる。
</p>
</dd>
<dt> <samp>`-s'</samp></dt>
<dt> <samp>`--save-screen'</samp></dt>
<dd><p>画面を消さない。このオプションを指定すると、<code>graph</code>
が描画をはじめるときに、前に描いたプロットを消さないようになる。
</p>
<p>このオプションは <code>graph -T tek</code> と生の <code>graph</code>
形式でのみ有効である。Tektronix 端末とそのエミュレータでは、
一度描いた図形はそのままずっと画面上に残っている。
なので、<code>graph -T tek -s</code> を繰り返し実行することで、
多重プロットを組みたてることができる。
</p>
</dd>
<dt> <samp>`-t'</samp></dt>
<dt> <samp>`--toggle-transpose-axes'</samp></dt>
<dd><p>縦軸と横軸を入れ替えるかどうかを切り替える。各軸に対して指定したオプションは、
それぞれ入れ替わった軸に対して適用される。これはデータが <em>(y, x)</em>
の形式で読み込まれ、<samp>`-x'</samp> や <samp>`-X'</samp> オプションが
<em>x</em> 軸ではなく <em>y</em>
軸に対して適用されてしまうような場合に使える。もし <samp>`-I e'</samp>
が指定されていれば、データはエラーバーの値を含めて読み込まれ、
エラーバーの向きも垂直と水平が切り替わる。
</p>
</dd>
<dt> <samp>`-u <var>up</var>'</samp></dt>
<dt> <samp>`--upward-shift <var>up</var>'</samp></dt>
<dd><p>(実数、デフォルトは 0.2)
プロット領域を上に移動する。指定する移動量 <var>up</var>
は描画領域 (多重プロットのときは仮想描画領域)
の縦の高さに対する割合である。
これによって描画領域の下側にあける余白を制御できる。
この値を 0.5 にすると描画領域の下半分が余白になる。
その余白に目盛りとラベルが描かれることになる。
</p>
</dd>
<dt> <samp>`-w <var>width</var>'</samp></dt>
<dt> <samp>`--width-of-plot <var>width</var>'</samp></dt>
<dd><p>(実数、デフォルトは 0.6)
プロット領域の横幅を指定する。指定する横幅の長さは <var>width</var>
は描画領域 (多重プロットのときは仮想描画領域)
の横幅に対する割合である。
その値が 1.0 のときは、
描画領域の横幅と同じになる。
目盛りとラベルはプロット領域の外側なので、普通は 1.0 よりも小さな値にする。
</p>
</dd>
<dt> <samp>`-x [<var>lower_limit</var> [<var>upper_limit</var> [<var>spacing</var>]]]'</samp></dt>
<dt> <samp>`--x-limits [<var>lower_limit</var> [<var>upper_limit</var> [<var>spacing</var>]]]'</samp></dt>
<dd><p>(実数)
<var>lower_limit</var> と <var>upper_limit</var> で <em>x</em> 軸の範囲を、
<var>spacing</var> で軸上でラベルの付く目盛りの間隔を指定する
(この指定はあってもなくてもよい)。
３つの引数のうちどれか一つでも欠けている場合、または入力が <samp>`-'</samp>
(一つのハイフン)で与えられた場合、
欠けている部分はデータから自動的に計算される。
<code>graph</code> をリアルタイムでプロットするフィルタとして使うときは、
<var>lower_limit</var> と <var>upper_limit</var> の両方を指定しなければならない。
</p>
<p>デフォルトでは、この指定を他より優先する。しかし <samp>`-R x'</samp>
が指定されたときは、指定された値にもっとも近い整数値の倍数として、
ラベルの付く目盛りの間隔が決められる。
下限は指定された値よりも下の、上限は上の整数値になる。
</p>
</dd>
<dt> <samp>`-X <var>x_label</var>'</samp></dt>
<dt> <samp>`--x-label <var>x_label</var>'</samp></dt>
<dd><p>(文字列、デフォルトは空)
<em>x</em> 軸のラベルとして文字列 <var>x_label</var> を指定する。
文字列にはエスケープ・シーケンスが使える (<a href="#SEC71">文字列とエスケープ・シーケンス</a> 参照)。
<samp>`-F'</samp> と <samp>`-f'</samp> で使われるフォントとそのサイズを指定できる。
</p>
</dd>
<dt> <samp>`-y [<var>lower_limit</var> [<var>upper_limit</var> [<var>spacing</var>]]]'</samp></dt>
<dt> <samp>`--y-limits [<var>lower_limit</var> [<var>upper_limit</var> [<var>spacing</var>]]]'</samp></dt>
<dd><p>(実数)
<em>x</em> 軸 の場合 (上述) と同様に、
<var>lower_limit</var> と <var>upper_limit</var> で <em>y</em> 軸の範囲を、
<var>spacing</var> で軸上でラベルの付く目盛りの間隔を指定する。
(この指定はあってもなくてもよい)。
<code>graph</code> をリアルタイムでプロットするフィルタとして使うときは、
<var>lower_limit</var> と <var>upper_limit</var> の両方を指定しなければならない。
</p>
<p>デフォルトでは、この指定を他より優先する。しかし <samp>`-R y'</samp>
が指定されたときは、指定された値にもっとも近い整数値の倍数として、
ラベルの付く目盛りの間隔が決められる。
下限は指定された値よりも下の、上限は上の整数値になる。
</p>
</dd>
<dt> <samp>`-Y <var>y_label</var>'</samp></dt>
<dt> <samp>`--y-label <var>y_label</var>'</samp></dt>
<dd><p>(文字列、デフォルトは空)
<em>y</em> 軸のラベルとして文字列 <var>y_label</var> を指定する。
文字列にはエスケープ・シーケンスが使える (<a href="#SEC71">文字列とエスケープ・シーケンス</a> 参照)。
文字列は 90 度回転して、座標軸と平行に描画されるが、
<samp>`-Q'</samp> オプションが指定されているときは回転されない
(昔の X Window システムではラベルの回転がサポートされていないことがある。
なので <samp>`-T X'</samp> を指定するときは <samp>`-Q'</samp>
オプションを使うとよいことがある)。<samp>`-F'</samp> と <samp>`-f'</samp>
で使われるフォントとそのサイズを指定できる。
</p>
</dd>
<dt> <samp>`--bg-color <var>name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;white&quot;)
背景色を <var>name</var> に指定する。これは <code>graph -T
X</code>、<code>graph -T png</code>、<code>graph -T pnm</code>、<code>graph -T gif</code>、<code>graph
-T cgm</code>、<code>graph -T regis</code>、<code>graph -T meta</code>
のときにだけ有効である。
無効な名前が色名に指定されたときは、デフォルトの色が使われる。
使える色名に付いては <a href="#SEC73">色名</a> を参照のこと。
環境変数 <code>BG_COLOR</code> でも同様に背景色を指定できる。
</p>
<p><samp>`-T png'</samp> か <samp>`-T gif'</samp>
オプションのどちらかが使われているときは、環境変数 <code>TRANSPARENT_COLOR</code>
に背景色を指定することで、透過 PNG または透過疑似 GIF 形式の画像を生成できる。
<a href="#SEC14"><code>graph</code> の環境変数</a> 参照。
<samp>`-T svg'</samp> か <samp>`-T cgm'</samp>
オプションのどちらかが使われているときは、背景色に &quot;none&quot;
を指定することで、背景色のない画像を生成できる。
</p>
</dd>
<dt> <samp>`--bitmap-size <var>bitmap_size</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;570x570&quot;)
描かれる描画領域のサイズを、ピクセル単位で <var>bitmap_size</var>
に設定する。これは <code>graph -T X</code>、<code>graph -T png</code>、<code>graph -T
pnm</code>、<code>graph -T gif</code> のときにだけ有効である。
これらの出力形式では描画領域のサイズがピクセルで表されるからである。
環境変数 <code>BITMAPSIZE</code> でも同様に指定できる。
</p>
<p><code>graph -T X</code> のときは描画のために開かれたウィンドウが描画領域になる。
X Window
の画面上でのこのウィンドウの位置も、コマンドライン・オプションで指定できる。
たとえば <var>bitmap_size</var> を &quot;570x570+0+0&quot;
と指定すると、ウィンドウは画面の左上隅に開かれる。
</p>
<p>もし描画領域を正方形ではなく長方形にすると、
描画に使われるフォントは縦と横で違う倍率で拡大縮小されることになる。
このように拡大縮小できないフォントが指定されているときは、Hershey
ベクトル・フォントの &quot;HersheySerif&quot;
などのデフォルトのスケーラブル・フォントが使われる。
</p>
<p>過去のバージョンとの互換性を確保するため、<samp>`--bitmap-size'</samp> オプションや
<code>BITMAPSIZE</code> 環境変数の代わりに、 X のリソースの
<code>Xplot.geometry</code> でもウィンドウのサイズが指定できるようになっている。
</p>
</dd>
<dt> <samp>`--emulate-color <var>option</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;no&quot;)
<var>option</var> が &quot;yes&quot; のとき、カラーの出力画像をグレイスケールにして出力する。
このオプションは、<samp>`graph -T pcl'</samp> で PCL 5
対応機器への出力を行っているときでなければ、使うことはあまりないかもしれない。
(白黒の LaserJet プリンタなどの白黒 PCL 5
機器が搭載しているカラーからグレイスケールへの変換機能は、HP-GL/2 の 7
種類のペンの標準色を黒に置き換えるだけ (黄色も黒になる)
で、あまりいいとは言えない)。
環境変数 <code>EMULATE_COLOR</code> を &quot;yes&quot; に設定しても同じ指定ができる。
</p>
</dd>
<dt> <samp>`--frame-color <var>name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;black&quot;)
プロットの外枠と、白黒のデータセット (があればそ) のプロットの色に
<var>name</var> を指定する。
無効な名前が色名に指定されたときは、デフォルトの色が使われる。
使える色名に付いては <a href="#SEC73">色名</a> を参照のこと。
</p>
</dd>
<dt> <samp>`--frame-line-width <var>frame_line_width</var>'</samp></dt>
<dd><p>(実数、デフォルトは -1.0)
プロットの外枠の線の太さを <var>frame_line_width</var> にする。
数値は描画領域の縦か横の短い方に対する割合として指定する。
負の値を指定すると、<code>libplot</code>
ライブラリで設定しているデフォルト値が使われる。
通常、デフォルト値は描画領域の 1/850 だが、<samp>`-T X'</samp>、<samp>`-T png'</samp>、<samp>`-T
pnm'</samp>、<code>-T gif</code> のときは 0 になる。
0 になったときは、そのデバイスで描けるもっとも細い線が使われる。
これはどのデバイスでもそうである。しかし <code>idraw</code> や <code>xfig</code>
では、太さ 0 の線は表示されない。
</p>
<p><code>graph -T tek</code> および <code>graph -T regis</code>
では、線の太さはデフォルト値以外は使えない。<code>graph -T hpgl</code> でも環境変数
<code>HPGL_VERSION</code> に 2 よりも小さな値をセットしているときは、同様である
(2 がデフォルト値)。
</p>
</dd>
<dt> <samp>`--max-line-length <var>max_line_length</var>'</samp></dt>
<dd><p>(整数、デフォルトは 500)
一つのデータセットから描かれる一本の折れ線について、
一度に描ける最大のデータ点数を <var>max_line_length</var> に指定する。
データ点の数がこの数に達したときは、折れ線は複数回に分けて描画される。
この時、特に通知やメッセージなどは行われない。
これは、<samp>`-q'</samp> オプションで塗りつぶしが指定されているときは行われない。
</p>
<p>この指定は、いくつかの出力デバイス (昔の PostScript プリンタや HP-GL プロッタ)
では出力バッファの大きさに制限があることによる。
この最大点数は、環境変数 <code>MAX_LINE_LENGTH</code> でも指定できる。
<code>graph -T tek</code> や生の <code>graph</code> 形式では、
各データ点ごとにリアルタイムで描画が行われるので、このオプションは無効である。
</p>
</dd>
<dt> <samp>`--page-size <var>pagesize</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;letter&quot;)
プロットが描かれる用紙の大きさを指定する。このオプションは <code>graph -T
svg</code>、<code>graph -T ai</code>、<code>graph -T ps</code>、<code>graph -T cgm</code>、<code>graph
-T fig</code>、<code>graph -T pcl</code>、<code>graph -T hpgl</code> でだけ有効である。&quot;letter&quot;
で指定される大きさは 8.5in x 11in である。&quot;a0&quot;&hellip;&quot;a4&quot; の ISO
の用紙サイズおよび &quot;a&quot;&hellip;&quot;e&quot; の ANSI のサイズも指定できる
(&quot;letter&quot; は &quot;a&quot;、&quot;tabloid&quot; は &quot;b&quot; と同じである)。
&quot;legal&quot;、&quot;ledger&quot;、&quot;b5&quot; も指定できる。用紙サイズは、環境変数
<code>PAGESIZE</code> でも同様に指定できる。
</p>
<p><code>graph -T ai</code>、<code>graph -T ps</code>、<code>graph -T pcl</code>、<code>graph -T fig</code>
ではプロットが置かれる描画領域 (または `viewport')
は、デフォルトでは指定されたページの中央に置かれる正方形の領域である。
<code>graph -T hpgl</code> でも同様だが、ページの中央ではない。
この描画領域の縦、横の長さは、たとえば <var>pagesize</var> を &quot;letter,xsize=4in&quot;
や &quot;a4,xsize=10cm,ysize=15cm&quot; のようにすることで指定できる。
この長さは負の値になってもよい (負のときは鏡像になる)。
</p>
<p>描画領域の位置は、デフォルトの位置に対する相対座標で指定できる。たとえば
<var>pagesize</var> を &quot;letter,yoffset=1.2in&quot; や
&quot;a4,xoffset=-5mm,yoffset=2.0cm&quot; のようにするとよい。
または用紙の左下隅からの相対座標として描画領域の左下隅の座標を指定することで、
より正確に指定することもできる。それにはたとえば <var>pagesize</var> を
&quot;letter,xorigin=2in,yorigin=3in&quot; や &quot;a4,xorigin=0.5cm,yorigin=0.5cm&quot;
ようにするとよい。これらのオプションは取り混ぜて使ってもよい。
</p>
<p><code>graph -T svg</code> と <code>graph -T cgm</code> では
&quot;xoffset&quot;、&quot;yoffset&quot;、&quot;xorigin&quot;、&quot;yorigin&quot; は無視される。これらの
形式では、画像が最終的にウェブブラウザ上のどこに表示されるかは、
画像そのものから指定できないからである。しかし &quot;xsize&quot; と &quot;ysize&quot;
オプションは無視される訳ではない。
<a href="#SEC74">ページと描画領域のサイズ</a> を参照のこと。
</p>
</dd>
<dt> <samp>`--pen-colors <var>colors</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;1=red:2=green:3=blue:4=magenta:5=cyan&quot;)
プロットに使われる色の番号を <var>colors</var> で指定する。
各数字に割り当てられている色は、デフォルトの例で示される通りである。
無効な色名が指定されたときは、その番号はデフォルトの色に設定される。
使える色名については <a href="#SEC73">色名</a> を参照のこと。
</p>
</dd>
<dt> <samp>`--rotation <var>angle</var>'</samp></dt>
<dd><p>(整数、デフォルトは 0)
描画領域中のプロットを角度 <var>angle</var> だけ回転する。
その数字の角度だけ、反時計回りに回転する。
環境変数 <code>ROTATION</code> に値を設定することでも、同じ指定ができる。
</p>
<p>角度に 0 または 90
を指定することでそれぞれ、ポートレートまたはランドスケープ (用紙が縦、または横)
モードになる。前衛芸術家にも便利に使ってもらえるオプションである。
</p>
</dd>
<dt> <samp>`--title-font-name <var>font_name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;Helvetica&quot;、ただし <code>graph -T pcl</code> では
&quot;Univers&quot;、<code>graph -T png</code>、<code>graph -T pnm</code>、<code>graph -T
gif</code>、<code>graph -T hpgl</code>、<code>graph -T regis</code>、<code>graph -T tek</code>
の場合は &quot;HersheySerif&quot;)
プロットのタイトルに使われるフォントを <var>font_name</var> に設定する。
通常はタイトルのフォントは、座標軸や目盛りのラベルと同じであり、<samp>`-F'</samp>
オプションで設定されるが、<samp>`--title-font-name'</samp>
が指定されたときはこれが優先される。フォント名では大文字と小文字は同一視される。
使えるフォントの種類は、<samp>`-T'</samp> で何が指定されているかによって変わる。
すべてのフォントのリストは <a href="#SEC68">利用できるフォント</a> を参照のこと。
<code>plotfont</code> ユーティリティ・プログラムで、
使えるフォントのキャラクタ・マップを表示することができる。<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照。
</p>
</dd>
<dt> <samp>`--title-font-size <var>size</var>'</samp></dt>
<dd><p>(実数、デフォルトは 0.07)
<samp>`-L'</samp> オプションで指定されるプロットのタイトルの文字の大きさを <var>size</var>
に指定する。
文字の大きさは、プロット領域の縦または横の短い方に対する割合で指定する。
</p></dd>
</dl>

<hr size="6">
<a name="Dataset-Options"></a>
<a name="SEC10"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC9" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC11" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC8" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.6.2 データセットのオプション </h3>

<p>データセットは、ファイルから読み込まれて、
それぞれがプロットの一部として描かれる。
この節では各データセットに対する指定を行うオプションを解説する。
この節のオプションは、指定対象とするデータセットのファイルよりも、
コマンドライン上で前に指定しなければならない。
入力ファイルが複数のときは、複数回指定されるオプションもある。
</p>
<p>以下の３つのオプションは、ファイルからのデータの読み込まれ方を指定する。
</p>
<dl compact="compact">
<dt> <samp>`-I <var>data-format</var>'</samp></dt>
<dt> <samp>`--input-format <var>data-format</var>'</samp></dt>
<dd><p>このオプションに続くファイル中の、データの形式を指定する。
</p>
<dl compact="compact">
<dt> <samp>`a'</samp>  </dt>
<dd><p>テキスト形式。入力ファイル中には、<em>x</em> と <em>y</em>
座標の二つの実数値の組が表すデータ点が並んで格納されていると解釈される。
データ点の <em>x</em> と <em>y</em> 座標は同じ行に書かれている必要はなく、
また各点が違う行になっている必要もない。
しかし空行 (連続する二つの改行文字がファイル中にあったとき)
は、そこがデータセットの終わりで、次の行から別のデータセットであると解釈される。
</p>
</dd>
<dt> <samp>`e'</samp></dt>
<dd><p>エラーバーのデータを含むテキスト形式。<samp>`a'</samp> 形式と同じだが、
<em>(x,y)</em> という二つの数値の組ではなく、<em>x</em>、<em>y</em>、<i>error</i>
の３つの数値の組で一つのデータ点が表されている、と解釈される。
</p>
</dd>
<dt> <samp>`g'</samp></dt>
<dd><p><code>gnuplot</code> が出力する、テキスト形式の「表形式 (`table' format)」。
</p>
</dd>
<dt> <samp>`f'</samp></dt>
<dd><p>単精度実数のバイナリ形式。
入力ファイル中には、<em>x</em> と <em>y</em>
座標の二つの単精度浮動小数点実数で表されるデータ点が、
並んで格納されていると解釈される。データセットの区切りは一つの <code>FLT_MAX</code>
(単精度浮動小数点実数の取りうる最大値) の値を持つ単精度実数で表される。
ほとんどのシステムではこの値は 3.4x10^38 である。
</p>
</dd>
<dt> <samp>`d'</samp></dt>
<dd><p>倍精度実数のバイナリ形式。
入力ファイル中には、<em>x</em> と <em>y</em>
座標の二つの倍精度浮動小数点実数で表されるデータ点が、
並んで格納されていると解釈される。データセットの区切りは一つの <code>DBL_MAX</code>
(倍精度浮動小数点実数の取りうる最大値) の値を持つ倍精度実数で表される。
ほとんどのシステムではこの値は 1.8x10^308 である。
</p>
</dd>
<dt> <samp>`i'</samp></dt>
<dd><p>整数のバイナリ形式。
入力ファイル中には、<em>x</em> と <em>y</em>
座標の二つの整数で表されるデータ点が並んで格納されていると解釈される。
データセットの区切りは一つの <code>INT_MAX</code> (整数の取りうる最大値)
の値を持つ整数で表される。ほとんどのシステムはこの値は 2^31-1 である。
</p></dd>
</dl>

</dd>
<dt> <samp>`-a [<var>step_size</var> [<var>lower_limit</var>]]'</samp></dt>
<dt> <samp>`--auto-abscissa [<var>step_size</var> [<var>lower_limit</var>]]'</samp></dt>
<dd><p>(実数、デフォルトは 1.0 および 0.0)
横軸 (<em>x</em> 軸) の値を自動生成する。
データの入力形式 (<samp>`a'</samp>、<samp>`e'</samp>、<samp>`f'</samp>、<samp>`d'</samp>、<samp>`i'</samp>)
がなんであっても、このオプションを指定すると、入力ファイル中には横軸
(<em>x</em> 軸) の値は入っておらず、数値はすべて縦軸 (<em>y</em> 軸)
の値であると解釈される。<em>x</em> の値の増分が <var>step_size</var>
で、<em>x</em> の値の開始値が <var>lower_limit</var> で指定される。
ファイル中に横軸の値も含まれているものとして読み込むように戻すときは、
<samp>`-a 0'</samp> を指定すれば自動生成が無効になり、同時に <var>step_size</var> と
<var>lower_limit</var> がデフォルト値に戻る。
</p>
</dd>
<dt> <samp>`-B'</samp></dt>
<dt> <samp>`--toggle-auto-bump'</samp></dt>
<dd><p>線種の番号 (後述の <var>-m</var> オプションを参照のこと)
はデフォルトではデータセットの開始点で一つずつ自動的に増えていくが、
このオプションでそれをするかどうかを切り替えられる。
</p></dd>
</dl>

<p>以下のオプションは、プロットの一部をなす各個別のデータセットを、
どのように描くかを指定する。これらのオプションで６種類の「属性」 (記号の種類
symbol type、記号のフォント symbol font、線種 linemode、線の太さ line
thickness、塗りつぶしの濃さ fill fraction、カラー/白黒 color/monochrome)
を指定できる。
</p>
<dl compact="compact">
<dt> <samp>`-m <var>line_mode</var>'</samp></dt>
<dt> <samp>`--line-mode <var>line_mode</var>'</samp></dt>
<dd><p>(整数、デフォルトは 1)
このオプションに続くデータットを描く線のモード (線種) を <var>line_mode</var>
で指定する。線種 0 では線は全然描かれず、
データ点の記号だけになる。データセットが白黒で描かれるときは、各 <var>line_mode</var>
の意味する線種は以下のようになる。
</p>
<ol>
<li> 実線
</li><li> 点線
</li><li> 一点鎖線
</li><li> 細かい破線
</li><li> 長い破線
</li></ol>

<p>これより大きな数字 (5 以上の <var>line_mode</var> など)
では上の５つが上の順で繰り返される。白黒の場合はしたがって線種は 0
を除いて５種類である。カラーの場合 (<samp>`-C'</samp> オプションで指定される) は、1
から 5 の各線種は以下のように解釈される。
</p>
<ol>
<li> 赤、実線
</li><li> 緑, 実線
</li><li> 青, 実線
</li><li> 赤紫, 実線 (マゼンタ)
</li><li> 青緑, 実線 (シアン)
</li></ol>

<p>線種 6 から 10 では色は上と同じだが、実線ではなく点線になる。
11 から 15 では一点鎖線に、16 から 20 では細かい破線に、21 から 25
では長い破線になる。
したがってカラーモードでは、0 を除いて 25 種類の線種があることになる。
負の線種を指定すると線は描かれないが、
データ点に置かれる記号は、その線種 (の符号を取った線種) の色で描かれる。
</p>
</dd>
<dt> <samp>`-S [<var>symbol_number</var> [<var>symbol_size</var>]]'</samp></dt>
<dt> <samp>`--symbol [<var>symbol_number</var> [<var>symbol_size</var>]]'</samp></dt>
<dd><p>(整数と実数、デフォルトは 0 と 0.03)
データ点に記号を描く。<var>symbol_number</var> で記号の種類を、<var>symbol_size</var>
で記号の大きさを指定する。
記号の大きさはプロット領域の縦あるいは横の短い方の長さに対する割合で指定する。
カラーモードでは、
記号はそのデータセットでデータ点を結ぶラインと同じ色で描かれる。
</p>
<p><samp>`-m'</samp> オプションに負の数で線種を指定することで、
記号の色を指定し、かつデータ点を線で結ばないように指定できる (上述)。
</p>
<p>以下の表に、最初のいくつかの記号を示す
(記号 0 はまったく記号を描かないことを表す)。
</p>
<ol>
<li> 点
</li><li> プラス記号 (<em>+</em>)
</li><li> アスタリスク (<em>*</em>)
</li><li> 円
</li><li> バツ印
</li></ol>

<p>0 番から 31 番までの記号は <code>libplot</code> ライブラリに組み込まれている。
<a href="#SEC72">プロットに使える記号</a> 参照。32 番以降の記号は、
symbol フォントの文字を指定していると解釈される。
これは <samp>`--symbol-font-name'</samp> オプションで指定できる (後述)。
</p>
</dd>
<dt> <samp>`-W <var>line_width</var>'</samp></dt>
<dt> <samp>`--line-width <var>line_width</var>'</samp></dt>
<dd><p>(実数、デフォルトは -1.0)
データセット中で連続するデータ点を結ぶ線の太さを <var>line_width</var> にする。
その数値は、描画領域の縦又は横の短い方に対する割合で指定する。
負の値を指定すると、<code>libplot</code> ライブラリのデフォルト値が使われる。
デフォルト値は描画領域の一辺の長さの 1/850 だが、
<samp>`-T X'</samp>、<samp>`-T png'</samp>、<samp>`-T pnm'</samp>、<code>-T gif</code> では 0 になる。
太さに 0 を指定するとどの出力デバイスでも、
そのデバイスでもっとも細いラインが描かれるが、
<code>idraw</code> や <code>xfig</code> は太さ 0 の線は表示しないようになっている。
</p>
<p><code>graph -T tek</code> および <code>graph -T regis</code>
ではデフォルトの太さ以外の線は描けない。<code>graph -T hpgl</code> でも、環境変数
<code>HPGL_VERSION</code> に 2
よりも小さな値を指定したときは (デフォルト値は
2)、デフォルトの太さ以外の線は描けない。
</p>
</dd>
<dt> <samp>`-q <var>fill_fraction</var>'</samp></dt>
<dt> <samp>`--fill-fraction <var>fill_fraction</var>'</samp></dt>
<dd><p>(実数、デフォルトは -1.0)
一つのデータセット中の連続するデータ点が線で結ばれる設定になっているとき、
線が作る多角形を塗りつぶす色の濃さを <var>fill_fraction</var> で指定する。
<var>fill_fraction</var>=1.0 にするともっとも濃くなる (線の色と同じ濃さになる)。
<var>fill_fraction</var>=0.0 にすると、多角形の内側は白くなる。
<var>fill_fraction</var> の値を負に設定すると、多角形の内側には透明が設定される。
</p>
<p>もし多角形どうしが重なる部分がある場合、「偶奇塗りつぶし則
(even-odd fill rule)」でどこがその多角形の内側か、あるいは外側かが決められる。
<cite>PostScript Language Reference Manual</cite> に具体的な説明がある。
</p>
<p><samp>`-q'</samp> オプションは <code>graph -T tek</code> では無効である。
また <code>graph -T hpgl</code> では環境変数 <code>HPGL_VERSION</code> に 2
よりも小さな値を指定したときは (デフォルト値は 2)、機能が制限される。
</p>
</dd>
<dt> <samp>`-C'</samp></dt>
<dt> <samp>`--toggle-use-color'</samp></dt>
<dd><p>そのデータセットの描画がカラーか白黒かを切り替える。
線種に指定されている数値の示す意味が、描画がカラーか白黒かで変わる。
上述の <samp>`-m'</samp> オプションを参照のこと。
</p>
</dd>
<dt> <samp>`--symbol-font-name <var>symbol_font_name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;ZapfDingbats&quot;、ただし
<samp>`-T png'</samp>、<samp>`-T pnm'</samp>、<samp>`-T gif'</samp>、<samp>`-T pcl'</samp>、<samp>`-T
hpgl'</samp>、<samp>`-T regis'</samp>、<code>-T tek</code> では &quot;HersheySerif&quot;)
32 番以降の数字で指定された記号をどのフォントから取るかを
<var>symbol_font_name</var> に指定する。フォント名では大文字と小文字は区別されない。
もし無効なフォントが指定された場合は、デフォルトのフォントが使われる。
使えるフォントは <samp>`-T'</samp> オプションで何が指定されているかによって変わる。
たとえば <samp>`-T pcl'</samp> や <samp>`-T hpgl'</samp> では、
通常は Wingdings フォントが有効になり、これに含まれる記号を使えるようになる。
すべてのフォントのリストは <a href="#SEC68">利用できるフォント</a> を参照のこと。
<code>plotfont</code> ユーティリティ・プログラムで、
使えるフォントのキャラクタ・マップを表示することができる。<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照。
</p></dd>
</dl>

<hr size="6">
<a name="Multiplot-Options"></a>
<a name="SEC11"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC10" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC12" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC8" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.6.3 多重プロットのオプション </h3>

<p>以下のオプションは、多重プロット
(複数のプロットを一つのウィンドウや用紙にまとめる) に関するものである。
コマンドライン上のオプションは、
それの後に指定されるデータ・ファイルをプロットするときに適用されるが、
<samp>`--reposition'</samp> をその区切りとして使うことができる。
</p>
<dl compact="compact">
<dt> <samp>`--reposition <var>x</var> <var>y</var> <var>size</var>'</samp></dt>
<dd><p>(実数、デフォルトは 0.0、0.0、1.0)
次のプロットを描く「仮想描画領域」を、一辺の長さが <var>size</var>
の正方形にし、左下隅が (<var>x</var>, <var>y</var>) になるように配置する。
座標値は、物理的な用紙上の全体プロットの描画範囲上で (0, 0) がその左下隅、(1, 1)
がその右上隅になるように正規化した値で与える。
仮想描画領域の中に描かれるプロット領域の大きさは <samp>`-h'</samp> と <samp>`-w'</samp>
オプションで、プロット領域の場所は <samp>`-u'</samp> と <samp>`-w'</samp>
オプションで指定できる。
<samp>`--reposition'</samp> あとでは、
これらの４つのオプションの数値は物理的な全体プロットの描画領域に対してではなく、
仮想描画領域中のプロット範囲に対する数値であると解釈される。
</p>
</dd>
<dt> <samp>`--blankout <var>blankout_fraction</var>'</samp></dt>
<dd><p>(実数、デフォルトは 1.3)
多重プロットに追加するプロットを描くとき、
そのプロットを置く場所が空いていなければならない。
<var>blankout_fraction</var>=1.0 を指定すると、
新たにプロットを置こうとする場所にある画像が消去される。
<var>blankout_fraction</var>=1.3 を指定すると、そのプロットよりも 30%
だけ大きな領域で画像が消去される。
プロットを横に並べようとするときは、1.0 がちょうどよい。
</p>
<p><code>graph -T tek</code> では画像の消去はできない。
<code>graph -T hpgl</code> では環境変数 <code>HPGL_VERSION</code> と <code>HPGL_OPAQUE_MODE</code>
がデフォルト値 (それぞれ &quot;2&quot; と &quot;yes&quot;) でないときには、画像の消去はできない。
</p></dd>
</dl>

<hr size="6">
<a name="Raw-graph-Options"></a>
<a name="SEC12"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC11" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC13" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC8" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.6.4 <code>graph</code> の生出力データのオプション </h3>

<p>以下のオプションは <code>graph</code> 生出力の形式に関するものであり、
<samp>`-T'</samp> による出力デバイスの形式の指定を何もしなかった時に有効である。
この場合 <code>graph</code> は graphics metafile
形式で出力を行うが、これを <code>plot</code>
プログラムで他の形式に変換することもできる。
以下のオプションは、コマンドラインでどのファイル名よりも先に指定され、
生成されるプロット (あるいは多重プロット) 全体に作用する。
</p>
<dl compact="compact">
<dt> <samp>`-O'</samp></dt>
<dt> <samp>`--portable-output'</samp></dt>
<dd><p>GNU metafile 出力を、バイナリ形式 (デフォルト) ではなく、ポータブル形式
(テキスト形式、人間の読める形式) で行う。これは環境変数 <code>META_PORTABLE</code>
を &quot;yes&quot; に設定することでも指定できる。
</p></dd>
</dl>

<hr size="6">
<a name="Info-Options"></a>
<a name="SEC13"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC12" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC14" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC8" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.6.5 情報を表示するオプション </h3>

<p>以下のオプションで、必要な情報を表示させることができる。
</p>
<dl compact="compact">
<dt> <samp>`--help'</samp></dt>
<dd><p>コマンドライン・オプションのリストを表示させ、そのまま実行を終了する。
</p>
</dd>
<dt> <samp>`--help-fonts'</samp></dt>
<dd><p>利用可能なフォントのリストを表示して、そのまま終了する。
出力される内容は、<samp>`-T'</samp> オプションで指定される出力デバイスによって変わる。
<code>graph -T X</code>、<code>graph -T svg</code>、<code>graph -T ai</code>、<code>graph -T
ps</code>、<code>graph -T cgm</code>、<code>graph -T fig</code> では PostScript 標準の 35
種類のフォントが使える。<code>graph -T svg</code>、<code>graph -T ai</code>、<code>graph -T
pcl</code>、<code>graph -T hpgl</code> では 45 種類の PCL 5 標準フォントが使える。
<code>graph -T pcl</code> と <code>graph -T hpgl</code>
ではヒューレット・パッカードのベクトル・フォントが使える。
上に挙げたすべての出力形式、および
<code>graph -T png</code>、<code>graph -T pnm</code>、<code>graph -T
gif</code>、<code>graph -T regis</code>、<code>graph -T tek</code>
では 22 種類の Hershey ベクトル・フォントが使える。
<code>graph</code> の生出力では原理的にこれらのフォントがすべて使える。
どの形式にも、<code>graph</code> 生出力から <code>plot</code> で変換できるからである。
<code>plotfont</code> ユーティリティ・プログラムで、
使えるフォントのキャラクタ・マップを表示することができる。<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照。
</p>
</dd>
<dt> <samp>`--list-fonts'</samp></dt>
<dd><p><samp>`--help-fonts'</samp> と同じだが、
他のプログラムにパイプで渡して処理しやすいように、
フォントのリストを１カラムで出力する。
<samp>`-T'</samp>
オプションでの出力デバイスの指定が何もないときは、
サポートされているすべてのフォントのリストが表示される。
</p>
</dd>
<dt> <samp>`--version'</samp></dt>
<dd><p><code>graph</code> および GNU plotting utilities パッケージのバージョン番号を表示して、
そのまま終了する。
</p></dd>
</dl>

<hr size="6">
<a name="graph-Environment"></a>
<a name="SEC14"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC13" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC2" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.7 <code>graph</code> の環境変数 </h2>

<p><code>graph</code> の動作には、環境変数を読んでその値により制御されるものがある。
<code>BITMAPSIZE</code>、<code>PAGESIZE</code>、<code>BG_COLOR</code>、<code>EMULATE_COLOR</code>、
<code>MAX_LINE_LENGTH</code>、<code>ROTATION</code> については上述したとおりである。
これらの環境変数はそれぞれ、コマンドライン・オプションの
<samp>`--bitmap-size'</samp>、<samp>`--page-size'</samp>、<samp>`--bg-color'</samp>、
<samp>`--emulate-color'</samp>、<samp>`--max-line-length'</samp>、<samp>`--rotation'</samp>
と同じ働きを持つ。他にも、特定の出力デバイスに対してだけ有効な環境変数がある。
</p>
<p><code>graph -T X</code> では X Window の画面にウィンドウが一つ開かれ、
そこにプロットが描画されるが、このとき <code>DISPLAY</code>
環境変数が設定されていれば、
それで示されるディスプレイにウィンドウが開かれる。
</p>
<p>PNG または疑似 GIF 形式を生成する <code>graph -T png</code> または <code>graph -T gif</code>
に対しては、二つの環境変数が用意されている。<code>INTERLACE</code> が &quot;yes&quot;
のときは、出力される画像はインターレース形式になる。<code>TRANSPARENT_COLOR</code>
に色名を指定しておくと、出力される画像のその色の部分が透明に設定され、PNG や
GIF を扱う多くのアプリケーションで透明として扱われる。
使える色名については <a href="#SEC73">色名</a> を参照のこと。
</p>
<p><code>graph -T pnm</code> では Portable Anymap (PBM/PGM/PPM)
形式で出力されるが、環境変数 <code>PNM_PORTABLE</code> が &quot;yes&quot; のとき、
出力は PBM、PGM、PPM のポータブル形式 (人間が読めるテキスト形式) で行われる。
そうでない場合はバイナリ形式 (これがデフォルト) で行われる。
</p>
<p>ウェブ用のベクトル画像の形式である WebCGM プロファイルにしたがった CGM
形式のファイルを <code>graph -T cgm</code> で生成する場合に有効な環境変数が二つある。
デフォルトでは、生成される CGM ファイルはバージョン 3 の規格に沿っているが、
マイクロソフト・オフィスなどの古い CGM 表示ソフトウェアはほとんど、CGM
のバージョン 1 しか扱えない。そこで環境変数 <code>CGM_MAX_VERSION</code> を
&quot;1&quot;、&quot;2&quot;、&quot;3&quot;、&quot;4&quot; のどれかに設定することで、出力される CGM
のバージョンの最大値を指定できる (&quot;4&quot; がデフォルト)。また <code>CGM_ENCODING</code>
で CGM ファイルのエンコーディングを指定できる。これには
&quot;clear_text&quot; (人が読めるテキスト形式) と &quot;binary&quot; が指定できる (&quot;binary&quot;
がデフォルト)。WebCGM プロファイルではバイナリ形式が要求される。
</p>
<p><code>graph -T pcl</code>
ではヒューレット・パッカードのプリンタまたはプロッタの出力形式である PCL 5
形式で出力されるが、このとき <code>PCL_ASSIGN_COLORS</code> 環境変数が有効である。
PCL 5 出力をカラープリンタなどに出力する際に指定する。
これにより色の再現性を正確にするために、内部で出力デバイスに、
各色を描画するための「論理ペン」が任意に設定できるようになる。
&quot;no&quot; にセットされるとあらかじめ設定されている色のペンだけが用いられ、
他の色は濃淡の変化 (シェイディング) によって擬似的に描画される。
世の中の PCL 5 デバイスは、カラーより白黒が多いため、デフォルトでは &quot;no&quot;
であり、色はシェイディング (グレイスケール) に置き換えられる。
</p>
<p><code>graph -T hpgl</code> では HP-GL
(ヒューレット・パッカード・グラフィクス・ランゲージ)
形式の出力が生成されるが、これにもいくつかの環境変数が用意されている。
もっとも重要なのは <code>HPGL_VERSION</code> で、これには &quot;1&quot;、&quot;1.5&quot;、&quot;2&quot;
のいずれかが指定できる (&quot;2&quot; がデフォルト)。
&quot;1&quot; は純正の HP-GL、&quot;1.5&quot; は HP7550A グラフィクス・プロッタおよび
HP758x、HP7595A、HP7596A ドラフティング・プロッタに出力できる形式
(HP-GL にいくつかの HP-GL/2 拡張を加えたもの)、
&quot;2&quot; は新しい HP-GL/2 でそれぞれ描画するよう指示する。
もしバージョンが &quot;1&quot; または &quot;1.5&quot; にセットされていると、
使えるフォントはベクトル・フォントのみで、
線はすべてデフォルトの太さで描かれる (<samp>`-W'</samp> は無効になる)。
さらにバージョンが &quot;1&quot;
のときは、任意の多角形を線の色で塗りつぶす機能が使えなくなる (<samp>`-q'</samp>
オプションは座標軸に沿って置かれた円や長方形を塗りつぶすときに使える)。
</p>
<p><code>graph -T hpgl</code> のときの用紙上の描画領域は <code>HPGL_ROTATE</code> 環境変数を
&quot;yes&quot; に設定すると反時計回りに 90度回転させることができる。<code>--rotation</code>
オプションでは描画領域を回転させ、
その左下隅の位置を用紙の左下隅からの相対位置で指定するため、これとは異なった効果になる。
<code>HPGL_ROTATE</code> 環境変数に設定できる値は、&quot;no&quot; と &quot;yes&quot; に加えて、
&quot;0&quot;、&quot;90&quot;、&quot;180&quot;、および &quot;270&quot; である。&quot;no&quot; と &quot;yes&quot; は &quot;0&quot; と &quot;90&quot;
とそれぞれ同じである。
&quot;180&quot; と &quot;270&quot; は <code>HPGL_VERSION</code> が &quot;2&quot; のとき
(デフォルトがそうである) にだけ有効である。
</p>
<p>不透明化機能による、白い線や白い色による塗りつぶしは、<code>HPGL_VERSION</code> が &quot;2&quot;
(デフォルト) で環境変数 <code>HPGL_OPAQUE_MODE</code> が &quot;yes&quot;
のときに可能になる。もしこれが &quot;no&quot;
のときは不透明化による白い色での塗りつぶしは行われず、
白色の線 (通常は 0 番のペンで描かれる) も描かれない。
この機能は昔の HP-GL/2 デバイスに適している。
たとえば HP-GL/2 ペン・プロッタは不透明化や 0
番のペンによる白色の線には対応していない。また古い HP-GL/2
デバイスの中には不透明化機能が不十分なものもある。
</p>
<p>デフォルトでは、<code>graph -T hpgl</code>
では使えるペンはあらかじめ決められているものだけである。
描画時点でどのペンを使うかは、<code>HPGL_PENS</code> 環境変数で指定される。
<code>HPGL_VERSION</code> が &quot;1&quot; のときは <code>HPGL_PENS</code> のデフォルトのペンは
&quot;1=black&quot; である。<code>HPGL_VERSION</code> が &quot;1.5&quot; または &quot;2&quot;のときは、
<code>HPGL_PENS</code> のデフォルト値は
<code>&quot;1=black:2=red:3=green:4=yellow:5=blue:6=magenta:7=cyan&quot;</code> である。
指定の仕方は見ての通りである。<code>HPGL_PENS</code>
を指定することで 1&hellip;31 番のどのペンにも色を割り当てることができる。
指定できる色名については <a href="#SEC73">色名</a> を参照のこと。
1 番のペンはいつでも使える。その色は黒である必要はない。
2&hellip;31 番の他のペンはあってもなくてもよい。
</p>
<p><code>HPGL_VERSION</code> が &quot;2&quot; のときは <code>graph -T hpgl</code> では
<code>HPGL_ASSIGN_COLORS</code> も有効である。もしこれが &quot;yes&quot;
にセットされていれば、<code>graph -T hpgl</code> で使えるペンの色は <code>HPGL_PENS</code>
による制約を受けない。1&hellip;31
番の「論理ペン」に必要に応じて色が割り当てられる。
LaserJet プリンタや DesignJet 以外の、他の HP-GL/2
機器でこの機能が使えるものはあまり多くはないため、デフォルトでは &quot;no&quot; である。
特に HP-GL/2 ペン・プロッタは非対応である。
</p>
<p><code>graph -T tek</code> では Tektronix 端末のための出力が行われるが、
環境変数 <code>TERM</code> が有効である。もし <code>TERM</code> が &quot;xterm&quot;、
&quot;nxterms&quot;、&quot;kterm&quot; のいずれかであればそれぞれ、<code>graph</code>
がその時実行されている環境は X Window システム上の VT100
端末エミュレータの <code>xterm</code>、<code>nxterm</code>、<code>kterm</code>
であると判断される。このとき、<code>graph -T tek</code>
では描画が行われる前に、xterm に付属していて通常は隠れている
Tektronix のウィンドウを、
前面にポップアップさせるエスケープ・シーケンスが送られる。
また描画が行われた後には、元の VT100
端末に制御を戻すためのエスケープ・シーケンスが送られる。
その際、Tektronix のウィンドウは画面に残ったままになる。
</p>
<p><code>TERM</code> が &quot;kermit&quot;、&quot;ansi.sys&quot;、&quot;nansi.sys&quot;
のいずれかの時は、MS-DOS 版の <code>kermit</code> 上の VT100
エミュレータ上であるとみなされる。
このとき、<code>graph -T tek</code> では描画が行われる前に、VT100 エミュレータから
Tektronix のウィンドウに切り替えるエスケープ・シーケンスが送られる。
また出力には Tektronix 制御コードは、<code>kermit</code> 特有のものが使われる。
このとき、使える色数には制限がある (<code>ansi.sys</code> の 16 色はサポートされる)。
また描画が行われた後には、元の VT100
端末に制御を戻すためのエスケープ・シーケンスが送られる。
キーボードで `ALT' - `-' をタイプすると、
VT100 モードと Tektronix モードの切り替えが手動でできる。
</p>
<hr size="6">
<a name="plot"></a>
<a name="SEC15"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC14" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC16" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC2" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 3. <code>plot</code> コマンド </h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC16">3.1 <code>plot</code> コマンドの使い方</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       plot は何をするコマンドなのか？
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC17">3.2 <code>plot</code> のコマンドライン・オプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     plot が解釈できるコマンドライン・オプション
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC18">3.3 <code>plot</code> の環境変数</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    plot が参照する環境変数
</td></tr>
</table>

<hr size="6">
<a name="plot-Examples"></a>
<a name="SEC16"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC15" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC17" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC15" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 3.1 <code>plot</code> コマンドの使い方 </h2>

<p>GNU プロット・フィルタ  <code>plot</code> は、GNU graphics metafile
形式の画像ファイルを画面に表示したり、他の形式に変換したりするコマンドである。
入力はコマンドラインでファイル名を指定するか、標準入力から与える。
出力形式は <samp>`-T'</samp> で指定する。指定できる形式は、
&quot;X&quot;、&quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot;、&quot;svg&quot;、&quot;ai&quot;、&quot;ps&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;、
&quot;regis&quot;、&quot;tek&quot;、&quot;meta&quot;
で、&quot;meta&quot; がデフォルトである。
</p>
<p>metafile
形式は、特定の出力デバイスに依存しないベクトル形式の画像フォーマットである。
デフォルトではバイナリ形式だが、人間に読めるテキスト形式で出力させることもできる
(<a href="#SEC75">Metafile 形式</a> 参照)。
<code>graph</code>、<code>pic2plot</code>、<code>tek2plot</code>、<code>plotfont</code>
の各コマンドは <samp>`-T'</samp> オプションによる出力形式の指定がないときは metafile
形式で出力する。<code>libplot</code> ライブラリでも metafile
形式の出力が生成できる。一般に metafile 形式では複数ページの画像が記述できるが、
<code>graph</code> コマンドで生成できるのは単ページの画像だけである。
</p>
<p><code>plot</code> コマンドと metafile という画像形式はどちらも、
画像ファイルをベクトル形式で保存しておいたり、
様々なソフトウェアで表示、編集したりするのに便利に使える。
以下にその例を示す。
</p>
<p>テキストファイル中で <em>x</em> と <em>y</em>
が交互に並んでいるデータをプロットするには、<code>graph</code>
で以下のようにすればよい。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">graph &lt; datafile &gt; test.meta
</pre></td></tr></table>

<p>生成されるファイル <tt>`test.meta'</tt> は単ページの metafile 形式の画像である。
同様に、以下のようにしても一つの画像だけからなるプロットを metafile
形式で作ることができる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 1 2 0 | spline | graph &gt; test.meta
</pre></td></tr></table>

<p>生成したプロットを X Window の画面上に表示するには、以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plot -T X test.meta
</pre></td></tr></table>

<p>または
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plot -T X &lt; test.meta
</pre></td></tr></table>

<p>としてもよい。また以下のようにすれば、生成したプロットを PostScript
プリンタで印刷できるだろう。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plot -T ps &lt; test.meta | lpr
</pre></td></tr></table>

<p>フリーのドロー系ソフトウェア <code>idraw</code> で編集するには、以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plot -T ps &lt; test.meta &gt; test.ps
idraw test.ps
</pre></td></tr></table>

<p>PNG 形式にするには、以下のようにする。
</p><table><tr><td>&nbsp;</td><td><pre class="example">plot -T png &lt; test.meta &gt; test.png
</pre></td></tr></table>

<p>&quot;portable anymap&quot; 形式 (PBM、PGM、PPM 形式のから選ばれる適切な形式)
を生成するには、以下のようにする。
</p><table><tr><td>&nbsp;</td><td><pre class="example">plot -T pnm &lt; test.meta &gt; test.pnm
</pre></td></tr></table>

<p>疑似 GIF 形式を生成するには、以下のようにする。
</p><table><tr><td>&nbsp;</td><td><pre class="example">plot -T gif &lt; test.meta &gt; test.gif
</pre></td></tr></table>

<p>ウェブブラウザで表示できる SVG または WebCGM 形式の画像を生成するには、
以下のようにする。
表示するには、ウェブブラウザがこれらの形式をサポートしている必要がある。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plot -T svg &lt; test.meta &gt; test.svg
plot -T cgm &lt; test.meta &gt; test.cgm
</pre></td></tr></table>

<p>アドビの Illustrator で表示、編集できる形式で出力するには、
以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plot -T ai &lt; test.meta &gt; test.ai
</pre></td></tr></table>

<p>フリーのドロー系ソフトウェア <code>xfig</code>
で編集できる画像形式にし、<code>xfig</code> で開くには、以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plot -T fig &lt; test.meta &gt; test.fig
xfig test.fig
</pre></td></tr></table>

<p><code>plot -T pcl</code>、<code>plot -T hpgl</code>、<code>plot -T regis</code>、<code>plot -T
tek</code> で、その他の形式も生成できる。
</p>
<p><code>plot</code> コマンドの挙動は、実行する環境にあわせて変えることができる。
<code>PAGESIZE</code> 環境変数は、
<code>plot -T svg</code>、<code>plot -T ai</code>、<code>plot -T ps</code>、<code>plot -T
cgm</code>、<code>plot -T fig</code>、<code>plot -T pcl</code>、<code>plot -T hpgl</code>
に対して有効である。同様に環境変数 <code>BITMAPSIZE</code> は
<code>plot -T X</code>、<code>plot -T png</code>、<code>plot -T pnm</code>、<code>plot -T
gif</code> のときに有効である。また <code>DISPLAY</code> 環境変数は <code>plot -T X</code>
に、<code>TERM</code> 環境変数は <code>plot -T tek</code> のとき有効である。
この他に、<code>plot -T pcl</code> と <code>plot -T hpgl</code>
のときにだけ有効な環境変数がいくつかある。詳細については
<a href="#SEC18"><code>plot</code> の環境変数</a> を参照のこと。
</p>
<hr size="6">
<a name="plot-Invocation"></a>
<a name="SEC17"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC16" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC18" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC15" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 3.2 <code>plot</code> のコマンドライン・オプション </h2>

<p>GNU プロット・フィルタ <code>plot</code> は、GNU graphics metafile
形式のファイルを表示したり、他の形式に変換したりするコマンドである。
出力形式は <samp>`-T'</samp> で指定する。GNU metafile 形式は GNU
<code>graph</code>、<code>pic2plot</code>、<code>tek2plot</code>、<code>plotfont</code>
の各コマンドや、GNU <code>libplot</code>
ライブラリを使った他のアプリケーションで生成できる。
GNU metafile 形式の技術的な詳細に付いては <a href="#SEC75">Metafile 形式</a> を参照のこと。
</p>
<p>入力ファイルの名前をコマンドライン上で指定できる。
その順番やコマンドライン・オプションの順番は、意味を持たない。
ファイル名が何も指定されないか、<samp>`-'</samp>
というファイル名が指定されたときは、標準入力から読み込まれる。
出力は、<samp>`-T X'</samp> が指定されない限りは標準出力に行われる。
<samp>`-T X'</samp> が指定されたときは X Windows
の画面上のウィンドウに描画され、標準出力にはなにも出力されない。
</p>
<p>以下に、指定できるコマンドライン・オプションのリストを載せる。
コマンドライン・オプションは４種類に分けられる。
</p>
<ol>
<li>
描画パラメータを指定するオプション。
</li><li>
<code>plot</code> 生出力のデータ (<samp>`-T'</samp> で何も指定されないときの出力形式)
に関するオプション。
</li><li>
入力される metafile 形式を指定する
(後方互換性を維持するためだけに用意されている) オプション。
</li><li>
情報を表示するためのオプション (<samp>`--help'</samp> など)。
</li></ol>


<p>引数を取るオプションでは、
説明の最初にカッコ書きでその引数の型とデフォルト値を示している。
</p>
<p>以下のオプションは、描画パラメータを指定する。
</p>
<dl compact="compact">
<dt> <samp>`-T <var>type</var>'</samp></dt>
<dt> <samp>`--output-format <var>type</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;meta&quot;)
ディスプレイの種類、あるいは出力形式を <var>type</var> で指定する。
指摘できる文字列は
&quot;X&quot;、&quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot;、&quot;svg&quot;、&quot;ai&quot;、&quot;ps&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;、&quot;regis&quot;、&quot;tek&quot;、&quot;meta&quot;
のいずれかである。
それぞれ、
X Window システム、PNG 形式、portable anymap (PBM/PGM/PPM) 形式、疑似 GIF
形式、XML ベースの Scalable Vector Graphics 形式、Adobe Illustrator
形式、<code>idraw</code> で編集できる PostScript
形式、ウェブ用のベクトル画像形式である WebCGM 形式、<code>xfig</code>
で編集できる形式、ヒューレット・パッカードの PCL 5 プリンタ言語、
ヒューレット・パッカード・グラフィクス言語 (デフォルトでは HP-GL/2)、
DEC で開発された ReGIS (remote graphics
instruction set) 形式、Tektronix 形式、特定のデバイスに依存しない GNU graphics
metafile 形式である。<samp>`--display-type'</samp> は古いので
<samp>`--output-format'</samp> を使うべきである。
</p>
</dd>
<dt> <samp>`-p <var>n</var>'</samp></dt>
<dt> <samp>`--page-number <var>n</var>'</samp></dt>
<dd><p>(正の整数)
変換される metafile、または複数の metafile データの中から、
<var>n</var> ページ目だけを表示する。
</p>
<p>metafile 形式では複数のページを保持でき、先頭ページのページ番号は 1 である。
また各ページには一つまたは複数の「フレーム」を置くことができる。
<code>plot -T X</code>、<code>plot -T regis</code>、<code>plot -T tek</code>
ではプロットはリアルタイムで行われ、
各フレームを描くごとに前に描かれたフレームは消去される。
<code>plot -T png</code>、<code>plot -T pnm</code>、<code>plot -T gif</code>、<code>plot -T
svg</code>、<code>plot -T ai</code>、<code>plot -T ps</code>、<code>plot -T cgm</code>、<code>plot -T
fig</code>、<code>plot -T pcl</code>、<code>plot -T hpgl</code>
ではプロットはリアルタイムでは行われず、複数のフレームが置かれたページでは、
そのページの最後のフレームだけが描画される。
</p>
<p><samp>`-p'</samp>
オプションが指定されない場合、デフォルトではすべてのページが描画される。
たとえば <code>plot -T X</code>
では各ページをそれぞれ別のウィンドウに描画する。
もし <samp>`-T png'</samp>、<samp>`-T pnm'</samp>、<samp>`-T gif'</samp>、<samp>`-T svg'</samp>、<samp>`-T
ai'</samp>、<samp>`-T fig'</samp> オプションのいずれかが指定されているときは、
最初のページだけを出力するのがデフォルトである。PNG 形式、PNM 形式、疑似 GIF
形式、SVG 形式、AI 形式、Fig 形式は、単ページしかサポートしていないからである。
</p>
<p>GNU plotting utilities が生成する metafile 形式 (たとえば <code>graph</code>
の生出力) はほとんどの場合、二つのフレームを持つ単ページのプロットである。
１つ目のフレームは描画領域内の画像を消去するためのもので、
二つ目のフレームに実際の描画内容が含まれている。
</p>
</dd>
<dt> <samp>`-s'</samp></dt>
<dt> <samp>`--merge-pages'</samp></dt>
<dd><p>各ページのフレームを一つにまとめ、またすべてのページを一つにまとめる。
</p>
<p>これは、別々に作られた単ページのプロットを一つにまとめるときに使う。
たとえば、<code>plot</code> を複数回実行して作られた複数のファイルなどである。
この機能を使って多重プロットをすることもできる (<a href="#SEC6">多重プロット</a> 参照)。
</p>
</dd>
<dt> <samp>`--bitmap-size <var>bitmap_size</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;570x570&quot;)
描画領域の大きさをピクセル単位で <var>bitmap_size</var> に設定する。
このオプションは <code>plot -T X</code>、<code>plot -T png</code>、<code>plot -T
pnm</code>、<code>plot -T gif</code> のときにだけ有効である。
これらの出力形式では描画領域のサイズがピクセル単位で表現されているからである。
環境変数 <code>BITMAPSIZE</code> でも同様に指定できる。
</p>
<p><code>plot -T X</code> のときは描画のために開かれたウィンドウが描画領域になる。
X Window
の画面上でのこのウィンドウの位置も、コマンドライン・オプションで指定できる。
たとえば <var>bitmap_size</var> を &quot;570x570+0+0&quot;
と指定すると、開かれたウィンドウは画面の左上隅に置かれる。
</p>
<p>もし描画領域を正方形ではなく長方形にすると、
描画に使われるフォントは縦と横で違う倍率で拡大縮小されることになる。
そのような拡大縮小ができないフォントが指定されているときは、Hershey
ベクトル・フォントの &quot;HersheySerif&quot;
などのデフォルトのスケーラブル・フォントが使われる。
</p>
<p>後方互換性のために、X resource の <code>Xplot.geometry</code>
を設定することで、<samp>`--bitmap-size'</samp> や <code>BITMAPSIZE</code>
の代わりにディスプレイのサイズを設定できる。
</p>
</dd>
<dt> <samp>`--emulate-color <var>option</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;no&quot;)
<var>option</var> が &quot;yes&quot; のとき、カラーの出力画像をグレイスケールにして出力する。
このオプションは、<samp>`plot -T pcl'</samp> で PCL 5
対応機器への出力を行っているときでなければ、使うことはあまりないかもしれない。
(白黒の LaserJet プリンタなどの白黒 PCL 5
機器が搭載しているカラーからグレイスケールへの変換機能は、HP-GL/2 の 7
種類のペンの標準色を黒に置き換えるだけ (黄色も黒になる)
で、あまりいいとは言えない)。
環境変数 <code>EMULATE_COLOR</code> を &quot;yes&quot; に設定しても同じ指定ができる。
</p>
</dd>
<dt> <samp>`--max-line-length <var>max_line_length</var>'</samp></dt>
<dd><p>(整数、デフォルトは 500)
一つのデータセットから描かれる一本の折れ線について、
一度に描ける最大のデータ点数を <var>max_line_length</var> に指定する。
データ点の数がこの数に達したときは、折れ線は複数回に分けて描画される。
この時、特に通知やメッセージなどは行われない。
<samp>`-q'</samp> オプションで塗りつぶしが指定されているときは、これは行われない。
</p>
<p>この指定は、いくつかの出力デバイス (昔の PostScript プリンタや HP-GL プロッタ)
では出力バッファの大きさに制限があることによる。
この最大点数は、環境変数 <code>MAX_LINE_LENGTH</code> でも指定できる。
<code>plot -T tek</code> や <code>plot</code> の生出力では、
各データ点ごとにリアルタイムで描画が行われるので、このオプションは無効である。
</p>
</dd>
<dt> <samp>`--page-size <var>pagesize</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;letter&quot;)
プロットが描かれる用紙の大きさを指定する。このオプションは <code>plot -T
svg</code>、<code>plot -T ai</code>、<code>plot -T ps</code>、<code>plot -T cgm</code>、<code>plot
-T fig</code>、<code>plot -T pcl</code>、<code>plot -T hpgl</code> でだけ有効である。&quot;letter&quot;
で指定される大きさは 8.5in x 11in である。&quot;a0&quot;&hellip;&quot;a4&quot; の ISO
の用紙サイズおよび &quot;a&quot;&hellip;&quot;e&quot; の ANSI のサイズも指定できる
(&quot;letter&quot; は &quot;a&quot;、&quot;tabloid&quot; は &quot;b&quot; と同じである)。
&quot;legal&quot;、&quot;ledger&quot;、&quot;b5&quot; も指定できる。用紙サイズは、環境変数
<code>PAGESIZE</code> でも同様に指定できる。
</p>
<p><code>plot -T ai</code>、<code>plot -T ps</code>、<code>plot -T pcl</code>、<code>plot -T fig</code>
ではプロットが置かれる描画領域 (または `viewport')
は、デフォルトでは指定されたページの中央に置かれる正方形の領域である。
<code>plot -T hpgl</code> でも同様だが、ページの中央ではない。
この描画領域の縦、横の長さは、たとえば <var>pagesize</var> を &quot;letter,xsize=4in&quot;
や &quot;a4,xsize=10cm,ysize=15cm&quot; のようにすることで指定できる。
この長さは負の値になってもよい (負のときは鏡像になる)。
</p>
<p>描画領域の位置は、デフォルトの位置に対する相対座標で指定できる。たとえば
<var>pagesize</var> を
&quot;letter,yoffset=1.2in&quot; や &quot;a4,xoffset=-5mm,yoffset=2.0cm&quot; のようにするとよい。
または用紙の左下隅からの相対座標として描画領域の左下隅の座標を指定することで、
より正確に指定することもできる。それにはたとえば <var>pagesize</var> を
&quot;letter,xorigin=2in,yorigin=3in&quot; や &quot;a4,xorigin=0.5cm,yorigin=0.5cm&quot;
ようにするとよい。これらのオプションは取り混ぜて使ってもよい。
</p>
<p><code>plot -T svg</code> と <code>plot -T cgm</code> では
&quot;xoffset&quot;、&quot;yoffset&quot;、&quot;xorigin&quot;、&quot;yorigin&quot; は無視される。これらの
形式では、画像が最終的にウェブブラウザ上のどこに表示されるかは、
画像そのものから指定できないからである。しかし &quot;xsize&quot; と &quot;ysize&quot;
オプションは無視される訳ではない。
<a href="#SEC74">ページと描画領域のサイズ</a> を参照のこと。
</p></dd>
</dl>

<p>他にもいくつかの描画設定を、以下のオプションで指定することができる。
これらの中には、入力として与えられた metafile
形式のデータの中の指定の方が優先されるものもある。GNU 版以前の `plot(5)' の
metafile にはそういった指定法がなかったので、
以下のオプションは、そういう古いデータをプロットするときに使うとよい。
</p>
<dl compact="compact">
<dt> <samp>`--bg-color <var>name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;white&quot;)
背景色を <var>name</var> に指定する。これは <code>plot -T
X</code>、<code>plot -T png</code>、<code>plot -T pnm</code>、<code>plot -T gif</code>、<code>plot -T
cgm</code>、<code>plot -T regis</code>、<code>plot -T meta</code>
のときにだけ有効である。
無効な名前が色名に指定されたときは、デフォルトの色が使われる。
使える色名に付いては <a href="#SEC73">色名</a> を参照のこと。
環境変数 <code>BG_COLOR</code> でも同様に背景色を指定できる。
</p>
<p><samp>`-T png'</samp> か <samp>`-T gif'</samp>
オプションのどちらかが使われているときは、環境変数 <code>TRANSPARENT_COLOR</code>
に背景色を指定することで、透過 PNG または透過疑似 GIF 形式の画像を生成できる。
<a href="#SEC18"><code>plot</code> の環境変数</a> 参照。
<samp>`-T svg'</samp> か <samp>`-T cgm'</samp>
オプションのどちらかが使われているときは、背景色に &quot;none&quot;
を指定することで、背景色のない画像を生成できる。
</p>
</dd>
<dt> <samp>`-f <var>font_size</var>'</samp></dt>
<dt> <samp>`--font-size <var>font_size</var>'</samp></dt>
<dd><p>(実数、デフォルトは出力形式によって異なる)
文字列のフォントサイズの初期値を <var>font_size</var> で指定する。
数値は、描画領域の横の長さに対する割合として指定する。
</p>
</dd>
<dt> <samp>`-F <var>font_name</var>'</samp></dt>
<dt> <samp>`--font-name <var>font_name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;Helvetica&quot;、ただし <code>plot -T pcl</code> では
&quot;Univers&quot;、<code>plot -T png</code>、<code>plot -T pnm</code>、<code>plot -T
gif</code>、<code>plot -T hpgl</code>、<code>plot -T regis</code>、<code>plot -T tek</code>、
<code>plot</code> の生出力の場合は &quot;HersheySerif&quot;)
文字列 (`ラベル') に使うフォントを <var>font_name</var> に指定する。
フォント名では大文字と小文字は区別されない。
もし指定されたフォントが使えない場合、デフォルトのフォントが使われる。
使えるフォントは、<samp>`-T'</samp> オプションで何を指定するかによって異なる。
すべてのフォントのリストは <a href="#SEC68">利用できるフォント</a> を参照のこと。
<code>plotfont</code> ユーティリティ・プログラムで、
使えるフォントのキャラクタ・マップを表示することができる。<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照。
</p>
</dd>
<dt> <samp>`-W <var>line_width</var>'</samp></dt>
<dt> <samp>`--line-width <var>line_width</var>'</samp></dt>
<dd><p>(実数、デフォルトは -1.0)
プロットの外枠の線の太さを <var>line_width</var> にする。
数値は描画領域の縦か横の短い方に対する割合として指定する。
負の値を指定すると、<code>libplot</code>
ライブラリで設定しているデフォルト値が使われる。
通常、デフォルト値は描画領域の 1/850 だが、<samp>`-T X'</samp>、<samp>`-T png'</samp>、<samp>`-T
pnm'</samp>、<code>-T gif</code> のときは 0 になる。
0 になったときは、そのデバイスで描けるもっとも細い線が使われる。
これはどのデバイスでもそうである。しかし <code>idraw</code> や <code>xfig</code>
では、太さ 0 の線は描かれない。
</p>
<p><code>plot -T tek</code> および <code>plot -T regis</code>
では、線の太さはデフォルト値以外は使えない。<code>plot -T hpgl</code> でも環境変数
<code>HPGL_VERSION</code> に 2 よりも小さな値をセットしているときは、同様である
(2 がデフォルト値)。
</p>
</dd>
<dt> <samp>`--pen-color <var>name</var>'</samp></dt>
<dd><p>(String, デフォルトは &quot;black&quot;)
プロットに使われる「ペンの色」を <var>name</var> で指定する。
無効な名前が色名に指定されたときは、デフォルトの色が使われる。
使える色名に付いては <a href="#SEC73">色名</a> を参照のこと。
</p></dd>
</dl>

<p>以下のオプションは、<code>plot</code> の生出力に対してだけ、つまり <samp>`-T'</samp>
をつけずに <code>plot</code> を使うときにだけ有効である。その場合の <code>plot</code>
の出力は GNU metafile 形式であり、これをまた <code>plot</code>
に渡すことで他の形式に変換できる。
</p>
<dl compact="compact">
<dt> <samp>`-O'</samp></dt>
<dt> <samp>`--portable-output'</samp></dt>
<dd><p>GNU metafile 出力を、バイナリ形式 (デフォルト) ではなく、ポータブル形式
(テキスト形式、人間の読める形式) で行う。これは環境変数 <code>META_PORTABLE</code>
を &quot;yes&quot; に設定することでも指定できる。
</p></dd>
</dl>

<p><code>plot</code> コマンドは入力された GNU matafile
形式のデータがバイナリ (デフォルトの形式) がテキスト形式かを自動で判別する。
バイナリ形式は、計算機のアーキテクチャに依存した形式である。
<a href="#SEC75">Metafile 形式</a>。
</p>
<p>昔の plot との互換性を持たせるために、GNU 版より前の `plot(5)'
形式の入力もサポートしている。
普通はこれはバイナリ形式で、整数を２バイトで表現しているが、
そのバイトオーダーは計算機のアーキテクチャに依存している。
そういったファイルを現在の plotutils のコマンドで扱いたいとき、
バイトオーダーが分かっていればそれをコマンドライン・オプション <samp>`-h'</samp>
(&quot;high byte first&quot;) または <samp>`-l'</samp>  (&quot;low byte first&quot;)
で明示的に指定できる。また GNU でないシステムでは plot(5)
形式でテキスト形式をサポートしているものがある。そういったデータに対しては
<samp>`-A'</samp> でその旨を明示できる。そういった独自拡張のあるものを除けば、
plot(5) 形式では一つのファイルで扱えるページ数は１である。
</p>
<dl compact="compact">
<dt> <samp>`-h'</samp></dt>
<dt> <samp>`--high-byte-first-input'</samp></dt>
<dd><p>入力が古い `plot(5)' metafile
形式で、整数の上位バイトが先に来る形式 (ビッグエンディアン)
であることを指定する。そういうデータは多くない。
</p>
</dd>
<dt> <samp>`-l'</samp></dt>
<dt> <samp>`--low-byte-first-input'</samp></dt>
<dd><p>入力が古い `plot(5)' metafile
形式で、整数の下位バイトが先に来る形式 (リトルエンディアン)
であることを指定する。こちらの方が多数派である。
</p>
</dd>
<dt> <samp>`-A'</samp></dt>
<dt> <samp>`--ascii-input'</samp></dt>
<dd><p>入力が古い `plot(5)' metafile 形式で、テキスト形式であることを指定する。
そういうデータは、かなり少ない。<code>plottoa</code>
という名前のプログラムがこの形式を出力していた。
</p></dd>
</dl>

<p>以下のオプションで、必要な情報を表示させることができる。
</p>
<dl compact="compact">
<dt> <samp>`--help'</samp></dt>
<dd><p>コマンドライン・オプションのリストを表示させ、そのまま実行を終了する。
</p>
</dd>
<dt> <samp>`--help-fonts'</samp></dt>
<dd><p>利用可能なフォントのリストを表示して、そのまま終了する。
出力される内容は、<samp>`-T'</samp> オプションで指定される出力デバイスによって変わる。
<code>plot -T X</code>、<code>plot -T svg</code>、<code>plot -T ai</code>、<code>plot -T
ps</code>、<code>plot -T cgm</code>、<code>plot -T fig</code> では PostScript 標準の 35
種類のフォントが使える。<code>plot -T svg</code>、<code>plot -T ai</code>、<code>plot -T
pcl</code>、<code>plot -T hpgl</code> では 45 種類の PCL 5 標準フォントが使える。
<code>plot -T pcl</code> と <code>plot -T hpgl</code>
ではヒューレット・パッカードのベクトル・フォントが使える。
上に挙げたすべての出力形式、および
<code>plot -T png</code>、<code>plot -T pnm</code>、<code>plot -T
gif</code>、<code>plot -T regis</code>、<code>plot -T tek</code>
では 22 種類の Hershey ベクトル・フォントが使える。
<code>plot</code> の生出力では原理的にこれらのフォントがすべて使える。
どの形式にも、<code>plot</code> 生出力から <code>plot</code> で変換できるからである。
<code>plotfont</code> ユーティリティ・プログラムで、
使えるフォントのキャラクタ・マップを表示することができる。<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照。
</p>
</dd>
<dt> <samp>`--list-fonts'</samp></dt>
<dd><p><samp>`--help-fonts'</samp> と同じだが、
他のプログラムにパイプで渡して処理しやすいように、
フォントのリストを１カラムで出力する。<samp>`-T'</samp>
オプションでの出力デバイスの指定が何もないときは、
サポートされているすべてのフォントのリストが表示される。
</p>
</dd>
<dt> <samp>`--version'</samp></dt>
<dd><p><code>plot</code> および GNU plotting utilities パッケージのバージョン番号を表示して、
そのまま終了する。
</p></dd>
</dl>

<hr size="6">
<a name="plot-Environment"></a>
<a name="SEC18"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC17" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC15" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 3.3 <code>plot</code> の環境変数 </h2>

<p><code>plot</code> の動作には、環境変数を読んでその値により制御されるものがある。
<code>BITMAPSIZE</code>、<code>PAGESIZE</code>、<code>BG_COLOR</code>、<code>EMULATE_COLOR</code>、
<code>MAX_LINE_LENGTH</code>、<code>ROTATION</code> については上述したとおりである。
これらの環境変数はそれぞれ、コマンドライン・オプションの
<samp>`--bitmap-size'</samp>、<samp>`--page-size'</samp>、<samp>`--bg-color'</samp>、
<samp>`--emulate-color'</samp>、<samp>`--max-line-length'</samp>、<samp>`--rotation'</samp>
と同じ働きを持つ。他にも、特定の出力デバイスに対してだけ有効な環境変数もある。
</p>
<p><code>plot -T X</code> では X Window の画面にウィンドウが一つ開かれ、
そこにプロットが描画されるが、このとき <code>DISPLAY</code>
環境変数が設定されていれば、
それで示されるディスプレイにウィンドウが開かれる。
</p>
<p>PNG または疑似 GIF 形式を生成する <code>plot -T png</code> または <code>plot -T gif</code>
に対しては、二つの環境変数が用意されている。<code>INTERLACE</code> が &quot;yes&quot;
のときは、出力される画像はインターレース形式になる。<code>TRANSPARENT_COLOR</code>
に色名を指定しておくと、出力される画像のその色の部分が透明に設定され、PNG や
GIF を扱う多くのアプリケーションで透明として扱われる。
使える色名については <a href="#SEC73">色名</a> を参照のこと。
</p>
<p><code>plot -T pnm</code> では Portable Anymap (PBM/PGM/PPM)
形式で出力されるが、環境変数 <code>PNM_PORTABLE</code> が &quot;yes&quot; のとき、
出力は PBM、PGM、PPM のポータブル形式 (人間が読めるテキスト形式) で行われる。
そうでない場合はバイナリ形式 (これがデフォルト) で行われる。
</p>
<p>ウェブ用のベクトル画像の形式である WebCGM プロファイルにしたがった CGM
形式のファイルを <code>plot -T cgm</code> で生成する場合に有効な環境変数が二つある。
デフォルトでは、生成される CGM ファイルはバージョン 3 の規格に沿っているが、
マイクロソフト・オフィスなどの古い CGM 表示ソフトウェアはほとんど、CGM
のバージョン 1 しか扱えない。そこで環境変数 <code>CGM_MAX_VERSION</code> を
1&quot;、&quot;2&quot;、&quot;3&quot;、&quot;4&quot; のどれかに設定することで、出力される CGM
のバージョンの最大値を指定できる (&quot;4&quot; がデフォルト)。また <code>CGM_ENCODING</code>
で CGM ファイルのエンコーディングを指定できる。これには
&quot;clear_text&quot; (人が読めるテキスト形式) と &quot;binary&quot; が指定できる (&quot;binary&quot;
がデフォルト)。WebCGM プロファイルではバイナリ形式が要求されている。
</p>
<p><code>plot -T pcl</code>
ではヒューレット・パッカードのプリンタまたはプロッタの出力形式、PCL 5
形式で出力されるが、このとき <code>PCL_ASSIGN_COLORS</code> 環境変数が有効である。
PCL 5 出力をカラープリンタなどに出力する際に指定する。
これにより色の再現性を正確にするために、内部で出力デバイスに、
各色を描画するための「論理ペン」が任意に設定できるようになる。
&quot;no&quot; にセットされるとあらかじめ設定されている色のペンだけが用いられ、
他の色は濃淡の変化 (シェイディング) によって擬似的に描画される。
世の中の PCL 5 デバイスは、カラーより白黒が多いため、デフォルトでは &quot;no&quot;
であり、色はシェイディング (グレイスケール) に置き換えられる。
</p>
<p><code>plot -T hpgl</code> では HP-GL
(ヒューレット・パッカード・グラフィクス・ランゲージ)
形式の出力が生成されるが、これにもいくつかの環境変数が用意されている。
もっとも重要なのは <code>HPGL_VERSION</code> で、これには &quot;1&quot;、&quot;1.5&quot;、&quot;2&quot;
のいずれかが指定できる (&quot;2&quot; がデフォルト)。
&quot;1&quot; は純正の HP-GL、&quot;1.5&quot; は HP7550A グラフィクス・プロッタおよび
HP758x、HP7595A、HP7596A ドラフティング・プロッタに出力できる形式
(HP-GL にいくつかの HP-GL/2 拡張を加えたもの)、
&quot;2&quot; は新しい HP-GL/2 でそれぞれ描画するよう指示する。
もしバージョンが &quot;1&quot; または &quot;1.5&quot; にセットされていると、
使えるフォントはベクトル・フォントのみで、
線はすべてデフォルトの太さで描かれる (<samp>`-W'</samp> は無効になる)。
さらにバージョンが &quot;1&quot;
のときは、任意の多角形を線の色で塗りつぶす機能が使えなくなる (<samp>`-q'</samp>
オプションは座標軸に沿って置かれた円や長方形を塗りつぶすのに使われる)。
</p>
<p><code>plot -T hpgl</code> のときの用紙上の描画領域は <code>HPGL_ROTATE</code> 環境変数を
&quot;yes&quot; に設定すると反時計回りに 90度回転させることができる。<code>--rotation</code>
オプションでは描画領域を回転させ、
その左下隅の位置を用紙の左下隅からの相対位置で指定するため、異なった効果になる。
<code>HPGL_ROTATE</code> 環境変数に設定できる値は、&quot;no&quot; と &quot;yes&quot; に加えて、
&quot;0&quot;、&quot;90&quot;、&quot;180&quot;、および &quot;270&quot; である。&quot;no&quot; と &quot;yes&quot; は &quot;0&quot; と &quot;90&quot;
とそれぞれ同じである。
&quot;180&quot; と &quot;270&quot; は <code>HPGL_VERSION</code> が &quot;2&quot; のとき
(デフォルトがそうである) にだけ有効である。
</p>
<p>不透明化機能による、白い線や白い色による塗りつぶしは、<code>HPGL_VERSION</code> が &quot;2&quot;
(デフォルト) で環境変数 <code>HPGL_OPAQUE_MODE</code> が &quot;yes&quot;
のときに可能になる。もしこれが &quot;no&quot;
のときは不透明化による白い色での塗りつぶしは行われず、
白色の線 (通常は 0 番のペンで描かれる) も描かれない。
この機能は昔の HP-GL/2 デバイスに適している。
たとえば HP-GL/2 ペン・プロッタは不透明化や 0
番のペンによる白色の線には対応していない。また古い HP-GL/2
デバイスの中には不透明化機能が不十分なものもある。
</p>
<p>デフォルトでは、<code>plot -T hpgl</code>
では使えるペンはあらかじめ決められているものだけである。
描画時点でどのペンを使うかは、<code>HPGL_PENS</code> 環境変数で指定される。
<code>HPGL_VERSION</code> が &quot;1&quot; のときは <code>HPGL_PENS</code> のデフォルトのペンは
&quot;1=black&quot; である。<code>HPGL_VERSION</code> が &quot;1.5&quot; または &quot;2&quot;のときは、
<code>HPGL_PENS</code> のデフォルト値は
<code>&quot;1=black:2=red:3=green:4=yellow:5=blue:6=magenta:7=cyan&quot;</code> である。
指定の仕方は見ての通りである。<code>HPGL_PENS</code>
を指定することで 1&hellip;31 番のどのペンにも色を割り当てることができる。
指定できる色名については <a href="#SEC73">色名</a> を参照のこと。
1 番のペンはいつでも使える。その色は黒である必要はない。
2&hellip;31 番の他のペンはあってもなくてもよい。
</p>
<p><code>HPGL_VERSION</code> が &quot;2&quot; のときは <code>plot -T hpgl</code> では
<code>HPGL_ASSIGN_COLORS</code> も有効である。もしこれが &quot;yes&quot;
にセットされていれば、<code>plot -T hpgl</code> で使えるペンの色は <code>HPGL_PENS</code>
による制約を受けない。1&hellip;31
番の「論理ペン」に必要に応じて色が割り当てられる。
これをサポートする HP-GL/2 は LaserJet プリンタや DesignJet だが、
あまり多くはないため、デフォルトでは &quot;no&quot; である。
特に HP-GL/2 ペン・プロッタは非対応である。
</p>
<p><code>plot -T tek</code> では Tektronix 端末のための出力が行われるが、
環境変数 <code>TERM</code> が有効である。もし <code>TERM</code> が &quot;xterm&quot;、
&quot;nxterms&quot;、&quot;kterm&quot; のいずれかであればそれぞれ、<code>plot</code>
がその時実行されている環境は X Window システム上の VT100
端末エミュレータの <code>xterm</code>、<code>nxterm</code>、<code>kterm</code>
であると判断される。このとき、<code>plot -T tek</code>
では描画が行われる前に、xterm に付属していて通常は隠れている
Tektronix のウィンドウを、
前面にポップアップさせるエスケープ・シーケンスが送られる。
また描画が行われた後には、元の VT100
端末に制御を戻すためのエスケープ・シーケンスが送られる。
その際、Tektronix のウィンドウは画面に残ったままになる。
</p>
<p><code>TERM</code> が &quot;kermit&quot;、&quot;ansi.sys&quot;、&quot;nansi.sys&quot;
のいずれかの時は、MS-DOS 版の <code>kermit</code> 上の VT100
エミュレータ上であるとみなされる。
このとき、<code>plot -T tek</code> では描画が行われる前に、VT100 エミュレータから
Tektronix のウィンドウに切り替えるエスケープ・シーケンスが送られる。
また出力には Tektronix 制御コードは、<code>kermit</code> 特有のものが使われる。
このとき、使える色数には制限がある (<code>ansi.sys</code> の 16 色はサポートされる)。
また描画が行われた後には、元の VT100
端末に制御を戻すためのエスケープ・シーケンスが送られる。
キーボードで `ALT' - `-' をタイプすると、
VT100 モードと Tektronix モードの切り替えが手動でできる。
</p>
<hr size="6">
<a name="pic2plot"></a>
<a name="SEC19"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC18" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC20" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC15" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC23" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 4. <code>pic2plot</code> コマンド </h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC20">4.1 <code>pic2plot</code> の使い方</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     pic2plot は何をするコマンドなのか？
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC21">4.2 <code>pic2plot</code> のコマンドライン・オプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       pic2plot が解釈できるコマンドライン・オプション
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC22">4.3 <code>pic2plot</code> の環境変数</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      pic2plot が参照する環境変数
</td></tr>
</table>

<hr size="6">
<a name="pic2plot-Introduction"></a>
<a name="SEC20"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC19" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC21" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC19" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC23" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 4.1 <code>pic2plot</code> の使い方 </h2>

<p><code>pic2plot</code> は、pic
言語で書かれたデータを一つまたは複数のファイルから読み込み、X Window
の画面に表示したり、それらの図を取り込んだファイルを出力したりできる。
多くの画像フォーマットがサポートされている。
</p>
<p>pic は、技術文書や教科書などでよくあるような四角形と矢印からなる図を描くための、
ベル研で開発されたコンパクトな仕様の言語である。
<code>pic2plot</code> は、pic 言語で記述された図を含むディレクトリともに公開、
配布できるライセンスになっている<code>pic2plot</code>
をインストールすると、ほとんどのシステムで
<tt>`/usr/share/pic2plot'</tt>
または <tt>`/usr/local/share/pic2plot'</tt> ディレクトリ
に、ブライアン・カーニハンによる pic 言語の原論文、
エリック・S・レイモンドによるその GNU 実装の入門書、W.
リチャード・スティーヴンス による pic マクロのサンプルもインストールされる。
</p>
<p>pic 言語は元々、<code>troff</code> 文書整形プログラムのために作られたものである。
当時、pic 言語で書かれた図は <code>pic</code>、あるいはその
GNU 版である <code>gpic</code> に読み込まれるという状況が想定されていた。
この <code>pic</code> あるいは <code>gpic</code> については詳細な解説書があるため、
この節では入力ファイルの例と <code>pic2plot</code>
に実装された拡張機能について説明するにとどめる。
</p>
<p>pic 言語では、一つのファイルに一つまたは複数の、
四角形と矢印からなる図を入れることができる。
各図は <tt>.PS</tt> という行と <tt>.PE</tt> という行に記述される。
<tt>.PS</tt>&hellip;<tt>.PE</tt> の間ではない部分にある記述されているものは無視される。
各図は幾何学図形 (長方形、円、楕円、1/4円 (「円弧」)、折れ線、スプライン)
から構成される。円弧、折れ線、スプライン曲線は端点に矢印がつけられる。
各オブジェクトには、ラベルを付けられる。ラベルは複数行になってもよい。
</p>
<p>各オブジェクトの位置は絶対座標ではなく、
そのオブジェクトの前に置かれたオブジェクトに対する相対座標で与えられる。
以下に例を示す。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">.PS
box &quot;START&quot;; arrow; circle dashed filled; arrow
circle diam 2 thickness 3 &quot;This is a&quot; &quot;big, thick&quot; &quot;circle&quot; dashed; up
arrow from top of last circle; ellipse &quot;loopback&quot; dashed
arrow dotted from left of last ellipse to top of last box
arc cw radius 1/2 from top of last ellipse; arrow
box &quot;END&quot;
.PE
</pre></td></tr></table>

<p>上の例をファイルに保存し <samp>`pic2plot -T X'</samp> に入力として与えると、
X Window の画面上に、図が描画されたウィンドウが開かれる。
同様に <samp>`pic2plot -T ps'</samp> にこのデータを入力すると、
同じ図が描画された PostScript データが標準出力から得られる。
その PostScript データはドロー・エディタ <code>idraw</code> で編集できる。
他に PNG 形式、PNM 形式、疑似 GIF 形式、SVG 形式、WebCGM 形式、Fig 形式
(ドロー・エディタ <code>xfig</code> で編集できる形式)
にも同様に出力できる。それぞれ、
<samp>`-T png'</samp>、<samp>`-T pnm'</samp>、<samp>`-T gif'</samp>、<samp>`-T svg'</samp>、<samp>`-T
cgm'</samp>、<samp>`-T fig'</samp> オプションで得られる。
</p>
<p>上の例には pic 言語の特徴がよく現れている。
デフォルトでは、繋がっているオブジェクトが連続して描かれる。
そして描画はデフォルトでは左から右の方に向けて進められる。
上の例の中の <samp>`up'</samp> 命令ではこの向きを下から上の方向に変更する。
すると次のオブジェクト (大きな円の上部から伸びる矢印) は右ではなく、
上を向くことになる。
</p>
<p>オブジェクトには、大きさなどの属性がある。属性には図全体のものと、
個別のオブジェクトのものとがある。たとえば円には直径、円弧には半径がある。
円弧に <samp>`cw'</samp> 属性を設定すると、円弧の向きが反時計回りではなく、
時計回りになる。多くのオブジェクトでは、<samp>`dashed'</samp> や <samp>`dotted'</samp>
属性でそのオブジェクトを描く線種を設定できる。
また各オブジェクトにはラベルが付けられるが、
これは一つまたは複数の文字列であり、オブジェクトの属性として設定される。
文字列にはエスケープ・シーケンスが使え、
フォントの切り替え、上付きや下付き、ASCII 文字ではない数学記号などが使える。
<a href="#SEC71">文字列とエスケープ・シーケンス</a> 参照。
</p>
<p>ほとんどのサイズや位置は「仮想インチ」単位で指定される。
これは <code>pic2plot</code> 特有の方法である。
<code>pic2plot</code> が描画を行う「描画領域」は、
一辺が 8 仮想インチの正方形が想定されている。
出力のページサイズに &quot;letter&quot; サイズ (PostScript のデフォルト)
が設定された時、仮想インチは実際のインチと同じになる。
しかし他のページサイズも、たとえば <samp>`--page-size a4'</samp>
オプションなどで指定できる。
そうした場合、1 仮想インチは単に描画領域の幅の 1/8 になる。
A4 サイズを指定すると描画領域は一辺が 19.81cm の正方形になる。
</p>
<p>デフォルトでは各図は描画領域の中央に置かれる。この機能をオフにして <samp>`-n'</samp>
オプションで図を置く絶対座標を指定することもできる。たとえば
<samp>`座標 (8,8) から (4,4) に引かれた矢印'</samp> というオブジェクトだけからなる図は、
図を中央に置く機能を使わない場合、矢印の端点が描画領域の中央になる。
もう一方の端は右上隅になる。
</p>
<p>線の太さは仮想インチでは指定されない。<code>gpic</code> との互換性を持たせるため、
これは仮想ポイントで指定される。上の例では <samp>`thickness'</samp>
属性が指定されているオブジェクトがその例である。72 仮想ポイントで 1
仮想インチである。
</p>
<p>複数の図がある場合、X windows システム上では複数のウィンドウが開かれ、
他の形式ではそれぞれのページに出力される。しかし一部の出力形式
(PNG、PNM、疑似 GIF、SVG、Illustrator、Fig)
では単ページの出力しかサポートされないため、
このうちのどれかが出力形式に指定されているときは、
最初の図だけが出力される。現在は <code>pic2plot</code>
ではアニメーション GIF は生成できない。
</p>
<p>pic 言語は、変数、制御ループなど、
実質的にプログラミング言語としての機能を完備しているにも関わらず、
あまり評価されていない。そういった先進的な機能を使うことで pic
言語では繰り返し部分のあるような巨大な図を簡単に記述することができる。
</p>
<hr size="6">
<a name="pic2plot-Invocation"></a>
<a name="SEC21"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC20" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC22" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC19" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC23" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 4.2 <code>pic2plot</code> のコマンドライン・オプション </h2>

<p>pic 言語は、
技術文書や教科書などでよくあるような四角形と矢印からなる図を描くための、
ベル研で開発されたコンパクトな仕様の言語であり、<code>pic2plot</code>
コマンドは pic 言語で書かれた図を他の画像形式に変換するプログラムである。
変換する形式は <samp>`-T'</samp> オプションで指定する。変換可能な画像形式は
GNU <code>graph</code> および <code>plot</code> の両コマンドと同じである。
</p>
<p>入力ファイルの名前をコマンドライン上で指定できる。
その順番やコマンドライン・オプションの順番は、意味を持たない。
ファイル名が何も指定されないか、<samp>`-'</samp>
というファイル名が指定されたときは、標準入力から読み込まれる。
出力は、<samp>`-T X'</samp> が指定されない限りは標準出力に行われる。
<samp>`-T X'</samp> が指定されたときは X Windows
の画面上のウィンドウに描画され、標準出力にはなにも出力されない。
</p>
<p>以下に、指定できるコマンドライン・オプションのリストを載せる。
コマンドライン・オプションは３種類に分けられる。
</p>
<ol>
<li>
一般的なオプション。
</li><li>
<code>pic2plot</code> 生出力のデータ (<samp>`-T'</samp> で何も指定されないときの出力形式)
に関するオプション。
</li><li>
情報を表示するためのオプション (<samp>`--help'</samp> など)
</li></ol>


<p>引数を取るオプションでは、
説明の最初にカッコ書きでその引数の型とデフォルト値を示している。
</p>
<p>まず、一般的なオプション。
</p>
<dl compact="compact">
<dt> <samp>`-T <var>type</var>'</samp></dt>
<dt> <samp>`--output-format <var>type</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;meta&quot;)
ディスプレイの種類、あるいは出力形式を <var>type</var> で指定する。
指摘できる文字列は
&quot;X&quot;、&quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot;、&quot;svg&quot;、&quot;ai&quot;、&quot;ps&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;、&quot;regis&quot;、&quot;tek&quot;、&quot;meta&quot;
のいずれかである。
それぞれ、
X Window システム、PNG 形式、portable anymap (PBM/PGM/PPM) 形式、pseudo-GIF
形式、XML ベースの Scalable Vector Graphics 形式、Adobe Illustrator
形式、<code>idraw</code> で編集できる PostScript
形式、ウェブ用のベクトル画像形式である WebCGM 形式、<code>xfig</code>
で編集できる形式、ヒューレット・パッカードの PCL 5 プリンタ言語、
ヒューレット・パッカード・グラフィクス言語 (デフォルトでは HP-GL/2)、
DEC で開発された ReGIS (remote graphics
instruction set) 形式、Tektronix 形式、特定のデバイスに依存しない GNU graphics
metafile 形式である。<samp>`--display-type'</samp> は古いので
<samp>`--output-format'</samp> を使うべきである。
</p>
</dd>
<dt> <samp>`-d'</samp></dt>
<dt> <samp>`--precision-dashing'</samp></dt>
<dd><p>点線および破線を描くときに、
線を構成する短い線分や点をそれぞれ独立したオブジェクトとすることで、
正確に描画する。
デフォルトは、<code>pic2plot</code> が内部で使っている GNU <code>libplot</code>
が破線と点線に関してこの機能をサポートしているかどうかによる。
</p>
<p>このオプションを使うと、破線と点線の見栄えがよくなる。しかし、
なんらかの編集可能な形式 (たとえば Illustrator、PostScript、Fig
形式など) で得られた出力を思い通りに編集するのは困難になるだろう。
</p>
</dd>
<dt> <samp>`-f <var>font_size</var>'</samp></dt>
<dt> <samp>`--font-size <var>font_size</var>'</samp></dt>
<dd><p>フォントのサイズを、描画領域の幅に対する割合で
<var>font_size</var> に指定する。
<var>font_size</var>.
</p>
</dd>
<dt> <samp>`-F <var>font_name</var>'</samp></dt>
<dt> <samp>`--font-name <var>font_name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;Helvetica&quot;、ただし <code>plot -T pcl</code> では
&quot;Univers&quot;、<code>plot -T png</code>、<code>plot -T pnm</code>、<code>plot -T
gif</code>、<code>plot -T hpgl</code>、<code>plot -T regis</code>、<code>plot -T tek</code>、
<code>plot</code> の生出力の場合は &quot;HersheySerif&quot;)
文字列に使うフォントを <var>font_name</var> に指定する。
フォント名では大文字と小文字は区別されない。
もし指定されたフォントが使えない場合、デフォルトのフォントが使われる。
使えるフォントは、<samp>`-T'</samp> オプションで何を指定するかによって異なる。
すべてのフォントのリストは <a href="#SEC68">利用できるフォント</a> を参照のこと。
<code>plotfont</code> ユーティリティ・プログラムで、
使えるフォントのキャラクタ・マップを表示することができる。<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照。
</p>
</dd>
<dt> <samp>`-n'</samp></dt>
<dt> <samp>`--no-centering'</samp></dt>
<dd><p>自動的に図をセンタリングする機能をオフにする。このオプションが指定された時は、
各オブジェクトの置かれる場所を絶対座標で指定できる。たとえば &quot;line from (0,0)
to (4,4)&quot; は描画領域の左下隅から中央までの線分を描く
(描画領域は一辺が 8 仮想インチの正方形だから)。
</p>
</dd>
<dt> <samp>`-W <var>line_width</var>'</samp></dt>
<dt> <samp>`--line-width <var>line_width</var>'</samp></dt>
<dd><p>(実数、デフォルトは -1.0)
線の太さを <var>line_width</var> にする。
その数値は、描画領域の縦又は横の短い方に対する割合で指定する。
負の値を指定すると、<code>libplot</code> ライブラリのデフォルト値が使われる。
デフォルト値は描画領域の一辺の長さの 1/850 だが、
<samp>`-T X'</samp>、<samp>`-T png'</samp>、<samp>`-T pnm'</samp>、<code>-T gif</code> では 0 になる。
太さに 0 を指定するとどの出力デバイスでも、
そのデバイスでもっとも細いラインが描かれるが、
<code>idraw</code> や <code>xfig</code> は太さ 0 の線は表示しないようになっている。
</p>
<p><code>pic2plot -T hpgl</code> では、環境変数 <code>HPGL_VERSION</code> に 2
よりも小さな値を指定したときは (デフォルト値は
2)、デフォルトの太さ以外の線は描けない。
</p>
</dd>
<dt> <samp>`--bg-color <var>name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;white&quot;)
背景色を <var>name</var> に設定する。このオプションは
<code>pic2plot -T X</code>、<code>pic2plot -T png</code>、<code>pic2plot -T pnm</code>、<code>pic2plot -T gif</code>、<code>pic2plot -T cgm</code>、<code>pic2plot -T regis</code>、<code>pic2plot -T meta</code>
でだけ有効である。無効な色名が指定されたときは、デフォルトの色が使われる。
使える色名については <a href="#SEC73">色名</a> を参照のこと。環境変数 <code>BG_COLOR</code>
でも同様に指定できる。
</p>
<p><samp>`-T png'</samp> か <samp>`-T gif'</samp>
オプションのどちらかが使われているときは、環境変数 <code>TRANSPARENT_COLOR</code>
に背景色を指定することで、透過 PNG または透過疑似 GIF 形式の画像を生成できる。
<a href="#SEC22"><code>pic2plot</code> の環境変数</a> 参照。
<samp>`-T svg'</samp> か <samp>`-T cgm'</samp>
オプションのどちらかが使われているときは、背景色に &quot;none&quot;
を指定することで、背景色のない画像を生成できる。
</p>
</dd>
<dt> <samp>`--bitmap-size <var>bitmap_size</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;570x570&quot;)
描画領域の大きさをピクセル単位で <var>bitmap_size</var> に設定する。
このオプションは <code>pic2plot -T X</code>、<code>pic2plot -T
png</code>、<code>pic2plot -T pnm</code>、<code>pic2plot -T gif</code> のときにだけ有効である。
これらの出力形式では描画領域のサイズがピクセル単位で表現されているからである。
環境変数 <code>BITMAPSIZE</code> でも同様に指定できる。
</p>
<p><code>pic2plot -T X</code> のときは描画のために開かれたウィンドウが描画領域になる。
X Window
の画面上でのこのウィンドウの位置も、コマンドライン・オプションで指定できる。
たとえば <var>bitmap_size</var> を &quot;570x570+0+0&quot;
と指定すると、開かれたウィンドウは画面の左上隅に置かれる。
</p>
<p>もし描画領域を正方形ではなく長方形にすると、
描画に使われるフォントは縦と横で違う倍率で拡大縮小されることになる。
このように拡大縮小できないフォントが指定されているときは、Hershey
ベクトル・フォントの &quot;HersheySerif&quot;
などのデフォルトのスケーラブル・フォントが使われる。
</p>
<p>後方互換性のために、X resource の <code>Xplot.geometry</code>
を設定することで、<samp>`--bitmap-size'</samp> や <code>BITMAPSIZE</code>
の代わりにディスプレイのサイズを設定できる。
</p>
</dd>
<dt> <samp>`--emulate-color <var>option</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;no&quot;)
<var>option</var> が &quot;yes&quot; のとき、カラーの出力画像をグレイスケールにして出力する。
このオプションは、<samp>`pic2plot -T pcl'</samp> で PCL 5
対応機器への出力を行っているときでなければ、使うことはあまりないかもしれない。
(白黒の LaserJet プリンタなどの白黒 PCL 5
機器が搭載しているカラーからグレイスケールへの変換機能は、HP-GL/2 の 7
種類のペンの標準色を黒に置き換えるだけ (黄色も黒になる)
で、あまりいいとは言えない)。
環境変数 <code>EMULATE_COLOR</code> を &quot;yes&quot; に設定しても同じ指定ができる。
</p>
</dd>
<dt> <samp>`--max-line-length <var>max_line_length</var>'</samp></dt>
<dd><p>(整数、デフォルトは 500)
一つのデータセットから描かれる一本の折れ線について、
一度に描ける最大のデータ点数を <var>max_line_length</var> に指定する。
データ点の数がこの数に達したときは、折れ線は複数回に分けて描画される。
この時、特に通知やメッセージなどは行われない。
<samp>`-q'</samp> オプションで塗りつぶしが指定されているときは、これは行われない。
</p>
<p>この指定は、いくつかの出力デバイス (昔の PostScript プリンタや HP-GL プロッタ)
では出力バッファの大きさに制限があることによる。
この最大点数は、環境変数 <code>MAX_LINE_LENGTH</code> でも指定できる。
<code>pic2plot</code> の生出力では、
各データ点ごとにリアルタイムで描画が行われるので、このオプションは無効である。
</p>
</dd>
<dt> <samp>`--page-size <var>pagesize</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;letter&quot;)
プロットが描かれる用紙の大きさを指定する。このオプションは
<code>pic2plot -T svg</code>、<code>pic2plot -T ai</code>、<code>pic2plot -T
ps</code>、<code>pic2plot -T cgm</code>、<code>pic2plot -T fig</code>、<code>pic2plot -T
pcl</code>、<code>pic2plot -T hpgl</code>
でだけ有効である。&quot;letter&quot;
で指定される大きさは 8.5in x 11in である。&quot;a0&quot;&hellip;&quot;a4&quot; の ISO
の用紙サイズおよび &quot;a&quot;&hellip;&quot;e&quot; の ANSI のサイズも指定できる
(&quot;letter&quot; は &quot;a&quot;、&quot;tabloid&quot; は &quot;b&quot; と同じである)。
&quot;legal&quot;、&quot;ledger&quot;、&quot;b5&quot; も指定できる。用紙サイズは、環境変数
<code>PAGESIZE</code> でも同様に指定できる。
</p>
<p><code>pic2plot -T ai</code>、<code>pic2plot -T ps</code>、<code>pic2plot -T
pcl</code>、<code>pic2plot -T fig</code>
ではプロットが置かれる描画領域 (または `viewport')
は、デフォルトでは指定されたページの中央に置かれる正方形の領域である。
<code>pic2plot -T hpgl</code> でも同様だが、ページの中央ではない。
この描画領域の縦、横の長さは、たとえば <var>pagesize</var> を &quot;letter,xsize=4in&quot;
や &quot;a4,xsize=10cm,ysize=15cm&quot; のようにすることで指定できる。
この長さは負の値になってもよい (負のときは鏡像になる)。
</p>
<p>描画領域の位置は、デフォルトの位置に対する相対座標で指定できる。たとえば
<var>pagesize</var> を &quot;letter,yoffset=1.2in&quot; や
&quot;a4,xoffset=-5mm,yoffset=2.0cm&quot; のようにするとよい。
または用紙の左下隅からの相対座標として描画領域の左下隅の座標を指定することで、
より正確に指定することもできる。それにはたとえば <var>pagesize</var> を
&quot;letter,xorigin=2in,yorigin=3in&quot; や &quot;a4,xorigin=0.5cm,yorigin=0.5cm&quot;
ようにするとよい。これらのオプションは取り混ぜて使ってもよい。
</p>
<p><code>pic2plot -T svg</code> と <code>pic2plot -T cgm</code> では
&quot;xoffset&quot;、&quot;yoffset&quot;、&quot;xorigin&quot;、&quot;yorigin&quot; は無視される。これらの
形式では、画像が最終的にウェブブラウザ上のどこに表示されるかは、
画像そのものから指定できないからである。しかし &quot;xsize&quot; と &quot;ysize&quot;
オプションは無視される訳ではない。
<a href="#SEC74">ページと描画領域のサイズ</a> を参照のこと。
</p>
</dd>
<dt> <samp>`--pen-color <var>name</var>'</samp></dt>
<dd><p>(String, デフォルトは &quot;black&quot;)
プロットに使われる「ペンの色」を <var>name</var> で指定する。
無効な名前が色名に指定されたときは、デフォルトの色が使われる。
使える色名に付いては <a href="#SEC73">色名</a> を参照のこと。
</p>
</dd>
<dt> <samp>`--rotation <var>angle</var>'</samp></dt>
<dd><p>(実数、デフォルトは 0.0)
描画領域を角度 <var>angle</var> だけ回転する。
その数字の角度だけ、反時計回りに回転する。
環境変数 <code>ROTATION</code> に値を設定することでも、同じ指定ができる。
</p>
<p>角度に 0 または 90
を指定することでそれぞれ、ポートレートまたはランドスケープ (用紙が縦、または横)
モードになる。前衛芸術家にも便利に使ってもらえるオプションである。
</p></dd>
</dl>

<p>以下のオプションは、<code>pic2plot</code> の生出力に対してだけ、つまり <samp>`-T'</samp>
をつけずに <code>pic2plot</code> を使うときにだけ有効である。その場合の
<code>pic2plot</code> の出力は GNU metafile 形式であり、これを <code>plot</code>
に渡すことで他の形式に変換できる。
</p>
<dl compact="compact">
<dt> <samp>`-O'</samp></dt>
<dt> <samp>`--portable-output'</samp></dt>
<dd><p>GNU metafile 出力を、バイナリ形式 (デフォルト) ではなく、ポータブル形式
(テキスト形式、人間の読める形式) で行う。これは環境変数 <code>META_PORTABLE</code>
を &quot;yes&quot; に設定することでも指定できる。
</p></dd>
</dl>

<p>以下のオプションで、必要な情報を表示させることができる。
</p>
<dl compact="compact">
<dt> <samp>`--help'</samp></dt>
<dd><p>コマンドライン・オプションのリストを表示させ、そのまま実行を終了する。
</p>
</dd>
<dt> <samp>`--help-fonts'</samp></dt>
<dd><p>利用可能なフォントのリストを表示して、そのまま終了する。
出力される内容は、<samp>`-T'</samp> オプションで指定される出力デバイスによって変わる。
<code>pic2plot -T X</code>、<code>pic2plot -T svg</code>、<code>pic2plot -T
ai</code>、<code>pic2plot -T ps</code>、<code>pic2plot -T cgm</code>、<code>pic2plot -T fig</code>
では PostScript 標準の 35
種類のフォントが使える。
<code>pic2plot -T svg</code>、<code>pic2plot -T ai</code>、<code>pic2plot -T
pcl</code>、<code>pic2plot -T hpgl</code>
では 45 種類の PCL 5 標準フォントが使える。
<code>pic2plot -T pcl</code> と <code>pic2plot -T hpgl</code>
ではヒューレット・パッカードのベクトル・フォントが使える。
上に挙げたすべての出力形式、および
<code>pic2plot -T png</code>、<code>pic2plot -T pnm</code>、<code>pic2plot -T
gif</code>、<code>pic2plot -T regis</code>、<code>pic2plot -T tek</code>
では 22 種類の Hershey ベクトル・フォントが使える。
<code>pic2plot</code> の生出力では原理的にこれらのフォントがすべて使える。
どの形式にも、<code>pic2plot</code> 生出力から <code>plot</code> で変換できるからである。
<code>plotfont</code> ユーティリティ・プログラムで、
使えるフォントのキャラクタ・マップを表示することができる。<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照。
</p>
</dd>
<dt> <samp>`--list-fonts'</samp></dt>
<dd><p><samp>`--help-fonts'</samp> と同じだが、
他のプログラムにパイプで渡して処理しやすいように、
フォントのリストを１カラムで出力する。
<samp>`-T'</samp>
オプションでの出力デバイスの指定が何もないときは、
サポートされているすべてのフォントのリストが表示される。
</p>
</dd>
<dt> <samp>`--version'</samp></dt>
<dd><p><code>pic2plot</code> および GNU plotting utilities パッケージのバージョン番号を表示して、
そのまま終了する。
</p></dd>
</dl>

<hr size="6">
<a name="pic2plot-Environment"></a>
<a name="SEC22"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC21" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC23" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC19" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC23" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 4.3 <code>pic2plot</code> の環境変数 </h2>

<p><code>pic2plot</code> の動作には、環境変数を読んでその値により制御されるものがある。
<code>BITMAPSIZE</code>、<code>PAGESIZE</code>、<code>BG_COLOR</code>、<code>EMULATE_COLOR</code>、
<code>MAX_LINE_LENGTH</code>、<code>ROTATION</code> については上述したとおりである。
これらの環境変数はそれぞれ、コマンドライン・オプションの
<samp>`--bitmap-size'</samp>、<samp>`--page-size'</samp>、<samp>`--bg-color'</samp>、
<samp>`--emulate-color'</samp>、<samp>`--max-line-length'</samp>、<samp>`--rotation'</samp>
と同じ働きを持つ。他にも、特定の出力デバイスに対してだけ有効な環境変数もある。
</p>
<p><code>pic2plot -T X</code> では X Window の画面にウィンドウが一つ開かれ、
そこにプロットが描画されるが、このとき <code>DISPLAY</code>
環境変数が設定されていれば、
それで示されるディスプレイにウィンドウが開かれる。
</p>
<p>PNG または疑似 GIF 形式を生成する
<code>pic2plot -T png</code> または <code>pic2plot -T gif</code>
に対しては、二つの環境変数が用意されている。<code>INTERLACE</code> が &quot;yes&quot;
のときは、出力される画像はインターレース形式になる。<code>TRANSPARENT_COLOR</code>
に色名を指定しておくと、出力される画像のその色の部分が透明に設定され、PNG や
GIF を扱う多くのアプリケーションで透明として扱われる。
使える色名については <a href="#SEC73">色名</a> を参照のこと。
</p>
<p><code>pic2plot -T pnm</code> では Portable Anymap (PBM/PGM/PPM)
形式で出力されるが、環境変数 <code>PNM_PORTABLE</code> が &quot;yes&quot; のとき、
出力は PBM、PGM、PPM のポータブル形式 (人間が読めるテキスト形式) で行われる。
そうでない場合はバイナリ形式 (これがデフォルト) で行われる。
</p>
<p>ウェブ用のベクトル画像の形式である WebCGM プロファイルにしたがった CGM
形式のファイルを <code>pic2plot -T cgm</code>
で生成する場合に有効な環境変数が二つある。
デフォルトでは、生成される CGM ファイルはバージョン 3 の規格に沿っているが、
マイクロソフト・オフィスなどの古い CGM 表示ソフトウェアはほとんど、CGM
のバージョン 1 しか扱えない。そこで環境変数 <code>CGM_MAX_VERSION</code> を
1&quot;、&quot;2&quot;、&quot;3&quot;、&quot;4&quot; のどれかに設定することで、出力される CGM
のバージョンの最大値を指定できる (&quot;4&quot; がデフォルト)。また <code>CGM_ENCODING</code>
で CGM ファイルのエンコーディングを指定できる。これには
&quot;clear_text&quot; (人が読めるテキスト形式) と &quot;binary&quot; が指定できる (&quot;binary&quot;
がデフォルト)。WebCGM プロファイルではバイナリ形式が要求される。
</p>
<p><code>pic2plot -T pcl</code>
ではヒューレット・パッカードのプリンタまたはプロッタの出力形式、PCL 5
形式で出力されるが、このとき <code>PCL_ASSIGN_COLORS</code> 環境変数が有効である。
PCL 5 出力をカラープリンタなどに出力する際に指定する。
これにより色の再現性を正確にするために、内部で出力デバイスに、
各色を描画するための「論理ペン」が任意に設定できるようになる。
&quot;no&quot; にセットされるとあらかじめ設定されている色のペンだけが用いられ、
他の色は濃淡の変化 (シェイディング) によって擬似的に描画される。
世の中の PCL 5 デバイスは、カラーより白黒が多いため、デフォルトでは &quot;no&quot;
であり、色はシェイディング (グレイスケール) に置き換えられる。
</p>
<p><code>plot -T hpgl</code> では HP-GL
(ヒューレット・パッカード・グラフィクス・ランゲージ)
形式の出力が生成されるが、これにもいくつかの環境変数が用意されている。
もっとも重要なのは <code>HPGL_VERSION</code> で、これには &quot;1&quot;、&quot;1.5&quot;、&quot;2&quot;
のいずれかが指定できる (&quot;2&quot; がデフォルト)。
&quot;1&quot; は純正の HP-GL、&quot;1.5&quot; は HP7550A グラフィクス・プロッタおよび
HP758x、HP7595A、HP7596A ドラフティング・プロッタに出力できる形式
(HP-GL にいくつかの HP-GL/2 拡張を加えたもの)、
&quot;2&quot; は新しい HP-GL/2 でそれぞれ描画するよう指示する。
もしバージョンが &quot;1&quot; または &quot;1.5&quot; にセットされていると、
使えるフォントはベクトル・フォントのみで、
線はすべてデフォルトの太さで描かれる (<samp>`-W'</samp> は無効になる)。
さらにバージョンが &quot;1&quot;
のときは、任意の多角形を線の色で塗りつぶす機能が使えなくなる (<samp>`-q'</samp>
オプションは座標軸に沿って置かれた円や長方形を塗りつぶすのに使われる)。
</p>
<p><code>pic2plot -T hpgl</code> のときの用紙上の描画領域は <code>HPGL_ROTATE</code> 環境変数を
&quot;yes&quot; に設定すると反時計回りに 90度回転させることができる。<code>--rotation</code>
オプションでは描画領域を回転させ、
その左下隅の位置を用紙の左下隅からの相対位置で指定するため、異なった効果になる。
<code>HPGL_ROTATE</code> 環境変数に設定できる値は、&quot;no&quot; と &quot;yes&quot; に加えて、
&quot;0&quot;、&quot;90&quot;、&quot;180&quot;、および &quot;270&quot; である。&quot;no&quot; と &quot;yes&quot; は &quot;0&quot; と &quot;90&quot;
とそれぞれ同じである。
&quot;180&quot; と &quot;270&quot; は <code>HPGL_VERSION</code> が &quot;2&quot; のとき
(デフォルトがそうである) にだけ有効である。
</p>
<p>不透明化機能による、白い線や白い色による塗りつぶしは、<code>HPGL_VERSION</code> が &quot;2&quot;
(デフォルト) で環境変数 <code>HPGL_OPAQUE_MODE</code> が &quot;yes&quot;
のときに可能になる。もしこれが &quot;no&quot;
のときは不透明化による白い色での塗りつぶしは行われず、
白色の線 (通常は 0 番のペンで描かれる) も描かれない。
この機能は昔の HP-GL/2 デバイスに適している。
たとえば HP-GL/2 ペン・プロッタは不透明化や 0
番のペンによる白色の線には対応していない。また古い HP-GL/2
デバイスの中には不透明化機能が不十分なものもある。
</p>
<p>デフォルトでは、<code>pic2plot -T hpgl</code>
では使えるペンはあらかじめ決められているものだけである。
描画時点でどのペンを使うかは、<code>HPGL_PENS</code> 環境変数で指定される。
<code>HPGL_VERSION</code> が &quot;1&quot; のときは <code>HPGL_PENS</code> のデフォルトのペンは
&quot;1=black&quot; である。<code>HPGL_VERSION</code> が &quot;1.5&quot; または &quot;2&quot;のときは、
<code>HPGL_PENS</code> のデフォルト値は
<code>&quot;1=black:2=red:3=green:4=yellow:5=blue:6=magenta:7=cyan&quot;</code> である。
指定の仕方は見ての通りである。<code>HPGL_PENS</code>
を指定することで 1&hellip;31 番のどのペンにも色を割り当てることができる。
指定できる色名については <a href="#SEC73">色名</a> を参照のこと。
1 番のペンはいつでも使える。その色は黒である必要はない。
2&hellip;31 番の他のペンはあってもなくてもよい。
</p>
<p><code>HPGL_VERSION</code> が &quot;2&quot; のときは <code>pic2plot -T hpgl</code> では
<code>HPGL_ASSIGN_COLORS</code> も有効である。もしこれが &quot;yes&quot;
にセットされていれば、<code>pic2plot -T hpgl</code> で使えるペンの色は
<code>HPGL_PENS</code>
による制約を受けない。1&hellip;31
番の「論理ペン」に必要に応じて色が割り当てられる。
これをサポートする HP-GL/2 は LaserJet プリンタや DesignJet だが、
あまり多くはないため、デフォルトでは &quot;no&quot; である。
特に HP-GL/2 ペン・プロッタは非対応である。
</p>
<p><code>pic2plot -T tek</code> では Tektronix 端末のための出力が行われるが、
環境変数 <code>TERM</code> が有効である。もし <code>TERM</code> が &quot;xterm&quot;、
&quot;nxterms&quot;、&quot;kterm&quot; のいずれかであればそれぞれ、<code>pic2plot</code>
がその時実行されている環境は X Window システム上の VT100
端末エミュレータの <code>xterm</code>、<code>nxterm</code>、<code>kterm</code>
であると判断される。このとき、<code>pic2plot -T tek</code>
では描画が行われる前に、xterm に付属していて通常は隠れている
Tektronix のウィンドウを、
前面にポップアップさせるエスケープ・シーケンスが送られる。
また描画が行われた後には、元の VT100
端末に制御を戻すためのエスケープ・シーケンスが送られる。
その際、Tektronix のウィンドウは画面に残ったままになる。
</p>
<p><code>TERM</code> が &quot;kermit&quot;、&quot;ansi.sys&quot;、&quot;nansi.sys&quot;
のいずれかの時は、MS-DOS 版の <code>kermit</code> 上の VT100
エミュレータ上であるとみなされる。
このとき、<code>pic2plot -T tek</code> では描画が行われる前に、VT100 エミュレータから
Tektronix のウィンドウに切り替えるエスケープ・シーケンスが送られる。
また出力には Tektronix 制御コードは、<code>kermit</code> 特有のものが使われる。
このとき、使える色数には制限がある (<code>ansi.sys</code> の 16 色はサポートされる)。
また描画が行われた後には、元の VT100
端末に制御を戻すためのエスケープ・シーケンスが送られる。
キーボードで `ALT' - `-' をタイプすると、
VT100 モードと Tektronix モードの切り替えが手動でできる。
</p>
<hr size="6">
<a name="tek2plot"></a>
<a name="SEC23"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC22" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC24" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC19" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC27" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 5. <code>tek2plot</code> コマンド </h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC24">5.1 <code>tek2plot</code> の使い方</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     tek2plot は何をするコマンドなのか？
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC25">5.2 <code>tek2plot</code> のコマンドライン・オプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       tek2plot が解釈できるコマンドライン・オプション
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC26">5.3 <code>tek2plot</code> の環境変数</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      tek2plot が参照する環境変数
</td></tr>
</table>

<hr size="6">
<a name="tek2plot-Introduction"></a>
<a name="SEC24"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC23" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC25" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC23" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC23" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC27" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 5.1 <code>tek2plot</code> の使い方 </h2>

<p>GNU <code>tek2plot</code> は Tektronix 形式の画像データを変換するプログラムであり、
Tektronix データを画面に表示したり、他の形式に変換したりするコマンドである。
どの形式に変換するかは <samp>`-T'</samp> で指定する。指定できる形式は、
&quot;X&quot;、&quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot;、&quot;svg&quot;、&quot;ai&quot;、&quot;ps&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;、
&quot;regis&quot;、&quot;tek&quot;、&quot;meta&quot;
で、&quot;meta&quot; がデフォルトであり、GNU <code>graph</code>、<code>plot</code>、<code>pic2plot</code>
がサポートする形式と同じである。
入力は <code>plot</code>
コマンドと同様、コマンドラインでファイル名を指定するか、標準入力から与える。
</p>
<p>Tektronix 形式の画像ファイルを生成するソフトウェアは、昔はたくさんあった。
たとえば <a href="http://tdc-www.harvard.edu/software/skymap">SKYMAP</a>
(強力な天文学画像ソフトウェア) がそうである。
GNU plotting utilities のパッケージには Tektronix
形式の画像ファイルのサンプルが同梱されているので、試してみるとよい。
ほとんどのシステムでは <tt>`/usr/share/tek2plot'</tt>
または <tt>`/usr/local/share/tek2plot'</tt> ディレクトリ
にインストールされている。
</p>
<p>Tektronix 形式は Tektronix 4010/4014 端末で描画するための、
非対話型の画像フォーマットとして定義されている。詳細は Tektronix Inc. による
1974 年の文書 <cite>4014 Service Manual</cite> (Tektronix Part #070-1648-00)
に述べられている。<code>tek2plot</code> では、グラフィクス入力モード (&quot;GIN mode&quot;)
やステータス表示のような対話モードは用意されていない。 しかし MS-DOS 版
<code>kermit</code> が実装している Tektronix エミュレータのカラー拡張など、
一般的になった Tektronix エミュレータの拡張機能を実装している。
</p>
<hr size="6">
<a name="tek2plot-Invocation"></a>
<a name="SEC25"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC24" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC26" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC23" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC23" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC27" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 5.2 <code>tek2plot</code> のコマンドライン・オプション </h2>

<p><code>tek2plot</code> は多くの古いソフトウェアで生成された Tektronix 形式のデータを、
他の画像フォーマットに変換する。出力形式やディスプレイの種類は <samp>`-T'</samp>
オプションで指定できる。指定できる形式は GNU
<code>graph</code>、<code>plot</code>、<code>pic2plot</code> と同じである。
</p>
<p>入力ファイルの名前をコマンドライン上で指定できる。
その順番やコマンドライン・オプションの順番は、意味を持たない。
ファイル名が何も指定されないか、<samp>`-'</samp>
というファイル名が指定されたときは、標準入力から読み込まれる。
出力は、<samp>`-T X'</samp> が指定されない限りは標準出力に行われる。
<samp>`-T X'</samp> が指定されたときは X Windows
の画面上のウィンドウに描画され、標準出力にはなにも出力されない。
</p>
<p>以下に、指定できるコマンドライン・オプションのリストを載せる。
コマンドライン・オプションは３種類に分けられる。
</p>
<ol>
<li>
一般的なオプション。
</li><li>
<code>tek2plot</code> 生出力のデータ (<samp>`-T'</samp> で何も指定されないときの出力形式)
に関するオプション。
</li><li>
情報を表示するためのオプション (<samp>`--help'</samp> など)。
</li></ol>


<p>引数を取るオプションでは、
説明の最初にカッコ書きでその引数の型とデフォルト値を示している。
</p>
<p>まず、一般的なオプション。
</p>
<dl compact="compact">
<dt> <samp>`-T <var>type</var>'</samp></dt>
<dt> <samp>`--output-format <var>type</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;meta&quot;)
ディスプレイの種類、あるいは出力形式を <var>type</var> で指定する。
指摘できる文字列は
&quot;X&quot;、&quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot;、&quot;svg&quot;、&quot;ai&quot;、&quot;ps&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;、&quot;regis&quot;、&quot;tek&quot;、&quot;meta&quot;
のいずれかである。
それぞれ、
X Window システム、PNG 形式、portable anymap (PBM/PGM/PPM) 形式、pseudo-GIF
形式、XML ベースの Scalable Vector Graphics 形式、Adobe Illustrator
形式、<code>idraw</code> で編集できる PostScript
形式、ウェブ用のベクトル画像形式である WebCGM 形式、<code>xfig</code>
で編集できる形式、ヒューレット・パッカードの PCL 5 プリンタ言語、
ヒューレット・パッカード・グラフィクス言語 (デフォルトでは HP-GL/2)、
DEC で開発された ReGIS (remote graphics
instruction set) 形式、Tektronix 形式、特定のデバイスに依存しない GNU graphics
metafile 形式である。<samp>`--display-type'</samp> は古いので
<samp>`--output-format'</samp> を使うべきである。
</p>
</dd>
<dt> <samp>`-p <var>n</var>'</samp></dt>
<dt> <samp>`--page-number <var>n</var>'</samp></dt>
<dd><p>(正の整数)
入力として与えられる一つあるいは複数の Tektronix データファイルから、
<var>n</var> ページ目だけを取り出して変換する。
一つの Tektronix データファイルには複数のページを持つことができるが、
ページ番号は 0 から始まる。
</p>
<p><samp>`-p'</samp> オプションが指定されない場合、
デフォルトでは空でないすべてのページを順に表示する。たとえば <code>tek2plot
-T X</code> では各ページを、それぞれのウィンドウを X window
上に開いて表示する。<samp>`-T png'</samp>、<samp>`-T pnm'</samp>、<samp>`-T gif'</samp>、<samp>`-T
svg'</samp>、<samp>`-T ai'</samp>、<samp>`-T fig'</samp>
のいずれかが指定されているときは、デフォルトでは最初のページだけが描画される。
それは PNG、 PNG、疑似 GIF、SVG、AI、Fig
形式では単ページの画像しかサポートされないからである。
</p>
<p>Tektronix データの多くは、ページ数が１(ページ 0) か、２(空のページ
(0 ページ目) と、1 ページ目) である。GNU plotting utilities の Tektronix
形式の出力 (<code>graph -T tek</code> などによる) は通常、後者である。
</p>
</dd>
<dt> <samp>`-F <var>font_name</var>'</samp></dt>
<dt> <samp>`--font-name <var>font_name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;Courier&quot;、ただし 
<code>tek2plot -T png</code>、<code>tek2plot -T pnm</code>、<code>tek2plot -T
gif</code>、<code>tek2plot -T hpgl</code>、<code>tek2plot -T regis</code>、<code>tek2plot</code>
の生出力の場合は &quot;HersheySerif&quot;)
文字列に使うフォントを <var>font_name</var> に指定する。
フォント名では大文字と小文字は区別されない。
Courier 系以外のフォントが指定された場合は <samp>`--position-chars'</samp>
を使う (後述)。すべてのフォントのリストは <a href="#SEC68">利用できるフォント</a> を参照のこと。
もし指定されたフォントが使えない場合、デフォルトのフォントが使われる。
</p>
<p><code>tek2plot -T
pcl</code> で PCL 5 形式の画像を生成して LaserJet III
プリンタで出力したい場合は Courier 以外のフォントを指定した方がよい。
LaserJet III プリンタはヒューレット・パッカードの最初の PCL 5
対応プリンタであり、スケーラブルな Courier 書体をサポートしていない。
このプリンタでサポートされている PCL 5 は CGTimes
と Univers ファミリの計８種類だけである。詳細は <a href="#SEC68">利用できるフォント</a> のこと。
</p>
</dd>
<dt> <samp>`-W <var>line_width</var>'</samp></dt>
<dt> <samp>`--line-width <var>line_width</var>'</samp></dt>
<dd><p>(実数、デフォルトは -1.0)
プロットの外枠の線の太さを <var>line_width</var> にする。
数値は描画領域の縦か横の短い方に対する割合として指定する。
負の値を指定すると、<code>libplot</code>
ライブラリで設定しているデフォルト値が使われる。
通常、デフォルト値は描画領域の 1/850 だが、<samp>`-T X'</samp>、<samp>`-T png'</samp>、<samp>`-T
pnm'</samp>、<code>-T gif</code> のときは 0 になる。
0 になったときは、そのデバイスで描けるもっとも細い線が使われる。
これはどのデバイスでもそうである。しかし <code>idraw</code> や <code>xfig</code>
では、太さ 0 の線は描かれない。
</p>
<p><code>tek2plot -T regis</code>
では、線の太さはデフォルト値以外は使えない。<code>tek2plot -T hpgl</code> でも環境変数
<code>HPGL_VERSION</code> に 2 よりも小さな値をセットしているときは、同様である
(2 がデフォルト値)。
</p>
</dd>
<dt> <samp>`--bg-color <var>name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;white&quot;)
背景色を <var>name</var> に設定する。このオプションは
<code>tek2plot -T X</code>、<code>tek2plot -T png</code>、<code>tek2plot -T
pnm</code>、<code>tek2plot -T gif</code>、<code>tek2plot -T cgm</code>、<code>tek2plot -T
regis</code>、<code>tek2plot -T meta</code>
でだけ有効である。無効な色名が指定されたときは、デフォルトの色が使われる。
使える色名については <a href="#SEC73">色名</a> を参照のこと。環境変数 <code>BG_COLOR</code>
でも同様に指定できる。
</p>
<p><samp>`-T png'</samp> か <samp>`-T gif'</samp>
オプションのどちらかが使われているときは、環境変数 <code>TRANSPARENT_COLOR</code>
に背景色を指定することで、透過 PNG または透過疑似 GIF 形式の画像を生成できる。
<a href="#SEC26"><code>tek2plot</code> の環境変数</a> 参照。
<samp>`-T svg'</samp> か <samp>`-T cgm'</samp>
オプションのどちらかが使われているときは、背景色に &quot;none&quot;
を指定することで、背景色のない画像を生成できる。
</p>
</dd>
<dt> <samp>`--bitmap-size <var>bitmap_size</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;570x570&quot;)
描画領域の大きさをピクセル単位で <var>bitmap_size</var> に設定する。
このオプションは
<code>tek2plot -T X</code>、<code>tek2plot -T png</code>、<code>tek2plot -T
pnm</code>、<code>tek2plot -T gif</code>
のときにだけ有効である。
これらの出力形式では描画領域のサイズがピクセル単位で表現されているからである。
環境変数 <code>BITMAPSIZE</code> でも同様に指定できる。
</p>
<p><code>tek2plot -T X</code> のときは描画のために開かれたウィンドウが描画領域になる。
X Window
の画面上でのこのウィンドウの位置も、コマンドライン・オプションで指定できる。
たとえば <var>bitmap_size</var> を &quot;570x570+0+0&quot;
と指定すると、開かれたウィンドウは画面の左上隅に置かれる。
</p>
<p>もし描画領域を正方形ではなく長方形にすると、
描画に使われるフォントは縦と横で違う倍率で拡大縮小されることになる。
このように拡大縮小できないフォントが指定されているときは、Hershey
ベクトル・フォントの &quot;HersheySerif&quot;
などのデフォルトのスケーラブル・フォントが使われる。
</p>
<p>後方互換性のために、X resource の <code>Xplot.geometry</code>
を設定することで、<samp>`--bitmap-size'</samp> や <code>BITMAPSIZE</code>
の代わりにディスプレイのサイズを設定できる。
</p>
</dd>
<dt> <samp>`--emulate-color <var>option</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;no&quot;)
<var>option</var> が &quot;yes&quot; のとき、カラーの出力画像をグレイスケールにして出力する。
このオプションは、<samp>`tek2plot -T pcl'</samp> で PCL 5
対応機器への出力を行っているときでなければ、使うことはあまりないかもしれない。
(白黒の LaserJet プリンタなどの白黒 PCL 5
機器が搭載しているカラーからグレイスケールへの変換機能は、HP-GL/2 の 7
種類のペンの標準色を黒に置き換えるだけ (黄色も黒になる)
で、あまりいいとは言えない)。
環境変数 <code>EMULATE_COLOR</code> を &quot;yes&quot; に設定しても同じ指定ができる。
</p>
</dd>
<dt> <samp>`--max-line-length <var>max_line_length</var>'</samp></dt>
<dd><p>(整数、デフォルトは 500)
一つのデータセットから描かれる一本の折れ線について、
一度に描ける最大のデータ点数を <var>max_line_length</var> に指定する。
データ点の数がこの数に達したときは、折れ線は複数回に分けて描画される。
この時、特に通知やメッセージなどは行われない。
</p>
<p>この指定は、いくつかの出力デバイス (昔の PostScript プリンタや HP-GL プロッタ)
では出力バッファの大きさに制限があることによる。
この最大点数は、環境変数 <code>MAX_LINE_LENGTH</code> でも指定できる。
<code>tek2plot</code> の生出力では、
各データ点ごとにリアルタイムで描画が行われるので、このオプションは無効である。
</p>
</dd>
<dt> <samp>`--page-size <var>pagesize</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;letter&quot;)
プロットが描かれる用紙の大きさを指定する。このオプションは
<code>tek2plot -T svg</code>、<code>tek2plot -T ai</code>、<code>tek2plot -T
ps</code>、<code>tek2plot -T cgm</code>、<code>tek2plot -T fig</code>、<code>tek2plot -T
pcl</code>、<code>tek2plot -T hpgl</code>
でだけ有効である。&quot;letter&quot;
で指定される大きさは 8.5in x 11in である。&quot;a0&quot;&hellip;&quot;a4&quot; の ISO
の用紙サイズおよび &quot;a&quot;&hellip;&quot;e&quot; の ANSI のサイズも指定できる
(&quot;letter&quot; は &quot;a&quot;、&quot;tabloid&quot; は &quot;b&quot; と同じである)。
&quot;legal&quot;、&quot;ledger&quot;、&quot;b5&quot; も指定できる。用紙サイズは、環境変数
<code>PAGESIZE</code> でも同様に指定できる。
</p>
<p><code>tek2plot -T ai</code>、<code>tek2plot -T ps</code>、<code>tek2plot -T
pcl</code>、<code>tek2plot -T fig</code>
ではプロットが置かれる描画領域 (または `viewport')
は、デフォルトでは指定されたページの中央に置かれる正方形の領域である。
<code>tek2plot -T hpgl</code> でも同様だが、ページの中央ではない。
この描画領域の縦、横の長さは、たとえば <var>pagesize</var> を &quot;letter,xsize=4in&quot;
や &quot;a4,xsize=10cm,ysize=15cm&quot; のようにすることで指定できる。
この長さは負の値になってもよい (負のときは鏡像になる)。
</p>
<p>描画領域の位置は、デフォルトの位置に対する相対座標で指定できる。たとえば
<var>pagesize</var> を &quot;letter,yoffset=1.2in&quot; や
&quot;a4,xoffset=-5mm,yoffset=2.0cm&quot; のようにするとよい。
または用紙の左下隅からの相対座標として描画領域の左下隅の座標を指定することで、
より正確に指定することもできる。それにはたとえば <var>pagesize</var> を
&quot;letter,xorigin=2in,yorigin=3in&quot; や &quot;a4,xorigin=0.5cm,yorigin=0.5cm&quot;
ようにするとよい。これらのオプションは取り混ぜて使ってもよい。
</p>
<p><code>tek2plot -T svg</code> と <code>tek2plot -T cgm</code> では
&quot;xoffset&quot;、&quot;yoffset&quot;、&quot;xorigin&quot;、&quot;yorigin&quot; は無視される。これらの
形式では、画像が最終的にウェブブラウザ上のどこに表示されるかは、
画像そのものから指定できないからである。しかし &quot;xsize&quot; と &quot;ysize&quot;
オプションは無視される訳ではない。
<a href="#SEC74">ページと描画領域のサイズ</a> を参照のこと。
</p>
</dd>
<dt> <samp>`--pen-color <var>name</var>'</samp></dt>
<dd><p>(String, デフォルトは &quot;black&quot;)
プロットに使われる「ペンの色」を <var>name</var> で指定する。
無効な名前が色名に指定されたときは、デフォルトの色が使われる。
使える色名に付いては <a href="#SEC73">色名</a> を参照のこと。
</p>
</dd>
<dt> <samp>`--position-chars'</samp></dt>
<dd><p>文字列中の各文字を、一文字ずつ独立に描画する。文字のフォントが courier
ファミリーではなく、さらに等幅でない場合はこのオプションを指定した方がよい。
これを指定すると、出力された画像ファイルを <code>xfig</code> や <code>idraw</code>
で編集するのが煩雑にはなるが、文字列の見栄えが良くなる。
</p>
</dd>
<dt> <samp>`--rotation <var>angle</var>'</samp></dt>
<dd><p>(実数、デフォルトは 0.0)
描画領域中のプロットを角度 <var>angle</var> だけ回転する。
その数字の角度だけ、反時計回りに回転する。
環境変数 <code>ROTATION</code> に値を設定することでも、同じ指定ができる。
</p>
<p>角度に 0 または 90
を指定することでそれぞれ、ポートレートまたはランドスケープ (用紙が縦、または横)
モードになる。前衛芸術家にも便利に使ってもらえるオプションである。
</p>
</dd>
<dt> <samp>`--use-tek-fonts'</samp></dt>
<dd><p>Tektronix 4010/4014 で使われていたオリジナルのフォントを使う。
よりオリジナルに忠実な描画を再現できる。
このオプションは <code>tek2plot -T X</code> のときにだけ有効である。
オリジナルの４種類の Tektronix フォントをビットマップにしたものを
GNU plotting utilities のパッケージに <code>tekfont0</code>&hellip;<code>tekfont3</code>
という名前で同梱しており、簡単に X Window
システムにインストールすることができる。
このオプションを指定するときは、<samp>`--bitmap-size 1024x1024'</samp>
オプションを指定するか、または X のリソース <code>Xplot.geometry</code>
でウィンドウをのサイズを 1024x1024 ピクセルにしないと、正確な描画ができない。
ビットマップ・フォントの拡大・縮小をしないように制限しているためである。
</p>
<p>Tektronix のオリジナルフォントが文字列で使われているような Tektronix
形式のファイルがすでにあるような状況では、このオプションは意味があるだろう。
しかし GNU plotting utilities で出力する Tektronix 形式 (<code>graph -T tek</code>
の出力など) ではこのオリジナルのフォントは使わない。
</p></dd>
</dl>

<p>以下のオプションは、<code>tek2plot</code> の生出力に対してだけ、つまり <samp>`-T'</samp>
をつけずに <code>tek2plot</code> を使うときにだけ有効である。その場合の
<code>tek2plot</code> の出力は GNU metafile 形式であり、これを <code>plot</code>
に渡すことで他の形式に変換できる。
</p>
<dl compact="compact">
<dt> <samp>`-O'</samp></dt>
<dt> <samp>`--portable-output'</samp></dt>
<dd><p>GNU metafile 出力を、バイナリ形式 (デフォルト) ではなく、ポータブル形式
(テキスト形式、人間の読める形式) で行う。これは環境変数 <code>META_PORTABLE</code>
を &quot;yes&quot; に設定することでも指定できる。
</p></dd>
</dl>

<p>以下のオプションで、必要な情報を表示させることができる。
</p>
<dl compact="compact">
<dt> <samp>`--help'</samp></dt>
<dd><p>コマンドライン・オプションのリストを表示させ、そのまま実行を終了する。
</p>
</dd>
<dt> <samp>`--help-fonts'</samp></dt>
<dd><p>利用可能なフォントのリストを表示して、そのまま終了する。
出力される内容は、<samp>`-T'</samp> オプションで指定される出力デバイスによって変わる。
<code>tek2plot -T X</code>、<code>tek2plot -T svg</code>、<code>tek2plot -T
ai</code>、<code>tek2plot -T ps</code>、<code>tek2plot -T cgm</code>、<code>tek2plot -T fig</code>
では PostScript 標準の 35 種類のフォントが使える。
<code>tek2plot -T svg</code>、<code>tek2plot -T ai</code>、<code>tek2plot -T
pcl</code>、<code>tek2plot -T hpgl</code>
では 45 種類の PCL 5 標準フォントが使える。
<code>tek2plot -T pcl</code> と <code>tek2plot -T hpgl</code>
ではヒューレット・パッカードのベクトル・フォントが使える。
上に挙げたすべての出力形式、および
<code>tek2plot -T png</code>、<code>tek2plot -T pnm</code>、<code>tek2plot -T
gif</code>、<code>tek2plot -T regis</code>、<code>tek2plot -T tek</code>
では 22 種類の Hershey ベクトル・フォントが使える。
<code>tek2plot</code> の生出力では原理的にこれらのフォントがすべて使える。
どの形式にも、<code>tek2plot</code> 生出力から <code>plot</code> で変換できるからである。
<code>plotfont</code> ユーティリティ・プログラムで、
使えるフォントのキャラクタ・マップを表示することができる。<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照。
</p>
</dd>
<dt> <samp>`--list-fonts'</samp></dt>
<dd><p><samp>`--help-fonts'</samp> と同じだが、
他のプログラムにパイプで渡して処理しやすいように、
フォントのリストを１カラムで出力する。
<samp>`-T'</samp>
オプションでの出力デバイスの指定が何もないときは、
サポートされているすべてのフォントのリストが表示される。
</p>
</dd>
<dt> <samp>`--version'</samp></dt>
<dd><p><code>tek2plot</code> および GNU plotting utilities パッケージのバージョン番号を表示して、
そのまま終了する。
</p></dd>
</dl>

<hr size="6">
<a name="tek2plot-Environment"></a>
<a name="SEC26"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC25" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC27" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC23" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC23" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC27" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 5.3 <code>tek2plot</code> の環境変数 </h2>

<p><code>graph</code> や <code>plot</code> の動作を制御するための環境変数は、
<code>tek2plot</code> の動作の制御にも使われる。
重複になるが、以下にそれを挙げる。
</p>
<p><code>BITMAPSIZE</code>、<code>PAGESIZE</code>、<code>BG_COLOR</code>、<code>EMULATE_COLOR</code>、
<code>MAX_LINE_LENGTH</code>、<code>ROTATION</code> については上述したとおりである。
これらの環境変数はそれぞれ、コマンドライン・オプションの
<samp>`--bitmap-size'</samp>、<samp>`--page-size'</samp>、<samp>`--bg-color'</samp>、
<samp>`--emulate-color'</samp>、<samp>`--max-line-length'</samp>、<samp>`--rotation'</samp>
と同じ働きを持つ。他にも、特定の出力デバイスに対してだけ有効な環境変数もある。
</p>
<p><code>tek2plot -T X</code> では X Window の画面にウィンドウが一つ開かれ、
そこにプロットが描画されるが、このとき <code>DISPLAY</code>
環境変数が設定されていれば、
それで示されるディスプレイにウィンドウが開かれる。
</p>
<p>PNG または疑似 GIF 形式を生成する
<code>tek2plot -T png</code> または <code>tek2plot -T gif</code>
に対しては、二つの環境変数が用意されている。<code>INTERLACE</code> が &quot;yes&quot;
のときは、出力される画像はインターレース形式になる。<code>TRANSPARENT_COLOR</code>
に色名を指定しておくと、出力される画像のその色の部分が透明に設定され、PNG や
GIF を扱う多くのアプリケーションで透明として扱われる。
使える色名については <a href="#SEC73">色名</a> を参照のこと。
</p>
<p><code>tek2plot -T pnm</code> では Portable Anymap (PBM/PGM/PPM)
形式で出力されるが、環境変数 <code>PNM_PORTABLE</code> が &quot;yes&quot; のとき、
出力は PBM、PGM、PPM のポータブル形式 (人間が読めるテキスト形式) で行われる。
そうでない場合はバイナリ形式 (これがデフォルト) で行われる。
</p>
<p>ウェブ用のベクトル画像の形式である WebCGM プロファイルにしたがった CGM
形式のファイルを <code>tek2plot -T cgm</code>
で生成する場合に有効な環境変数が二つある。
デフォルトでは、生成される CGM ファイルはバージョン 3 の規格に沿っているが、
マイクロソフト・オフィスなどの古い CGM 表示ソフトウェアはほとんど、CGM
のバージョン 1 しか扱えない。そこで環境変数 <code>CGM_MAX_VERSION</code> を
1&quot;、&quot;2&quot;、&quot;3&quot;、&quot;4&quot; のどれかに設定することで、出力される CGM
のバージョンの最大値を指定できる (&quot;4&quot; がデフォルト)。また <code>CGM_ENCODING</code>
で CGM ファイルのエンコーディングを指定できる。これには
&quot;clear_text&quot; (人が読めるテキスト形式) と &quot;binary&quot; が指定できる (&quot;binary&quot;
がデフォルト)。WebCGM プロファイルではバイナリ形式が要求される。
</p>
<p><code>tek2plot -T pcl</code>
ではヒューレット・パッカードのプリンタまたはプロッタの出力形式、PCL 5
形式で出力されるが、このとき <code>PCL_ASSIGN_COLORS</code> 環境変数が有効である。
PCL 5 出力をカラープリンタなどに出力する際に指定する。
これにより色の再現性を正確にするために、内部で出力デバイスに、
各色を描画するための「論理ペン」が任意に設定できるようになる。
&quot;no&quot; にセットされるとあらかじめ設定されている色のペンだけが用いられ、
他の色は濃淡の変化 (シェイディング) によって擬似的に描画される。
世の中の PCL 5 デバイスは、カラーより白黒が多いため、デフォルトでは &quot;no&quot;
であり、色はシェイディング (グレイスケール) に置き換えられる。
</p>
<p><code>tek2plot -T hpgl</code> では HP-GL
(ヒューレット・パッカード・グラフィクス・ランゲージ)
形式の出力が生成されるが、これにもいくつかの環境変数が用意されている。
もっとも重要なのは <code>HPGL_VERSION</code> で、これには &quot;1&quot;、&quot;1.5&quot;、&quot;2&quot;
のいずれかが指定できる (&quot;2&quot; がデフォルト)。
&quot;1&quot; は純正の HP-GL、&quot;1.5&quot; は HP7550A グラフィクス・プロッタおよび
HP758x、HP7595A、HP7596A ドラフティング・プロッタに出力できる形式
(HP-GL にいくつかの HP-GL/2 拡張を加えたもの)、
&quot;2&quot; は新しい HP-GL/2 でそれぞれ描画するよう指示する。
もしバージョンが &quot;1&quot; または &quot;1.5&quot; にセットされていると、
使えるフォントはベクトル・フォントのみで、
線はすべてデフォルトの太さで描かれる (<samp>`-W'</samp> は無効になる)。
</p>
<p><code>tek2plot -T hpgl</code> のときの用紙上の描画領域は <code>HPGL_ROTATE</code> 環境変数を
&quot;yes&quot; に設定すると反時計回りに 90度回転させることができる。<code>--rotation</code>
オプションでは描画領域を回転させ、
その左下隅の位置を用紙の左下隅からの相対位置で指定するため、異なった効果になる。
<code>HPGL_ROTATE</code> 環境変数に設定できる値は、&quot;no&quot; と &quot;yes&quot; に加えて、
&quot;0&quot;、&quot;90&quot;、&quot;180&quot;、および &quot;270&quot; である。&quot;no&quot; と &quot;yes&quot; は &quot;0&quot; と &quot;90&quot;
とそれぞれ同じである。
&quot;180&quot; と &quot;270&quot; は <code>HPGL_VERSION</code> が &quot;2&quot; のとき
(デフォルトがそうである) にだけ有効である。
</p>
<p>不透明化機能による、白い線や白い色による塗りつぶしは、<code>HPGL_VERSION</code> が &quot;2&quot;
(デフォルト) で環境変数 <code>HPGL_OPAQUE_MODE</code> が &quot;yes&quot;
のときに可能になる。もしこれが &quot;no&quot;
のときは不透明化による白い色での塗りつぶしは行われず、
白色の線 (通常は 0 番のペンで描かれる) も描かれない。
この機能は昔の HP-GL/2 デバイスに適している。
たとえば HP-GL/2 ペン・プロッタは不透明化や 0
番のペンによる白色の線には対応していない。また古い HP-GL/2
デバイスの中には不透明化機能が不十分なものもある。
</p>
<p>デフォルトでは、<code>tek2plot -T hpgl</code>
では使えるペンはあらかじめ決められているものだけである。
描画時点でどのペンを使うかは、<code>HPGL_PENS</code> 環境変数で指定される。
<code>HPGL_VERSION</code> が &quot;1&quot; のときは <code>HPGL_PENS</code> のデフォルトのペンは
&quot;1=black&quot; である。<code>HPGL_VERSION</code> が &quot;1.5&quot; または &quot;2&quot;のときは、
<code>HPGL_PENS</code> のデフォルト値は
<code>&quot;1=black:2=red:3=green:4=yellow:5=blue:6=magenta:7=cyan&quot;</code> である。
指定の仕方は見ての通りである。<code>HPGL_PENS</code>
を指定することで 1&hellip;31 番のどのペンにも色を割り当てることができる。
指定できる色名については <a href="#SEC73">色名</a> を参照のこと。
1 番のペンはいつでも使える。その色は黒である必要はない。
2&hellip;31 番の他のペンはあってもなくてもよい。
</p>
<p><code>HPGL_VERSION</code> が &quot;2&quot; のときは <code>tek2plot -T hpgl</code> では
<code>HPGL_ASSIGN_COLORS</code> も有効である。もしこれが &quot;yes&quot;
にセットされていれば、<code>tek2plot -T hpgl</code> で使えるペンの色は
<code>HPGL_PENS</code>
による制約を受けない。1&hellip;31
番の「論理ペン」に必要に応じて色が割り当てられる。
これをサポートする HP-GL/2 は LaserJet プリンタや DesignJet だが、
あまり多くはないため、デフォルトでは &quot;no&quot; である。
特に HP-GL/2 ペン・プロッタは非対応である。
</p>
<hr size="6">
<a name="plotfont"></a>
<a name="SEC27"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC26" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC28" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC23" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC31" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 6. <code>plotfont</code> コマンド </h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC28">6.1 <code>plotfont</code> の使い方</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         plotfont は何をするコマンドなのか？
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC29">6.2 <code>plotfont</code> のコマンドライン・オプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       plotfont が解釈できるコマンドライン・オプション
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC30">6.3 <code>plotfont</code> の環境変数</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      plotfont が参照する環境変数
</td></tr>
</table>

<hr size="6">
<a name="plotfont-Examples"></a>
<a name="SEC28"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC27" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC29" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC27" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC27" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC31" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 6.1 <code>plotfont</code> の使い方 </h2>

<p><code>plotfont</code> は GNU plotting utilities の <code>libplot</code>
ライブラリを内部で利用している
<code>graph</code>、<code>plot</code>、<code>pic2plot</code>、<code>tek2plot</code>
プログラムで使えるフォントのキャラクタ・マップを表示する、
単純なユーティリティ・プログラムである。
キャラクタ・マップは X Window システムのディスプレイ上に表示、
または他の画像フォーマットに出力できる。<samp>`-T'</samp>
オプションで、出力する画像フォーマットを指定できる。指定できるのは
&quot;X&quot;、&quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot;、&quot;svg&quot;、&quot;ai&quot;、&quot;ps&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;、&quot;regis&quot;、&quot;tek&quot;、&quot;meta&quot;
(&quot;meta&quot; がデフォルト) である。
</p>
<p>どのフォントが使えるかは、<samp>`-T'</samp>
オプションで何が指定されているかによって変わる。
使えるフォントのリストを表示させるには、
<samp>`--help-fonts'</samp> オプションを使う。たとえば、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plotfont -T ps --help-fonts
</pre></td></tr></table>

<p>とすると出力が PostScript 形式のときに使えるフォントのリストが表示される。
その中には &quot;Times-Roman&quot; があるが、以下のようにすると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plotfont -T ps Times-Roman &gt; map.ps
</pre></td></tr></table>

<p>このフォントの後半、表示に使える (制御文字でない)
アスキー文字のキャラクタ・マップが表示される。
キャラクタ・マップは 12 x 8 の表で、各セルの中央に文字が表示される。
<samp>`-2'</samp> オプションを付けるとフォントの前半のマップが表示される。
</p>
<p>ほとんどの組み込みフォントは ISO-Latin-1 エンコードである。
それらのフォントの前半は ISO-Latin-1 でエンコードされるが、たとえば
&quot;HersheyCyrillic&quot; はそうでない。
以下のようにすると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plotfont -T ps -2 HersheyCyrillic &gt; map.ps
</pre></td></tr></table>

<p>この場合のエンコード、KOI8-R エンコードでどうなるかが表示される。
KOI8-R エンコードは昔のソヴィエト連邦の Unix
およびネットワーク・アプリケーションで標準だったエンコードである。
&quot;dingbats&quot; フォントとも呼ばれる &quot;ZapfDingbats&quot; や &quot;Wingdings&quot;
なども独自のエンコードを使っている。GNU plotting utilities
をインストールしてもほとんどの場合、PostScript
形式を出力する際に Wingdings フォントは使えない。しかし PCL 5 および HP-GL/2
形式では Wingdings フォントが使える。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plotfont -T hpgl Wingdings &gt; map.plt
</pre></td></tr></table>

<p>上のコマンドを実行すると HP-GL/2 形式で Wingdings
フォントのキャラクタ・マップが得られる。
同様に <code>plotfont -T pcl Wingdings</code> とすると、LaserJet や他の PCL 5
プリンタで印刷できる PCL 5 形式で Wingdings
フォントのキャラクタ・マップが得られる。
</p>
<p>GNU plotting utilities には合計で 100 種類以上のフォントが組み込まれている。
<a href="#SEC68">利用できるフォント</a> 参照。出力デバイスに X display
を使うときは、組み込みフォント以外のフォントも使える。以下のようにすると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plotfont -T X --help-fonts
</pre></td></tr></table>

<p>利用できる組み込みフォントのリストが表示される。それには Hershey フォントも
PostScript フォントも含まれている。これに加えて、表示に使われている
X display で利用できるフォントも使える。<code>xlsfonts</code> コマンドで利用中の
X display で使えるフォントのリストが表示される。フォント名の多くは XLFD
形式と呼ばれる形式で表示される。plotting utilities は X の font 名を XLFD
形式の短縮形で表示する。たとえば、&quot;CharterBT-Roman&quot; というフォントは多くの X
display で使えるが、これの XLDF 名は
&quot;-bitstream-charter-medium-r-normal-0-0-0-0-p-0-iso8859-1&quot;
で、短縮形は
&quot;charter-medium-r-normal&quot; である。以下のようにすると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">plotfont -T X charter-medium-r-normal
</pre></td></tr></table>

<p>X window の画面上にウィンドウが開いて、
このフォントのキャラクタ・マップが表示される。
</p>
<p><samp>`-T X'</samp> オプションを指定するとき、<samp>`--bitmap-size'</samp>
を使えば開かれるウィンドウのサイズを指定できる。
最近の X display では縦、横方向で異なる倍率でフォントがスケーリングできる。
たとえば上の例のコマンドに <samp>`--bitmap-size 600x300'</samp> を追加すると、
キャラクタ・マップが表示され、その中の CharterBT-Roman の文字が X Window
の機能により拡大縮小される。
</p>
<hr size="6">
<a name="plotfont-Invocation"></a>
<a name="SEC29"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC28" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC30" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC27" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC27" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC31" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 6.2 <code>plotfont</code> のコマンドライン・オプション </h2>

<p><code>plotfont</code> は GNU plotting utilities の <code>libplot</code>
ライブラリを内部で利用している
<code>graph</code>、<code>plot</code>、<code>pic2plot</code>、<code>tek2plot</code>
プログラムで使えるフォントのキャラクタ・マップを表示するユーティリティである。
キャラクタ・マップは X Window システムのディスプレイ上に表示、
または他の画像形式に出力できる。<samp>`-T'</samp>
オプションで出力する画像形式を指定できる。
</p>
<p>キャラクタ・マップを出力するフォント名は、<code>plotfont</code>
のコマンドライン上のどの位置でもよい。
つまりフォント名やコマンドライン・オプションの順序関係には意味はない。
<samp>`-T X'</samp>
オプションが指定されない限り、キャラクタ・マップは標準出力に書き出される。
<samp>`-T X'</samp> の場合、X Window
の画面上の一つのウィンドウにキャラクタ・マップが描画され、
ファイルには何も書き出されない。
</p>
<p>以下に指定できるコマンドライン・オプションを列挙する。
コマンドライン・オプションには、３種類ある。
</p>
<ol>
<li>
一般的なオプション。
</li><li>
<code>plotfont</code> の生出力のデータ (<samp>`-T'</samp> で何も指定されないときの出力形式)
に関するオプション。
</li><li>
情報を表示するためのオプション (<samp>`--help'</samp> など)。
</li></ol>


<p>引数を取るオプションでは、
説明の最初にカッコ書きでその引数の型とデフォルト値を示している。
</p>
<p>まず、一般的なオプション。
</p>
<dl compact="compact">
<dt> <samp>`-1'</samp></dt>
<dt> <samp>`--lower-half'</samp></dt>
<dd><p>指定されたフォントの前半 (lower half) のキャラクタ・マップを表示する。
これがデフォルトである。
</p>
</dd>
<dt> <samp>`-2'</samp></dt>
<dt> <samp>`--upper-half'</samp></dt>
<dd><p>指定されたフォントの後半 (upper half) のキャラクタ・マップを表示する。
</p>
</dd>
<dt> <samp>`-o'</samp></dt>
<dt> <samp>`--octal'</samp></dt>
<dd><p>十進数ではなく八進数でキャラクタの番号を表示する (十進数がデフォルト)。
</p>
</dd>
<dt> <samp>`-x'</samp></dt>
<dt> <samp>`--hexadecimal'</samp></dt>
<dd><p>十進数ではなく十六進数でキャラクタの番号を表示する (十進数がデフォルト)。
</p>
</dd>
<dt> <samp>`--box'</samp></dt>
<dd><p>各キャラクタの左右を横幅を示す点線で囲む。
デフォルトではそうしないようになっている。
</p>
</dd>
<dt> <samp>`-j <var>row</var>'</samp></dt>
<dt> <samp>`--jis-row <var>row</var>'</samp></dt>
<dd><p>JIS [Japanese Industrial Standard] X0208
エンコードの日本語フォントの指定された行 (<var>row</var>)
のキャラクタ・マップを表示する。
これは現在、HersheyEUC [Extended Unix Code] フォントでだけ有効である。
もしこれが指定された場合、<samp>`-1'</samp> および <samp>`-2'</samp>
は無視され、このオプションが優先される。
</p>
<p>指定できる行番号は 1&hellip;94 である。JIS X0208 ではローマ字は 3、
日本語の表音文字 (平仮名とカタカナ) は 4 と 5 である。
ギリシャ文字とキリル文字は 6 と 7 である。
日本語の表意文字 (漢字) は 16&hellip;84 である。
行番号 16&hellip;47 には、よく使われる JIS 第一水準の漢字が入っている。
漢字は音読み (古代の中国語読み) の順に並べられている。
行番号 48&hellip;84 は JIS 第二水準の (さほど使われない) 漢字が入っている。
</p>
<p>HersheyEUC フォントには、JIS 第一水準の 2965 文字のうち 596 文字と、
第二水準から 7 文字が実装されている。これらは 8-bit EUC-JP
でエンコードされている。
これは多バイトエンコードで、JIS X0208 と同じくアスキー文字も含まれている。
アスキー文字は普通、
最高位ビットが立っていない１バイトで表現されている。一方 JIS X0208
の各文字は２バイトで表現され、どちらのバイトも最高位ビットが立っている。
第一バイトは行番号に 32 を加えた値、第二バイトがその文字の番号である。
</p>
</dd>
<dt> <samp>`-T <var>type</var>'</samp></dt>
<dt> <samp>`--output-format <var>type</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;meta&quot;)
ディスプレイの種類、あるいは出力形式を <var>type</var> で指定する。指摘できる文字列は
&quot;X&quot;、&quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot;、&quot;svg&quot;、&quot;ai&quot;、&quot;ps&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;、&quot;regis
&quot;、&quot;tek&quot;、&quot;meta&quot;
のいずれかである。
それぞれ、
X Window システム、PNG 形式、portable anymap (PBM/PGM/PPM) 形式、pseudo-GIF
形式、XML ベースの Scalable Vector Graphics 形式、Adobe Illustrator
形式、<code>idraw</code> で編集できる PostScript
形式、ウェブ用のベクトル画像形式である WebCGM 形式、<code>xfig</code>
で編集できる形式、ヒューレット・パッカードの PCL 5 プリンタ言語、
ヒューレット・パッカード・グラフィクス言語 (デフォルトでは HP-GL/2)、
DEC で開発された ReGIS (remote graphics
instruction set) 形式、Tektronix 形式、特定のデバイスに依存しない GNU graphics
metafile 形式である。<samp>`--display-type'</samp> は古いので
<samp>`--output-format'</samp> を使うべきである。
</p>
<p>PNG、PNM、疑似 GIF、SVG、AI、Fig
の各形式では複数ページの画像をサポートしていないので、
<samp>`-T png'</samp>、g<samp>`-T pnm'</samp>、the <samp>`-T gif'</samp>、the <samp>`-T
svg'</samp>、the <samp>`-T ai'</samp>、the <samp>`-T fig'</samp> 
のいずれかが指定されているときは、
最初に指定されたフォントのキャラクタ・マップだけが出力される。
</p>
</dd>
<dt> <samp>`--bg-color <var>name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;white&quot;)
背景色を <var>name</var> に設定する。このオプションは
<code>plotfont -T X</code>、<code>plotfont -T png</code>、<code>plotfont -T
pnm</code>、<code>plotfont -T gif</code>、<code>plotfont -T cgm</code>、<code>plotfont -T
regis</code>、<code>plotfont -T meta</code>
でだけ有効である。無効な色名が指定されたときは、デフォルトの色が使われる。
使える色名については <a href="#SEC73">色名</a> を参照のこと。環境変数 <code>BG_COLOR</code>
でも同様に指定できる。
</p>
<p><samp>`-T png'</samp> か <samp>`-T gif'</samp>
オプションのどちらかが使われているときは、環境変数 <code>TRANSPARENT_COLOR</code>
に背景色を指定することで、透過 PNG または透過疑似 GIF 形式の画像を生成できる。
<a href="#SEC30"><code>plotfont</code> の環境変数</a> 参照。
<samp>`-T svg'</samp> か <samp>`-T cgm'</samp>
オプションのどちらかが使われているときは、背景色に &quot;none&quot;
を指定することで、背景色のない画像を生成できる。
</p>
</dd>
<dt> <samp>`--bitmap-size <var>bitmap_size</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;570x570&quot;)
描画領域の大きさをピクセル単位で <var>bitmap_size</var> に設定する。
このオプションは
<code>plotfont -T X</code>、<code>plotfont -T png</code>、<code>plotfont -T
pnm</code>、<code>plotfont -T gif</code>
のときにだけ有効である。
これらの出力形式では描画領域のサイズがピクセル単位で表現されているからである。
環境変数 <code>BITMAPSIZE</code> でも同様に指定できる。
</p>
<p><code>plotfont -T X</code> のときは描画のために開かれたウィンドウが描画領域になる。
X Window
の画面上でのこのウィンドウの位置も、コマンドライン・オプションで指定できる。
たとえば <var>bitmap_size</var> を &quot;570x570+0+0&quot;
と指定すると、開かれたウィンドウは画面の左上隅に置かれる。
</p>
<p>もし描画領域を正方形ではなく長方形にすると、
描画に使われるフォントは縦と横で違う倍率で拡大縮小されることになる。
</p>
<p>後方互換性のために、X resource の <code>Xplot.geometry</code>
を設定することで、<samp>`--bitmap-size'</samp> や <code>BITMAPSIZE</code>
の代わりにディスプレイのサイズを設定できる。
</p>
</dd>
<dt> <samp>`--emulate-color <var>option</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;no&quot;)
<var>option</var> が &quot;yes&quot; のとき、カラーの出力画像をグレイスケールにして出力する。
このオプションは、<samp>`plotfont -T pcl'</samp> で PCL 5
対応機器への出力を行っているときでなければ、使うことはあまりないかもしれない。
(白黒の LaserJet プリンタなどの白黒 PCL 5
機器が搭載しているカラーからグレイスケールへの変換機能は、HP-GL/2 の 7
種類のペンの標準色を黒に置き換えるだけ (黄色も黒になる)
で、あまりいいとは言えない)。
</p>
</dd>
<dt> <samp>`--numbering-font-name <var>font_name</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;Helvetica&quot;、ただし
<code>plotfont -T pcl</code> では &quot;Univers&quot;、
<code>plotfont -T png</code>、<code>plotfont -T pnm</code>、<code>plotfont -T
gif</code>、<code>plotfont -T hpgl</code>、<code>plotfont -T regis</code>、<code>plotfont -T tek</code>
では &quot;HersheySerif&quot;)
キャラクタ・マップ中で各文字に付けられている番号に使うフォントを <var>font_name</var>
にする。
</p>
</dd>
<dt> <samp>`--page-size <var>pagesize</var>'</samp></dt>
<dd><p>(文字列、デフォルトは &quot;letter&quot;)
プロットが描かれる用紙の大きさを指定する。このオプションは
<code>plotfont -T svg</code>、<code>plotfont -T ai</code>、<code>plotfont -T ps</code>、<code>plotfont -T fig</code>、<code>plotfont -T pcl</code>、<code>plotfont -T hpgl</code>
でだけ有効である。&quot;letter&quot;
で指定される大きさは 8.5in x 11in である。&quot;a0&quot;&hellip;&quot;a4&quot; の ISO
の用紙サイズおよび &quot;a&quot;&hellip;&quot;e&quot; の ANSI のサイズも指定できる
(&quot;letter&quot; は &quot;a&quot;、&quot;tabloid&quot; は &quot;b&quot; と同じである)。
&quot;legal&quot;、&quot;ledger&quot;、&quot;b5&quot; も指定できる。用紙サイズは、環境変数
<code>PAGESIZE</code> でも同様に指定できる。
</p>
<p>For <code>plotfont -T ai</code>、<code>plotfont -T ps</code>、<code>plotfont -T
pcl</code>、<code>plotfont -T fig</code>
ではプロットが置かれる描画領域 (または `viewport')
は、デフォルトでは指定されたページの中央に置かれる正方形の領域である。
<code>tek2plot -T hpgl</code> でも同様だが、ページの中央ではない。
この描画領域の縦、横の長さは、たとえば <var>pagesize</var> を &quot;letter,xsize=4in&quot;
や &quot;a4,xsize=10cm,ysize=15cm&quot; のようにすることで指定できる。
この長さは負の値になってもよい (負のときは鏡像になる)。
</p>
<p>描画領域の位置は、デフォルトの位置に対する相対座標で指定できる。たとえば
<var>pagesize</var> を &quot;letter,yoffset=1.2in&quot; や
&quot;a4,xoffset=-5mm,yoffset=2.0cm&quot; のようにするとよい。
または用紙の左下隅からの相対座標として描画領域の左下隅の座標を指定することで、
より正確に指定することもできる。それにはたとえば <var>pagesize</var> を
&quot;letter,xorigin=2in,yorigin=3in&quot; や &quot;a4,xorigin=0.5cm,yorigin=0.5cm&quot;
ようにするとよい。これらのオプションは取り混ぜて使ってもよい。
</p>
<p><code>plotfont -T svg</code> および <code>plotfont -T cgm</code> では
&quot;xoffset&quot;、&quot;yoffset&quot;、&quot;xorigin&quot;、&quot;yorigin&quot; は無視される。これらの
形式では、画像が最終的にウェブブラウザ上のどこに表示されるかは、
画像そのものから指定できないからである。しかし &quot;xsize&quot; と &quot;ysize&quot;
オプションは無視される訳ではない。
<a href="#SEC74">ページと描画領域のサイズ</a> を参照のこと。
</p>
</dd>
<dt> <samp>`--pen-color <var>name</var>'</samp></dt>
<dd><p>(String, デフォルトは &quot;black&quot;)
描画に使われる「ペンの色」を <var>name</var> で指定する。
無効な名前が色名に指定されたときは、デフォルトの色が使われる。
使える色名に付いては <a href="#SEC73">色名</a> を参照のこと。
</p>
</dd>
<dt> <samp>`--rotation <var>angle</var>'</samp></dt>
<dd><p>(実数、デフォルトは 0.0)
描画領域中のプロットを角度 <var>angle</var> だけ回転する。
その数字の角度だけ、反時計回りに回転する。
環境変数 <code>ROTATION</code> に値を設定することでも、同じ指定ができる。
</p>
<p>角度に 0 または 90
を指定することでそれぞれ、ポートレートまたはランドスケープ (用紙が縦、または横)
モードになる。前衛芸術家にも便利に使ってもらえるオプションである。
</p>
</dd>
<dt> <samp>`--title-font-name <var>font_name</var>'</samp></dt>
<dd><p>(文字列)
各キャラクタ・マップののタイトルに使われるフォントを
<var>font_name</var> に設定する。
通常は、キャラクタ・マップが表示されているフォントをタイトルの文字列に使う。
たとえば &quot;ZapfDingbats&quot; とか &quot;Wingdings&quot;
のような、普通の文字ではないフォントのキャラクタ・マップを表示させるときに、
このオプションを使う。
</p></dd>
</dl>

<p>以下のオプションは、<code>plotfont</code> の生出力に対してだけ、つまり <samp>`-T'</samp>
をつけずに <code>plotfont</code> を使うときにだけ有効である。その場合の
<code>plotfont</code> の出力は GNU metafile 形式であり、これを <code>plot</code>
に渡すことで他の形式に変換できる。
</p>
<dl compact="compact">
<dt> <samp>`-O'</samp></dt>
<dt> <samp>`--portable-output'</samp></dt>
<dd><p>GNU metafile 出力を、バイナリ形式 (デフォルト) ではなく、ポータブル形式
(テキスト形式、人間の読める形式) で行う。これは環境変数 <code>META_PORTABLE</code>
を &quot;yes&quot; に設定することでも指定できる。
</p></dd>
</dl>

<p>以下のオプションで、必要な情報を表示させることができる。
</p>
<dl compact="compact">
<dt> <samp>`--help'</samp></dt>
<dd><p>コマンドライン・オプションのリストを表示させ、そのまま実行を終了する。
</p>
</dd>
<dt> <samp>`--help-fonts'</samp></dt>
<dd><p>利用可能なフォントのリストを表示して、そのまま終了する。
出力される内容は、<samp>`-T'</samp> オプションで指定される出力デバイスによって変わる。
<code>plotfont -T X</code>、<code>plotfont -T svg</code>、<code>plotfont -T
ai</code>、<code>plotfont -T ps</code>、<code>plotfont -T cgm</code>、<code>plotfont -T fig</code>
では PostScript 標準の 35 種類のフォントが使える。
<code>plotfont -T svg</code>、<code>plotfont -T ai</code>、<code>plotfont -T
pcl</code>、<code>plotfont -T hpgl</code>
では 45 種類の PCL 5 標準フォントが使える。
<code>plotfont -T pcl</code> と <code>plotfont -T hpgl</code>
ではヒューレット・パッカードのベクトル・フォントが使える。
上に挙げたすべての出力形式、および
<code>plotfont -T png</code>、<code>plotfont -T pnm</code>、<code>plotfont -T
gif</code>、<code>plotfont -T regis</code>、<code>plotfont -T tek</code>
では 22 種類の Hershey ベクトル・フォントが使える。
<code>plotfont</code> の生出力では原理的にこれらのフォントがすべて使える。
どの形式にも、<code>plotfont</code> 生出力から <code>plot</code> で変換できるからである。
</p>
</dd>
<dt> <samp>`--list-fonts'</samp></dt>
<dd><p><samp>`--help-fonts'</samp> と同じだが、
他のプログラムにパイプで渡して処理しやすいように、
フォントのリストを１カラムで出力する。
<samp>`-T'</samp>
オプションでの出力デバイスの指定が何もないときは、
サポートされているすべてのフォントのリストが表示される。
</p>
</dd>
<dt> <samp>`--version'</samp></dt>
<dd><p><code>plotfont</code> および GNU plotting utilities パッケージのバージョン番号を表示して、
そのまま終了する。
</p></dd>
</dl>

<hr size="6">
<a name="plotfont-Environment"></a>
<a name="SEC30"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC29" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC31" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC27" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC27" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC31" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 6.3 <code>plotfont</code> の環境変数 </h2>

<p><code>graph</code> や <code>plot</code> の動作を制御するための環境変数は、
<code>plotfont</code> の動作の制御にも使われる。
重複になるが、以下にそれを挙げる。
</p>
<p><code>BITMAPSIZE</code>、<code>PAGESIZE</code>、<code>BG_COLOR</code>、<code>EMULATE_COLOR</code>、
<code>MAX_LINE_LENGTH</code>、<code>ROTATION</code> については上述したとおりである。
これらの環境変数はそれぞれ、コマンドライン・オプションの
<samp>`--bitmap-size'</samp>、<samp>`--page-size'</samp>、<samp>`--bg-color'</samp>、
<samp>`--emulate-color'</samp>、<samp>`--max-line-length'</samp>、<samp>`--rotation'</samp>
と同じ働きを持つ。他にも、特定の出力デバイスに対してだけ有効な環境変数もある。
</p>
<p><code>plotfont -T X</code> では X Window の画面にウィンドウが一つ開かれ、
そこにプロットが描画されるが、このとき <code>DISPLAY</code>
環境変数が設定されていれば、
それで示されるディスプレイにウィンドウが開かれる。
</p>
<p>PNG または疑似 GIF 形式を生成する
<code>plotfont -T png</code> または <code>plotfont -T gif</code>
に対しては、二つの環境変数が用意されている。<code>INTERLACE</code> が &quot;yes&quot;
のときは、出力される画像はインターレース形式になる。<code>TRANSPARENT_COLOR</code>
に色名を指定しておくと、出力される画像のその色の部分が透明に設定され、PNG や
GIF を扱う多くのアプリケーションで透明として扱われる。
使える色名については <a href="#SEC73">色名</a> を参照のこと。
</p>
<p><code>plotfont -T pnm</code> では Portable Anymap (PBM/PGM/PPM)
形式で出力されるが、環境変数 <code>PNM_PORTABLE</code> が &quot;yes&quot; のとき、
出力は PBM、PGM、PPM のポータブル形式 (人間が読めるテキスト形式) で行われる。
そうでない場合はバイナリ形式 (これがデフォルト) で行われる。
</p>
<p>ウェブ用のベクトル画像の形式である WebCGM プロファイルにしたがった CGM
形式のファイルを <code>plotfont -T cgm</code>
で生成する場合に有効な環境変数が二つある。
デフォルトでは、生成される CGM ファイルはバージョン 3 の規格に沿っているが、
マイクロソフト・オフィスなどの古い CGM 表示ソフトウェアはほとんど、CGM
のバージョン 1 しか扱えない。そこで環境変数 <code>CGM_MAX_VERSION</code> を
1&quot;、&quot;2&quot;、&quot;3&quot;、&quot;4&quot; のどれかに設定することで、出力される CGM
のバージョンの最大値を指定できる (&quot;4&quot; がデフォルト)。また <code>CGM_ENCODING</code>
で CGM ファイルのエンコーディングを指定できる。これには
&quot;clear_text&quot; (人が読めるテキスト形式) と &quot;binary&quot; が指定できる (&quot;binary&quot;
がデフォルト)。WebCGM プロファイルではバイナリ形式が要求される。
</p>
<p><code>plotfont -T pcl</code>
ではヒューレット・パッカードのプリンタまたはプロッタの出力形式、PCL 5
形式で出力されるが、このとき <code>PCL_ASSIGN_COLORS</code> 環境変数が有効である。
PCL 5 出力をカラープリンタなどに出力する際に指定する。
これにより色の再現性を正確にするために、内部で出力デバイスに、
各色を描画するための「論理ペン」が任意に設定できるようになる。
&quot;no&quot; にセットされるとあらかじめ設定されている色のペンだけが用いられ、
他の色は濃淡の変化 (シェイディング) によって擬似的に描画される。
世の中の PCL 5 デバイスは、カラーより白黒が多いため、デフォルトでは &quot;no&quot;
であり、色はシェイディング (グレイスケール) に置き換えられる。
</p>
<p><code>plotfont -T hpgl</code>
(ヒューレット・パッカード・グラフィクス・ランゲージ)
形式の出力が生成されるが、これにもいくつかの環境変数が用意されている。
もっとも重要なのは <code>HPGL_VERSION</code> で、これには &quot;1&quot;、&quot;1.5&quot;、&quot;2&quot;
のいずれかが指定できる (&quot;2&quot; がデフォルト)。
&quot;1&quot; は純正の HP-GL、&quot;1.5&quot; は HP7550A グラフィクス・プロッタおよび
HP758x、HP7595A、HP7596A ドラフティング・プロッタに出力できる形式
(HP-GL にいくつかの HP-GL/2 拡張を加えたもの)、
&quot;2&quot; は新しい HP-GL/2 でそれぞれ描画するよう指示する。
もしバージョンが &quot;1&quot; または &quot;1.5&quot; にセットされていると、
使えるフォントはベクトル・フォントのみになる。
</p>
<p><code>plotfont -T hpgl</code> のときの用紙上の描画領域は <code>HPGL_ROTATE</code> 環境変数を
&quot;yes&quot; に設定すると反時計回りに 90度回転させることができる。<code>--rotation</code>
オプションでは描画領域を回転させ、
その左下隅の位置を用紙の左下隅からの相対位置で指定するため、異なった効果になる。
<code>HPGL_ROTATE</code> 環境変数に設定できる値は、&quot;no&quot; と &quot;yes&quot; に加えて、
&quot;0&quot;、&quot;90&quot;、&quot;180&quot;、および &quot;270&quot; である。&quot;no&quot; と &quot;yes&quot; は &quot;0&quot; と &quot;90&quot;
とそれぞれ同じである。
&quot;180&quot; と &quot;270&quot; は <code>HPGL_VERSION</code> が &quot;2&quot; のとき
(デフォルトがそうである) にだけ有効である。
</p>
<p>デフォルトでは、<code>plotfont -T hpgl</code>
では使えるペンはあらかじめ決められているものだけである。
描画時点でどのペンを使うかは、<code>HPGL_PENS</code> 環境変数で指定される。
<code>HPGL_VERSION</code> が &quot;1&quot; のときは <code>HPGL_PENS</code> のデフォルトのペンは
&quot;1=black&quot; である。<code>HPGL_VERSION</code> が &quot;1.5&quot; または &quot;2&quot;のときは、
<code>HPGL_PENS</code> のデフォルト値は
<code>&quot;1=black:2=red:3=green:4=yellow:5=blue:6=magenta:7=cyan&quot;</code> である。
指定の仕方は見ての通りである。<code>HPGL_PENS</code>
を指定することで 1&hellip;31 番のどのペンにも色を割り当てることができる。
指定できる色名については <a href="#SEC73">色名</a> を参照のこと。
1 番のペンはいつでも使える。その色は黒である必要はない。
2&hellip;31 番の他のペンはあってもなくてもよい。
</p>
<p><code>HPGL_VERSION</code> が &quot;2&quot; のときは <code>plotfont -T hpgl</code> では
<code>HPGL_ASSIGN_COLORS</code> も有効である。もしこれが &quot;yes&quot;
にセットされていれば、<code>plotfont -T hpgl</code> で使えるペンの色は
<code>HPGL_PENS</code>
による制約を受けない。1&hellip;31
番の「論理ペン」に必要に応じて色が割り当てられる。
これをサポートする HP-GL/2 は LaserJet プリンタや DesignJet だが、
あまり多くはないため、デフォルトでは &quot;no&quot; である。
特に HP-GL/2 ペン・プロッタは非対応である。
</p>
<p><code>plotfont -T tek</code> では Tektronix 端末のための出力が行われるが、
環境変数 <code>TERM</code> が有効である。もし <code>TERM</code> が &quot;xterm&quot;、
&quot;nxterms&quot;、&quot;kterm&quot; のいずれかであればそれぞれ、<code>pic2plot</code>
がその時実行されている環境は X Window システム上の VT100
端末エミュレータの <code>xterm</code>、<code>nxterm</code>、<code>kterm</code>
であると判断される。このとき、<code>pic2plot -T tek</code>
では描画が行われる前に、xterm に付属していて通常は隠れている
Tektronix のウィンドウを、
前面にポップアップさせるエスケープ・シーケンスが送られる。
また描画が行われた後には、元の VT100
端末に制御を戻すためのエスケープ・シーケンスが送られる。
その際、Tektronix のウィンドウは画面に残ったままになる。
</p>
<p><code>TERM</code> が &quot;kermit&quot;、&quot;ansi.sys&quot;、&quot;nansi.sys&quot;
のいずれかの時は、MS-DOS 版の <code>kermit</code> 上の VT100
エミュレータ上であるとみなされる。
このとき、<code>pic2plot -T tek</code> では描画が行われる前に、VT100 エミュレータから
Tektronix のウィンドウに切り替えるエスケープ・シーケンスが送られる。
また出力には Tektronix 制御コードは、<code>kermit</code> 特有のものが使われる。
このとき、使える色数には制限がある (<code>ansi.sys</code> の 16 色はサポートされる)。
また描画が行われた後には、元の VT100
端末に制御を戻すためのエスケープ・シーケンスが送られる。
キーボードで `ALT' - `-' をタイプすると、
VT100 モードと Tektronix モードの切り替えが手動でできる。
</p>
<hr size="6">
<a name="spline"></a>
<a name="SEC31"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC30" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC32" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC27" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 7. <code>spline</code> コマンド </h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC32">7.1 <code>spline</code> の使い方</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         spline は何をするコマンドなのか？
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC33">7.2 <code>spline</code> の他の機能</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  どんなすごいことが spline でできるのか？
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC34">7.3 <code>spline</code> のコマンドライン・オプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       spline が参照する環境変数
</td></tr>
</table>

<hr size="6">
<a name="spline-Examples"></a>
<a name="SEC32"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC31" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC33" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC31" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC31" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 7.1 <code>spline</code> の使い方 </h2>

<p><code>spline</code>
は一つまたは複数のデータセットに対して、データ点を補間するプログラムである。
各データセットは独立変数と従属変数からなり、
従属変数は、次元数が固定で、それが明示されていれば、ベクトルでもよい。
ここでは独立変数と従属変数はそれぞれ `<em>t</em>' と `<em>y</em>' で表す。
注意: <em>t</em> はスカラー値の変数だが、
従属変数 <em>y</em> は一般にベクトルであってよい。
</p>
<p>もっとも簡単なデータは、
入力はテキスト形式の一つのファイルで、
従属変数ベクトル <em>y</em>
が１次元の場合である。これがデフォルトである。たとえば、
入力ファイルの内容が以下のようになっている場合、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">0.0  0.0
1.0  1.0
2.0  0.0
</pre></td></tr></table>

<p>このデータでは、
データ点が <em>(t,y)</em> 座標で (0,0)、(1,1)、(2,0) であると解釈される。
各データ点は各行に分かれている必要はなく、また <em>t</em> と <em>y</em>
が同じ行である必要もない。しかしデータセットが一つであるとする場合には、
その中に空行が含まれていてはならない。またデフォルトでは、
独立変数の値は単調増加である必要がある。
したがって <em>y</em> は <em>t</em> の関数である、と見なすことができる。
</p>
<p>データセット中の各点を通るスプライン曲線 (「補間関数」のプロット・データ)
は、以下のようにすると得ることができる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">spline input_file &gt; output_file
</pre></td></tr></table>

<p>このデータの
PostScript 形式のプロットを <code>graph</code> で描画するには、以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">spline input_file | graph -T ps &gt; output.ps
</pre></td></tr></table>

<p>X Window の画面にプロットを表示するには、以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 1 2 0 | spline | graph -T X
</pre></td></tr></table>

<p>最後の例では、入力ファイルをなにも指定していない。<code>spline</code>
コマンドは、入力ファイルが何も指定されないか、または特殊ファイル名
<samp>`-'</samp> が指定されたときは、標準入力からデータを読み込む。
</p>
<p><code>spline</code> が行っていることは、正確には、まずデータ点に対する曲線
(補間関数のプロット) のフィッティングである。次に独立変数 <em>t</em>
の取る範囲を 100 個の小区間に分割し、<em>y</em> の値が各小区間の端点
(合計 101 点) で取る値を計算する。そしてその値を <em>(t, y)</em> として出力する。これはつまり、与えられたデータセットの点を通る曲線上の 101
個の点の座標である。入力中に (空行で区切られた) 複数のデータセットがある場合は、
各データセットが別々に補間される。
</p>
<p><samp>`-n'</samp> オプションを使えば、上述の 100 を別の正の整数に変更できる。また
<samp>`-t'</samp> オプションで補間する範囲をデフォルト値 (独立変数の取っている範囲)
とは異なった値に変更できる。たとえば以下のコマンド
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 1 2 0 | spline -n 20 -t 1.0 1.5 &gt; output_file
</pre></td></tr></table>

<p>を実行すると、<em>t</em> の値が (0.0 から 2.0 ではなく) 1.0 から 1.5
までで、等間隔の (101 点ではなく) 21 点のデータを出力する。
出力されるデータ点は (0,0)、(1,1)、(2,0) の３点を通る曲線上の点である。
この例では放物線になる。
</p>
<p>一般的に、補間に使われる関数は区分的な三次のスプライン関数である。
この関数では、隣接する節点 (knot、与えられるデータセット中にある点)
の間で <em>y</em> は <em>t</em>の三次関数であり、
<em>y</em> がどの節点の間にあるかで関数の形が変わる。
各節点では、節点の両側の関数の勾配と曲率が一致するようになっている。
数学的に表現すると、補間関数は節点において二階微分可能であるということである。
</p>
<p><code>spline</code> コマンドでは補間曲線に「テンション」を持たせることができる。
<samp>`-T'</samp> オプションで非零の値のテンションを指定することができる。
たとえばある値のテンションを持つスプライン曲線を表示させるには、
以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 0 2 0 | spline -T 10 | graph -T X
</pre></td></tr></table>

<p>テンションの値を大きくすると、スプライン曲線はだんだんと折れ線に近づいていく。
外見上、強く張られた線のように見える。テンションの値は、
正の値と同様に負の値も指定できる。
そのときはスプライン曲線は外に膨らむ形になり、
正確には正弦曲線的に振動する。しかし負の無限大に近づけていくと、
振動していたスプライン曲線はまた折れ線に収束していく。
</p>
<p>テンションが正の数の時、その逆数は、スプライン曲線が「よく近似している」
と言える独立変数 <em>t</em> の範囲は最大でどこまでか、を表す。
テンションを 0 から大きくして行くと、スプライン曲線は短い曲線部分
(データ点がその中心である) と、
ほとんど直線の部分で構成されることになる。
つまりテンションは「次元」のような量を表す。
もしテンションに 0 でない値が指定された場合、
まず独立変数のすべて値にはある共通の正の値が乗じられる。
テンションの値はその共通の値で除され、
元のスプライン曲線をスケーリングしたスプライン曲線が得られる。
もしテンションが 0 の場合 (これがデフォルト。つまり三次のプラインの場合)
は、データを線形にスケーリングしてもスプライン曲線は変化しない。
</p>
<p>数式で表現すると、テンションのあるスプライン関数は、
連続する二つの節点の間で以下の微分方程式を満たす。
<em>y&quot;&quot;=sgn(tension)*(tension^2)y&quot;</em> 
テンションが 0 のとき (デフォルトの場合) <em>y</em> の <em>t</em>
に関する四階微分は各点で 0 になる。この場合 <em>t</em> の関数としての
<em>y</em> は連続する二つの節点の間で三次の多項式になる。
テンションが 0 でない場合は、<em>y</em> は<em>t</em> の多項式では表されない。
指数関数などになるだろう。
</p>
<p>テンションがあってもなくても、<em>t</em>
に関して周期的なスプライン関数を得るには、<samp>`-p'</samp> オプションを使えばよい。
これを使うときはデータセット中の最初と最後の点で <em>y</em> の値が同じでなければならない。
その値が異なる場合は、周期的な補間曲線を計算することはできない。
</p>
<p>場合によって、別のプログラムで生成される点を、
その生成と同時に補間していけると便利なことがある。つまり、<code>spline</code>
コマンドをリアルタイム・フィルタとして使えれば便利である、ということである。
<code>spline</code> は通常はフィルタとしては動作しない。
可能な限り滑らかな曲線をデータ全体から得ることが一般的な目的だからである。
<code>spline</code> をフィルタとして動作させるには <samp>`-f'</samp>
オプションを指定する。この場合、
補間をデータ全体からでなく局所的に行うために、異なるアルゴリズム
(三次のベッセル補間) が用いられる。<samp>`-f'</samp> を指定するときは普通、<samp>`-p'</samp>
は指定しない。または <samp>`-f'</samp> を指定するときは、補間する範囲
(変数 <em>t</em> の範囲) を <samp>`-t'</samp>
オプションで明示的に指定しなければならない。
</p>
<p>三次のベッセル補間は原理的に、
データ全体から補間を行う三次のスプライン関数ほど滑らかではない。
もし <samp>`-f'</samp> オプションが指定された場合、
各節点におけるスプライン関数の勾配は、
その節点とその両側の節点の三点から求められた二次曲線の勾配になる。
二つの隣り合う補間曲線の勾配は、その両方に共通する節点において一致するが、
曲率は一般に一致しない。
数学的に表現すると、補間曲線は一階微分可能だが、一般に二階微分可能とは言えない。
<code>spline</code> コマンドでは、
リアルタイム・フィルタとして動作するためには、微分可能性が犠牲になるということである。
</p>
<hr size="6">
<a name="Advanced-Use-of-spline"></a>
<a name="SEC33"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC32" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC34" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC31" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC31" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 7.2 <code>spline</code> の他の機能 </h2>

<p>前節で <code>spline</code> がスカラー変数 <em>t</em> の関数 <em>y</em>
(関数値もスカラー) をどのように補間するかを解説した。
この節では様々な他の補間方法について解説する。
多次元の補間、一価の関数ではない一般の曲線のスプライン補間などである。
</p>
<p><code>spline</code> コマンドは次元が指定されていれば <em>y</em>
がベクトルでも扱える。次元数は <samp>`-d'</samp> オプションで指定する。
たとえば以下のような多次元のデータセットがあるとする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">0.0  0.0  1.0
1.0  1.0  0.0
2.0  0.0  1.0
</pre></td></tr></table>

<p>これは３点のデータ点 <em>(t,y)</em> の座標がそれぞれ (0,0,1)、 (1,1,0)、(2,0,1)
であると解釈される。
データセット中の各点を通るスプライン曲線 (補間関数のプロット)
は、以下のようにすると得ることができる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">spline -d 2 input_file &gt; output_file
</pre></td></tr></table>

<p>この例では従属変数 <em>y</em> が二次元ベクトルなので、オプション <samp>`-d 2'</samp>
を指定している。<em>y</em> ベクトルの各要素はそれぞれ独立に補間され、
その結果得られる補間関数から計算される値が出力される。
</p>
<p>多次元補間を行う場合でも、一次元の場合と同じオプションが指定できる。
たとえば <samp>`-f'</samp> を指定するとリアルタイムで三次のベッセル補間を行う。
一次元の場合と同様、<samp>`-f'</samp> が指定されたときは <samp>`-t'</samp>
オプションで補間区間 (<em>t</em> の値の取りうる範囲)
を指定しなければならない。<code>-p</code>
オプションではベクトル関数で周期スプラインが得られる。この場合 <em>y</em>
の値はデータセットの最初と最後で一致していなければならない。
</p>
<p><code>spline</code> では、平面上に任意に置かれた点を通る曲線を得ることもできる。
これは一般の <em>d</em> 次元空間内についても可能である。
しかしこれは、少なくとも従来の一般的なスプライン関数と定義とは異なっている。
「スプライン補間」とは、(一価の)関数を組み合わせることであり、
関数かそうでないかを問わないような一般の曲線を補間するものではない。
一般的に、曲線は必ずしも関数として表現される訳ではない。
</p>
<p>以下に「一般の曲線のスプライン補間」の例を示す。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 0 1 1 0 1 | spline -d 2 -a -s | graph -T X
</pre></td></tr></table>

<p>ここでは二次元平面内の４点 (0,0)、(1,0)、(1,1)、(0,1) を通る曲線が求められ
X Window システムのディスプレイに表示される。<samp>`-d 2'</samp>
オプションで従属変数 <em>y</em> の次元数が 2 であることを指定している。<samp>`-a'</samp>
オプションで、入力中には <em>t</em> の値がない、
したがってそれは自動生成することを指示している。デフォルトでは <em>t</em>
の値の初期値は 0 で、その次の値は 1、のようになる。<samp>`-s'</samp>
オプションで、<em>t</em> の値は出力しなくてよいことを指示している。
</p>
<p>閉曲線も同様にして描くことができる。たとえば以下のようにすると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 0 0 1 0 0 | spline -d 2 -a -s -p | graph -T X
</pre></td></tr></table>

<p>３つの点 (0,0)、(1,0)、(0,1) を通る薬用のど飴のような形の曲線が描かれる。
データ点の最初と最後が同じ (0,0) であることと、<samp>`-p'</samp> (つまり
<samp>`--periodic'</samp>) オプションを指定することで、閉曲線を描くことができる。
</p>
<p>閉曲線でもそうでなくても、一般の曲線をスプライン補間で描く場合、<samp>`-a'</samp>
オプションの代わりに <samp>`-A'</samp> オプションを使っても、
入力には <em>t</em> の値がなくそれを自動生成するよう指定できる。
この場合は <em>t</em> の値の増分は 1 ではなく、<em>y</em>
の増分と同じなる。
各データ点を通る曲線を求めるときにこのようにして <em>t</em> の値を決めるのは、
FITPACK という有名なライブラリと同じ方法である。
連続するデータ点間の距離が激しく振動するような場合は、
このようにするのがおそらく最良の方法である。
</p>
<p>二次元平面内のデータ点を通る曲線は、閉曲線でもそうでなくても、
自分自身と交差する可能性がある。その場合にテンションを負の値にすると、
興味深い画像が得られる。たとえば以下のコマンドを実行すると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 0 1 1 0 0 | spline -d 2 -a -s -p -T -14 -n 500 | graph -T X
</pre></td></tr></table>

<p>３つの点 (0,0)、(1,0)、(0,1) を渦巻き様になって通る曲線が得られる。
<samp>`-n 500'</samp> は、この曲線は曲がっているところが多いために指定している。
これにより合計で 501 点が生成されるように指示しているが、
これだけあれば十分に滑らかな線が描ける。
</p>

<hr size="6">
<a name="spline-Invocation"></a>
<a name="SEC34"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC33" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC31" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC31" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 7.3 <code>spline</code> のコマンドライン・オプション </h2>

<p><code>spline</code> コマンドはスカラー変数 <em>t</em>
に関してベクトル値を取る関数、または <em>d</em> 次元空間内の曲線を補間する。
<code>spline</code> が内部で使っているアルゴリズムは D. Kincaid と [E.] W.
Cheney による <cite>Numerical Analysis</cite> (2nd ed., Brooks/Cole, 1996) の section
6.4、および C. de Boor による <cite>A Practical Guide to Splines</cite>
(Springer-Verlag, 1978) の Chapter 4 のアルゴリズムと同じである。
</p>
<p>入力ファイルの名前はコマンドライン上のどこでも指定できる。
その順番やコマンドライン・オプションの順番は、意味を持たない。
ファイル名が何も指定されないか、<samp>`-'</samp>
というファイル名が指定されたときは、標準入力から読み込まれる。
</p>
<p>一つの入力ファイルに複数のデータセットを記述しておくことができる。
<samp>`-a'</samp> または <samp>`-A'</samp> オプション (後述) が指定されない限りは、
各データセットはデータ点の連続するもので、<em>t</em> と <em>y</em>
の値が交互に並べられたものであるとされる。<em>t</em>
はスカラー値の独立変数であり、<em>y</em> はベクトルで表される従属変数であり、
<em>y</em> の次元数は <samp>`-d'</samp> オプションで指定される
(デフォルトでは <em>1</em> である)。
</p>
<p>入力ファイルがテキストファイルである時 (これがデフォルト)、
複数のデータセットは空行で区切られる。
また入力ファイル中には任意の行数のコメント行が書ける。
行頭が # という文字の行がコメント行として扱われる。
コメント行は無視されるが、空行として扱われる訳ではない。
そのため、データセットの途中にあっても構わない。
</p>
<p>以下に <code>spline</code> に指定できるコマンドライン・オプションを列挙する。
コマンドライン・オプションには、３種類ある。
</p>
<ol>
<li>
各データセットに適用される補間法を指定するオプション。
</li><li>
入出力の形式を指定するオプション。
</li><li>
情報を表示させるオプション (たとえば <samp>`--help'</samp>)。
</li></ol>


<p>引数を取るオプションでは、
説明の最初にカッコ書きでその引数の型とデフォルト値を示している。
</p>
<p>まず以下に、各データセットに適用される補間法を指定するオプションを列挙する。
</p>
<dl compact="compact">
<dt> <samp>`-f'</samp></dt>
<dt> <samp>`--filter'</samp></dt>
<dd><p>局所的補間アルゴリズム (三次のベッセル補間アルゴリズム) を使い、
<code>spline</code> がリアルタイム・フィルタとして動作できるようにする。
補間曲線の傾きは、データセット中の各データ点において、
その点と両隣の点を通る二次曲線から決められる。
<samp>`-t'</samp> オプションは通常は省略してもよいが、<samp>`-f'</samp>
オプションが指定されたときは必須である。また <samp>`-f'</samp>
オプションが指定されるときは、<samp>`-k'</samp>、<samp>`-p'</samp>、<samp>`-T'</samp>
の各オプションを使うことはないだろう。
</p>
<p><samp>`-f'</samp> が指定<em>されない</em>ときは、別の (データセット全体を一度に使う)
アルゴリズムが使われる。
</p>
</dd>
<dt> <samp>`-k <var>k</var>'</samp></dt>
<dt> <samp>`--boundary-condition <var>k</var>'</samp></dt>
<dd><p>(実数、デフォルトは 1.0)
作り出されたそれぞれのスプライン曲線に対して、境界条件のパラメータを
<var>k</var> にする。
各スプライン曲線は、境界条件として <em>y&quot;[0]=ky&quot;[1]</em> および
<em>y&quot;[n]=ky&quot;[n-1]</em> を満たすが、ここで <em>y[0]</em> および <em>y[1]</em>
は与えられるデータセットの最初の２点での従属変数ベクトル <em>y</em>
の特定の要素の値であり、<em>y[n-1]</em> と <em>y[n]</em> は最後の２点での、
その要素の値である。
<var>k</var> を 0 にすると与えられるデータセットの両端で曲率が 0 になり、
自然スプラインとなる。<samp>`-k'</samp> オプションは <samp>`-f'</samp> または <samp>`-p'</samp>
オプションが指定されたときには使われないだろう。
</p>
</dd>
<dt> <samp>`-n <var>n</var>'</samp></dt>
<dt> <samp>`--number-of-intervals <var>n</var>'</samp></dt>
<dd><p>(正の整数、デフォルトは 100)
補間を行う区間を <var>n</var> 個の小区間に分割する。
計算されるデータ点の数と出力される点の数は <em>n+1</em> になる。
</p>
</dd>
<dt> <samp>`-p'</samp></dt>
<dt> <samp>`--periodic'</samp></dt>
<dd><p>周期的スプライン補間を行う。
このオプションを指定するときは、
各データセットにおいて最初と最後のデータ点が同じでなければならない。
<samp>`-p'</samp> オプションを指定するときは、<samp>`-f'</samp> または <samp>`-k'</samp>
オプションは使われないだろう。
</p>
</dd>
<dt> <samp>`-T <var>tension</var>'</samp></dt>
<dt> <samp>`--tension <var>tension</var>'</samp></dt>
<dd><p>(実数、デフォルトは 0.0)
各補間曲線のテンションの強さを <var>tension</var> に設定する。
データセット中の二つの連続するデータ点の間で、
ベクトルの各要素について、以下の微分方程式を満たすスプライン関数が計算される。
<em>y&quot;&quot;=sgn(tension)*(tension^2)y&quot;</em>
<var>tension</var> が 0 のときはスプライン関数は区分的な三次多項式になる。
<var>tension</var> の値を正の方向に大きくすると、スプライン関数は折れ線に収束する。
<samp>`-T'</samp> を <samp>`-f'</samp> オプションと同時に使うことはないだろう。
</p>
</dd>
<dt> <samp>`-t <var>tmin</var> <var>tmax</var> [<var>tspacing</var>]'</samp></dt>
<dt> <samp>`--t-limits <var>tmin</var> <var>tmax</var> [<var>tspacing</var>]'</samp></dt>
<dd><p>各データセットについて、補間する区間を <var>tmin</var> から <var>tmax</var> にする。
<var>tspacing</var> が指定されていなければ、補間区間全体は <samp>`-n'</samp>
オプションで指定される個数の小区間に分割される。
もし <samp>`-t'</samp> オプションが指定されないときは、
入力されるデータセット中で独立変数が取っている範囲が補間対象となる。<samp>`-f'</samp>
オプションを使って <code>spline</code>
コマンドをフィルタとして使うときには、<samp>`-t'</samp>
オプションを指定する必要がある (上述)。
</p></dd>
</dl>


<p>以下のオプションは、入出力ファイルの形式を指定する。
</p>
<dl compact="compact">
<dt> <samp>`-d <var>dimension</var>'</samp></dt>
<dt> <samp>`--y-dimension <var>dimension</var>'</samp></dt>
<dd><p>(整数、デフォルトは 1)
入力および出力における従属変数 <em>y</em> の次元を <var>dimension</var> に指定する。
</p>
</dd>
<dt> <samp>`-I <var>data-format</var>'</samp></dt>
<dt> <samp>`--input-format <var>data-format</var>'</samp></dt>
<dd><p>(文字、デフォルトは <samp>`a'</samp>)
入力ファイル中のデータの形式を、以下の中から <var>data-format</var>
に指定する文字で指定する。指定できる文字 (と形式) は以下の通りである。
</p>
<dl compact="compact">
<dt> <samp>`a'</samp>  </dt>
<dd><p>テキスト形式。ファイル中では浮動小数点実数が並んでおり、連続するデータ点の
<em>t</em> と <em>y</em> が交互に並んでいるものと解釈される。
<em>y</em> が <em>d</em> ベクトルのとき、各データ点は <em>d+1</em>
個の数値で表される。各点の <em>t</em> と <em>y</em>
は必ずしも同じ行に書かれている必要はなく、
また各点を違う行に書く必要もない。
しかし空行 (２個連続する改行文字) はデータセットの区切りであると見なされ、
次の行から次のデータセットが始まるものと解釈される。
</p>
</dd>
<dt> <samp>`f'</samp></dt>
<dd><p>単精度実数バイナリ形式。
ファイル中では浮動小数点実数が並んでおり、連続するデータ点の
<em>t</em> と <em>y</em> が交互に並んでいるものと解釈される。
<em>y</em> が <em>d</em> 次元ベクトルのとき、各データ点は <em>d+1</em>
個の数値で表される。データセットの区切りは一つの <code>FLT_MAX</code>
の値の数値で表される。これは単精度実数で表現できる最大値である。
その値はほとんどのプラットフォームでは 3.4x10^38 である。
</p>
</dd>
<dt> <samp>`d'</samp></dt>
<dd><p>倍精度実数バイナリ形式。
ファイル中では浮動小数点実数が並んでおり、連続するデータ点の
<em>t</em> と <em>y</em> が交互に並んでいるものと解釈される。
<em>y</em> が <em>d</em> 次元ベクトルのとき、各データ点は <em>d+1</em>
個の数値で表される。データセットの区切りは一つの <code>DBL_MAX</code>
の値の数値で表される。これは倍精度実数で表現できる最大値である。
その値はほとんどのプラットフォームでは 1.8x10^308 である。
</p>
</dd>
<dt> <samp>`i'</samp></dt>
<dd><p>整数バイナリ形式。
ファイル中では整数が並んでおり、連続するデータ点の
<em>t</em> と <em>y</em> が交互に並んでいるものと解釈される。
<em>y</em> が <em>d</em> 次元ベクトルのとき、各データ点は <em>d+1</em>
個の数値で表される。データセットの区切りは一つの <code>INT_MAX</code>
の値の数値で表される。これは整数で表現できる最大値である。
その値はほとんどのプラットフォームでは 2^31-1 である。
</p></dd>
</dl>

</dd>
<dt> <samp>`-a [<var>step_size</var> [<var>lower_limit</var>]]'</samp></dt>
<dt> <samp>`--auto-abscissa [<var>step_size</var> [<var>lower_limit</var>]]'</samp></dt>
<dd><p>(実数、デフォルトは 1.0 と 0.0)
独立変数 <em>(t</em>) の値を自動で決定する。
データの形式 (<samp>`a'</samp>、<samp>`f'</samp>、<samp>`d'</samp>、または <samp>`i'</samp>)
とは関係なく、このオプションを指定すると、入力ファイル中には独立変数
(<em>t</em>)  の値はないものとして扱われ、入力されるデータはすべて従属変数
(<em>y</em>) である、と解釈される。したがって <em>y</em> の次元が <em>d</em>
のとき、各データ点には <em>d</em> 個の数値があればよい。<em>t</em>
の各点での増分は <var>step_size</var> で指定され、
最初のデータ点の <em>t</em> の値は <var>lower_limit</var> で指定される。
</p>
</dd>
<dt> <samp>`-A'</samp> </dt>
<dt> <samp>`--auto-dist-abscissa'</samp></dt>
<dd><p>独立変数 <em>(t</em>) の値を自動で決定する。
<samp>`-a'</samp> と似ているが、最初のデータ点の <em>t</em> の値 を 0.0
にし、それ以降の増分を <em>y</em> の増分と同じにする。
関数とは言えない一般の曲線を補間するときに使う
(<a href="#SEC33"><code>spline</code> の他の機能</a> 参照)。
</p>
</dd>
<dt> <samp>`-O <var>data-format</var>'</samp></dt>
<dt> <samp>`--output-format <var>data-format</var>'</samp></dt>
<dd><p>(文字、デフォルトは <samp>`a'</samp>)
出力するデータの形式を <var>data-format</var> に指定する。
指定できるものとその意味は <samp>`-I'</samp> オプションと同じである。
</p>
</dd>
<dt> <samp>`-P <var>significant-digits</var>'</samp></dt>
<dt> <samp>`--precision <var>significant-digits</var>'</samp></dt>
<dd><p>(正の整数、デフォルトは 6)
<em>t</em> と <em>y</em> を出力するときの精度 (桁数) を <var>significant-digits</var>
にする。
出力形式が <samp>`a'</samp>、テキスト形式の場合にのみ有効である。
</p>
</dd>
<dt> <samp>`-s'</samp></dt>
<dt> <samp>`--suppress-abscissa'</samp></dt>
<dd><p>独立変数 <em>t</em> の値を出力せず、各点において従属変数 <em>y</em>
の値のみを出力する。<em>y</em> が <em>d</em> 次元のとき、各点で <em>d+1</em>
個ではなく、<em>d</em> 個の数値が出力される。
関数とは言えない一般の曲線を補間するときに使う
(<a href="#SEC33"><code>spline</code> の他の機能</a> 参照)。
</p></dd>
</dl>


<p>以下のオプションは、情報を表示させるためのものである。
</p>
<dl compact="compact">
<dt> <samp>`--help'</samp></dt>
<dd><p>コマンドライン・オプションのリストを表示、そのまま終了する。
</p>
</dd>
<dt> <samp>`--version'</samp></dt>
<dd><p><code>spline</code> とこの GNU plotting utilities パッケージのバージョン番号を表示して、
そのまま終了する。
</p></dd>
</dl>

<hr size="6">
<a name="ode"></a>
<a name="SEC35"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC34" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC36" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC31" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 8. <code>ode</code> コマンド </h1>

<p>GNU <code>ode</code> コマンドは、一階常備分方程式 (ODE)
の初期値問題の数値解を計算するプログラムである。
<em>n</em>' 次の微分方程式を <em>n</em>
連立の一階微分方程式に単純に変換すれば <code>ode</code>
で高次の微分方程式を解くこともできる。
<code>ode</code> の出力はパイプで <code>graph</code> に渡して、
一つあるいは複数の計算された解曲線をプロットすることができる。
</p>
<p>求解アルゴリズムは複数実装されている。
Runge-Kutta-Fehlberg法 (デフォルト) と Adams-Moulton法 と Euler 法である。
Runge-Kutta-Fehlberg法 と Adams-Moulton法 では、
ステップ幅の適応制御が行われる。
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC36">8.1 数学的基礎</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC37">8.2 <code>ode</code> の使用例</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         ode の簡単な例
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC38">8.3 一歩進んだ <code>ode</code> の使い方</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     ode の一派進んだ例
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC39">8.4 <code>ode</code> のコマンドライン・オプション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              ode のコマンドライン・オプション
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC40">8.5 診断メッセージ</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 ode が表示するメッセージ
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC41">8.6 数値誤差</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC42">8.7 実行時間</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                ode の実行にかかる時間
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC43">8.8 <code>ode</code> の記述言語</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              ode が実装している ODE 記述言語
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC44">8.9 微分方程式について</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            ode コマンドと ODE 一般についての参考文献
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
</pre></th></tr></table>

<hr size="6">
<a name="Basic-Math"></a>
<a name="SEC36"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC35" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC37" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC35" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 8.1 数学的基礎 </h2>

<p>まず、標準的な定義から解説する。
<em>微分方程式</em>は、形が明示的に示されない関数とその導関数を含む方程式である。
微分方程式は、
未知関数の独立変数が一つだけのとき<em>常</em>微分方程式と呼ばれる。
ここでは独立変数を <em>t</em> で表す。
微分方程式の<em>次数</em>とは、方程式に含まれるもっとも高階の導関数の次数である。
複数の方程式が連立しているときは、微分方程式<em>系</em>と呼ばれる。
ある方程式が他の方程式に従属している場合は、<em>対</em>をなしていると言われる。
<em>解</em>とは、方程式を満たす関数のことである。
<em>初期値問題</em>とは、
独立変数がある値のときのすべての未知関数とその導関数の値がわかっている、
という条件が与えられることである。
このような「初期条件」が与えられれば、解が一意に定まる。
解の存在性と一意性についての、定義や解説は多くの入門書にある
(Birkhoff と Rota による <cite>Ordinary Differential Equations</cite>
の Chapter 1 など。<code>ode</code> に関係のある他の文献については
<a href="#SEC44">微分方程式について</a> を参照のこと)。
</p>
<p>現実の問題では、微分方程式の解は初等関数によっては表されないことが多い。
したがって、数値解を求めることになる。
</p>
<p>初期値問題の数値解法は、関数の評価と算術演算だけを使った近似解法である。
<code>ode</code> は、以下の形式の一階の初期値問題を解くことができる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>x' = f(t,x,y,&hellip;,z)</em>
<em>y' = g(t,x,y,&hellip;,z)</em>
   .
   .
   .
<em>z' = h(t,x,y,&hellip;,z)</em>
</pre></td></tr></table>

<p>独立変数 <em>t</em> の初期値における各従属変数の初期値は、
以下のようにして与えられる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>x(a) = b</em>
<em>y(a) = c</em>
     .
     .
     .
<em>z(a) = d</em>
<em>t = a</em>
</pre></td></tr></table>

<p>ここで <em>a,b,c,...,d</em> は定数である。
</p>
<p><code>ode</code> で数値解が得られるようにするには、関数 f,g,&hellip;,h
が一般的な演算子 (<em>+</em>, <em>-</em>, <em>*</em>, <em>/</em>, ^)
と <code>ode</code> が理解できる基本的な関数を使って表現されている必要があるが、
<code>ode</code> で使える関数はプロット・プログラムの <code>gnuplot</code>
が理解するものと同じである。
また <code>ode</code> は一階導関数が陰関数として表現されているような系は扱えないので、
関数 f,g,&hellip;,h は陽関数として表現されていなければならない。
</p>
<p>実装されている数値解法はどれも、独立変数 <em>t</em>
の離散的な点上における計算を行う。離散点の間隔はステップ幅
(連続する二つの <em>t</em> の値の距離) と呼ばれ、通常は <em>h</em>
で表されるが、その値は固定、あるいは適応的に決定される。
一般的に、ステップ幅を小さくすると解の精度が向上する。
<code>ode</code> ではステップ幅を明示的に与えて計算させることもできる。
</p>
<hr size="6">
<a name="Simple-ode-Examples"></a>
<a name="SEC37"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC36" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC38" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC35" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 8.2 <code>ode</code> の使用例 </h2>

<p>以下の例で <code>ode</code> でどのようにして初期値問題を解くかを示す。
もしもう少し複雑なことがやりたい場合は、<a href="#SEC43"><code>ode</code> の記述言語</a>
を参照するとよい。その節に <code>ode</code> 言語の仕様が述べられている。
また GNU plotting utilities の配布パッケージに <code>ode</code>
の入力サンプルを集めたディレクトリがある。
ほとんどのシステムではそれは、<tt>`/usr/share/ode'</tt> か
<tt>`/usr/local/share/ode'</tt> にインストールされている。
</p>
<p>最初の例は、以下の単純なものである。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y'(t) = y(t)</em>
</pre></td></tr></table>

<p>初期条件は以下である。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y(0) = 1</em>
</pre></td></tr></table>

<p>この微分方程式の解析解は、以下である。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y(t) = e^t</em>
</pre></td></tr></table>

<p>数値計算の精度が 7 桁の場合は、<em>t=1</em> で以下のようになる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y(1) = e^1 = 2.718282</em>
</pre></td></tr></table>


<p>コマンドラインで以下のように入力、実行すると、<code>ode</code>
が計算する数値解が得られる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode
y' = y
y = 1
print t, y
step 0, 1
</pre></td></tr></table>

<p>数値が２列で出力されるはずである。各行には独立変数 <em>t</em> と変数
<em>y</em> の値が表示される。<em>t</em> は 0 から 1
まで、ある幅で刻みながら進んでいるはずである。出力の最後の行は
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">1 2.718282
</pre></td></tr></table>

<p>となるだろう。計算精度は <samp>`-p'</samp> オプションで変更できる。
たとえばもし、単に <samp>`ode'</samp> とするのではなく <samp>`ode -p 10'</samp>
とすると、7 桁 (デフォルトの精度) ではなく 10 桁で数値が出力される。
</p>
<p>ここまで出力した後、<code>ode</code> は次の入力を待つモードになる。
そこで以下のように入力すると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">step 1, 0
</pre></td></tr></table>

<p>また <em>t</em> と <em>y</em> の値からなる２列の数値が出力される。
ただし <em>t</em> の値が 1 から 0 に 進んでいるはずである。また、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">step 1, 2
</pre></td></tr></table>

<p>と入力すると、<em>t</em> が減少するのではなく、増加する。<code>ode</code>
の実行を終了するには、<samp>`.'</samp>、
つまり一つのピリオドとリターンを入力すればよい。
もしくは入力ストリームに EOF (end-of-file) があったときも <code>ode</code>
は終了する。これは端末上で control-D を入力すればよい。
</p>
<p>上の例では、入力の各行の意味は見て分かる通りである。step
文は独立変数 (ここでは <em>t</em>) の取る範囲の始点と終点を設定し、
<code>ode</code> はその範囲で数値解を計算する。
初期値は最初の step 文 (つまり 0) と以下のような代入文
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">y = 1
</pre></td></tr></table>

<p>が示すことになる。この場合、<em>y(0) = 1</em> という初期条件を示したことになる。
<samp>`y' = y'</samp> と <samp>`y = 1'</samp> という二つの文は、全く違った意味を持つ。
<samp>`y' = y'</samp> は <em>y</em> の導関数の計算法を与え、
<samp>`y = 1'</samp> は <em>y</em> の初期値を与える。
<samp>`step'</samp> 文が入力に現れたところで、<code>ode</code>
は与えられた範囲内で独立変数のステップを進めて求解を行い始める。
ステップごとにどの変数を表示するかは、もっとも後に入力された <samp>`print'</samp>
文による。たとえば、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">print t, y, y'
</pre></td></tr></table>

<p>とすると独立変数 <em>t</em> の値と、変数 <em>y</em>
とその導関数の値を、ステップごとに表示する。
</p>
<p><code>ode</code>
は入力全体あるいは入力の最初の部分をファイルから受け取ることができる。
その例として、まず以下の内容のファイルがあるとする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"># an ode to Euler
y  = 1
y' = y
print t, y, y'
</pre></td></tr></table>

<p>ファイル名を <tt>`euler'</tt> とする (<samp>`#'</samp>
の行はコメント行で、入力のどこにあってもよい。<samp>`#'</samp>
のある場所から行末までは、無視される)。
このファイルを <code>ode</code> に読み込ませるには、以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode -f euler
step 0, 1
</pre></td></tr></table>

<p>最初の行で <code>ode</code> はファイル <tt>`euler'</tt>
を読み込み、次の行でステップを開始する。
この例では、0 から 1 までの <em>t</em> の各値について、
３つの数値 (<em>t</em>、<em>y</em>、<em>y'</em>) が表示される。
ステップが最後まで進むと、<code>ode</code> は端末から次の文が入力されるのを待つ。
これは次の例で示す。このコマンド
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode -f euler
</pre></td></tr></table>

<p>と、次のコマンド
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode &lt; euler
</pre></td></tr></table>

<p>では、<code>ode</code> の動作は異なる。後者では入力はすべてファイル <tt>`euler'</tt>
から行われることになり、前者ではファイルを読み込んだ後、端末からの入力を待つ。
後者の場合は、ファイルの最後に <samp>`step'</samp> 文がないと結果が出力されないが、
<samp>`.'</samp> をファイルに書いておく必要はない。
<samp>`.'</samp> は端末からの入力を終了するときにだけ用いられる。
</p>
<p>次に、二階の微分方程式の数値解を求める例を示す。以下の初期値問題を考える。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y''(t) = -y(t)</em>
<em>y(0) = 0</em>
<em>y'(0) = 1</em>
</pre></td></tr></table>

<p>この解析解は以下である。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y(t) = sin(t)</em>
</pre></td></tr></table>

<p><code>ode</code>
でこの問題を解くには、二階の微分方程式を二つの一階の微分方程式に直す必要がある。
そのためには独立変数 <em>t</em> の別の関数 (ここでは <em>yp</em>
とする) を新たに導入し、以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y' = yp</em>
<em>yp' = -y</em>
</pre></td></tr></table>

<p>この微分方程式系は、一つの微分方程式だった問題と等価である。
このようにして <em>n</em> 次の方程式を一階の問題に書き直すのは、
よく行われるテクニックである。
</p>
<p>変数 <em>t</em> の関数として <em>y</em> をプロットするには、
以下のような内容のファイルを作るとよい。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"># sine : y''(t) = -y(t), y(0) = 0, y'(0) = 1
sine' = cosine
cosine' = -sine
sine = 0
cosine = 1
print t, sine
</pre></td></tr></table>

<p>(<em>y</em> と <em>yp</em> をそれぞれ <i>sine</i> と <i>cosine</i> に書き直している。
解析解がそうなるからである。)
このファイルを <tt>`sine'</tt> とする。生成されたデータを X Window
システムのディスプレイで表示するには、以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode -f sine | graph -T X -x 0 10 -y -1 1
step 0, 2*PI
.
</pre></td></tr></table>

<p>上の例の <code>ode</code> の行を入力すると、<code>graph -T X</code>
によりウィンドウが開かれる。その次の行の <samp>`step'</samp>
文を入力すると、そのウィンドウ内にデータが描画される。
<samp>`-x 0 10'</samp> および <samp>`-y -1 1'</samp> オプションは両座標軸の範囲を指定する。
リアルタイム・プロットを行うときにはプロットされる点が後から入力されるため、
このオプションが必要になる。
もし座標軸の描画範囲がコマンドラインで指定されなかったときは、
<code>graph -T X</code>
はすべてのデータが入力され終わるのを待ってからプロット範囲を決定して、
描画を行う。
</p>
<p>上の例を少し変更して、<code>ode</code>
にどのようにして複数のデータセットを生成させて <code>graph</code>
にプロットさせるかを示す。端末上で、以下の入力をするとする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode -f sine | graph -T X -C -x 0 10 -y -1 1
step 0, PI
step PI, 2*PI
step 2*PI, 3*PI
.
</pre></td></tr></table>

<p>すると、正弦曲線が３回に分けて描かれる。<samp>`step'</samp>
文による出力の最後には空行があるため、<code>graph -T X</code>
はそれぞれの <samp>`step'</samp> 文による出力を別のデータセットであると見なす。
カラーディスプレイ上では、３つの各部分が異なった色で表示されるだろう。これは
<code>graph</code> の、
データセットが読み込まれるごとに線種を変更していく機能によるものである。
この機能を無効にしたいときは、<code>graph -T X</code>
の代わりに <code>graph -T X -B</code> とするとよい。
</p>
<p>上の例の <code>graph -T X</code> の代わりに <code>graph</code>
の他の出力デバイスを使ってもよい。たとえば以下のように <code>graph -T ps</code>
とすると EPS (Encapsulated PostScript) 形式の出力が得られる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode -f sine | graph -T ps &gt; plot.ps
step 0, 2*PI
.
</pre></td></tr></table>

<p><code>graph</code> の出力デバイスのうち、
<code>graph -T png</code>、<code>graph -T pnm</code>、<code>graph -T gif</code>、<code>graph -T
svg</code>、<code>graph -T ai</code>、<code>graph -T ps</code>、<code>graph -T cgm</code>、<code>graph
-T fig</code>、<code>graph -T pcl</code>、<code>graph -T hpgl</code>
では、たとえ <samp>`-x'</samp> および <samp>`-y'</samp> オプションを指定しても、
リアルタイム・プロットはできない。
したがってこれらの出力デバイスのどれかを使うときは、<code>ode</code>
コマンドに <samp>`.'</samp> を入力してすべての入力が終わってからしか、
プロットは生成されない。
</p>
<p>上の例では従属変数の導関数は比較的簡単な形であった。しかし任意の、
もっと複雑に従属変数と独立変数が組合わさった形でもよい。それには <code>ode</code>
に組み込まれている関数が使える。
<tt>abs</tt>、<tt>sqrt</tt>、<tt>exp</tt>、<tt>log</tt>、<tt>log10</tt>、<tt>sin</tt>、<tt>cos</tt>、<tt>tan</tt>、<tt>asin</tt>、<tt>acos</tt>、<tt>atan</tt>、<tt>sinh</tt>、<tt>cosh</tt>、<tt>tanh</tt>、<tt>asinh</tt>、<tt>acosh</tt>、and <tt>atanh</tt>
などが組み込まれている。ほかにもあまり多くは使われないが、
<tt>besj0</tt>、<tt>besj1</tt>、<tt>besy0</tt>、<tt>besy1</tt>、<tt>erf</tt>、<tt>erfc</tt>、<tt>inverf</tt>、<tt>lgamma</tt>、<tt>gamma</tt>、<tt>norm</tt>、<tt>invnorm</tt>、<tt>ibeta</tt>、<tt>igamma</tt>
も組み込まれている。
これらはプロット・プログラムの <code>gnuplot</code> の同名の関数と同じ定義である
(引数を３つ取る <tt>ibeta</tt>、２つ取る <tt>igamma</tt> 以外はすべて引数は一つである)。
また <code>ode</code> は上で示したように、<samp>`PI'</samp> の値も正しく理解する。
上に列挙した <samp>`cos'</samp> や <samp>`sin'</samp> などの関数の名前は予約語であり、
したがって変数名としては使えない。
</p>
<p>予約名とキーワードによる制限以外は、変数名は任意に付けることができる。
英字で始まる英数字からなる文字列が名前として使える。最初の 32
文字だけが名前として有効である。
非常に重要なことは、
<code>ode</code> は微分方程式系の定義から、
微分方程式や初期値の代入文の左辺に現れない唯一の変数が独立変数であると見なす、
ということである。
そういう変数が複数あると、ステップを進められず、エラーメッセージが表示される。
またそういった変数がない場合は、<code>ode</code> の内部で代わりに <samp>`(indep)'</samp>
という名前のダミーの独立変数が使われる。
</p>
<hr size="6">
<a name="Additional-ode-Examples"></a>
<a name="SEC38"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC37" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC39" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC35" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 8.3 一歩進んだ <code>ode</code> の使い方 </h2>

<p>すべての機能を網羅できるわけではないが、以下に <code>ode</code>
の他の機能の使用例を示す。
コマンドライン・オプションのリストについては <a href="#SEC39"><code>ode</code> のコマンドライン・オプション</a>
を参照のこと。
</p>
<p><code>ode</code>
を使って、非常に美しいプロットをさほど大した労力もなく得ることができる。
以下に<em>ストレンジ・アトラクタ</em>、
またはローレンツ・アトラクタをプロットする例を示す。ファイル <tt>`lorenz'</tt>
に以下の内容が書き込んであるとする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"># The Lorenz model, a system of three coupled ODE's with parameter r.
x' = -3*(x-y)
y' = -x*z+r*x-y
z' = x*y-z

r = 26
x = 0; y = 1; z = 0

print x, y
step 0, 200
</pre></td></tr></table>

<p>そこで以下のコマンドを実行すると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode &lt; lorenz | graph -T X -C -x -10 10 -y -10 10
</pre></td></tr></table>

<p>ローレンツ・アトラクタのプロットが表示される
(厳密に言うと、このプロットはそれを二次元に投影したものである)。
以下のようにすれば、このプロットを PostScript
に変換して、プリンタで印刷できる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode &lt; lorenz | graph -T ps -x -10 10 -y -10 10 -W 0 | lpr
</pre></td></tr></table>

<p><samp>`-W 0'</samp> (太さを 0 にする) オプションで <code>graph -T ps</code>
にもっとも細い線で描画するように指示している。
プリンタなどの PostScript デバイスでは、こうするときれいに表示できる。
</p>
<p>ローレンツ・アトラクタの例のセミコロンの部分を見ると、
リアルタイムで生成されるデータから見た目にインパクトのあるプロットをする一方で、
複数の入力文をどのようにすれば一行で入力できるかがわかる。
この例ではまた、定数を記号で表す方法も示されている。
<code>ode</code> の入力としては、パラメータ <em>r</em> は
<em>x</em>、<em>y</em>、および <em>z</em> といった他の変数と同じである。
しかしそれらと違って、ステップが進んでも <em>r</em> の値は一定のままである。
それは導関数 <em>r'</em> の式が与えられていないからである。
</p>
<p>次の例では対話的に「位相平面 (phase portrait)」を描く方法を示す。
それは、異なる初期値から得られる解曲線の集合である。
位相平面は、微分方程式の性質を見る上でもっともよい方法であり、
外見的にも美しい。
</p>
<p><code>ode</code> に与える入力には <samp>`step'</samp> 文はいくつあってもよいため、<code>ode</code>
を一度実行するだけで複数の解曲線を得られる。
各 <samp>`step'</samp> 文の前、最後に読み込まれた <samp>`print'</samp> 文による指定がその
<samp>`step'</samp> による出力で使われる。
位相平面を描くとき実際には、
どの解曲線を描くべきかを丁寧に、慎重に選ぶ必要がある。
そのためにはリアルタイム・プロットを使って重要そうな解をすべてプロットし、
試行錯誤を行って決める必要があるだろう。
</p>
<p>例として、
被食者と捕食者の関係のモデルに使われるロトカ・ヴォルテラ・モデルを使う。
このモデルでは湖に
A (被食者)および B (捕食者)という二種類の魚がいるとする。
被食者は豊富に生えている植物を食べて生きていて、捕食者は被食者を食べている。
<em>x(t)</em> が被食者の個体数、<em>y(t)</em> が捕食者の個体数で、ともに時間
<em>t</em> の関数とする。A と B
の単純な関係のモデルは、以下の式で与えられる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>x' = x(a-by)</em>
<em>y' = y(cx-d)</em>
</pre></td></tr></table>

<p><em>a, b, c, d</em> は正の定数である。この微分方程式系の位相平面を描くには、
以下のようにすればよい。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode | graph -T X -C -x 0 5 -y 0 5
x' = (a - b*y) * x
y' = (c*x - d) * y
a = 1; b = 1; c = 1; d = 1;
print x, y
x = 1; y = 2
step 0, 10
x = 1; y = 3
step 0, 10
x = 1; y = 4
step 0, 10
x = 1; y = 5
step 0, 10
.
</pre></td></tr></table>

<p>各 <samp>`step'</samp> 文ごとに１つの曲線が、合計４本の曲線が連続して描かれる。
これらは周期的である。その周期性は、
被食者と捕食者の個体数が実際の自然環境下で増減する周期と似ている。
カラーディスプレイ上では各曲線は異なる色で描かれる。これは、<code>graph</code>
がデフォルトではデータセットごとに違う線種を使うからである。
この機能を無効にしたいときは、<code>graph -T X</code> ではなく
<code>graph -T X -B</code> とすればよい。
</p>
<p><code>ode</code> と <code>graph</code>
で離散点をプロットする時、それらを線で結ばない方がよいような場合もある。
３つ目の例として、そのやり方を示す。ファイル <tt>`atwoods'</tt>
に以下の内容が書き込んであるとする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">m = 1
M = 1.0625
a = 0.5; adot = 0
l = 10; ldot = 0

ldot' = ( m * l * adot * adot - M * 9.8 + m * 9.8 * cos(a) ) / (m + M)
l'    = ldot
adot' = (-1/l) * (9.8 * sin(a) +  2 * adot * ldot)
a'    = adot

print l, ldot
step 0, 400
</pre></td></tr></table>

<p>最初の数行は揺れるアトウッドの器械と呼ばれる、
一種の振り子を表現する関数の記述である。
通常のアトウッドの器械は、滑車に掛けられた、
たるみのない糸の両端に重りがそれぞれぶら下がっている、というものである。
通常、重い方の重りの質量が <em>M</em>、軽い方が <em>m</em>
と表され、軽い方が上に引っ張られていく。
揺れるアトウッドの器械は、軽い方の重りが、
上下方向に動いていくときに前後にも揺れる、としたものである。
</p>
<p><samp>`print l, ldot'</samp> 文は、
軽い方の重りの上下方向の位置と速度を各ステップごとに表示させる。
以下のコマンドを実行すると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode &lt; atwoods | graph -T X -x 9 11 -y -1 1 -m 0 -S 1 -X l -Y ldot
</pre></td></tr></table>

<p>リアルタイム・プロットが得られる。<samp>`-m 0'</samp>
オプションで連続するデータ点が線で結ばれないようにしている。<samp>`-S 1'</samp>
オプションで記号 1 (点) で各データ点をプロットするように指示している。
このコマンドを実行すると分かるように、
重い方の重りが軽い方に「勝つ」わけではく、非周期的に振動を続ける。
周期的ではないため、プロットは線で結ばないほうが見やすい。
</p>
<p>最後に、何かおかしなことが起こっていて様子を見たい、
というようなときに便利な、いくつかの
<code>ode</code> の機能を示す。その一つは <samp>`examine'</samp> 文である。
これは微分方程式系の変数について、その情報を直接得るのに役に立つだろう。
詳細は <a href="#SEC43"><code>ode</code> の記述言語</a> を参照のこと。
</p>
<p>また <samp>`print'</samp> を使って、
単なる変数の値だけでなくもっと詳しい情報を表示させることもできる。
既に例に出ているが、変数名に <samp>`''</samp>
を付けるとその変数の導関数値が表示される。同様に変数名に
<samp>`?'</samp>、<samp>`!'</samp>、<samp>`~'</samp>
を付けるとそれぞれ１ステップでの相対誤差、１ステップでの絶対誤差、
累積誤差が表示される (累積誤差は現在、まだ実装されていない) 。これらについては
<a href="#SEC41">数値誤差</a> 参照のこと。
</p>
<p>前出の例で示したように、<samp>`print'</samp> 文ではもっと複雑な表示もできる。
その一般的な書式は以下である。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">print &lt;pr-list&gt; [every &lt;const&gt;] [from &lt;const&gt;]
</pre></td></tr></table>

<p><samp>`[&hellip;]'</samp> のカッコに囲まれた部分は、必ずしも指定しなくてもよい。
ここまでの例では <samp>`every'</samp> 節と <samp>`from'</samp> 節のことは出てきていない。
<tt>&lt;pr-list&gt;</tt> はよく使うが、これはコンマで区切られた変数のリストである。
たとえば以下の文では
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">print t, y, y' every 5 from 1
</pre></td></tr></table>

<p><tt>&lt;pr-list&gt;</tt> は <tt>&lt;t, y, y'&gt;</tt> である。<samp>`every 5'</samp> と <samp>`from 1'</samp>
いう節は、変数値の表示を５ステップおきに、また独立変数 <em>t</em> の値が
1 になってから 行うことを指示している。<samp>`every'</samp>
節は <samp>`step'</samp> 文による出力をすっきりさせたいときに、
<samp>`from'</samp> 節は解曲線の最後の方だけが必要なときに、それぞれ便利である。
</p>
<hr size="6">
<a name="ode-Invocation"></a>
<a name="SEC39"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC38" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC40" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC35" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 8.4 <code>ode</code> のコマンドライン・オプション </h2>


<p>以下に <code>ode</code> に指定できるコマンドライン・オプションを列挙する。
コマンドライン・オプションには、３種類ある。
</p>
<ol>
<li>
入力法に関するオプション。
</li><li>
出力形式に関するオプション。
</li><li>
求解アルゴリズムと、
そのアルゴリズムでの許容誤差の指定方法に関するオプション。
</li><li>
情報を表示させるオプション。
</li></ol>


<p>以下のオプションで、入力の方法を指定する。
</p>
<dl compact="compact">
<dt> <samp>`-f <var>filename</var>'</samp></dt>
<dt> <samp>`--input-file <var>filename</var>'</samp></dt>
<dd><p>標準入力から読み込む前に、<var>filename</var> から読み込む。
</p></dd>
</dl>


<p>以下のオプションで、出力形式に関する指定を行う。
</p>
<dl compact="compact">
<dt> <samp>`-p <var>significant-digits</var>'</samp></dt>
<dt> <samp>`--precision <var>significant-digits</var>'</samp></dt>
<dd><p>(正の整数、デフォルトは 6)
数値解を表示するときの精度を <var>significant-digits</var> で指定する。
このオプションが指定されているときは、結果は指数表記される。
</p>
</dd>
<dt> <samp>`-t'</samp></dt>
<dt> <samp>`--title'</samp></dt>
<dd><p>出力の最初にタイトル行として、各カラムの意味を表示する。
このオプションが指定されているときは、結果は指数表記される。
</p></dd>
</dl>


<p>以下のオプションは、求解アルゴリズムに関するものである。３つの基本オプション
<samp>`-R'</samp>、<samp>`-A'</samp>、<samp>`-E'</samp> のうちの一つだけを指定できる。
デフォルトは <samp>`-R'</samp> (Runge-Kutta-Fehlberg) である。
</p>
<dl compact="compact">
<dt> <samp>`-R [<var>stepsize</var>]'</samp></dt>
<dt> <samp>`--runge-kutta [<var>stepsize</var>]'</samp></dt>
<dd><p>５次の Runge-Kutta-Fehlberg 法を使う。固定のステップ幅 <var>stepsize</var>
を指定しない限り、ステップ幅は適応的に決定される。固定のステップ幅を指定し、
許容誤差の指定も行わない場合、古典的な４次の Runge-Kutta 法が使われる。
</p>
</dd>
<dt> <samp>`-A [<var>stepsize</var>]'</samp></dt>
<dt> <samp>`--adams-moulton [<var>stepsize</var>]'</samp></dt>
<dd><p> Adams-Moulton の４次の予測子-修正子法を使う。固定のステップ幅 <var>stepsize</var>
を指定しない限り、ステップ幅は適応的に決定される。
通過した点が「悪い」と判定されたとき (があれば)、Runge-Kutta-Fehlberg
法を使う。
</p>
</dd>
<dt> <samp>`-E [<var>stepsize</var>]'</samp></dt>
<dt> <samp>`--euler [<var>stepsize</var>]'</samp></dt>
<dd><p>高速だが粗いオイラー法を使う。ステップ幅は固定である。<var>stepsize</var>
のデフォルト値は 0.1 である。精度を必要とする場合にはお勧めできない。
</p>
<p>許容誤差を指定するオプション <samp>`-r'</samp> と <samp>`-e'</samp> (後述)
は、<samp>`-E'</samp> が指定されているときには使ってもあまり意味はないだろう。
</p>
</dd>
<dt> <samp>`-h <var>hmin</var> [<var>hmax</var>]'</samp></dt>
<dt> <samp>`--step-size-bound <var>hmin</var> [<var>hmax</var>]'</samp></dt>
<dd><p>ステップ幅の下限を <var>hmin</var> にする。どの求解アルゴリズムを使っていても、
ステップ幅が <var>hmin</var> より小さくなることはなくなる。デフォルトでは、
ステップ幅はそのプラットフォームの精度限界、
つまり倍精度浮動小数点実数の、非零であるようなもっとも小さな値まで小さくなれるようになっている。
オプションに <var>hmax</var> も指定された場合は、ステップ幅の上限も指定される。
これにより、
詳しく見たい領域を求解アルゴリズムが粗く飛ばしていってしまうことを避けられる。
</p></dd>
</dl>


<p>以下のオプションは、許容誤差の指定を行うことを指示するものである。
</p>
<dl compact="compact">
<dt> <samp>`-r <var>rmax</var> [<var>rmin</var>]'</samp></dt>
<dt> <samp>`--relative-error-bound <var>rmax</var> [<var>rmin</var>]'</samp></dt>
<dt> <samp>`-e <var>emax</var> [<var>emin</var>]'</samp></dt>
<dt> <samp>`--absolute-error-bound <var>emax</var> [<var>emin</var>]'</samp></dt>
<dd><p><samp>`-r'</samp> オプションは１ステップでの最大許容相対誤差を指定する。
<samp>`-r'</samp> オプションが指定されているときは、どの従属変数でもその相対誤差が
１ステップで <var>rmax</var> (デフォルトでは <em>10^(-9)</em>)
を超えることがないようにされる。
誤差がそれより大きくなったときには、その解は捨てられ、
エラーメッセージが表示される。
ステップ幅が固定でないときは「適応的に」ステップ幅が縮められる。
それにより、相対誤差を指定値よりも小さくすることができる。したがって、
許容誤差を小さく指定すると、それだけステップ幅も小さくなる。
下限値 <var>rmin</var> も指定できる。
これにより、ステップ幅をある程度の大きさにしておくことができる
(デフォルトでは <var>rmin</var> は <var>rmax</var>/1000 である)。
<samp>`-e'</samp> オプションは <samp>`-r'</samp>
とほとんど同じだが、相対誤差ではなく絶対誤差を指定する。
</p>
</dd>
<dt> <samp>`-s'</samp></dt>
<dt> <samp>`--suppress-error-bound'</samp></dt>
<dd><p>ステップ誤差
(ステップを一つ進めたときに、そのステップで生じたと推定される計算誤差)
の許容限度の指定をなくす。
これにより、ステップ誤差が許容範囲を超えてしまうような場合でも、<code>ode</code>
は求解を続けることができる。これを指定すると、
数値計算の誤差が大きくなることがある。
</p></dd>
</dl>


<p>最後に、情報を表示するためのオプションを挙げる。
</p>
<dl compact="compact">
<dt> <samp>`--help'</samp></dt>
<dd><p>コマンドライン・オプションのリストを表示、そのまま終了する。
</p>
</dd>
<dt> <samp>`--version'</samp></dt>
<dd><p>パッケージのバージョン番号を表示して、そのまま終了する。
</p></dd>
</dl>

<hr size="6">
<a name="Diagnostics"></a>
<a name="SEC40"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC39" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC41" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC35" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 8.5 診断メッセージ </h2>

<p><code>ode</code> は実行中、常に以下の二種類の状態 (モード) のどちらかにある。
</p>
<ul>
<li>
入力を読み込む。入力されるのは、
微分方程式系の定義、数値的に解くアルゴリズムの指定、
<samp>`print'</samp> 文、<samp>`step'</samp> 文などである。

</li><li>
微分方程式系を数値的に解き、結果を出力する。
</li></ul>


<p><code>ode</code> は、<samp>`step'</samp>
文が入力されたときに最初の状態から二つ目の状態に遷移する。
そして出力が終わった時点で最初の状態に戻る。「読み込み」および「求解」
のどちらの状態でも、エラーが発生したら計算を中断するか、
<code>ode</code> の実行を終了することがある。以下に生じうるエラーについて説明する。
</p>
<p><code>ode</code> が入力を読み込んでいるときには、構文エラーが発生し得る。
これは入力に文法の間違いがあって、<code>ode</code> が構文解析を行えないことを示す
(構文の詳細については <a href="#SEC43"><code>ode</code> の記述言語</a> を参照のこと)。
この場合、以下のエラーメッセージが表示される。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode::nnn: syntax error
</pre></td></tr></table>

<p><samp>`nnn'</samp> は文法の間違いがあるとされる行の番号である。
入力がキーボードからではなく、<samp>`-f filename'</samp>
で入力ファイルを指定しているときは、
そのファイル内にあるエラーに対して、以下のようにメッセージが表示される。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode:filename:nnn: syntax error
</pre></td></tr></table>

<p>ファイルからの読み込みが終わって標準入力からの読み込みに切り替わると、
表示される行番号はまた 1 からはじまる。
</p>
<p>入力に文法の間違いがあった場合、
それを修正して動作を回復するような動作は一切行わない。
しかしできるだけ無駄にモードが切り替わらないようにはするので、
入力ファイル中に複数の間違いがあっても、それらはできる範囲で一度に表示される。
</p>
<p>また数値計算上、致命的な演算例外 (零除算や浮動小数点のオーバーフローなど)
が <code>ode</code> での入力中に発生することもある。そういったときは <code>ode</code> は
&quot;Floating point exception&quot; エラーメッセージを表示し、終了する。
演算例外はプラットフォーム依存である。いくつかのプラットフォームでは、
以下の行
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">y = 1/0
</pre></td></tr></table>

<p>は演算例外を発生する。またいくつかのプラットフォームでは
(上のと同じプラットフォームとは限らない)、以下の行
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">y = 1e100
z = y^4
</pre></td></tr></table>

<p>も演算例外を発生する。多くのプラットフォームでは、<code>ode</code>
が内部で使う倍精度実数の大きさが約 1.8x10^308 に制限されているためである。
</p>
<p><code>ode</code> が「求解」状態にあるとき、たとえば数値解を計算しているとき、
やはり同様の演算例外が発生しうる。その場合求解は中断され、
以下のようなメッセージが表示される。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode: arithmetic exception while calculating y'
</pre></td></tr></table>

<p>しかし <code>ode</code> の実行自体は終了しない。例外は「キャッチ」される。
<code>ode</code> 自身はいくつかの例外を認識し、キャッチする。
負の数の平方根、非正数の対数、非正数の負の数乗、である。
<code>ode</code> はこれらの演算が実行されてしまう前にキャッチし、
生じた不正な演算はどれかを示すエラーメッセージを表示する。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode: square root of a negative number while calculating y'
</pre></td></tr></table>

<p>上がその代表例 (負の数の平方根) である。
</p>
<p><code>ode</code> を実行しているプラットフォームで <samp>`matherr'</samp> 機能が有効で、
標準の数学関数の計算で生じたエラーを表示できるような場合、これが使われる。
この機能を使うと、<samp>`log'</samp> や <samp>`gamma'</samp> といった関数の評価時に、
それが実際に評価される前にドメイン・エラー (引数の値が許されない値になっている)
や範囲エラー (オーバーフロー、アンダーフロー、精度落ち)
が報告される。<samp>`matherr'</samp> 機能が有効なら、
エラーメッセージではもっと多くの情報が表示される。たとえば
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ode: range error (overflow) in lgamma while calculating y'
</pre></td></tr></table>

<p>というエラーメッセージでは、与えられた引数で対数ガンマ関数 <samp>`lgamma'</samp>
を評価したら、その値が大きくなりすぎたであろうことを示している。
アンダーフローの警告以外のエラーメッセージが表示されたときは、求解を中断する。
</p>
<p>他の種類のエラーも、求解中には発生しうる。
<samp>`-r'</samp> か <samp>`-e'</samp> オプションが指定されているとき、
切り上げられた誤差が許容範囲を超えてしまうような場合である。
これが発生した数値解は捨てられ、<code>ode</code>
のステップはエラーが発生する前の点に戻る。
</p>
<hr size="6">
<a name="Numerical-Error"></a>
<a name="SEC41"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC40" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC42" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC35" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 8.6 数値誤差 </h2>

<p>以下の議論は、何らかの結論や答えを断定的に導くものではなく、
問題を理解することを目的としている。
議論の各主題 (浮動小数点エラーなど) について、それぞれ参考になる書籍があるが、
ここでは中庸を目指すことにする。最初に、<code>ode</code>
で実装されている誤差解析の基本的な考え方について、次に、
よくある落とし穴を避ける方法について述べる。以下の議論を読む前に、
数値解析の本 (たとえば Atkinson の<cite>Introduction to Numerical Analysis</cite>
など) を読んでおくとよい。
</p>
<p>最初にいくつかの定義をしておく。もっとも問題になる誤差は、
真の解と近似的な数値解法による値との差異である。
これは<em>累積誤差</em>と呼ばれる。
求解の各ステップで積み重ねられていくからである。
困ったことに、普通は真の解が分からないので、累積誤差を推定することもできない。
しかし、なんとか誤差の見当をつける方法はいくつかある。
特に、求解を１ステップ進めたときに生じる真の解と近似数値解の誤差、
つまり<em>ステップ誤差</em>は、
最初のステップにおいては正しく求められると仮定できる。
</p>
<p><em>相対ステップ誤差</em>は、ステップ誤差をその点の近似数値解で除した値である。
真の解の値は正確には分からないので、除算には近似解を使うしかない。
ステップ幅が適応的に決められるアルゴリズムを使う時、<code>ode</code>
は相対ステップ誤差に基づいてステップ幅を決定する。
デフォルトでは、各ステップで 8 桁の精度を維持できるようにステップ幅を選ぶ。
これはつまり、相対ステップ誤差が許容誤差 <em>10^(-9)</em>
を超えない程度にはステップ幅を広く取る、ということである。
これは <samp>`-r'</samp> オプションで調整することができる。
</p>
<p>数値誤差の生じる原因には、２種類ある。
一つ目は、計算機での数値演算では精度が有限である、ということである。
すべての計算機は、数学の本物の実数の代わりに浮動小数点実数を使って計算を行う。
これは実数を近似するものでしかない。しかし <code>ode</code>
の内部の演算にはすべて倍精度実数を使っているので、
誤差は比較的小さいと言っていいだろう。
それでも、<samp>`-p 17'</samp> オプションを使って 17
桁で計算結果を出力すれば、本物の実数と浮動小数点実数の違いを見ることができる。
ほとんどの計算機では、倍精度実数の精度は 17 桁だからである。
</p>
<p>二つ目は<em>理論打ち切り誤差</em>と呼ばれるものである。
これは真の解と、求解に用いられるアルゴリズムに起因する近似値との差異である。
たとえば平方根の値を求めるアルゴリズムではほとんどの場合、無限級数展開を行う。
計算機では無限級数をそのままは扱えないので、
数値解法では級数を、または項の計算を途中で打ち切る必要がある。
ステップ誤差はこの打ち切り誤差と浮動小数点誤差の二つをあわせたものである。
しかし現実的には浮動小数点誤差はあまり問題にならないので、<code>ode</code>
は打ち切り誤差だけからステップ誤差の値を推定する。
</p>
<p>ある種の初期値問題では、ステップ幅を小さくすれば、
求解を行う区間全体にわたる誤差の累積値を小さくすることができる。
少なくともある範囲内のステップ幅でそうできるのであれば、
そのときこの求解アルゴリズムは「安定」であると言われる。この意味で、
Runge-Kutta-Fehlberg (<samp>`-R'</samp>) 法と Adams-Moulton (<samp>`-A'</samp>)
法は多くの場合、(原理的にではなく経験的に) 安定である。
</p>
<p>これらの議論をふまえて、
数値的な求解において累積誤差や不安定性の生じる主な原因を以下に挙げる。
累積誤差が大きくなったり不安定になったりする系は普通、
「悪い点」に近いところでステップ誤差が大きくなることに起因する。
</p>
<ol>
<li> 特異点。

<p><code>ode</code> での求解は、特異点を含む区間で行うべきではない。
解こうとしている微分方程式系の特異点や未定義である点をまたぐようなステップを、
<code>ode</code> でとろうとするべきではない。
</p>
<p>特異点、正則な特異点、正則でない特異点などの定義は、
多くの微分方程式に関する本に解説されている。いい本が見つからなければ、
Birkhoff と Rota による<cite>Ordinary Differential Equations</cite> の Chapter 9
を読むとよい。<code>ode</code> で求解をしようとする前に、どんな系でも、
まず特異点があるかどうか、あるならの場所と種類をよく調べるべきである。
</p>
</li><li> 
不良設定問題。

<p>対象とする区間全体において <code>ode</code> で精密な解を得ようとするなら、
その区間において真の解が定義されていて、
かつその振る舞いの性質がよいことが求められる。
また真の解は実数でなければならない。これらの条件のどれかが成立しない場合、
その問題は「不良設定」である、と言われる。
また、区間内での振る舞いがよくても不良設定となる場合もある。
たとえばステップ幅が突然、精度限界近くまで小さくなったり、
近似数値解の値が急上昇したりといったおかしな計算結果が得られる場合も、
不良設定問題であることによる場合がある。
</p>
<p>以下の、一見問題のなさそうな系が不良設定問題 (解が定義されないところがある)
のよい例である。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y' = y^2</em>
<em>y(1) = -1</em>
</pre></td></tr></table>

<p>この解は <em>t &gt; 0</em> で定義される、以下の関数である。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y(t) = -1/t</em>.
</pre></td></tr></table>

<p>この問題では数値解は <em>t=0</em> を含む区間では計算できない。
<samp>`step'</samp> 文を以下のように入力すると、それがわかる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">step 1, -1
</pre></td></tr></table>

<p><code>ode</code> がどのように振る舞うか、わかっただろうか？
</p>
<p>もうひとつ不良設定問題の例を挙げる。以下の系
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y'=1/y</em>
</pre></td></tr></table>
<p>は <em>y=0</em> で未定義となる。一般解は
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y = +/- (2(t-C))^(1/2)</em>,
</pre></td></tr></table>
<p>であり、<em>y(2)=2</em> という条件を与えると解は <em>(2t)^(1/2)</em> となる。
<samp>`step'</samp> 文で指定される区間に <em>t</em> が負の領域が含まれていると、
その領域では求解は正しく行われない。
</p>
<p>一般的に、ステップ幅を固定するときは、
悪い点をまたぐことのないようにするべきである。
ステップ幅の適応制御を行うときは、<code>ode</code> が悪い点を見つけることもあるが、
いつも見つけられるとは限らない。
</p>
</li><li> 
臨界点。

<p>微分方程式の右辺に明示的に独立変数を含まないような系を<em>自励</em>系と呼ぶ。
自励系の臨界点とは、右辺がすべて 0 になる点のことである。たとえば以下の系
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y' = 2x</em>
<em>x' = 2y</em>
</pre></td></tr></table>
<p>では、<em>(x,y) = (0,0)</em> の一点だけが臨界点である。
</p>
<p>臨界点はまた、<em>よどみ点</em>とも呼ばれる。
それは、系がその近くの点にあると激しい挙動を示すことがあるが、
その点上にある系はずっとそのままだからである。
環境によっては、臨界点の近くを通ると累積誤差が大きくなることがある。
</p>
<p>実際に上の系を <code>ode</code> を使って、 <em>x(0) = y(0) = 0</em>
という初期条件の元で解いてみると、時間が進んでも解は一定値のままである。
初期値を臨界点の近くの別の点に動かしてみると、どうなるだろうか。
</p>
<p><code>ode</code> で求解をしようとする前に、どんな系でも、
まず臨界点の場所をよく調べるべきである。臨界点にはいくつもの種類
(平衡点、渦点、不安定点、安定点、その他) があり、
種類が分かると有益なことがある。臨界点についての詳細は、
微分方程式の性質についての本をみると解説してある (たとえば Birkhoff と Rota
の <cite>Ordinary Differential Equations</cite>, Chapter 6 など)。
</p>
</li><li> 
不適切なアルゴリズム。

<p><code>ode</code> の計算結果が不安定な挙動を示したり、
ステップ誤差を抑えるためにステップ幅が極端に小さくなったりしたときは、
単に求解アルゴリズムがその問題に適していないのかもしれない。
たとえば、「硬い」系をうまく解けるような数値解法は現在、<code>ode</code>
には実装されていない。
</p>
<p>以下の例で、硬い系とはどのようなものが見ることができる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y' = -100 + 100t + 1</em>
<em>y(0) = 1</em>
</pre></td></tr></table>

<p>区間は <em>[0,1]</em> とする。厳密解は
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><em>y(t) = e^(-100t) + t</em>.
</pre></td></tr></table>

<p>である。<code>ode</code>
で求解アルゴリズム、ステップ幅、許容相対ステップ誤差を様々に変えて、
得られる解曲線と厳密解を比較してみるとよい。
</p></li></ol>

<p><code>ode</code>
の計算した近似数値解の精度を、手軽におおざっぱに確認してみる方法も、
いくつかある。順番に解説する。
</p>
<ol>
<li> 解曲線の安定性を見る: 曲線は収束していっているか？

<p>これは、ステップ幅の調整が解曲線にどう影響しているかを見るということである。
ステップ幅を小さくすると曲線は収束していくはずである。そうならない場合は、
ステップ幅が十分に小さくなっていないか、
求解アルゴリズムが適切でないということである。
実際には、以下のようにするといいだろう。
</p>
<ul>
<li>
ステップ幅の適応制御を行っている場合は、
ステップ誤差の許容範囲を段階的に小さくして (<samp>`-r 1e-9'</samp>、<samp>`-r
1e-11'</samp>、<samp>`-r 1e-13'</samp>、&hellip;) 解曲線を描いてみる。
それで解曲線が収束したら、解は区間全体で安定に振る舞い、
それは精度は十分であるということである。

</li><li>
ステップ幅を固定して計算している場合、ステップ幅をその半分にして、
上と同様に解がどう変わるかを見てみる。
</li></ul>

<p>これを試す例を以下に示す。以下の内容を含む <tt>`qcd'</tt>
というファイルがあるとする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"># an equation arising in QCD (quantum chromodynamics)
f'   = fp
fp'  = -f*g^2
g'   = gp
gp'  = g*f^2
f = 0; fp = -1; g = 1; gp = -1

print t, f
step 0, 5
</pre></td></tr></table>

<p>次に、以下の内容を持つ <tt>`stability'</tt> というファイルを作る。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"># sserr is the bound on the relative single-step error
for sserr
do
ode -r $sserr &lt; qcd
done | spline -n 500 | graph -T X -C
</pre></td></tr></table>
<p>ファイル <tt>`stability'</tt> は「シェル・スクリプト」であり、
許容相対ステップ誤差の指定値を変えながら、解曲線を重ねて描いていく。
これを以下のように実行する。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">sh stability 1 .1 .01 .001
</pre></td></tr></table>
<p>指定された許容誤差の場合の解曲線がそれぞれ描かれる。
どう収束していくのか、つまり安定性を見て取ることができる。
</p>
</li><li> 系の中の不変量: それは定数か？

<p>不変量を含む系は多数ある。
たとえば物理学においてなんらかの「保存則」の数理モデルがあるとすると
エネルギー (その系の従属変数の関数) は時間の経過によっては変化しない。
一般に、従属変数の振る舞いがどういった性質なのかが分かっていれば、
解の性質を調べるのに有利である。
</p>
</li><li> 解曲線の「族」: それらは発散していくか？

<p>問題としている系の初期値を様々に変えることで、解曲線の曲線族が得られるが、
それを見ると誤差がどのように累積していくか、おおざっぱに見ることができる。
それがはっきりと発散する場合、つまり非常に近い初期値から始まっているのに、
区間の終端ではかなり離れた値になる場合、その解曲線はおかしいのかもしれない。
一方で解曲線があまり離れていかない場合、区間全体に渡って誤差は、
あらゆる可能性において、その桁が変わるほどには増えていないということである。
そういった、近い点から出発した解がさほど大きく離れていかないような系は、
良設定であると言われることがある。
</p></li></ol>

<hr size="6">
<a name="Running-Time"></a>
<a name="SEC42"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC41" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC43" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC35" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 8.7 実行時間 </h2>

<p><code>ode</code> が微分方程式系を数値的に解くのにかかる時間は、
多くの要因に左右される。そのうちのいくつかを挙げると、
含まれる方程式の数、方程式の複雑さ (演算子の個数や性質)、
求解アルゴリズムがとるステップの数 (ステップ幅が適応制御される場合、
ステップ幅を決めるのには非常に複雑な計算が必要である) などである。
時間を無駄にせずに求解にかかる時間を見積もるには、短い区間で、
あるいは低い精度で計算時間をはかってみるのがよい。それは、
ステップを２回進めるのにかかる時間は１回の時間の２倍程度であろうこと、
および指定された許容相対誤差とステップ数にはなんからの関係があるだろう、
ということから考えられる。そのなんらかの関係は、
求解アルゴリズムや系の「硬さ」、また許容相対誤差自体によって決まると考え、
注意深く何回か実行してみれば、その関係の見当をつけることができる。
また、区間全体で要求精度で計算するとどの程度の時間がかかるかを反映するような、
精度の低い求解をその区間でやってみることができるだろう。
最後に、データが大量に出力されるときは、
解の計算自体よりも画面への出力に時間がかかっている、
というのもありがちである。
</p>
<hr size="6">
<a name="Input-Language"></a>
<a name="SEC43"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC42" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC44" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC35" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 8.8 <code>ode</code> の記述言語 </h2>

<p>以下に <code>ode</code> が入力として受け付ける言語の仕様を、
バッカス・ナウア記法で示す。文法における非終端記号は &lt;カッコ&gt; で示す。
終端記号は大文字のみで示す。カッコのない語や記号は、そのままを表す。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;program&gt;    ::=        ... empty ...
               |  &lt;program&gt; &lt;statement&gt;


&lt;statement&gt;  ::=  SEP
               |  IDENTIFIER = &lt;const&gt; SEP
               |  IDENTIFIER ' = &lt;expression&gt; SEP
               |  print &lt;printlist&gt; &lt;optevery&gt; &lt;optfrom&gt; SEP
               |  step &lt;const&gt; , &lt;const&gt; , &lt;const&gt; SEP
               |  step &lt;const&gt; , &lt;const&gt; SEP
               |  examine IDENTIFIER SEP


&lt;printlist&gt;  ::=  &lt;printitem&gt;
               |  &lt;printlist&gt; , &lt;printitem&gt;


&lt;printitem&gt;  ::=  IDENTIFIER
               |  IDENTIFIER '
               |  IDENTIFIER ?
               |  IDENTIFIER !
               |  IDENTIFIER ~


&lt;optevery&gt;   ::=        ... empty ...
               |  every &lt;const&gt;


&lt;optfrom&gt;    ::=        ... empty ...
               |  from &lt;const&gt;


&lt;const&gt;      ::=  &lt;expression&gt;


&lt;expression&gt; ::=  ( &lt;expression&gt; )
               |  &lt;expression&gt; + &lt;expression&gt;
               |  &lt;expression&gt; - &lt;expression&gt;
               |  &lt;expression&gt; * &lt;expression&gt;
               |  &lt;expression&gt; / &lt;expression&gt;
               |  &lt;expression&gt; ^ &lt;expression&gt;
               |  FUNCTION ( &lt;expression&gt; )
               |  - &lt;expression&gt;
               |  NUMBER
               |  IDENTIFIER
</pre></td></tr></table>

<p>上に示した文法には、また曖昧さが残っている。
そこで演算子の結合の優先順位を以下の表に示す。
表の上の演算子ほど優先して結合される。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">Class           Operators    Associativity

Exponential         ^            right
Multiplicative      * /          left
Additive            + -          left
</pre></td></tr></table>
<p>上述の文法中に示されているように、記述対象が自明でない文が６種類ある。
各種類の「意味付け」を順番に説明する。
</p>
<ol>
<li> 
<tt>IDENTIFIER ' = &lt;expression&gt;</tt>


<p>一階の微分方程式を定義する。<tt>IDENTIFIER</tt> の導関数が <tt>&lt;expression&gt;</tt>
で指定される。動的変数がこの形式の左辺に現れない場合は、
その導関数は 0 のままであると仮定される。その場合、それは記号定数となる。
</p>
</li><li> 
<tt>IDENTIFIER = &lt;expression&gt;</tt>


<p><tt>IDENTIFIER</tt> の値を <tt>&lt;expression&gt;</tt> の現在の値にする。
この文で初期化されていない動的変数は、0 になる。
</p>
</li><li> 
<tt>step &lt;const&gt; , &lt;const&gt;</tt>
</li><li> 
<tt>step &lt;const&gt; , &lt;const&gt; , &lt;const&gt;</tt>


<p><samp>`step'</samp> 文で求解アルゴリズムが実行される。最初の <tt>&lt;const&gt;</tt>
は独立変数の初期値である。二つ目は求解を行う区間の終端の独立変数値である。
三つ目はステップ幅である。ステップ幅が与えられたときは、
コマンドラインで指定されていたステップ幅をこの指定で上書きする。
ステップ幅を指定することはあまりなく、
求解アルゴリズムによって適応的に決定させることが多い。
</p>
</li><li> 
<tt>print &lt;printlist&gt; [ every &lt;const&gt; ] [ from &lt;const&gt; ]</tt>


<p><samp>`print'</samp> 文ではどの数値をいつ出力するかを指定する。<tt>&lt;printlist&gt;</tt>
はコンマで区切られた <tt>IDENTIFIER</tt> のリストで、各 <tt>IDENTIFIER</tt> の後ろに
<samp>`''</samp> を付けて導関数であることを、
<samp>`?'</samp> を付けて相対ステップ誤差であることを、
<samp>`!'</samp> を付けて絶対ステップ誤差であることを、
<samp>`~'</samp> を付けて累積誤差であることを示すことができる (最後のは未実装)。
指定された値は、指定された順序で出力される。<samp>`every'</samp> 節と <samp>`from'</samp>
節は指定してもしなくてもよい。<samp>`every'</samp> 節を指定すると <tt>&lt;const&gt;</tt>
ごとに指定された値が出力される。デフォルトは毎ステップ (つまり <samp>`every 1'</samp>)
である。最初と最後のステップでの値は、かならず表示される。もし <samp>`from'</samp>
節があった場合、独立変数の値が <tt>&lt;const&gt;</tt> を超えてからはじめて出力が行われる。
デフォルトでは、ステップ開始と同時に出力が始まる。
</p>
<p><samp>`print'</samp> 文が現れない場合は、
与えられた微分方程式系の独立変数とすべての従属変数が表示される。
最初に表示されるのは独立変数である。
従属変数は、方程式系で定義されている順に表示される。
</p>
</li><li> 
<tt>examine IDENTIFIER</tt>


<p><samp>`examine'</samp> 文は、
実行されると名前の与えられた変数に関する詳しい情報が表の形で表示される。
たとえば、どこかで出てきた `ode to Euler' の例を実行したときに <samp>`examine y'</samp>
とすると、以下のような情報を表示する。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&quot;y&quot; is a dynamic variable
value:2.718282
prime:2.718282
sserr:1.121662e-09
aberr:3.245638e-09
acerr:0
 code:  push &quot;y&quot;
</pre></td></tr></table>
<p>`dynamic variable' (動的変数) という言葉は、<tt>y</tt>
の挙動を記述する微分方程式が系の中にある、という意味である。
また表示されている数値の意味はそれぞれ、以下の通りである。
</p>
<dl compact="compact">
<dt> <tt>value</tt></dt>
<dd><p>現在のその変数の値。
</p>
</dd>
<dt> <tt>prime</tt>   </dt>
<dd><p>現在のその変数の導関数値。
</p>
</dd>
<dt> <tt>sserr</tt>   </dt>
<dd><p>最後のステップにおける、その変数の相対ステップ誤差。
</p>
</dd>
<dt> <tt>aberr</tt>   </dt>
<dd><p>最後のステップにおける、その変数の絶対ステップ誤差。
</p>
</dd>
<dt> <tt>acerr</tt>   </dt>
<dd><p>最後に実行された <samp>`step'</samp> 文による求解での累積誤差。
この機能は現在はまだ実装されていない。
</p></dd>
</dl>

<p><samp>`code'</samp> で表示されている部分は <tt>y</tt>
の導関数値を計算するために必要な一連のスタック操作のリストである
(往年の逆ポーランド式電卓のようなものである)。
ここをみれば、導関数値の計算が正確にはどのように行われるのか、
その計算にかかるメモリや時間はどの程度か、が分かる。<samp>`<tt>push &quot;y&quot;</tt>'</samp> は
<tt>y</tt> の値をスタックに積むことを表す。この系の場合は、
導関数値を計算するのに必要な操作はこれですべてである。
</p></li></ol>

<p><code>ode</code> 入力言語の文法には、４種類の終端記号がある。
<tt>FUNCTION</tt>、<tt>IDENTIFIER</tt>、<tt>NUMBER</tt>、および <tt>SEP</tt> である。
以下にその意味を示す。
</p>
<ol>
<li>
<tt>FUNCTION</tt>

<p><tt>abs</tt>、<tt>sqrt</tt>、<tt>exp</tt>、<tt>log</tt>、<tt>ln</tt>、<tt>log10</tt>、<tt>sin</tt>、<tt>cos</tt>、<tt>tan</tt>、<tt>asin</tt>、<tt>acos</tt>、<tt>atan</tt>、<tt>sinh</tt>、<tt>cosh</tt>、<tt>tanh</tt>、<tt>asinh</tt>、<tt>acosh</tt>、<tt>atanh</tt>、<tt>floor</tt>、<tt>ceil</tt>、<tt>besj0</tt>、<tt>besj1</tt>、<tt>besy0</tt>、<tt>besy1</tt>、<tt>erf</tt>、<tt>erfc</tt>、<tt>inverf</tt>、<tt>lgamma</tt>、<tt>gamma</tt>、<tt>norm</tt>、<tt>invnorm</tt>、<tt>ibeta</tt>、<tt>igamma</tt>
のうちの一つである。
これらの定義はプロット・プログラムの <code>gnuplot</code>
の同名の関数と同じである。<tt>ibeta</tt> は３つの、<tt>igamma</tt>
は２つの引数を取るが、他の関数の引数はすべて１つである。
三角関数の引数はラジアン単位で与える。<tt>atan</tt> 関数は -PI/2 以上 PI/2
以下の値を返すようになっている。
</p>
</li><li>
<tt>IDENTIFIER</tt>

<p>英字で始まり英数字からなる文字列である。最初の 32 文字だけが有効である。
大文字と小文字は別のものとして扱われる。この識別子名の中では、下線
(アンダースコア) は英字の一種として扱われる。
関数名やキーワード、および <samp>`PI'</samp> は識別子名に使わない。
</p>
</li><li>
<tt>NUMBER</tt>

<p>数字からなる空でない文字列。小数点、指数部を含んでいてもよい。指数部は <samp>`e'</samp>
または <samp>`E'</samp> に 1、2、3 個のいずれかの個数の数字を続けたものである。
一つ目の数字の前には符号がついていてもよい。
数字はすべて十進数として扱われる。
数値としては空白を含んでいてはならない。<samp>`PI'</samp> は数値である。
</p>
</li><li>
<tt>SEP</tt>

<p>区切り文字。セミコロンか、エスケープされてない改行。
</p></li></ol>

<p><code>ode</code> 入力言語では大文字と小文字は別の文字である。<samp>`#'</samp>
から行末まではコメントとして無視される。長い行は分割できる。その際、
上になった行の行末にはバックスラッシュ (<samp>`\'</samp>) を置く。
バックスラッシュと改行が連続している時、
その二つをまとめて一つの空白文字と等価であると見なされる。
</p>
<p>入力中で識別子、数値、キーワードを他のものと分離するために、
空白文字とタブを使う。空白類は区切り文字と同様、例外的に扱われる
(つまり無視される)。
</p>
<hr size="6">
<a name="ODE-Bibliography"></a>
<a name="SEC44"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC43" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC35" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 8.9 微分方程式について </h2>

<ul class="toc">
<li>
K. E. Atkinson, <cite>An Introduction to Numerical Analysis</cite>, Wiley,
1978.  Chapter 6 
には常備分方程式の数値解法の参考文献について述べられている。

</li><li>
G. Birkhoff and G. Rota, <cite>Ordinary Differential Equations</cite>, 4th
ed., Wiley, 1989.

</li><li>
N. B. Tufillaro, T. Abbott, and J. Reilly, <cite>An Experimental
Approach to Nonlinear Dynamics and Chaos</cite>, Addison-Wesley, 1992.
Appendix C に初期の <code>ode</code> について述べられている。

</li><li>
N. B. Tufillaro, E. F. Redish, and J. S. Risley, &quot;<code>ode</code>: A
numerical simulation of ordinary differential equations,&quot; 
pp. 480-481 in <cite>Proceedings of the Conference on Computers in 
Physics Instruction</cite>, Addison-Wesley, 1990.
</li></ul>

<hr size="6">
<a name="libplot"></a>
<a name="SEC45"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC44" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC46" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC35" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 9. <code>libplot</code> ライブラリ </h1>

<p>この文書は、フリーの２次元ベクトル画像描画関数のライブラリ
GNU libplot バージョン 4.4 についてのものである。
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC46">9.1 <code>libplot</code> プログラミング</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    libplot を使ったプログラミングの概要
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC47">9.2 <code>libplot</code> を使った C プログラミング</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       libplot を使った C プログラミング
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC57">9.3 <code>libplotter</code> を使った C++ プログラミング</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     libplotter を使った C++ プログラミング
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC61">9.4 <code>libplot</code> の関数リスト</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           libplot に実装されている関数の詳細なリスト
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC66">9.5 Plotter パラメータ</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  出力デバイスで指定できるパラメータ
</td></tr>
</table>

<hr size="6">
<a name="libplot-Overview"></a>
<a name="SEC46"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC45" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC47" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 9.1 <code>libplot</code> プログラミング </h2>

<p>GNU <code>libplot</code> バージョン 4.4
は、ベクトル形式の二次元画像を描くためのフリーのライブラリである。
二重バッファリングを使った滑らかなアニメーションを X Windows
システム上に表示することができ、
また画像を様々なフォーマットに書き出すことができる。
出力する画像形式やディスプレイの種類によらない
API (application programming interface) を実装しており、
その意味で、このライブラリは特定の出力デバイスに依存しない、と言える。
</p>
<p>plotutils のライブラリは C、C++ およびその他の言語から利用することができる。
もっともよく使われるのは C バインディングであり、これを <code>libplot</code>
と呼んでいる。また C++ バインディングには (<code>libplot</code>
と分けて呼ばねばならないときは) <code>libplotter</code> と呼ばれるものがある。
この章では <code>libplot</code> という名前はバインディングとは関係なく
このライブラリそのものをさす名前として用いる。
</p>
<p><code>libplot</code> で描画できるオブジェクトには、曲線、円と楕円、点、記号、
サイズを調整したラベル (適切な大きさの文字列) がある。
ここで、線分がつながったもの、円弧、楕円の弧、二次のベジェ曲線、
三次のベジェ曲線がつながった線を<em>パス</em>とよぶ。
パスには、閉曲線とそうでないものが描ける。
閉曲線、円、楕円については、塗りつぶしができる。
塗りつぶしの色はペンの色と同様に指定でき、
また塗りつぶしのパターンも指定できる。
</p>
<p>PostScript 言語風の、描画状態 (グラフィクス・コンテキスト)
のスタックを管理する機能もあり、
ある時点での描画に関する様々な属性をまとめて、
スタックで管理することができる。パスに付けられる属性には、
線の太さ、線種、両端の形、線のつなげ方、変換行列があり、
文字列の属性にはフォント名やフォントサイズ、テキストの回転角、変換行列がある。
</p>
<p><code>libplot</code> が提供する基礎的な属性の一つに、<em>Plotter</em> の属性がある。
Plotter はオブジェクトであり、いわゆる従来のペン・プロッタと同様の使い方で、
これに対して操作を行うことでベクトル形式の画像を描画できる。Plotter
にはいろいろな種類の出力形式のものがある。一つのアプリケーション中に、Plotter
オブジェクトはどの種類のものがいくつ保持されていてもよい。
</p>
<p>どの種類の Plotter オブジェクトでも、できる描画操作は同じであり、
デバイスの種類に依存しないようになっている。
したがって <code>libplot</code> を利用するアプリケーションは、
<code>libplot</code> がサポートするどの画像形式にも簡単に出力できる。
</p>
<p>現在、以下の種類の Plotter オブジェクトが実装されている。
</p>
<ul>
<li> 
X の Plotter。このデバイスはオープンされるときに X window
のディスプレイ上にウィンドウを開き、以降の描画はその中に行われる。
オブジェクトに対してクローズ操作を行うと、ウィンドウ内の画像が消える。
そのあと再びオープンされた時には、新しいウィンドウがまた作られる。
画像が消えてもウィンドウそのものはディスプレイ上に残っているが、
そのウィンドウ内で <samp>`q'</samp> を入力するかマウスクリックをすると、
ウィンドウは閉じられる。将来的には、閉じられた X の Plotter
がまたオープンされたときには、
既にあるウィンドウを再利用するようになる予定である。

</li><li> 
X Drawable の Plotter。これは一つまたは二つの「X Drawable」を
X Windows システムのディスプレイ上に表示する。
X Drawable とは、X のウィンドウまたはビットマップ画像のことである。それらを
Plotter デバイスにパラメータとして渡すことで描画が行われる
(<a href="#SEC66">Plotter パラメータ</a> 参照)。

</li><li>
PNG の Plotter。
これは出力を 1 ページの PNG (Portable Network Graphics)
形式の画像として生成し、ファイルまたは標準出力に書き出す。
出力されたファイルは、たとえばフリーの <code>ImageMagick</code>
パッケージの <code>display</code> などで表示、あるいは編集することができる。

</li><li>
PNM の Plotter。
これは出力を 1 ページの &quot;portable anymap&quot;
形式の画像として生成し、ファイルまたは標準出力に書き出す。
PNM には、PBM (portable bitmap、白黒画像)、PGM (portable
graymap、グレイスケール画像)、PPM
(portable pixmap、カラー画像) の形式がある。
出力されるファイルは、この３つの形式のうちのどれかもっとも適切な形式になる。
出力されたファイルは、たとえばフリーの
<code>display</code> などで表示、あるいは編集することができる。

</li><li>
GIF の Plotter。
これは出力を 1 ページの疑似 GIF
形式の画像として生成し、ファイルまたは標準出力に書き出す。
本物の GIF 形式と違って、疑似 GIF 形式では LZW
圧縮ではなくランレングス圧縮を行う。そのため LZW
圧縮の利用を制限している Unisys の特許には触れない。
それでも、出力されたファイルは、たとえばフリーの
<code>display</code> などで表示、あるいは編集することができる。
アニメーション疑似 GIF の生成もサポートしている。

</li><li>
SVG の Plotter。
これは出力を 1 ページの Scalable Vector Graphics
形式の画像として生成し、ファイルまたは標準出力に書き出す。
SVG はウェブ上でベクトル形式の画像を扱うための、XML
ベースの画像形式である。詳細は <a href="http://www.w3.org">W3 Consortium</a>
にある。また開発者のための情報はそのウェブサイトの
<a href="http://www.w3.org/Graphics">Graphics Activity</a> にある。
<code>libplot</code> では SVG の 2000 年 3 月 3 日版にしたがった出力を行う。

</li><li>
Illustrator の Plotter。
これは出力を 1 ページのアドビの Illustator
形式の画像として生成し、ファイルまたは標準出力に書き出す。
出力されたファイルは、アドビ Illustrator (バージョン 5 以上)
などのソフトウェアで表示、あるいは編集することができる。

</li><li> 
PostScript の Plotter。
これは出力を PostScript
形式の画像として生成し、ファイルまたは標準出力に書き出す。
もし画像が 1 ページだけであれば、このデバイスは EPS (encapsulated PostScript)
を出力する。これは他の文書に取り込んだりすることができる。
これはドロー・ソフトウェアの <code>idraw</code> で表示、あるいは編集することができる。
<a href="#SEC77"><code>idraw</code> の入手先</a> を参照のこと。

</li><li>
CGM の Plotter。これは出力を Computer Graphics Metafile
形式の画像として生成し、ファイルまたは標準出力に書き出す。
デフォルトではバイナリ形式の CGM 形式バージョン 3 で出力される。
CGM 形式出力はウェブ対応のベクトル画像形式である WebCGM
プロファイルに対応しているため、WebCGM
に対応しているウェブ・ブラウザならどれでも表示できる。
WebCGM については <a href="http://www.cgmopen.org/">CGM Open Consortium</a>
を参照のこと。

</li><li> 
Fig の Plotter。
これは出力を 1 ページの Fig
形式の画像として生成し、ファイルまたは標準出力に書き出す。
これはドロー・ソフトウェアの <code>xfig</code> で表示、あるいは編集することができる。
<code>xfig</code> を使えば、様々な画像フォーマットに書き出して、
他の文書に取り込んだりすることができる。
<a href="#SEC78"><code>xfig</code> の入手先</a> を参照のこと。

</li><li> 
PCL の Plotter。
これは出力を PCL 5
形式の画像として生成し、ファイルまたは標準出力に書き出す。
PCL 5 はヒューレット・パッカードの強力なプリンタ制御言語で、
ベクトル形式画像をサポートしている。
PCL 5 をサポートしているのは LaserJet
プリンタや比較的高級なインクジェットプリンタなどであり、この Plotter
の出力はそういったプリンタで印刷することができる。

</li><li>
HP-GL の Plotter。
これは出力を HP-GL (ヒューレット・パッカード・グラフィクス・ランゲージ)
形式の画像として生成し、ファイルまたは標準出力に書き出す
(デフォルトでは HP-GL/2)。
この形式の画像は他のソフトウェアで読み込んだり、
プロッタで描いたりすることができる。

</li><li>
ReGIS の Plotter。
これは出力を ReGIS (remote graphics instruction set)
形式の画像として生成し、ファイルまたは標準出力に書き出す。
この形式の画像は ReGIS 形式に対応した端末やエミュレータで表示することができる。
DEC の VT340、VT330、VT241、VT240 端末や <code>dxterm</code> などである。

</li><li>
Tektronix の Plotter。
これは出力を Tektronix 4014
形式の画像として生成し、ファイルまたは標準出力に書き出す。
この出力は、Tektronix 4014 エミュレータならどれでも表示させることができる。
X Window のターミナル・エミュレータの <code>xterm</code>
にその機能がある。MS-DOS 版の <code>kermit</code> でも可能である。

</li><li>
Metafile の Plotter。
これは出力を GNU のグラフィクス・メタファイル graphics metafile
形式の画像として生成し、ファイルまたは標準出力に書き出す。
この形式はいくつかの OS に搭載されている `plot(5)' の形式を拡張したものである
(<a href="#SEC75">Metafile 形式</a> 参照)。
この形式は GNU <code>plot</code> コマンドを使って他の形式に変換することができる
(<a href="#SEC15"><code>plot</code> コマンド</a> 参照)。
</li></ul>

<p>上述の Plotter デバイスの違いはまず、X と X Drawable を除くと、
ファイルまたは他の出力先に書き出す形式の違いである。
X の Plotter はウィンドウを新しく開き、X Drawable
は一つか二つの X Drawable の中に画像を描く。
</p>
<p>次に、最初の５つの Plotter デバイス (X、X Drawable、PNG、PNM、GIF)
はビットマップ画像を、他のものはベクトル形式の画像を描くという違いがある。
ビットマップ画像では描かれているオブジェクトの構造などの情報は失われるが、
ベクトル形式では保存されている。
</p>
<p>また、X、X Drawable、ReGIS、Tektronix、Metafile の Plotter
デバイスはリアルタイム・デバイスである。
これは、デバイスに対する描画操作が全部終了していなくても、
各操作が行われるたびに出力が逐次行われるということである。
他のデバイスはリアルタイム・デバイスではないので、
必要な関数がすべて呼ばれた後でないと出力は行われない。PNM と GIF の各 Plotter
では、そうでないとビットマップ画像を生成できないからである。Illustrator と
PostScript の Plotter ではまず最初に、画像のサイズ (`bounding box')
を出力する必要がある。Fig の Plotter
では色の定義をまず最初に出力せねばならない。
</p>
<p>どの Plotter デバイスに対しても行えるもっとも重要な操作は、<code>openpl</code>
と <code>closepl</code> である。これによってそのデバイスをオープン、クローズする。
画像の描画や様々な属性の設定などは、すべて <code>openpl</code>&hellip;<code>closepl</code>
の間に行う必要がある。一対の <code>openpl</code>&hellip;<code>closepl</code>
の間に行われた描画操作から、ひとつのページの画像が構築される。
原則的に、Plotter デバイスは何度もオープン／クローズできる。
X の Plotter は各ページをそれぞれのウィンドウで表示し、
PostScript、PCL、HP-GL の Plotter は各ページの画像をそれぞれ、
物理的に別の紙に描画する。X Drawable と Tektronix の Plotter
では、複数のページを一つの X Drawable またはディスプレイ上に順に表示する。
リアルタイムでない Plotter
(PNG、PNM、GIF、Illustrator、PostScript、CGM、Fig、PCL、HP-GL の Plotter)
は、その Plotter オブジェクトが破棄されるのを待ち、
そのときに描画されたすべてのページを出力する。
</p>
<p>現在の <code>libplot</code> では PostScript と CGM の Plotter
ではこの出力に遅延がある。
PCL と HP-GL の Plotter では、たとえば <code>closepl</code>
が呼ばれるなどして各ページが作られるたびに出力する。
PNG、PNM、GIF、SVG、Illustrator、Fig の各 Plotter でも同様だが、
最初のページだけしか出力されない。PNG、PNM、GIF、SVG、Illustrator、Fig
では複数ページの画像はサポートされていないからである。
</p>
<p>画像が描かれる「描画領域」(`viewport') は、その Plotter
デバイスの出力形式における正方形、あるいは長方形の領域である。
どの Plotter デバイスでも、各デバイスが持っている座標系ではなく、
プログラム側で座標系を自由に設定でき、デバイスの種類とは関係なく、
設定したその座標系上で描画操作を行うことができる。各
Plotter デバイスは、
内部でその指定された座標系からデバイス上の座標系にアフィン変換を行う。
</p>
<p><code>openpl</code> で Plotter デバイスをオープンしたあと、すぐ <code>space</code>
を呼んで、Plotter、つまりこの出力形式変換オブジェクトを初期化する。
<code>space</code> は、プログラム側座標系の中に長方形の領域 (「ウィンドウ」)を想定し、
そのデバイスの座標系とのマッピングをつくる。それにより設定されるアフィン変換は、
<code>space</code> または <code>fconcat</code>
を呼べばいつでも再設定あるいは設定の変更ができる。<code>fconcat</code>
は現在設定されているアフィン変換と、
この関数で指定するアフィン変換の合成変換を設定する。
こういった変換の合成は、たとえば PostScript などでよく使われている機能である。
</p>
<p>それぞれの Plotter デバイスは描画状態 (グラフィクス・コンテキスト)
を PostScript 風のスタックで管理できる。
描画状態には現在設定されている、
指定座標系からデバイス上の座標系へのアフィン変換が含まれる。
またその時点での描画カーソルの位置、線種、線の太さ、
ペンや塗りつぶしの色、文字列のフォントなども含まれる。
もしまた描き終わっていないパス (つなげられた線) があれば、
その状態 (描き終わってないこと) も含まれる。パスは一部分
(線分や円弧、ベジェ曲線) を一つ一つ順番につなげて作られるからである。
</p>
<p><strong>注意</strong>:
PostScript でも現在の描画状態は <code>savestate</code> を呼ぶことでスタックに積まれ、
<code>restorestate</code> でスタックから取りだされる (ポップされる)。
しかし <code>libplot</code> と PostScript の描画モデルはかなり異なっている。
<code>libplot</code> では <code>savestate</code>
によって、状態を保存すると同時に新しく生成される描画状態はパスをなにも含まない。
したがって新しいパスはその中で新たに置かれ、描画される。
その後、前の描画コンテキストのパスは <code>restorestate</code>
が呼ばれたときに復元され、場合によってはそこからパスの構築が続けられる。
また <code>libplot</code> では、新たにパスを作り始めるときに `<code>newpath</code>'
を呼ぶ必要がないのも PostScript
と違う点である。単に新しくパスを構成する要素の描画をはじめればよいだけである。
少なくとも機能としては、パスの構築を終了するときには明示的に
<code>endpath</code> を呼ぶことで、描画領域に実際に描画が行われる。
しかし実際には <code>endpath</code> の呼び出しは省かれることもある。
構築中のパスがあるときに <code>restorestate</code> を呼ぶとその内部で <code>endpath</code>
が呼び出され、そのときの描画状態でのパスの構築は終了する。
</p>
<p>ベクトル形式の画像でのアニメーションは、
画像の各ページを複数のフレームに分けることで可能になる。
<code>erase</code> を呼ぶことで、現在のフレームの作成を終了し、
次のフレームをはじめることができる。リアルタイム描画を行う Plotter
デバイス (X、X Drawable、ReGIS、Tektronix、Metafile) では、
これによってグラフィクス・ディスプレイ上の画像が消去され、
次のフレームが描画できる状態になる。
一連のフレームを次々に表示することで、滑らかなアニメーションのように見える。
</p>
<p>ほとんどのリアルタイム描画のできない Plotter デバイス
(PNG、PNM、SVG、Illustrator、PostScript、CGM、Fig、PCL、HP-GL)
では、<code>erase</code>
で内部のバッファ上にあるすべての描画オブジェクトが削除される。
そのためリアルタイムでないほとんどの Plotter は、
複数フレームのページがあっても、最後のフレームだけしか表示しない。
</p>
<p>GIF Plotter もリアルタイム描画はできないが、他のと違ってアニメージョン疑似 GIF
のような複数画像からなる出力を、複数フレームのページから生成できる。
上述したように、GIF Plotter の生成する疑似 GIF では、
画像の最初のページだけのファイルしか生成できない。
しかしそのページに複数のフレームがあるときは、
<code>erase</code> を呼べば、デフォルトではそこが二つのフレームの切れ目になる。
</p>
<hr size="6">
<a name="C-Programming"></a>
<a name="SEC47"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC46" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC48" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 9.2 <code>libplot</code> を使った C プログラミング </h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC48">9.2.1 C の API</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   C の API (application programming interface)
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC49">9.2.2 古い形式の C 言語の API</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC50">9.2.3 C 言語でのコンパイルとリンク</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC51">9.2.4 C 言語でのサンプル描画</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC52">9.2.5 単純パスと複合パス</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC53">9.2.6 実際のページの描画</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC54">9.2.7 アニメーション GIF</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               C 言語でのアニメーション GIF
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC55">9.2.8 C 言語での X Window システムでのアニメーション</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                X Window でのアニメーション
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC56">9.2.9 一歩進んだ X Window システム・プログラミング</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
</table>

<hr size="6">
<a name="The-C-API"></a>
<a name="SEC48"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC47" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC49" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC47" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.2.1 C の API </h3>

<p><code>libplot</code> にはいくつかの言語バインディングがある。
どのバインディングが使われていても、<code>libplot</code> の概念
(Plotter デバイスと、どのデバイスでも使える共通の描画操作) は同じである。
しかし Plotter の実際の操作の仕方 (生成、描画対象としての選択、破棄)
は言語によって異なる。この節では C バインディングについて説明する。
以前の古い形式の C バインディングについては <a href="#SEC49">古い形式の C 言語の API</a>
を参照のこと。
</p>
<p>C バインディングでは、Plotter オブジェクトは抽象化されたデータ型
<code>plPlotter</code> として実装されており、その型へのポインタを使って操作される。
様々な描画操作を行う関数には、第一引数として <code>plPlotter</code>
型のインスタンスへのポインタを渡す。関数 <code>pl_newpl_r</code> と
<code>pl_deletepl_r</code> がそれぞれ <code>plPlotter</code>
型オブジェクトのコンストラクタとデストラクタである。<code>pl_newpl_r</code>
関数には、最後の引数に <code>plPlotterParams</code> オブジェクトへのポインタを渡す。
これで Plotter のさまざまなパラメータを指定する。<code>pl_newpl_r</code>
は <code>plPlotter</code> 型オブジェクトへのポインタを返す。
</p>
<p>Plotter に対して、したい操作をすべて行ったら、<code>pl_deletepl_r</code> を呼ぶ。
一般に、リアルタイムでの描画を行わない Plotter (特に PostScript と CGM)
は、<code>pl_deletepl_r</code> が呼ばれたときにはじめて、実際の出力を行う。
</p>
<p>以下に、C バインディングでの Plotter を操作する関数を挙げる。
</p>
<dl compact="compact">
<dt> plPlotter * <tt>pl_newpl_r</tt> (const char *<var>type</var>, FILE *<var>infile</var>, FILE *<var>outfile</var>, FILE *<var>errfile</var>, plPlotterParams *<var>params</var>);</dt>
<dd><p>出力形式が <var>type</var> の Plotter オブジェクトを生成する。<var>type</var> は
&quot;X&quot;、&quot;Xdrawable&quot;、&quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot;、&quot;svg&quot;、&quot;ai&quot;、&quot;ps&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;、&quot;regis&quot;、&quot;tek&quot;、&quot;meta&quot;
のいずれかである。Plotter への入出力には、
標準入力を <var>infile</var> に、標準出力を <var>outfile</var> に、標準エラー出力を
<var>errfile</var> にそれぞれ指定できるが、どれか、または３つともを NULL
にしてもよい。
現時点での実装では Plotter は出力するのみで入力を受け付けないので、
<var>infile</var> は指定しても無視される。また X と X Drawable の Plotter
は標準出力ではなく X Window システムの画面に表示を行うので、<var>type</var>
が &quot;X&quot; または &quot;Xdrawable&quot; のときは <var>outfile</var> が無視される。<var>errfile</var>
が NULL でなければ、なにかエラーが発生したときにはそこに出力される。
</p>
<p>Plotter のパラメータはすべて <code>plPlotterParams</code>
から <var>params</var> が指す先のオブジェクトにコピーされる。Plotter
のオブジェクトが生成できなかったときには NULL が返される。
</p>
</dd>
<dt> int <tt>pl_deletepl_r</tt> (plPlotter *<var>plotter</var>);</dt>
<dd><p>引数で渡された Plotter
オブジェクトを破棄する。破棄に失敗したときは負の値を返す。
</p></dd>
</dl>

<p>また、<code>plPlotter</code> とは別に <code>plPlotterParams</code> という型を用意している。
関数 <code>pl_newplparams</code>、<code>pl_deleteplparams</code>、<code>pl_copyplparams</code>
がそれぞれ、<code>plPlotterParams</code>
のコンストラクタ、デストラクタ、複製関数である。関数 <code>pl_setplparam</code>
は、<code>plPlotterParams</code> オブジェクト中の Plotter
のパラメータを一つだけ設定する。
</p>
<dl compact="compact">
<dt> plPlotterParams * <tt>pl_newplparams</tt> ();</dt>
<dt> int <tt>pl_deleteplparams</tt> (plPlotterParams *<var>plotter_params</var>);</dt>
<dt> plPlotterParams * <tt>pl_copyplparams</tt> (const plPlotterParams *<var>params</var>);</dt>
<dt> int <tt>pl_setplparam</tt> (plPlotterParams *<var>params</var>, const char *<var>parameter</var>, void *<var>value</var>);</dt>
<dd><p><var>params</var> が指すオブジェクト中のパラメータ <var>parameter</var> の値を <var>value</var>
に設定する。ほとんどのパラメータでは <var>value</var> は <code>char *</code>、
つまり文字列である。<var>value</var> に NULL
を指定すると、そのパラメータは未設定の状態になる。
</p>
<p>指定できるパラメータとその意味のリストは <a href="#SEC66">Plotter パラメータ</a> を参照のこと。
無効なパラメータを指定したときは、単に無視される。
</p></dd>
</dl>

<p>基本的に Plotter の操作は Plotter の種類にはよらないようなってはいるが、
種類によってはその生成時になんらかの特定の動作をさせたいことがあるかもしれない。
それを可能にするために <code>plPlotterParams</code> をわざわざ独立した型にしている。
<code>plPlotterParams</code> オブジェクト中のパラメータが設定されている時、
生成される Plotter はその値を参照する。
文字列の値を取るパラメータについては、
それが設定されていないときは同名の環境変数が参照される。
環境変数が設定されていればそれを、
環境変数も設定されていないときはデフォルトの値を使う。
これにより実行時にも柔軟に設定を行うことができる。
アプリケーションの動作に致命的な影響を与えるパラメータ以外については、
環境変数で設定するようにしてもよい。
</p>
<p>C バインディングでは Plotter に対して行われる描画操作はそれぞれ、&quot;pl_&quot; で始まり
&quot;_r&quot; で終わる名前の関数を呼ぶことで行われる。たとえば Plotter に対して
<code>openpl</code> 操作を行う関数の名前は <code>pl_openpl_r</code>
であり、関数の最初に引数として操作対象の <code>plPlotter</code> へのポインタを渡す。
</p>
<hr size="6">
<a name="Older-C-APIs"></a>
<a name="SEC49"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC48" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC50" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC47" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.2.2 古い形式の C 言語の API </h3>

<p>現在の C 言語 API (application programming interface)
は古い API を改良したものである。この改良でスレッド・セーフになった。
現在の API の関数名の末尾に &quot;_r&quot; がついているのは、
改良版またはスレッド・セーフであること (revised または reentrant)
を示すためである。
</p>
<p>古い C 言語 API では、操作対象とする Plotter
は、操作を行う関数の引数として渡すようにはなっていなかった。代わりにまず
Plotter を「選択」しておいてから操作関数を呼ぶ必要があった。
たとえば、Plotter に新しくページをはじめる操作を行う関数 <code>pl_openpl</code>
は、現在選択されている Plotter に対してその操作を行う。
</p>
<p>この古い API の使用は推奨されないが、現在でもサポートはされている。
これには、以下の４つの関数がある。
</p>
<dl compact="compact">
<dt> int <tt>pl_newpl</tt> (const char *<var>type</var>, FILE *<var>infile</var>, FILE *<var>outfile</var>, FILE *<var>errfile</var>);</dt>
<dd><p>出力形式が <var>type</var> の Plotter オブジェクトを生成する。<var>type</var> は
&quot;X&quot;、&quot;Xdrawable&quot;、&quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot;、&quot;svg&quot;、&quot;ai&quot;、&quot;ps&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;、&quot;regis&quot;、&quot;tek&quot;、&quot;meta&quot;
のいずれかである。
Plotter への入出力には、
標準入力を <var>infile</var> に、標準出力を <var>outfile</var> に、標準エラー出力を
<var>errfile</var> にそれぞれ指定できる。
返り値は、生成された Plotter オブジェクトを表す非負の整数で、
これをハンドルと呼ぶ。Plotter を生成できなかったときは負の値を返す。
</p>
</dd>
<dt> int <tt>pl_selectpl</tt> (int <var>handle</var>);</dt>
<dd><p>は引数で示される Plotter を選択し、操作できる状態にする。
この関数で選択されている一つの Plotter だけが操作対象になる。
選択に失敗したときは負の値を返す。選択できたときは、
それまでに選択されていた Plotter のハンドルを返す。
</p>
<p>プログラムの実行開始時に、標準出力に metafile 形式の画像を書き出す Plotter
オブジェクト (ハンドル `0')
が一つだけ生成され、選択された状態になるようになっている。
</p>
</dd>
<dt> int <tt>pl_deletepl</tt> (int <var>handle</var>);</dt>
<dd><p>ハンドルで指定された Plotter を破棄する。破棄する Plotter
は選択されていてはならない。破棄に失敗したときは負の値を返す。
</p>
</dd>
<dt> int <tt>pl_parampl</tt> (const char *<var>parameter</var>, void *<var>value</var>);</dt>
<dd><p>Plotter のパラメータ <var>parameter</var> の値を <var>value</var> に設定する。
それ以降に生成されるどの Plotter も、
設定されたパラメータの値を Plotter オブジェクト内にコピーする。
</p></dd>
</dl>


<p>この古い API では、<code>pl_selectpl</code> による Plotter の選択と <code>pl_parampl</code>
によるパラメータ値の設定はどちらも「大域的」な操作であり、
したがってスレッド・セーフではない。
</p>
<p>もっと古い C 言語 API では、<code>libplot</code> の関数名から &quot;pl_&quot;
を取った名前になっていた。&quot;pl_&quot; は、以前の GNU 版でない <code>libplot</code>
と GNU 版のものを区別するために付けられたものである。
GNU 版でもそうでないものでも、古い <code>libplot</code>
を使ったプログラムをコンパイルする必要があるときは、ヘッダファイル
<code>plotcompat.h</code> を使うとよい。このヘッダファイル中では <code>openpl</code> を
<code>pl_openpl</code> で、と言った具合に古い関数を新しい関数で定義し直している。
<a href="#SEC50">C 言語でのコンパイルとリンク</a> 参照。
</p>
<hr size="6">
<a name="C-Compiling-and-Linking"></a>
<a name="SEC50"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC49" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC51" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC47" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.2.3 C 言語でのコンパイルとリンク </h3>

<p>C 言語で <code>libplot</code> の C API (C application programming
interface) を使ったグラフィクス・アプリケーションを書く場合、
そのソースファイルには以下の行が必要になる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;stdio.h&gt;
#include &lt;plot.h&gt;
</pre></td></tr></table>

<p>ヘッダファイル <code>plot.h</code> は <code>libplot</code> の配布パッケージに含まれている。
これを、C コンパイラが見つけられる場所に置いておく。このファイルには
<code>libplot</code> の C API
の各関数のプロトタイプ宣言やその他の定義などが入っている。
</p>
<p><code>libplot</code> の現在のバージョンでは、関数名はすべて &quot;pl_&quot;
がその先頭に、&quot;_r&quot; が末尾についている。たとえば
Plotter に <code>openpl</code> 操作を行う関数は
<code>pl_openpl_r</code> という名前で、その最初の引数が操作対象の Plotter である。
これらはすべて <tt>`plot.h'</tt> で宣言されている。
</p>
<p>GNU <code>libplot</code> の 3.0 より前のバージョンでは、違う方法で Plotter
に対して操作を行っていた。たとえば <code>pl_openpl</code>
関数は引数に Plotter を取らず、
それが呼ばれたときに「選択」されていた Plotter が操作対象であった。
この古い C API も <tt>`plot.h'</tt> でサポートされている。
その詳細は <a href="#SEC49">古い形式の C 言語の API</a> を参照のこと。
</p>
<p>GNU <code>libplot</code> のもっと古いバージョンと GNU 版より前のものでは &quot;pl_&quot;
もついていなかった。
もしそういった古い <code>libplot</code>
の関数を使っているプログラムをコンパイルする必要があるときは、
ヘッダファイル <code>plotcompat.h</code> を使うとよい。
このファイル中ではたとえば、<code>openpl</code> という関数呼び出しが <code>libplot</code>
の <code>pl_openpl</code> になるように再定義されている。
</p>
<p>作成したプログラムを <code>libplot</code>
とリンクするには、コンパイル時のコマンドラインで <samp>`-l'</samp>
オプションをつければよい。たとえば以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">-lplot -lXaw -lXmu -lXt -lXext -lX11 -lpng -lz -lm
</pre></td></tr></table>

<p>最近の X Windows システムでは以下のようになるだろう。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">-lplot -lXaw -lXmu -lXt -lSM -lICE -lXext -lX11 -lpng -lz -lm
</pre></td></tr></table>

<p>上の例では、PNG サポートを有効にしてコンパイルした <code>libplot</code>
を使うことを前提にしている。もしそうでないなら、<samp>`-lpng -lz'</samp>
オプションを指定しないようにする。
</p>
<p>(Athena ウィジェットの代わりに Motif ウィジェットを使うシステムでは
<samp>`-lplot -lXm -lXt -lXext -lX11 -lpng -lz -lm'</samp>、
<samp>`-lplot -lXm -lXt -lXext -lX11 -lpng -lz -lm -lc -lgen'</samp>、
<samp>`-lplot -lXm -lXt -lXext -lX11 -lpng -lz -lm -lc -lPW'</samp>
のいずれかになるだろう。また最近の X Window システムではオプションに
<samp>`-lSM -lICE'</samp>
を追加する必要があるかもしれない。さらに Motif の最近のバージョンでは
<samp>`-lXp'</samp> や <samp>`-lXpm'</samp> も必要かもしれない。)
</p>
<p>場合によっては  <code>libplot</code>
やその他のライブラリのインストールされているディレクトリを、
コマンドラインで指定する必要がある。たとえば X Window
のライブラリを指定するオプション
<samp>`-lXaw -lXmu -lXt -lSM -lICE -lXext -lX11'</samp>
を使うには <samp>`-L/usr/X11/lib'</samp>
といったオプションを同時に指定せねばならないかもしれない。
</p>
<p>多くの場合 <code>libplot</code> は DLL (dynamically linked library、または shared
library、共有ライブラリ)
としてインストールされる。この場合、
リンクはコンパイル時には行われず、プログラムの実行時に行われることになる。
その際ライブラリのある場所は環境変数 <code>LD_LIBRARY_PATH</code>
によって示される。<code>libplot</code> を使うプログラムが正常に実行されるためには、
<code>libplot</code> ライブラリのあるディレクトリを <code>LD_LIBRARY_PATH</code>
に設定しておかねばならない。
</p>
<hr size="6">
<a name="Sample-C-Drawings"></a>
<a name="SEC51"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC50" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC52" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC47" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.2.4 C 言語でのサンプル描画 </h3>

<p>以下に、<code>libplot</code> の機能を使ってベクトル形式の画像を描画する
C 言語のプログラムの例を示す。このプログラムが描くのは、
美しく入り組んだ Bill Gosper の
C 曲線 (Item #135 in <cite>HAKMEM</cite>, MIT Artificial Intelligence
Laboratory Memo #239, 1972) である。
数値定数 <code>MAXORDER</code> の値 (ここでは 12 に固定) を大きくしていくと、
無数の周天円的な八角形状の形状をなす線分からなる C の字
形の曲線を描いていく。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;stdio.h&gt;
#include &lt;plot.h&gt;
#define MAXORDER 12

void draw_c_curve (plPlotter *plotter, double dx, double dy, int order)
{
  if (order &gt;= MAXORDER)
    /* continue path along (dx, dy) */
    pl_fcontrel_r (plotter, dx, dy);
  else
    {
      draw_c_curve (plotter,
                    0.5 * (dx - dy), 0.5 * (dx + dy), order + 1);
      draw_c_curve (plotter,
                    0.5 * (dx + dy), 0.5 * (dy - dx), order + 1);      
    }
}

int main ()
{
  plPlotter *plotter;
  plPlotterParams *plotter_params;

  /* set a Plotter parameter */
  plotter_params = pl_newplparams ();
  pl_setplparam (plotter_params, &quot;PAGESIZE&quot;, &quot;letter&quot;);  

  /* create a Postscript Plotter that writes to standard output */
  if ((plotter = pl_newpl_r (&quot;ps&quot;, stdin, stdout, stderr,
                             plotter_params)) == NULL)
    {
      fprintf (stderr, &quot;Couldn't create Plotter\n&quot;);
      return 1;
    }

  if (pl_openpl_r (plotter) &lt; 0)      /* open Plotter */
    {
      fprintf (stderr, &quot;Couldn't open Plotter\n&quot;);
      return 1;
    }
  pl_fspace_r (plotter, 0.0, 0.0, 1000.0, 1000.0); /* set coor system */
  pl_flinewidth_r (plotter, 0.25);    /* set line thickness */
  pl_pencolorname_r (plotter, &quot;red&quot;); /* use red pen */
  pl_erase_r (plotter);               /* erase graphics display */
  pl_fmove_r (plotter, 600.0, 300.0); /* position the graphics cursor */
  draw_c_curve (plotter, 0.0, 400.0, 0);
  if (pl_closepl_r (plotter) &lt; 0)     /* close Plotter */
    {
      fprintf (stderr, &quot;Couldn't close Plotter\n&quot;);
      return 1;
    }

  if (pl_deletepl_r (plotter) &lt; 0)    /* delete Plotter */
    {
      fprintf (stderr, &quot;Couldn't delete Plotter\n&quot;);
      return 1;
    }
  return 0;
}
</pre></td></tr></table>
<p>見て分かる通り、プログラムの動作は
Plotter のパラメータを保持する <code>plPlotterParams</code> を生成し、<code>PAGESIZE</code>
パラメータを設定することから始まる。それから PostScript の Plotter
を生成するための <code>pl_newpl_r</code> が呼ばれる。
</p>
<p>この Plotter オブジェクトではページのサイズは
US letter だが、たとえば &quot;a4&quot; などのほかの標準規格のサイズにしてもよい。それには
<code>pl_setplparam</code> の呼び出しを変えればよい。<code>PAGESIZE</code>
パラメータなどのパラメータもこの関数で設定できる。設定できるパラメータのリストは
<a href="#SEC66">Plotter パラメータ</a> を参照のこと。
</p>
<p>Plotter オブジェクトを生成したら、それをオープンしてから、
再帰呼び出しを行う関数で &quot;C&quot; 曲線を描いている。
曲線の描画は、<code>pl_fmove_r</code> を呼んでカーソルの位置を調整してから、
<code>draw_c_curve</code> によって行われる。この関数は繰り返し
<code>pl_fcontrel_r</code> を呼び出す。<code>pl_fcontrel_r</code>
はそれまで描かれてきたパスに線分を追加するが、その線分の終端は、
その直前のカーソル位置に対する相対座標で指定されている。
&quot;C&quot; 曲線が描かれたら、Plotter をクローズする。<code>pl_deletepl_r</code>
が呼ばれると、内部で自動的に <code>pl_endpath_r</code>
が呼ばれパスの描画が完結させられる。
それから <code>pl_deletepl_r</code> を呼ぶと PostScript
形式の画像ファイルを標準出力に書き出し、この Plotter オブジェクトは破棄される。
</p>
<p>&quot;ps&quot; の代わりに
&quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot;、&quot;svg&quot;、&quot;ai&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;、&quot;regis&quot;、&quot;tek&quot;、&quot;meta&quot;
のいずれかを <code>pl_newpl_r</code> の最初の引数として指定すると、
その指定された形式で Plotter は画像を標準出力に書き出す。<code>PAGESIZE</code>
パラメータは
&quot;svg&quot;、&quot;ai&quot;、&quot;cgm&quot;、&quot;fig&quot;、&quot;pcl&quot;、&quot;hpgl&quot;
で有効であり、他の形式が指定されているときには無視される。
出力された画像の形式の変換を繰り返したくない場合には、&quot;meta&quot;
を指定しておくと良い。この形式のデータは、<code>plot</code>
コマンドの標準入力に渡して、他の形式に変換したり X Window
のディスプレイに表示できたりする。<a href="#SEC15"><code>plot</code> コマンド</a> 参照。
</p>
<p><code>pl_newpl_r</code> の最初の引数に &quot;X&quot; を指定すると、X window
のウィンドウが一つ開かれ、そこに曲線が描かれる。X window
システムのどのディスプレイにウィンドウが出てくるかは、<code>DISPLAY</code>
パラメータで指定される。それが設定されていないときは環境変数 <code>DISPLAY</code>
で指定される。表示されるウィンドウのサイズは <code>BITMAPSIZE</code>
パラメータで指定される。それが設定されていないときは環境変数 <code>BITMAPSIZE</code>
で指定される。デフォルトのサイズは &quot;570x570&quot; である。
<code>BITMAPSIZE</code> は &quot;png&quot;、&quot;pnm&quot;、&quot;gif&quot; のときも同様に指定できる。
</p>
<p>Plotter の出力形式には &quot;X drawable&quot;も指定できるが、これを理解するには若干の
X Window システム・プログラミングの知識が必要である。
少なくとも一つの
X drawable (ウィンドウまたはビットマップ画像) を生成し、
<code>pl_newpl_r</code> の前に <code>pl_setparampl</code> を呼んでパラメータ
<code>XDRAWABLE_DRAWABLE1</code> または <code>XDRAWABLE_DRAWABLE2</code>
を設定し、描画をそのどちらにするかを指定する。X Drawable の Plotter
に指定できるパラメータについては、<a href="#SEC66">Plotter パラメータ</a> を参照のこと。
</p>
<p>以下の C プログラムも <code>libplot</code>
の機能を使ってベクトル形式の画像を生成する。この例では &quot;GNU libplot!&quot;
という文字列を楕円で囲んで、それを螺旋状に置いていくものである。
画像は標準出力に PostScript 形式で書き出される。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;stdio.h&gt;
#include &lt;plot.h&gt;
#include &lt;math.h&gt;
#define SIZE 100.0   /* nominal size of user coordinate frame */
#define EXPAND 2.2   /* expansion factor for elliptical box */

void draw_boxed_string (plPlotter *plotter, 
                        char *s, double size, double angle)
{
  double true_size, width;

  pl_ftextangle_r (plotter, angle);      /* set text angle (degrees) */
  true_size = pl_ffontsize_r (plotter, size);  /* set font size */
  width = pl_flabelwidth_r (plotter, s); /* compute width of string */
  pl_fellipserel_r (plotter, 0.0, 0.0, 
                    EXPAND * 0.5 * width, EXPAND * 0.5 * true_size,
                    angle);              /* draw surrounding ellipse */
  pl_alabel_r (plotter, 'c', 'c', s);    /* draw centered text string */
}

int main()
{
  plPlotter *plotter;
  plPlotterParams *plotter_params;
  int i;

  /* set a Plotter parameter */
  plotter_params = pl_newplparams ();
  pl_setplparam (plotter_params, &quot;PAGESIZE&quot;, &quot;letter&quot;);  

  /* create a Postscript Plotter that writes to standard output */
  if ((plotter = pl_newpl_r (&quot;ps&quot;, stdin, stdout, stderr,
                             plotter_params)) == NULL)
    {
      fprintf (stderr, &quot;Couldn't create Plotter\n&quot;);
      return 1;
    }

  if (pl_openpl_r (plotter) &lt; 0)      /* open Plotter */
    {
      fprintf (stderr, &quot;Couldn't open Plotter\n&quot;);
      return 1;
    }
  /* specify user coor system */
  pl_fspace_r (plotter, -(SIZE), -(SIZE), SIZE, SIZE);
  pl_pencolorname_r (plotter, &quot;blue&quot;);     /* use blue pen */
  pl_fillcolorname_r (plotter, &quot;white&quot;);   /* set white fill color */
  pl_filltype_r (plotter, 1);   /* fill ellipses with fill color */
  /* choose a Postscript font */
  pl_fontname_r (plotter, &quot;NewCenturySchlbk-Roman&quot;);
  
  for (i = 80; i &gt; 1; i--)      /* loop through angles */
    {
      double theta, radius;
      
      theta = 0.5 * (double)i;  /* theta is in radians */
      radius = SIZE / pow (theta, 0.35);  /* this yields a spiral */
      pl_fmove_r (plotter, radius * cos (theta), radius * sin (theta));
      draw_boxed_string (plotter, &quot;GNU libplot!&quot;, 0.04 * radius,
                         (180.0 * theta / M_PI) - 90.0);
    }

  if (pl_closepl_r (plotter) &lt; 0)        /* close Plotter */
    {
      fprintf (stderr, &quot;Couldn't close Plotter\n&quot;);
      return 1;
    }
  if (pl_deletepl_r (plotter) &lt; 0)       /* delete Plotter */
    {
      fprintf (stderr, &quot;Couldn't delete Plotter\n&quot;);
      return 1;
    }
  return 0;
}
</pre></td></tr></table>
<p>この例では文字列を描画に入れる方法を示している。
まず最初に、使うフォントを指定する。フォント
は <code>pl_fontname_r</code>、<code>pl_fontsize_r</code>、<code>pl_textangle_r</code>
の３つが呼ばれて初めて指定できたことになる。数値を実数で指定したいときは
<code>pl_ffontname_r</code>、<code>pl_ffontsize_r</code>、<code>pl_ftextangle_r</code>
を呼ぶ。これらはどんな順序で呼んでもよい。
呼び出し側の利便を図るため、
これらの関数は設定しようとするフォントのサイズを返すようになっている。
その値は <code>pl_fontsize_r</code> や <code>pl_ffontsize_r</code>
の最後の呼び出しで指定された値と若干異なっていることがある。多くの Plotter
では使えるフォントに制約があるためである。
上の例では文字列のフォントは &quot;NewCenturySchlbk-Roman&quot; で、
これは PostScript の Plotter で使えるフォントである。
<a href="#SEC68">利用できるフォント</a> 参照。
</p>
<p>上の例で、<code>pl_newpl_r</code> の引数の &quot;ps&quot; を &quot;X&quot; に置き換えると、
PostScript の Plotter の代わりに X の Plotter が生成され、
文字列の渦巻きは X Window 画面上に開かれるウィンドウに描かれる。
描画する X のディスプレイで &quot;NewCenturySchlbk-Roman&quot;
フォントが使えないときは、
広く使われているスケーラブルな &quot;charter-medium-r-normal&quot; などのコア
X フォントや、
場合によっては昔からある画面出力用の固定幅フォントで置き換えられる。
このフォント名の意味するところについては <a href="#SEC70">X Window フォント</a> を参照のこと。
指定されたフォントを X の Plotter から利用できない場合、
最初にまずデフォルトのスケーラブル・フォント (&quot;Helvetica&quot;。X Window
でのフォント名は &quot;helvetica-medium-r-normal&quot;)
を使おうとする。それもダメだったときにはデフォルトの Hershey ベクトルフォント
(&quot;HersheySerif&quot;) を試す。Hershey
フォントは線分の集合からできていて、どの種類の Plotter
でも組み込みの Hershey フォントが使えるようになっている。
</p>
<p>古い X Window システム (X11R6 より前) のディスプレイでは、
スケーラブル・フォントを利用するときに長い実行時間を要することがある。
そういった環境では、上の例を実行するとき、
描画の前にまずフォントの準備を行うため、それに時間がかかるかもしれない。
この例では各文字列がそれぞれ違う角度で傾いて表示されているからである。
X11R6 では、フォント全体を処理せず、各文字をそれぞれ独立に描画できる。
その機能が使える場合には X の Plotter の内部で自動的にそれを利用し、
実行時間の短縮を図っている。
</p>
<hr size="6">
<a name="Paths-and-Subpaths"></a>
<a name="SEC52"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC51" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC53" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC47" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.2.5 単純パスと複合パス </h3>

<p><code>libplot</code> で実装している描画オブジェクトのうち、
もっとも洗練されたものが「<em>パス</em>」である、と言えるだろう。
ここではパスの構成法の詳細に付いて説明する。
他の３種類のオブジェクト (文字列、記号、点 (つまりピクセル) については後述)。
</p>
<p>PostScript の Plotter では単純パスと複合パスの両方が使える。
単純パスは、線分、円弧、楕円弧、二次ベジェ曲線、三次ベジェ曲線から成る。
複合パスは一つ、または複数の単純パスが<em>ネスト</em>しているものである。
複合パスを構成している単純パス同士は交差してはならない。
つまり <em>PostScript よりも制限がきびしい</em>。
</p>
<p><code>libplot</code> の描画方法は PostScript に比べると大きく違っていて、
ユーザーフレンドリーである。<code>libplot</code> の各種の操作でパスを描くにあたって、
その前に特になにかの関数を呼んでおく必要はないが、
描くパスの属性を指定する関数を呼んでいてもよい。
指定できる属性は、ペンの色、線種、線の太さ、線の端の形、線のつなぎ目の形、
角の尖り具合、である。塗りつぶしが指定されたパスに対しては、
塗りつぶしの色と塗りつぶし方も指定できる。
これらの属性は「モード」としての性質を持っていて、
つまり明示的に切り替えられない限りは、次のパスも同じ属性になる。
</p>
<p>原理的には <code>endpath</code> 操作を行うことで、構築中のパスを完成させ、
描画領域にそのパスを描くことができる。しかし、
パスの属性を変更する操作、カーソル位置を移動する <code>move</code>
操作が行われるとき、または他の描画オブジェクトが構築、
描画されるに先立って、自動的に <code>endpath</code> 操作が行われる。
また <code>closepl</code> 操作でページが終了させられるときも自動的に <code>endpath</code> 
が呼ばれる。したがって通常は <code>endpath</code> を明示的に呼ぶ必要はない。
PostScript
ではパスを描画し、あるいは塗りつぶすためのコマンドを明示的に呼ぶ必要があり、
<code>libplot</code> とは異なっている。
</p>
<p>複合パスの構築法でも <code>libplot</code> と PostScript は異なっている。<code>libplot</code>
では複合パスを構成する各単純パスを完結させるためには <code>endsubpath</code>
操作を呼び、各単純パスがすべて完成してから、
全体を複合パスとして描画するために <code>endpath</code> 操作を呼び出す。
<code>endsubpath</code> を呼んだ後は、次の単純パスの開始点に <code>move</code>
操作でカーソルを移動することができる。<code>endsubpath</code>
の直後に <code>move</code> を呼んだ場合は、<code>endpath</code>
が自動的に実行されることはない。
</p>
<p>以下に示す簡単な例では、PostScript の Plotter を生成して PostScript
形式の出力を行う。このプログラムでは、17 の単純パスからなる複合パスを描く。
最初の単純パスは大きな長方形である。この中に 7 つの円からなる同心円を描き、
それとは別にもう一つ 7 つの円からなる同心円を描く。
それぞれの同心円の中に、二つのつながった線分からなる単純パスを描く。
複合パスは緑色で描かれ、塗りつぶされる。塗りつぶしの色は明るい青である。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;stdio.h&gt;
#include &lt;plot.h&gt;

int main ()
{
  int i, j;
  plPlotter *plotter;
  plPlotterParams *plotter_params;

  /* set a Plotter parameter */
  plotter_params = pl_newplparams ();
  pl_setplparam (plotter_params, &quot;PAGESIZE&quot;, &quot;letter&quot;);
  /* create a Postscript Plotter that writes to standard output */
  plotter = pl_newpl_r (&quot;ps&quot;, stdin, stdout, stderr, plotter_params);
  /* open Plotter, i.e. begin a page of graphics */
  pl_openpl_r (plotter);

  pl_fspace_r (plotter, 0.0, 0.0, 1000.0, 1000.0); /* set coor system */
  pl_flinewidth_r (plotter, 5.0);  /* set line thickness */
  pl_pencolorname_r (plotter, &quot;green&quot;);
  pl_fillcolorname_r (plotter, &quot;light blue&quot;);
  pl_filltype_r (plotter, 1);      /* do filling, full strength */
  pl_erase_r (plotter);            /* erase graphics display */

  /* draw a compound path consisting of 17 simple paths */

  /* draw the first simple path: a large box */
  pl_orientation_r (plotter, 1);
  pl_fbox_r (plotter, 50.0, 50.0, 950.0, 950.0);
  pl_endsubpath_r (plotter);
  for (i = 0; i &lt; 2; i++)
    /* draw 8 simple paths that are nested inside the box */
    {
      /* first, draw 7 simple paths: nested circles */
      for (j = 9; j &gt;= 3; j--)
        {
          pl_orientation_r (plotter, j % 2 ? -1 : 1);
          pl_fcircle_r (plotter, 250.0 + 500 * i, 500.0, j * 20.0);
          pl_endsubpath_r (plotter);
        }
      /* draw an open simple path comprising two line segments */
      pl_fmove_r (plotter, 225.0 + 500 * i, 475.0);
      pl_fcont_r (plotter, 250.0 + 500 * i, 525.0);
      pl_fcont_r (plotter, 275.0 + 500 * i, 475.0);
      pl_endsubpath_r (plotter);  
    }
  /* formally end the compound path (not actually necessary) */
  pl_endpath_r (plotter);

  /* close Plotter, i.e. end page of graphics */
  pl_closepl_r (plotter);
  /* delete Plotter */
  if (pl_deletepl_r (plotter) &lt; 0)
    {
      fprintf (stderr, &quot;Couldn't delete Plotter\n&quot;);
      return 1;
    }
  return 0;
}
</pre></td></tr></table>
<p>見て分かるように、このプログラムを実行すると、
同心円の間の塗りつぶしが交互に行われ、
単純にべったりと塗りつぶすようにはならないようになっている。
これは<code>libplot</code> のデフォルトの塗りつぶし規則が &quot;even-odd&quot;
(偶奇塗りつぶし則)
になっているからである。複合パスを構成する単純パスが包含関係 (ネスト)
にある場合、どの部分が偶数番目で、どの部分が奇数番目かは簡便な規則で決められる。
<code>libplot</code> では後者 (奇数番目) の領域が塗りつぶされる。
</p>
<p>上のプログラムでは向きに関する <code>orientation</code> 操作が何度も行われる。
`orientation' 属性はモード的な性質があり (1 は反時計回り、-1
は時計回りを意味する)、描かれる長方形、円、楕円に対して適用される。
塗りつぶし規則が &quot;even-odd&quot; のときは、この属性は意味を持たない。
しかし <code>fillmod</code> 操作を最初に呼ぶときに複合パスの塗りつぶし規則を
&quot;nonzero-winding&quot; に設定すると、
同心円の間が交互に塗りつぶされることは
&quot;even-odd&quot; 設定のときと同様だが、
具体的にどこが塗りつぶされるかは
<code>orientation</code> の設定によって変わる。
</p>
<p>上の説明がいったい何を言っているのかわからないときは、PostScript
プログラミングのいい入門書か、`winding number' (巻き数)
という言葉を調べるとよい。
</p>
<hr size="6">
<a name="Drawing-on-a-Page"></a>
<a name="SEC53"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC52" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC54" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC47" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.2.6 実際のページの描画 </h3>

<p><code>libplot</code> では通常、描画領域 (`viewport') に対して描画を行うが、
物理的な用紙のページ全体に対しても描画を行うことができる。
</p>
<p>Illustrator、PostScript、Fig、PCL の各 Plotter のデフォルトの
viewport は、ページの中央に置かれた正方形の領域である。
デフォルトの viewport の大きさは <code>PAGESIZE</code> パラメータによる。
<code>PAGESIZE</code> は &quot;letter&quot; や &quot;a4&quot; などであるが、詳細については
<a href="#SEC74">ページと描画領域のサイズ</a> を参照のこと。
たとえば用紙サイズがレターサイズ、つまり幅 8.5in で高さ 11in
のときは、viewport は一辺が 8in の正方形である。
</p>
<p>しかし viewport のサイズや位置は他の値も指定できる。
ページ全体を指定することもできる。これは <code>PAGESIZE</code> を、例えば
&quot;letter,xsize=8.5in,ysize=11in,xorigin=0in,yorigin=0in&quot;
と指定することでできる。&quot;xorigin&quot; と &quot;yorigin&quot; は viewport
の左下隅の座標を用紙の左下隅からの相対値として指定する。
</p>
<p>viewport をこのように指定すると、原理的には用紙全体に描画できることになる。
この場合プログラム側で指定する座標を、そのまま用紙の左下隅を (0,0)
とする座標にして、座標軸のスケールが実際のインチあるいは cm
単位にすると便利である。そのためには Plotter オブジェクトに対して
適切な引数で <code>space</code> 操作を行う。以下にその例を示す。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;stdio.h&gt; 
#include &lt;plot.h&gt;
     
int main()
{
  plPlotter *plotter;
  plPlotterParams *plotter_params;
     
  /* set page size parameter, including viewport size and location */
  plotter_params = pl_newplparams ();
  pl_setplparam (plotter_params, &quot;PAGESIZE&quot;, 
                 &quot;letter,xsize=8.5in,ysize=11in,xorigin=0in,yorigin=0in&quot;);
     
  /* create a Postscript Plotter with the specified parameter */
  plotter = pl_newpl_r (&quot;ps&quot;, stdin, stdout, stderr, plotter_params);
     
  pl_openpl_r (plotter);                /* begin page of graphics */
  pl_fspace_r (plotter,
               0.0, 0.0, 8.5, 11.0);   /* set user coor system */
     
  pl_fontname_r (plotter, &quot;Times-Bold&quot;);
  pl_ffontsize_r (plotter, 0.5);        /* font size = 0.5in = 36pt */

  pl_fmove_r (plotter, 1.0, 10.0);
  pl_alabel_r (plotter, 'l', 'x', &quot;One inch below the top&quot;);
  pl_fline_r (plotter, 1.0, 10.0, 7.5, 10.0);

  pl_fmove_r (plotter, 7.5, 1.0);
  pl_alabel_r (plotter, 'r', 'x', &quot;One inch above the bottom&quot;);
  pl_fline_r (plotter, 1.0, 1.0, 7.5, 1.0);

  pl_closepl_r (plotter);               /* end page of graphics */
  pl_deletepl_r (plotter);              /* delete Plotter */
  return 0;
}
</pre></td></tr></table>

<p>このプログラムでは、下線のある文字列を二つ描く。
最初の文字列は座標 (1.0, 10.0) に、つまり用紙の上端から 1
インチ下に左揃えで描く。
二つ目は座標 (7.5, 1.0) に、つまり用紙の下端の 1 インチ上に右揃えで描く。
どちらの場合も <code>pl_alabel_r</code> の <tt>'x'</tt> 引数で縦方向の位置を指定する。
この例では文字列のベースライン (文字の上端、下端ではなく)
をその時点での縦座標の位置にすることを指示している。
</p>
<p>用紙の方向はポートレート (縦長) がデフォルトであることは前述である。
ランドスケープ (横長) での描画は少し複雑である。このためには、<code>ROTATION</code>
パラメータを設定して viewport を用紙上で回転する必要がある。
<code>ROTATION</code> のデフォルト値は &quot;0&quot; (または &quot;no&quot;) だが、
他にどんな角度を指定してもよい。用紙を横向きにするためにはこの値を &quot;90&quot;
にする (過去の経緯から &quot;yes&quot; にしても &quot;90&quot; にしたのと同じことになる)。
上のプログラムを修正して用紙を横置きにするプログラムを以下に示す。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;stdio.h&gt; 
#include &lt;plot.h&gt;
     
int main()
{
  plPlotter *plotter;
  plPlotterParams *plotter_params;
     
  /* set Plotter parameters */
  plotter_params = pl_newplparams ();
  pl_setplparam (plotter_params, &quot;PAGESIZE&quot;, 
                 &quot;letter,xsize=8.5in,ysize=11in,xorigin=0in,yorigin=0in&quot;);
  pl_setplparam (plotter_params, &quot;ROTATION&quot;, &quot;90&quot;);
     
  /* create a Postscript Plotter with the specified parameters */
  plotter = pl_newpl_r (&quot;ps&quot;, stdin, stdout, stderr, plotter_params);
     
  pl_openpl_r (plotter);                /* begin page of graphics */
  pl_fspace_r (plotter,
               0.0, 0.0, 11.0, 8.5);   /* set user coor system */
     
  pl_fontname_r (plotter, &quot;Times-Bold&quot;);
  pl_ffontsize_r (plotter, 0.5);        /* font size = 0.5in = 36pt */

  pl_fmove_r (plotter, 1.0, 7.5);
  pl_alabel_r (plotter, 'l', 'x', &quot;One inch below the top&quot;);
  pl_fline_r (plotter, 1.0, 7.5, 10.0, 7.5);

  pl_fmove_r (plotter, 10.0, 1.0);
  pl_alabel_r (plotter, 'r', 'x', &quot;One inch above the bottom&quot;);
  pl_fline_r (plotter, 1.0, 1.0, 10.0, 1.0);

  pl_closepl_r (plotter);               /* end page of graphics */
  pl_deletepl_r (plotter);              /* delete Plotter */
  return 0;
}
</pre></td></tr></table>
<p>この例では viewport の大きさは一辺が 8in
の正方形のままで以前のプログラムと変わらないが、
反時計回りに 90
度回転している。または、描画されるオブジェクトが回転されているとも言える。
これの前の例と同様、<code>pl_fspace_r</code>
関数でプログラム側の座標のスケールを実際のインチに一致させているが、
座標の原点は用紙の右下隅になっている。<em>x</em> 座標 と<em>y</em>
座標はそれぞれ、上方向と横方向に向かって増加する向きになっている。
</p>
<hr size="6">
<a name="Animated-GIFs"></a>
<a name="SEC54"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC53" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC55" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC47" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.2.7 アニメーション GIF </h3>

<p><code>libplot</code> を使って疑似アニメーション GIF 形式 (単なる疑似 GIF
形式の静止画像含む) の出力を得るのに、難しいことは何もない。GIF の Plotter
は他の Plotter と変わるところは何もなく、同じ操作で描画が行える。
しかし注意点が２点だけある。(1) 単ページの画像しかサポートされない。最初の
<code>openpl</code>&hellip;<code>closepl</code> の間に描画されたものだけが出力される。
これはリアルタイム・プロットを行わない他の Plotter も同じである。(2) その
<code>openpl</code>&hellip;<code>closepl</code> の間で <code>erase</code> が呼ばれると、
それまでの描画が終了して、次の画像の描画が新しく始まることになる。
ただそれまでになにも描画が行われていないときには、なにもしない。
</p>
<p><code>libplot</code> を使ったプログラミングを行っているとき、Plotter
をオープンしてすぐに <code>erase</code> を呼ぶ人は少なくない。
X Drawable や Tektronix の Plotter
では、描画を行うとずっとそれが残っているので、
Plotter のオープン後すぐに <code>erase</code> を呼ぶのは悪いことではない。
</p>
<p>以下に幅 150 ピクセル、縦 100 ピクセルの疑似アニメーション GIF
を生成するプログラムを示す。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;stdio.h&gt;
#include &lt;plot.h&gt;

int main()
{
  plPlotter *plotter;
  plPlotterParams *plotter_params;
  int i;

  /* set Plotter parameters */
  plotter_params = pl_newplparams ();
  pl_setplparam (plotter_params, &quot;BITMAPSIZE&quot;, &quot;150x100&quot;);
  pl_setplparam (plotter_params, &quot;BG_COLOR&quot;, &quot;orange&quot;);
  pl_setplparam (plotter_params, &quot;TRANSPARENT_COLOR&quot;, &quot;orange&quot;);
  pl_setplparam (plotter_params, &quot;GIF_ITERATIONS&quot;, &quot;100&quot;);
  pl_setplparam (plotter_params, &quot;GIF_DELAY&quot;, &quot;5&quot;);

  /* create a GIF Plotter with the specified parameters */
  plotter = pl_newpl_r (&quot;gif&quot;, stdin, stdout, stderr, plotter_params);
     
  pl_openpl_r (plotter);                 /* begin page of graphics */
  pl_fspace_r (plotter, 
               -0.5, -0.5, 149.5, 99.5); /* set user coor system */
  
  pl_pencolorname_r (plotter, &quot;red&quot;);    /* use red pen */
  pl_linewidth_r (plotter, 5);           /* set line thickness */
  pl_filltype_r (plotter, 1);            /* objects will be filled */
  pl_fillcolorname_r (plotter, &quot;black&quot;); /* set the fill color */

  for (i = 0; i &lt; 180 ; i += 15)
    {
      pl_erase_r (plotter);              /* begin new GIF image */
      pl_ellipse_r (plotter, 75, 50, 40, 20, i); /* draw an ellipse */
    }

  pl_closepl_r (plotter);                /* end page of graphics */
  pl_deletepl_r (plotter);               /* delete Plotter */
  return 0;
}
</pre></td></tr></table>
<p>疑似アニメーション GIF の画像データは標準出力に書き出される。
上のプログラムは 12 枚の静止画からなり、
赤い縁取りの黒い楕円が反時計方向に回転する動画である。
回転角度は 180 度だが、疑似 GIF のアニメーションは「ループ」するため
(後述)、回転を続けるように見える。
</p>
<p>楕円を定義するパラメータを指定する座標系はプログラム側から与える。
したがって画像データ上のピクセル単位の座標ではないが、<code>pl_fspace_r</code>
を呼ぶことでその両方の座標系を同一に設定できる。
150 x 100 ピクセルの疑似 GIF 画像の左下隅の座標は、
プログラム側で設定する座標系では
(-0.5,-0.5)、右上隅は (149.5,99.5) である。
つまりプログラム側の座標上で整数で点を指定すれば、その点がピクセルに対応する。
たとえば、<code>pl_point_r(plotter,0,0)</code>
および <code>pl_point_r(plotter,149,99)</code>
とすると、左下隅と右上隅のピクセルの色をそのときのペンの色にする。
</p>
<p><code>BITMAPSIZE</code> と <code>BG_COLOR</code> の他にも重要なパラメータが疑似 GIF の
Plotter にはある。それらを <code>pl_setparampl</code> 関数で設定している。
まず、<code>TRANSPARENT_COLOR</code> には色名を設定できる。
疑似 GIF 形式の画像上のその色のピクセルは、
多くのソフトウェアで透明として扱われる。普通は画像の背景を透明にするのに使う。
上のサンプル・プログラムでは背景色はオレンジに設定されているが、
透明色もオレンジに設定されている。そのため画像の背景は実際には描かれない。
</p>
<p><code>GIF_ITERATIONS</code> パラメータで、複数のフレームからなる疑似 GIF
画像のループ回数を設定できる。<code>GIF_DELAY</code> パラメータには、1/100
秒単位でループの中の 1 枚の画像を表示する時間の長さを設定できる。
</p>
<p>場合によっては <code>INTERLACE</code> が便利である。これを &quot;yes&quot; に設定すると、
生成される疑似 GIF データはインターレース形式になる。
これは静止画のときには非常に役に立つ指定である。
その他パラメータについての詳細は、<a href="#SEC66">Plotter パラメータ</a> を参照のこと。
</p>
<hr size="6">
<a name="X-Animations"></a>
<a name="SEC55"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC54" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC56" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC47" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.2.8 C 言語での X Window システムでのアニメーション </h3>

<p><code>libplot</code> を使えば、リアルタイム・プロットを行う Plotter
(X、X Drawable、ReGIS、Tektronix、Metafile)
でベクトル形式の画像によるアニメーションを生成することができる。<code>erase</code>
操作を呼ぶことで、一つのページ中の「フレーム」を区切ることができる。
そして各フレームごとに、
各デバイスの描画領域内が消去されることになる。
連続するフレーム間での違いを小さくすれば、滑らかなアニメーションになる。
</p>
<p>以下に C 言語でのサンプル・プログラムを示す。このプログラムでは
X Window システム上にアニメーションを表示する。
これを実行すると「飛び去っていく目」が表示される。
つまりウィンドウが新しく開き、その中を目玉が、
ゆっくりと回転しながら左から右へと通り過ぎていく。
目玉が２回通過したところで、ウィンドウは閉じられる。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;stdio.h&gt;
#include &lt;plot.h&gt;

int main ()
{
  plPlotter *plotter;
  plPlotterParams *plotter_params;
  int i = 0, j;

  /* set Plotter parameters */        
  plotter_params = pl_newplparams ();
  pl_setplparam (plotter_params, &quot;BITMAPSIZE&quot;, &quot;300x150&quot;);
  pl_setplparam (plotter_params, &quot;VANISH_ON_DELETE&quot;, &quot;yes&quot;);
  pl_setplparam (plotter_params, &quot;USE_DOUBLE_BUFFERING&quot;, &quot;yes&quot;);

  /* create an X Plotter with the specified parameters */
  if ((plotter = pl_newpl_r (&quot;X&quot;, stdin, stdout, stderr,
                             plotter_params)) == NULL)
    {
      fprintf (stderr, &quot;Couldn't create Plotter\n&quot;);
      return 1;
    }

  if (pl_openpl_r (plotter) &lt; 0)         /* open Plotter */
    {
      fprintf (stderr, &quot;Couldn't open Plotter\n&quot;);
      return 1;
    }
  pl_fspace_r (plotter, 
               -0.5, -0.5, 299.5, 149.5);  /* set user coor system */
  pl_linewidth_r (plotter, 8);           /* set line thickness */
  pl_filltype_r (plotter, 1);            /* objects will be filled */
  pl_bgcolorname_r (plotter, &quot;saddle brown&quot;); /* set background color */
  for (j = 0; j &lt; 300; j++)
    {
      pl_erase_r (plotter);                 /* erase window */
      pl_pencolorname_r (plotter, &quot;red&quot;);   /* use red pen */
      pl_fillcolorname_r (plotter, &quot;cyan&quot;); /* use cyan filling */
      pl_ellipse_r (plotter, i, 75, 35, 50, i);  /* draw an ellipse */
      pl_colorname_r (plotter, &quot;black&quot;); /* use black pen and filling */
      pl_circle_r (plotter, i, 75, 12);  /* draw a circle [the pupil] */
      i = (i + 2) % 300;                 /* shift rightwards */
    }
  if (pl_closepl_r (plotter) &lt; 0)        /* close Plotter */
    {
      fprintf (stderr, &quot;Couldn't close Plotter\n&quot;);
      return 1;
    }

  if (pl_deletepl_r (plotter) &lt; 0)       /* delete Plotter */
    {
      fprintf (stderr, &quot;Couldn't delete Plotter\n&quot;);
      return 1;
    }
  return 0;
}
</pre></td></tr></table>
<p>見て分かるように、プログラムの最初に出力デバイスのパラメータを設定する
<code>pl_setplparam</code> が設定するパラメータの数だけ呼ばれ、
それから <code>pl_newpl_r</code> を呼んで X の Plotter を生成している。
X の Plotter のウィンドウのサイズは 300 x 150 ピクセルである。Plotter
がクローズ／破棄されるときに、ウィンドウも閉じられる。<code>VANISH_ON_DELETE</code>
パラメータが &quot;yes&quot; に設定されていないときは、ウィンドウは自動的には消えず、
ウィンドウ内で <samp>`q'</samp>
を押すか、ウィンドウをマウスでクリックしたときに消えるようになる。
</p>
<p><code>USE_DOUBLE_BUFFERING</code> パラメータを &quot;yes&quot; にすると、
二重バッファリングが行われるようになる。
アニメーションがコマ送りみたいにならず、
スムーズに動くようにするためには重要な機能である。
通常は X の Plotter はリアルタイムで画面に描画を行い、<code>pl_erase_r</code>
が呼ばれたときに画面をクリアするが、二重バッファリングが有効になっているときは、
各フレームの内容は一旦バッファに書き出され、 <code>pl_erase_r</code>
が呼ばれたとき、またはその Plotter がクローズされたときに、
ピクセル単位でウィンドウにコピーされることで描画が行われる。
滑らかなアニメーションを描くためには必須の機能である。
</p>
<p>生成された Plotter を使うためには、それを選択し、オープンしなければならない。
<code>pl_openpl_r</code> を呼ぶとウィンドウが新しく開かれ、
アニメーションの表示が始まる。
<tt>for</tt> ループの中には <code>pl_erase_r</code> と、目玉を描く一連の <code>libplot</code>
の描画操作がある。ループ内で線を描くときにそれぞれ１回ずつ、
線の色と塗りつぶしの色の指定が行われる。
実際に表示を行う計算機環境で、パラメータ値をどう設定するのが良いのか、
試行錯誤するといいかもしれない。
</p>
<p>このアニメーションの中で図形を描くときの座標系は、
プログラム側で指定する座標系である。
したがって画像データ上のピクセル単位の座標ではないが、<code>pl_fspace_r</code>
を呼ぶことでその両方の座標系を同一に設定できる。
プログラム側で設定する座標系では
(-0.5,-0.5)、右上隅は (299.5,149.5) である。
つまりプログラム側の座標上で整数で点を指定すれば、その点がピクセルに対応する。
たとえば、<code>pl_point_r(plotter,299,149)</code>
とすると、右上隅のピクセルの色をそのときのペンの色にする。
</p>
<p>次のプログラムでは、文字 `A' が回転するアニメーションを生成する。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;stdio.h&gt;
#include &lt;plot.h&gt;

int main()
{
  plPlotter *plotter;
  plPlotterParams *plotter_params;
  int angle = 0;

  /* set Plotter parameters */        
  plotter_params = pl_newplparams ();
  pl_setplparam (plotter_params, &quot;BITMAPSIZE&quot;, &quot;300x300&quot;); 
  pl_setplparam (plotter_params, &quot;USE_DOUBLE_BUFFERING&quot;, &quot;yes&quot;);
  pl_setplparam (plotter_params, &quot;BG_COLOR&quot;, &quot;blue&quot;);

  /* create an X Plotter with the specified parameters */
  plotter = pl_newpl_r (&quot;X&quot;, stdin, stdout, stderr, plotter_params);

  /* open X Plotter, initialize coordinates, pen, and font */
  pl_openpl_r (plotter);
  pl_fspace_r (plotter, 0.0, 0.0, 1.0, 1.0);  /* use normalized coors */
  pl_pencolorname_r (plotter, &quot;white&quot;);
  pl_ffontsize_r (plotter, 1.0);
  pl_fontname_r (plotter, &quot;NewCenturySchlbk-Roman&quot;);

  pl_fmove_r (plotter, 0.5, 0.5);        /* move to center */
  while (1)                              /* loop endlessly */
    {
      pl_erase_r (plotter);
      pl_textangle_r (plotter, angle++); /* set new rotation angle */
      pl_alabel_r (plotter, 'c', 'c', &quot;A&quot;); /* draw a centered `A' */
    }
  pl_closepl_r (plotter);                /* close Plotter */

  pl_deletepl_r (plotter);               /* delete Plotter */
  return 0;
}
</pre></td></tr></table>
<p>この例では X Window システムの機能がよく示されている。最近の X11R6
のディスプレイでは、アニメーションは高速で滑らかである。これは X11R6 では、
フォントから使いたい文字だけを取り出してラスタライズする機能があるからである。
描画する X のディスプレイで &quot;NewCenturySchlbk-Roman&quot;
フォントが使えないときは、広く使われているスケーラブルな
&quot;charter-medium-r-normal&quot; などのコア X フォントや、
場合によっては昔からある画面出力用の固定幅フォントで置き換えられる。
このフォント名の意味するところについては <a href="#SEC70">X Window フォント</a> を参照のこと。
</p>
<p>指定されたフォントを X の Plotter から利用できない場合、
最初にまずデフォルトのスケーラブル・フォント (&quot;Helvetica&quot;。X Window
でのフォント名は &quot;helvetica-medium-r-normal&quot;)
を使おうとする。それもダメだったときにはデフォルトの Hershey ベクトルフォント
(&quot;HersheySerif&quot;) を試す。
</p>
<p>Hershey フォントは線分の集合からできていて、PostScript
フォントを使うよりもこれを使った方がアニメーションの描画は高速である。
線分の描画はフォントのラスタライズよりも高速に行われるからである。
</p>
<p>X の Plotter で長々とつづく描画操作が続くアニメーションを行うときは、
Plotter パラメータの <code>X_AUTO_FLUSH</code> を &quot;no&quot; に設定するとよい。
デフォルトでは X の Plotter は各描画操作が行われるたびに、それを
X Window システムのウィンドウ上に反映する。
つまりプログラム内で描画操作が行われたらすぐにそれが目に見えるようになるが、
場合によってはそれによって描画速度が低下することがある。
詳細については <a href="#SEC66">Plotter パラメータ</a> を参照のこと。
</p>
<hr size="6">
<a name="X-Programming"></a>
<a name="SEC56"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC55" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC57" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC47" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.2.9 一歩進んだ X Window システム・プログラミング </h3>

<p>X Window システムを利用するプログラムは通常 Xt、X Toolkit
ライブラリを使って書かれる。Xt では各アプリケーションは、
たとえばテキスト入力フィールド、ボタン、スライダー、
描画できる領域などの「ウィジェット」と呼ばれる部品を使って構築される。
アプリケーションの実行が開始される時、
各ウィジェットはそれぞれに対応する「イベント」(キー入力やマウスクリックなど)
に反応するように設定される。その設定が終わってから Xt
のイベントループに制御が渡される。
</p>
<p>GNU <code>libplot</code> は Xt
のイベントループ内でベクトル形式画像を描画するのに使うことができる。
そのためには一つ、あるいは複数の X Drawable の Plotter を生成して使う。
一つの X Drawable の Plotter は画面に表示されない一つのビットマップ画像に、
または一つのウィジェットとして管理される画面上の一つのウィンドウに、
描画することができる。
</p>
<p>以下に一つの X Drawable の Plotter を使うサンプル・プログラムを示す。
前の節でも使った `C' 曲線を、
ウィンドウを一つ生成してそこに描くアプリケーションである。
通常の Xt アプリケーションに使えるコマンドライン・オプションがこれにも使える。
ウィンドウの背景色の <samp>`-bg'</samp> オプション、ウィンドウの位置の <samp>`-geometry'</samp>
オプションなどである。曲線は最初は赤で、マウスで１回クリックすると緑で描かれる。
もう１回クリックすると赤に戻り、以下同様である。<samp>`q'</samp>
をキー入力すると終了する。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;plot.h&gt;
#include &lt;X11/Xlib.h&gt;
#include &lt;X11/Intrinsic.h&gt;
#include &lt;X11/Shell.h&gt;
#include &lt;X11/StringDefs.h&gt;
#include &lt;X11/Core.h&gt;

plPlotter *plotter;
int green = 0;                  /* draw in green, not red? */

#define MAXORDER 12
void draw_c_curve (double dx, double dy, int order)
{
  if (order &gt;= MAXORDER)
    /* continue path along (dx, dy) */
    pl_fcontrel_r (plotter, dx, dy); 
  else
    {
      draw_c_curve (0.5 * (dx - dy), 0.5 * (dx + dy), order + 1);
      draw_c_curve (0.5 * (dx + dy), 0.5 * (dy - dx), order + 1);
    }
}

void Redraw (Widget w, XEvent *ev, String *params, Cardinal *n_params)
{
  /* draw C curve */
  pl_erase_r (plotter);
  pl_pencolorname_r (plotter, green ? &quot;green&quot; : &quot;red&quot;);
  pl_fmove_r (plotter, 600.0, 300.0);  
  draw_c_curve (0.0, 400.0, 0);
  pl_endpath_r (plotter);
}

void Toggle (Widget w, XEvent *ev, String *params, Cardinal *n_params)
{
  green = (green ? 0 : 1);
  Redraw (w, ev, params, n_params);
}

void Quit (Widget w, XEvent *ev, String *params, Cardinal *n_params)
{
  exit (0);
}

/* mapping of events to actions */
static const String translations =
&quot;&lt;Expose&gt;:      redraw()\n\
&lt;Btn1Down&gt;:     toggle()\n\
&lt;Key&gt;q:         quit()&quot;;

/* mapping of actions to subroutines */
static XtActionsRec actions[] = 
{
  {&quot;redraw&quot;,            Redraw},
  {&quot;toggle&quot;,            Toggle},
  {&quot;quit&quot;,              Quit},
};

/* default parameters for widgets */
static String default_resources[] = 
{
  &quot;Example*geometry:      250x250&quot;,
  (String)NULL
};

int main (int argc, char *argv[])
{
  plPlotterParams *plotter_params;
  Arg wargs[10];                /* storage of widget args */
  Display *display;             /* X display */
  Widget shell, canvas;         /* toplevel widget; child */
  Window window;                /* child widget's window */
  XtAppContext app_con;         /* application context */
  int i;
  char *bg_colorname = &quot;white&quot;;
  
  /* take background color from command line */
  for (i = 0; i &lt; argc - 1; i++)
    if (strcmp (argv[i], &quot;-bg&quot;) == 0)
      bg_colorname = argv[i + 1];
  /* create toplevel shell widget */
  shell = XtAppInitialize (&amp;app_con, 
                           (String)&quot;Example&quot;, /* app class */
                           NULL,              /* options */
                           (Cardinal)0,       /* num of options */
                           &amp;argc,             /* command line */
                           argv,              /* command line */
                           default_resources,
                           NULL,              /* ArgList */
                           (Cardinal)0        /* num of Args */
                           );
  /* set default widget parameters (including window size) */
  XtAppSetFallbackResources (app_con, default_resources);
  /* map actions to subroutines */
  XtAppAddActions (app_con, actions, XtNumber (actions));
  /* create canvas widget as child of shell widget; realize both */
  XtSetArg(wargs[0], XtNargc, argc);
  XtSetArg(wargs[1], XtNargv, argv);
  canvas = XtCreateManagedWidget ((String)&quot;&quot;, coreWidgetClass,
                                  shell, wargs, (Cardinal)2);
  XtRealizeWidget (shell);
  /* for the canvas widget, map events to actions */
  XtSetArg (wargs[0], XtNtranslations, 
            XtParseTranslationTable (translations));
  XtSetValues (canvas, wargs, (Cardinal)1);

  /* initialize GNU libplot */
  plotter_params = pl_newplparams ();
  display = XtDisplay (canvas);
  window = XtWindow (canvas);
  pl_setplparam (plotter_params, &quot;XDRAWABLE_DISPLAY&quot;, display);
  pl_setplparam (plotter_params, &quot;XDRAWABLE_DRAWABLE1&quot;, &amp;window); 
  pl_setplparam (plotter_params, &quot;BG_COLOR&quot;, bg_colorname);
  plotter = pl_newpl_r (&quot;Xdrawable&quot;, NULL, NULL, stderr, 
                        plotter_params);
  pl_openpl_r (plotter);
  pl_fspace_r (plotter, 0.0, 0.0, 1000.0, 1000.0);
  pl_flinewidth_r (plotter, 0.25);     

  /* transfer control to X Toolkit event loop (doesn't return) */
  XtAppMainLoop (app_con);

  return 1;
}
</pre></td></tr></table>
<p>X Window システムのプログラミングに詳しくなくても、
このサンプル・プログラムの大まかな構造は把握できるだろう。
このプログラムには３つのコールバック、<code>Redraw</code>、<code>Toggle</code>、<code>Quit</code>
が定義されている。それぞれ (1) ウィンドウがアクティブになった、
またはマウスクリックがあった、(2) マウスクリック、(3) <samp>`q'</samp>
がキー入力された、というイベントがあったときに呼ばれる。
最初に行われる `C' 曲線 (赤い線) の描画は、
生成後最初にアクティブになったときに、
生成されたウィンドウにそのイベントが通知されることにより実行される。
</p>
<p>このサンプル・プログラムは、
ウィンドウのリサイズに対応するようにも簡単に書き換えられる。
しかし実際には X Drawable の Plotter は画面に直接ではなく、
ビットマップ画像として描画するときに用いるのが普通である。
ビットマップ画像はウィンドウと違って、リサイズされない。
</p>
<hr size="6">
<a name="C_002b_002b-Programming"></a>
<a name="SEC57"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC56" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC58" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 9.3 <code>libplotter</code> を使った C++ プログラミング </h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC58">9.3.1 <code>Plotter</code> クラス</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Plotter クラス
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC59">9.3.2 C++ でのコンパイルとリンク</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC60">9.3.3 C++ でのサンプル・プログラム</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
</table>

<hr size="6">
<a name="The-Plotter-Class"></a>
<a name="SEC58"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC57" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC59" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC57" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.3.1 <code>Plotter</code> クラス </h3>

<p><code>libplot</code> の C++ バインディングは <code>libplotter</code>
というクラス・ライブラリとして提供されている。このライブラリでは、Plotter
をオブジェクトとして実装している <code>Plotter</code> クラスが利用できる。
実際には各 Plotter は、出力形式ごとに定義される派生クラスのインスタンスとなる。
現在実装されている派生クラスは
<code>XPlotter</code>、<code>XDrawablePlotter</code>、<code>PNGPlotter</code>、<code>PNMPlotter</code>、<code>GIFPlotter</code>、<code>AIPlotter</code>、<code>PSPlotter</code>、<code>CGMPlotter</code>、<code>FigPlotter</code>、<code>PCLPlotter</code>、<code>HPGLPlotter</code>、<code>ReGISPlotter</code>、<code>TekPlotter</code>、<code>MetaPlotter</code>
である。
それぞれの出力形式は名前から分かる通りである。Plotter
インスタンスに対する操作 (たとえば新しいページを作る <code>openpl</code> など)
は <code>Plotter</code> クラスの public なメンバー関数として実装されている。
</p>
<p>Plotter インスタンスを生成するときには、入力元、出力先、
エラーの出力先をそれぞれパラメータとして指定しなければならない
(現在の実装では、入力元は無視される。Plotter
クラスはすべて書き出すのみで入力を受け付けないからである。
他のパラメータも指定できるが、それらは省略してもよい)。
出力先、エラーの出力先はそれぞれ、iostreams でも <code>FILE</code>
ポインタでも指定でき、それぞれの場合について、以下のコンストラクタがある。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">  Plotter(istream&amp; instream, ostream&amp; outstream, ostream&amp; errstream,
          PlotterParams &amp;params);
  Plotter(FILE *infile, FILE *outfile, FILE *errfile,
          PlotterParams &amp;params);
</pre></td></tr></table>

<p>これらはそれぞれ Plotter 基本クラス、および各派生クラスに用意されている。
例えば
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">PSPlotter plotter(cin, cout, cerr, params);
</pre></td></tr></table>

<p>と次の
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">PSPlotter plotter(stdin, stdout, stderr, params);
</pre></td></tr></table>

<p>はどちらも、標準出力に画像データを出力する PostScript インスタンスの宣言となる。
iostream を使った場合は、ストリーム・バッファが null の ostream
を出力先あるいはエラーの出力先に指定すると、その出力が抑制される。
<code>FILE</code> ポインタを使った場合は、<code>FILE</code> に null
を指定すると同じことになる。<code>XPlotter</code> および <code>XDrawablePlotter</code>
クラスのインスタンスは X のディスプレイに描画を行うため、
コンストラクタの出力先を指定する引数は単に無視される。
</p>
<p><code>PlotterParams</code> クラスは複製や代入をサポートしているが、
その public なメンバー関数は <code>setplparam</code> だけである。
その仕様は以下のようになる。
</p>
<dl compact="compact">
<dt> int <tt>PlotterParams::setplparam</tt> (const char *<var>parameter</var>, void *<var>value</var>);</dt>
<dd><p>その Plotter のパラメータ <var>parameter</var> の値を <var>value</var>
に設定する。
ほとんどのパラメータの値 <var>value</var> は <code>char *</code>、つまり文字列である。
無効な値を指定した場合は、無視される。<a href="#SEC66">Plotter パラメータ</a>
に指定できるパラメータ値のリストを挙げてある。
</p></dd>
</dl>

<p>C バインディングの <code>plPlotterParams</code> 型と <code>pl_setplparam</code>
関数と同様、C++ バインディングでは <code>PlotterParams</code> クラスと
<code>PlotterParams::setplparam</code>
を使ってパラメータ値を設定して、その後に生成される Plotter
インスタンスを制御することができる。Plotter が参照するパラメータ値は、その
Plotter インスタンスが破棄されるまで定数として扱われる。Plotter の生成時に
<code>PlotterParams</code>
オブジェクト内にパラメータが設定されていない場合はデフォルト値が使われる。
しかしパラメータがその値として文字列を取るもので、
同名の環境変数が設定されている場合は、
その環境変数の値がパラメータとして使われる。
</p>
<p><code>PlotterParams::setplparam</code> の引数 <var>value</var> に NULL
を渡すことで、
PlotterParams オブジェクト内に一度設定されたパラメータの設定を解除できる。
これによりプログラミングの自由度を高くしている。
</p>
<p>以下に、古いやり方での Plotter の生成方法を示す。
この方法は現在もサポートはされているが推奨されない。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">  Plotter(istream&amp; instream, ostream&amp; outstream, ostream&amp; errstream);
  Plotter(FILE *infile, FILE *outfile, FILE *errfile);
</pre></td></tr></table>

<p>上のどちらでも、PlotterParams オブジェクトを指定せずに Plotter
オブジェクトを生成できる。この場合、生成される Plotter
のパラメータ値は、静的に確保されている領域からコピーされる。
その領域は Plotter クラスのメンバー関数 <code>Plotter::parampl</code>
を呼ぶことで設定できる。
</p>
<dl compact="compact">
<dd><p>int <tt>PlotterParams::parampl</tt> (const char *<var>parameter</var>, void *<var>value</var>);
</p></dd>
</dl>


<p>この方法はスレッド・セーフではないので、推奨されない。
</p>
<hr size="6">
<a name="C_002b_002b-Compiling-and-Linking"></a>
<a name="SEC59"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC58" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC60" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC57" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.3.2 C++ でのコンパイルとリンク </h3>

<p>C++ で <code>libplotter</code>
を使うプログラムを書くとき、そのソースファイルには以下の行が必要である。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;plotter.h&gt;
</pre></td></tr></table>

<p>ヘッダファイル <code>plotter.h</code> は <code>libplotter</code>
の配布パッケージの一部として含まれており、C++
コンパイラが見つけられる場所に置いておかねばならない。
このファイル中では <code>Plotter</code> クラスとその派生クラスが宣言されており、
その他の色々な宣言も行われている。またこの中から <code>&lt;iostream.h&gt;</code> と
<code>&lt;stdio.h&gt;</code> が include されているので、別途それらの include
文を書く必要はない。
</p>
<p>作成したプログラムを <code>libplotter</code>
とリンクするには、コンパイル時にコマンドライン・オプションに <samp>`-l'</samp>
が必要になる。たとえば以下のようにする。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">-lplotter -lXaw -lXmu -lXt -lXext -lX11 -lpng -lz -lm
</pre></td></tr></table>

<p>最近の X Windows システムでは以下のようになるだろう。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">-lplotter -lXaw -lXmu -lXt -lSM -lICE -lXext -lX11 -lpng -lz -lm
</pre></td></tr></table>

<p>上の例では、PNG サポートを有効にしてコンパイルした <code>libplot</code>
を使うことを前提にしている。もしそうでないなら、<samp>`-lpng -lz'</samp>
オプションを指定しないようにする。
</p>
<p>(Athena ウィジェットの代わりに Motif ウィジェットを使うシステムでは
<samp>`-lplotter -lXm -lXt -lXext -lX11 -lpng -lz -lm'</samp>、
<samp>`-lplotter -lXm -lXt -lXext -lX11 -lpng -lz -lm -lc -lgen'</samp>、
<samp>`-lplotter -lXm -lXt -lXext -lX11 -lpng -lz -lm -lc -lPW'</samp>
のいずれかになるだろう。また最近の X Window システムではオプションに
<samp>`-lSM -lICE'</samp>
を追加する必要があるかもしれない。さらに Motif の最近のバージョンでは
<samp>`-lXp'</samp> や <samp>`-lXpm'</samp> も必要かもしれない。)
</p>
<p>場合によっては  <code>libplotter</code>
やその他のライブラリのインストールされているディレクトリを、
コマンドラインで指定する必要がある。たとえば X Window
のライブラリを指定するオプション
<samp>`-lXaw -lXmu -lXt -lSM -lICE -lXext -lX11'</samp>
を使うには <samp>`-L/usr/X11/lib'</samp>
といったオプションを同時に指定せねばならないかもしれない。
</p>
<p>多くの場合 <code>libplotter</code> は共有ライブラリ (shared library)
としてインストールされる。この場合、
リンクはコンパイル時には行われず、プログラムの実行時に行われることになる。
その際ライブラリのある場所は環境変数 <code>LD_LIBRARY_PATH</code>
によって示される。<code>libplotter</code> を使うプログラムが正常に実行されるためには、
そのライブラリのあるディレクトリを <code>LD_LIBRARY_PATH</code>
に設定しておかねばならない。
</p>
<hr size="6">
<a name="Sample-C_002b_002b-Drawings"></a>
<a name="SEC60"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC59" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC61" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC57" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.3.3 C++ でのサンプル・プログラム </h3>

<p>前章では <code>libplot</code> の C
バインディングでベクトル形式の描画を行うサンプルの C
プログラムをいくつか示した (<a href="#SEC51">C 言語でのサンプル描画</a> 参照) が、
ここではそれらの C プログラムを、<code>libplot</code> の C++ バインディングである
<code>libplotter</code> を使うように修正したプログラムを例に挙げる。
実行方法や得られる出力は、C のものと同じである。
</p>
<p>以下の C++ プログラムは、美しく絡まる Bill Gosper の &quot;C&quot; 曲線を描く。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#include &lt;plotter.h&gt;
const int maxorder = 12;
     
void draw_c_curve (Plotter&amp; plotter, double dx, double dy, int order)
{
  if (order &gt;= maxorder)
    plotter.fcontrel (dx, dy);	// continue path along (dx, dy)
  else
    {
      draw_c_curve (plotter, 
                    0.5 * (dx - dy), 0.5 * (dx + dy), order + 1);
      draw_c_curve (plotter,
                    0.5 * (dx + dy), 0.5 * (dy - dx), order + 1);
    }
}
     
int main ()
{
  // set a Plotter parameter
  PlotterParams params;
  params.setplparam (&quot;PAGESIZE&quot;, (char *)&quot;letter&quot;);
     
  PSPlotter plotter(cin, cout, cerr, params); // declare Plotter
  if (plotter.openpl () &lt; 0)                  // open Plotter
    {
      cerr &lt;&lt; &quot;Couldn't open Plotter\n&quot;;
      return 1;
    }

  plotter.fspace (0.0, 0.0, 1000.0, 1000.0); // specify user coor system
  plotter.flinewidth (0.25);       // line thickness in user coordinates
  plotter.pencolorname (&quot;red&quot;);    // path will be drawn in red
  plotter.erase ();                // erase Plotter's graphics display
  plotter.fmove (600.0, 300.0);    // position the graphics cursor
  draw_c_curve (plotter, 0.0, 400.0, 0);
  if (plotter.closepl () &lt; 0)      // close Plotter
    {
      cerr &lt;&lt; &quot;Couldn't close Plotter\n&quot;;
      return 1;
    }
  return 0;
}
</pre></td></tr></table>
<p>上のプログラムは、前章の C プログラムを単純に書き直しただけである。
ここでは <code>PSPlotter</code> クラスのインスタンスとして <code>plotter</code>
を宣言している。このインスタンスの出力先は <code>cout</code> に設定されている。
そのメンバー関数を呼び出すことで、描画操作を行う。
</p>
<hr size="6">
<a name="Functions"></a>
<a name="SEC61"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC60" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC62" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 9.4 <code>libplot</code> の関数リスト </h2>

<p>GNU <code>libplot</code> は現在、97 種類の Plotter 操作を実装している。
<code>libplot</code> の各言語バインディングではその各操作に対応する 97
個の関数を実装している。C バインディングでは、その 97
個の関数は C の API (Application Programming Interface) である。
その各関数は関数名の先頭に &quot;pl_&quot; が、末尾に &quot;_r&quot; が付けられている。
C++ バインディングでは、それらは <code>Plotter</code> クラスの public
なメンバー関数だが、関数名の先頭や末尾には特に何も付けられていない。
</p>
<p>言語バインディングには Plotter
オブジェクトの生成、選択、破棄のための関数も含まれる。
たとえば C バインディングでは生成と破棄はそれぞれ
<code>pl_newpl_r</code>、<code>pl_deletepl_r</code>
である。<a href="#SEC48">C の API</a> 参照。
</p>
<p>指定する Plotter に対して様々な操作を行うこの 97
の関数は、以下の４種類に分けられる。
</p>

<p>多くの関数は、整数版と倍精度実数版の二種類が用意されている。<code>libplot</code>
は内部では倍精度実数を使っている。
整数版は後方互換性を保つために用意されているものである。
この二種類が用意されている関数では、実数版の関数名の先頭に <samp>`f'</samp>
という文字が付けられている。
</p>
<p>また多くの関数に、絶対値版と相対値版が用意されている。
後者は相対座標 (カーソルの現在位置からの相対座標値) を使い、
関数名の末尾に <samp>`rel'</samp> が付けられている。
</p>
<p>現在、97 種の関数のうち、返り値に意味のある関数は少ない。
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC62">9.4.1 制御関数</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Plotter をオープン、初期化、破棄する関数
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC63">9.4.2 図形関数</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Plotter に図形を描かせる関数
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC64">9.4.3 属性設定関数</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC65">9.4.4 座標変換関数</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
</table>

<hr size="6">
<a name="Control-Functions"></a>
<a name="SEC62"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC61" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC63" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC61" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.4.1 制御関数 </h3>

<p>以下に挙げるのは <code>libplot</code> の「制御関数」である。
これらは、すでに生成されている Plotter
に対してオープン、初期化、破棄といった操作を行う。
以下に、おおよそ実際に使われるときの順番で列挙する。
</p>
<p>C バインディングでは、各関数は <code>plPlotter</code>
型へのポインタを最初の引数にとり、関数名の先頭には &quot;pl_&quot; が、末尾には
&quot;_r&quot; がついている (&quot;r&quot; は revised または reentrant という意味である)。
古い C バインディングについては <a href="#SEC49">古い形式の C 言語の API</a> を参照のこと。
C++ バインディングでは、これらは <code>Plotter</code> クラスと派生クラスの public
なメンバー関数である。関数名の先頭や末尾には特になにも付けられていない。
</p>
<dl compact="compact">
<dt> int <tt>openpl</tt> ();</dt>
<dd><p>Plotter をオープンし、画像のページを新しくはじめる。
この時 Plotter の描画属性はデフォルト値に設定される。
Plotter がオープンできなかったときは負の値を返す。
</p>
<p>X の Plotter では <code>openpl</code> で新しくページが開始すると X Window
のディスプレイ上に新しくウィンドウが開かれる。
将来的には一つのウィンドウ上に次の描画を行うようになる予定である。
</p>
</dd>
<dt> int <tt>bgcolor</tt> (int <var>red</var>, int <var>green</var>, int <var>blue</var>);   </dt>
<dd><p>Plotter の描画領域の背景色を、48 ビット RGB
で指定される色に設定する。引数の <var>red</var>、<var>green</var>、<var>blue</var>
にそれぞれ背景色での赤、緑、青の濃さを指定する。濃さの指定は
<tt>0x0000</tt>&hellip;<tt>0xffff</tt>、つまり 0&hellip;65535
の範囲内の整数で行う。
(0, 0, 0) を指定すると黒に、(65535, 65535, 65535) を指定すると白になる。
</p>
<p><tt>bgcolor</tt> は、出力形式がビットマップ画像の Plotter、
つまり X、X Drawable、PNG、PNM、GIF の各 Plotter と、
CGM、ReGIS、Metafile の各 Plotter でだけ有効である。
この設定の効果は単純なもので、この設定の後に呼ばれる <tt>erase</tt> 操作で、
描画領域全体がこの色で塗りつぶされるだけである。
</p>
</dd>
<dt> int <tt>bgcolorname</tt> (const char *<var>name</var>);</dt>
<dd><p>Plotter の描画領域の背景色を、<var>name</var> に設定する。
無効な色名を指定したときは &quot;white&quot; に置き換えられる。
設定できる色名については <a href="#SEC73">色名</a> を参照のこと。
&quot;#c0c0c0&quot; のようにして 6 桁の 16 進数で
24 ビット RGB カラーを指定することもできる。
</p>
<p><tt>bgcolor</tt> は、出力形式がビットマップ画像の Plotter、
つまり X、X Drawable、PNG、PNM、GIF の各 Plotter と、
CGM、ReGIS、Metafile の各 Plotter
でだけ有効であり、その効果は単純なもので、これを設定した後に <tt>erase</tt>
操作を行うと、描画領域全体がこの色で塗りつぶされるということだけである。
</p>
<p>SVG、CGM の各 Plotter では背景色に &quot;none&quot; を指定できる。
それにより背景を無効にすることができる。Web
ページに表示する画像を生成したいときに使うとよい。
</p>
</dd>
<dt> int <tt>erase</tt> ();</dt>
<dd><p>複数フレームを含むページにおいて、
それまでに描画領域に描かれている図形をすべて消去し、
背景色が設定されていればそれで全体を塗りつぶし、新しいフレームを開始する。
</p>
<p><tt>openpl</tt> によって新しくページをはじめた直後に <tt>erase</tt>
を呼ぶと便利なことがよくある。Plotter の種類によっては
<code>openpl</code>&hellip;<code>closepl</code> の間に描かれた画像が
その後に <code>openpl</code> を呼んで新しくページを始めても残っているからである。
現在、X Drawable と Tektronix がそういった Plotter である。
将来的には、X の Plotter
では画像が残るかどうかを選択できるようにする予定である。
</p>
<p>X と X Drawable の Plotter ではデバイスドライバのパラメータ
<code>USE_DOUBLE_BUFFERING</code> が &quot;yes&quot; に設定されていると、 <tt>erase</tt>
の挙動が変わってくる。その場合、
図形は描画領域ではなくバッファに描かれるため、
<tt>erase</tt> は (1) バッファの内容をディスプレイにコピーし、
(2) バッファを背景色で塗りつぶす、という作業を行う。
この「二重バッファリング」によりアニメーションを滑らかにすることができる。
<a href="#SEC66">Plotter パラメータ</a> 参照。
</p>
</dd>
<dt> int <tt>space</tt> (int <var>x0</var>, int <var>y0</var>, int <var>x1</var>, int <var>y1</var>);</dt>
<dt> int <tt>fspace</tt> (double <var>x0</var>, double <var>y0</var>, double <var>x1</var>, double <var>y1</var>);</dt>
<dd><p>描画領域の左下隅と右上隅の、
プログラム側で想定する座標系上での座標値を、二組の数値で設定する関数である。
これによりプログラム側の座標値からデバイスの描画領域 (viewport) 上の座標値
への変換が設定される。
デフォルトではプログラム側座標系は正方形で、左下隅と右上隅はそれぞれ (0,0) と
(1,1) である。
</p>
<p>数学的に表現すると、
<tt>space</tt> または <tt>fspace</tt> を呼び出すことで、
プログラム側の座標系からデバイスドライバの座標系 (viewport)
へのアフィン変換が設定される。
これにより、各図形について、それが描画される前に適用される変換が設定される。
<tt>openpl</tt> を呼んで新しくページを開始したら、
すぐに <tt>space</tt> か <tt>fspace</tt> のどちらかの関数を呼ぶ。
<tt>space</tt> や <tt>fspace</tt> は何度呼んでもよい。また「変換関数」は他にもある。
<a href="#SEC65">座標変換関数</a> を参照のこと。
</p>
<p>viewport の大きさや位置は Plotter の種類や、Plotter
が生成されるときに設定されているパラメータ値によって変わる。
たとえば
Illustrator、PostScript、Fig、PCL、HP-GL
の各 Plotter では正方形だが、その大きさは設定されている用紙によって変わる。
詳細については <a href="#SEC74">ページと描画領域のサイズ</a> を参照のこと。
</p>
</dd>
<dt> int <tt>space2</tt> (int <var>x0</var>, int <var>y0</var>, int <var>x1</var>, int <var>y1</var>, int <var>x2</var>, int <var>y2</var>);</dt>
<dt> int <tt>fspace2</tt> (double <var>x0</var>, double <var>y0</var>, double <var>x1</var>, double <var>y1</var>, double <var>x2</var>, double <var>y2</var>);</dt>
<dd><p>これらは <tt>space</tt> と <tt>fspace</tt> の拡張版である。
引数で、「アフィン窓」(平行四辺形を描く)
を定義する３つのプログラム側の座標系上の座標を指定する。
３つの座標はそれぞれ、左下隅、右下隅、右上隅である。
ウィンドウはアフィン変換で描画領域、
つまり図形が実際に描画される出力デバイス上の長方形領域にマッピングされる。
</p>
</dd>
<dt> int <tt>havecap</tt> (const char *<var>s</var>);</dt>
<dd><p>Plotter が指定された機能を使えるかどうかを調べる。その Plotter
はオープンされている必要はない。返り値は 0, 1, 2 のいずれかであり、
それぞれ no/yes/maybe を意味する。指摘できない機能が指定されたときには 0
を返す。調べられる機能は
&quot;WIDE_LINES&quot; (デフォルト以外の太さの線が描けるか)、
&quot;DASH_ARRAY&quot; (<tt>linedash</tt> 機能を使って任意の細かさの破線が描けるか)、
&quot;SETTABLE_BACKGROUND&quot; (背景色をカラーで設定できるか)、&quot;SOLID_FILL&quot; などである。
&quot;HERSHEY_FONTS&quot;、&quot;PS_FONTS&quot;、&quot;PCL_FONTS&quot;、&quot;STICK_FONTS&quot;
でそれぞれの形式のフォントが使えるかどうかが分かる。<a href="#SEC68">利用できるフォント</a> 参照。
</p>
<p>Tektronix 以外の Plotter では &quot;SOLID_FILL&quot; 機能により、
単色で塗りつぶしができる。これができる Plotter では少なくとも &quot;EVEN_ODD_FILL&quot;
か &quot;NONZERO_WINDING_NUMBER_FILL&quot; のどちらかが使える。
これにより、「曲線の内側」をどう決定するかが選べる。
</p>
<p>Metafile の Plotter では、ほとんどの機能について返り値が `maybe' になる。
その Plotter 自身では描画を行わないからである。Metafile の Plotter の出力は
<code>plot</code> を使って他の形式に変換するか、画面に表示するかせねばならない。
</p>
</dd>
<dt> int <tt>flushpl</tt> ();</dt>
<dd><p>出力デバイスに、すべての描画命令を書き出す。
これはリアルタイムの Plotter 
(X、X Drawable、ReGIS、Tektronix、Metafile の各 Plotter)
でのみ意味のある操作であり、
それまでに描画された図形をすべてディスプレイに描き、
画面上で見えるようにするための操作である。
リアルタイムでない Plotter に対してこの操作を行っても、なにも行われない。
</p>
</dd>
<dt> int <tt>closepl</tt> ();</dt>
<dd><p>Plotter をクローズして、ページの描画を終了する。
構築中のパスがあったときには <tt>endpath</tt> を呼ぶのと同じように、
まずそのパスの構築が完了させられる。
Plotter がクローズできなかったときには、非零の値を返す。
</p>
<p><code>libplot</code> の現在の実装では、<tt>closepl</tt>
が呼ばれたときにリアルタイムでページを描画する Plotter がいくつかある。たとえば
PCL と HP-GL の Plotter がそうである。同様に、単ページしか描画できない Plotter
では、<tt>closepl</tt> が呼ばれたときにすぐにページを終了し、描画データを出力する
(PNG、PNM、GIF、SVG、Illustrator、Fig の各 Plotter)。しかし PostScript や CGM
の Plotter では、その Plotter が破棄されるときにすべてのページが出力される。
</p></dd>
</dl>

<hr size="6">
<a name="Drawing-Functions"></a>
<a name="SEC63"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC62" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC64" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC61" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.4.2 図形関数 </h3>

<p>以下に <code>libplot</code> の「図形描画関数」を説明する。これらを Plotter
に対して実行した時、その描画領域に図形オブジェクト
(パス、文字列、記号、点つまりピクセル) が描かれる。
</p>
<p>パスには単純パスと複合パスがある。単純パスは、
線分、円弧
(真円および楕円の円弧)、二次または三次のベジェ曲線が連結されたものである。
単純パスはこれらの要素を一つずつ付け加えていくことで描かれる。
単純パスは円、長方形、楕円にもなる。
複合パスは複数の単純パスが入れ子 (ネスト) になることで構成される。
</p>
<p>パスを描き始めるための命令は特に用意されていない。
またすくなくとも機能としては、<code>endpath</code>
操作を呼ぶことで構築中のパスが完結し、描画領域に描かれる。
しかし <code>endpath</code>
は他の図形を描いたりページを終了したりするときに自動的に呼ばれる。
またパスの属性を変更するときにも自動的に呼ばれる。
たとえばカーソル位置を移動するための <code>move</code> を呼んだときなどである。
そのため <code>endpath</code> を明示的に呼ぶ機会は決して多くはない。
</p>
<p>複合パスを描くときは、それを構成する単純パスの構築を <code>endsubpath</code>
を呼ぶことで完結し、一つの複合パスの構築を <code>endpath</code> で完結する。
<code>endsubpath</code> を呼んだ後は、次の単純パスの開始点に <code>move</code>
操作でカーソルと移動することができる。<code>endsubpath</code>
の直後に <code>move</code> を呼んだ場合は、<code>endpath</code>
が自動的に実行されることはない。
したがって、複合パスの構築中は上述の自動呼び出しが行われないことになる。
</p>
<p>現在の C バインディングでは、これらの各関数の第一引数は <code>plPlotter</code>
へのポインタである。また各関数の先頭には &quot;pl_&quot; が、末尾には
&quot;_r&quot; が付いている (&quot;_r&quot; は `revised' または `reentrant'
の意味である)。古い C バインディングについては <a href="#SEC49">古い形式の C 言語の API</a>
を参照のこと。C++ バインディングでは、これらは <code>Plotter</code>
クラスとその派生クラスのメンバー関数であり、
先頭にも末尾にも特になにもついていない。
</p>
<dl compact="compact">
<dt> int <tt>alabel</tt> (int <var>horiz_justify</var>, int <var>vert_justify</var>, const char *<var>s</var>);</dt>
<dd><p>３つの引数 <var>horiz_justify</var>、<var>vert_justify</var>、<var>s</var> で
「整列文字列」を指定する。
構築中のパスは (もしあれば) 完了させられ、
文字列 <var>s</var> が指定された方法で整列させられ、描かれる。
<var>horiz_justify</var> が <samp>`l'</samp>、<samp>`c'</samp>、<samp>`r'</samp> のときそれぞれ、
そのときのカーソルの位置に対して左揃え、センタリング、右揃えが行われる。
<var>vert_justify</var> が <samp>`b'</samp>、<samp>`x'</samp>、<samp>`c'</samp>、<samp>`C'</samp>、<samp>`t'</samp>
のときそれぞれ、
そのときのカーソルの位置に文字列の、
下端、ベースライン、中央、キャップ高、上端がそろえられる。
左揃えが行われたときはカーソルは文字列の右端に、
右揃えが行われたときは文字列の左端にカーソルは移動する。
</p>
<p>文字列には各種のエスケープ・シーケンスを入れることができる
(<a href="#SEC71">文字列とエスケープ・シーケンス</a> を参照のこと)。しかし改行文字と復帰文字 (LF と CR)
は入れられない。
実際には文字列には印刷可能な文字だけ、つまりアスキーコードで言うと
<tt>0x20</tt>&hellip;<tt>0x7e</tt> と <tt>0xa0</tt>&hellip;<tt>0xff</tt> の範囲内の文字が使える。
また <code>textangle</code> を呼べば文字列を傾けることができる。
</p>
</dd>
<dt> int <tt>arc</tt> (int <var>xc</var>, int <var>yc</var>, int <var>x0</var>, int <var>y0</var>, int <var>x1</var>, int <var>y1</var>);</dt>
<dt> int <tt>farc</tt> (double <var>xc</var>, double <var>yc</var>, double <var>x0</var>, double <var>y0</var>, double <var>x1</var>, double <var>y1</var>);</dt>
<dt> int <tt>arcrel</tt> (int <var>xc</var>, int <var>yc</var>, int <var>x0</var>, int <var>y0</var>, int <var>x1</var>, int <var>y1</var>);</dt>
<dt> int <tt>farcrel</tt> (double <var>xc</var>, double <var>yc</var>, double <var>x0</var>, double <var>y0</var>, double <var>x1</var>, double <var>y1</var>);</dt>
<dd><p><tt>arc</tt> と <tt>farc</tt> の６つの引数でそれぞれ、描く円弧の始点
(<var>x0</var>, <var>y0</var>)、終点 (<var>x1</var>, <var>y1</var>)、中心点 (<var>xc</var>, <var>yc</var>)
が指定される円弧を描く。
もしカーソルが始点にあって、パスがまだ描き終わってないときは、
描く円弧はそのパスの一部になる。そうでなければ描画途中のパスの描画は終了し、
新しいパスとして円弧が描かれる。いずれにしてもカーソルは終点
(<var>x1</var>, <var>y1</var>) に移動する。
</p>
<p>弧の向き (時計回りまたは反時計回りのどちらか) は、(<var>xc</var>, <var>yc</var>)
に中心を持つ円弧の角度が 180 度以下になるような回転方向になる。
もし指定された３点が１本の直線上に乗っている場合、
円弧の方向は反時計回りになる。またもし、(<var>xc</var>, <var>yc</var>) からの距離が
(<var>x0</var>, <var>y0</var>) と (<var>x1</var>, <var>y1</var>) で異なっている場合は、
(<var>x0</var>, <var>y0</var>) と (<var>x1</var>, <var>y1</var>)
を結ぶ線分の垂直二等分線上のもっともに近い場所に (<var>xc</var>, <var>yc</var>)
が移動される。<tt>arcrel</tt> と <tt>farcrel</tt>
は、カーソルに対する相対座標を使うこと以外は <code>arc</code> と <code>farc</code>
と同じである。
</p>
</dd>
<dt> int <tt>bezier2</tt> (int <var>x0</var>, int <var>y0</var>, int <var>x1</var>, int <var>y1</var>, int <var>x2</var>, int <var>y2</var>);</dt>
<dt> int <tt>fbezier2</tt> (double <var>x0</var>, double <var>y0</var>, double <var>x1</var>, double <var>y1</var>, double <var>x2</var>, double <var>y2</var>);</dt>
<dt> int <tt>bezier2rel</tt> (int <var>x0</var>, int <var>y0</var>, int <var>x1</var>, int <var>y1</var>, int <var>x2</var>, int <var>y2</var>);</dt>
<dt> int <tt>fbezier2rel</tt> (double <var>x0</var>, double <var>y0</var>, double <var>x1</var>, double <var>y1</var>, double <var>x2</var>, double <var>y2</var>);</dt>
<dd><p><tt>bezier2</tt> と <tt>fbezier2</tt> は６つの引数で指定される３つの点、
つまり始点 <code>p0</code>=(<var>x0</var>, <var>y0</var>) と終点
<code>p2</code>=(<var>x2</var>, <var>y2</var>)、その間にある制御点
<code>p1</code>=(<var>x1</var>, <var>y1</var>)
からなる二次のベジェ曲線を描画する。
もしカーソルが始点 <code>p0</code>
にあって、パスがまだ描き終わってないときは、
そのパスの続きとして描かれる。
そうでなければ描画途中のパスの描画は終了し、
新しいパスとしてベジェ曲線が描かれる。
いずれにしてもカーソルは終点 <code>p2</code> に移動する。
<tt>bezier2rel</tt> と <tt>fbezier2rel</tt>
は、カーソルに対する相対座標を使うこと以外は <code>bezier2</code> と <code>fbezier2</code>
と同じである。
</p>
<p>二次のベジェ曲線では、
点 <code>p0</code> と <code>p1</code>を結ぶ線分が <code>p0</code> における接線、
点 <code>p1</code> と <code>p2</code>を結ぶ線分が <code>p2</code> における接線である。
したがってこれは <code>p0</code>、<code>p1</code>、<code>p2</code>
を頂点とする三角形にぴったりとあてはまる。
</p>
<p>PCL の Plotter で LaserJet III にベジェ曲線を描く場合は、パラメータ
<code>PCL_BEZIERS</code> を &quot;no&quot; にせねばならない。LaserJet III
はヒューレット・パッカードの最初の PCL 5 プリンタで、
これ以降の PCL 5 と違ってベジェ曲線を描く命令をサポートしていない。
<a href="#SEC66">Plotter パラメータ</a> を参照のこと。
</p>
</dd>
<dt> int <tt>bezier3</tt> (int <var>x0</var>, int <var>y0</var>, int <var>x1</var>, int <var>y1</var>, int <var>x2</var>, int <var>y2</var>, int <var>x3</var>, int <var>y3</var>);</dt>
<dt> int <tt>fbezier3</tt> (double <var>x0</var>, double <var>y0</var>, double <var>x1</var>, double <var>y1</var>, double <var>x2</var>, double <var>y2</var>, double <var>x3</var>, double <var>y3</var>);</dt>
<dt> int <tt>bezier3rel</tt> (int <var>x0</var>, int <var>y0</var>, int <var>x1</var>, int <var>y1</var>, int <var>x2</var>, int <var>y2</var>, int <var>x3</var>, int <var>y3</var>);</dt>
<dt> int <tt>fbezier3rel</tt> (double <var>x0</var>, double <var>y0</var>, double <var>x1</var>, double <var>y1</var>, double <var>x2</var>, double <var>y2</var>, double <var>x3</var>, double <var>y3</var>);</dt>
<dd><p><tt>bezier3</tt> と <tt>fbezier3</tt> は８つの引数で指定される４つの点、
つまり始点 <code>p0</code>=(<var>x0</var>, <var>y0</var>) と終点
<code>p3</code>=(<var>x3</var>, <var>y3</var>)、その間にある２つの制御点
<code>p1</code>=(<var>x1</var>, <var>y1</var>)、
<code>p2</code>=(<var>x2</var>, <var>y2</var>)
からなる三次のベジェ曲線を描画する。
もしカーソルが始点 <code>p0</code>
にあって、パスがまだ描き終わってないときは、
そのパスの続きとして描かれる。
そうでなければ描画途中のパスの描画は終了し、
新しいパスとしてベジェ曲線が描かれる。
いずれにしてもカーソルは終点 <code>p3</code> に移動する。
<tt>bezier3rel</tt> と <tt>fbezier3rel</tt>
は、カーソルに対する相対座標を使うこと以外は <code>bezier3</code> と <code>fbezier3</code>
と同じである。
</p>
<p>三次のベジェ曲線では、
点 <code>p0</code> と <code>p1</code>を結ぶ線分が <code>p0</code> における接線、
点 <code>p2</code> と <code>p3</code>を結ぶ線分が <code>p3</code> における接線である。
したがってこれは <code>p0</code>、<code>p1</code>、<code>p2</code>、<code>p3</code>
を頂点とする四角形にぴったりとあてはまる。
</p>
<p>PCL Plotter で LaserJet III にベジェ曲線を描く場合は、パラメータ
<code>PCL_BEZIERS</code> を &quot;no&quot; にせねばならない。LaserJet III
はヒューレット・パッカードの最初の PCL 5 プリンタで、
これ以降の PCL 5 と違ってベジェ曲線を描く命令をサポートしていない。
<a href="#SEC66">Plotter パラメータ</a> を参照のこと。
</p>
</dd>
<dt> int <tt>box</tt> (int <var>x1</var>, int y<var>1</var>, int <var>x2</var>, int <var>y2</var>);</dt>
<dt> int <tt>fbox</tt> (double <var>x1</var>, double <var>y1</var>, double <var>x2</var>, double <var>y2</var>);</dt>
<dt> int <tt>boxrel</tt> (int <var>x1</var>, int y<var>1</var>, int <var>x2</var>, int <var>y2</var>);</dt>
<dt> int <tt>fboxrel</tt> (double <var>x1</var>, double y<var>1</var>, double <var>x2</var>, double <var>y2</var>);</dt>
<dd><p><tt>box</tt> と <tt>fbox</tt> は４つの引数で指定される２つの点、
つまり左下隅 (<var>x0</var>, <var>y0</var>) と右上隅
<code>p1</code>=(<var>x1</var>, <var>y1</var>)
で指定される箱形の長方形を描画する。
パスがまだ描き終わってないときは、
描画途中のパスの描画は終了し、
新しいパスとして長方形が描かれる。
カーソルは長方形の中心に移動する。
<tt>boxref</tt> と <tt>fboxref</tt>
は、カーソルに対する相対座標を使うこと以外は <code>box</code> と <code>fbox</code>
と同じである。
</p>
</dd>
<dt> int <tt>circle</tt> (int <var>xc</var>, int <var>yc</var>, int <var>r</var>);</dt>
<dt> int <tt>fcircle</tt> (double <var>xc</var>, double <var>yc</var>, double <var>r</var>);</dt>
<dt> int <tt>circlerel</tt> (int <var>xc</var>, int <var>yc</var>, int <var>r</var>);</dt>
<dt> int <tt>fcirclerel</tt> (double <var>xc</var>, double <var>yc</var>, double <var>r</var>);</dt>
<dd><p><tt>circle</tt> と <tt>fcircle</tt>
は３つの引数で指定される中心
(<var>xc</var>, <var>yc</var>) と半径 (<var>r</var>) の円を描く。
パスがまだ描き終わってないときは、
描画途中のパスの描画は終了し、
新しいパスとして長方形が描かれる。
カーソルは中心 (<var>xc</var>, <var>yc</var>) に移動する。
<tt>circlerel</tt> と <tt>fcirclerel</tt>
は、中心の座標にカーソルに対する相対座標を使うこと以外は
<tt>circle</tt> と <tt>fcircle</tt>
と同じである。
</p>
</dd>
<dt> int <tt>cont</tt> (int <var>x</var>, int <var>y</var>);</dt>
<dt> int <tt>fcont</tt> (double <var>x</var>, double <var>y</var>);</dt>
<dt> int <tt>contrel</tt> (int <var>x</var>, int <var>y</var>);</dt>
<dt> int <tt>fcontrel</tt> (double <var>x</var>, double <var>y</var>);</dt>
<dd><p><tt>cont</tt> と <tt>fcont</tt>
は２つの引数で指定される点 (<var>x</var>, <var>y</var>) までの線分をカーソル位置から描く。
パスが描画途中のときはそのパスに続けられる。そうでないときは新しいパスになる。
どちらの場合もカーソルは (<var>x</var>, <var>y</var>) に移動する。
<tt>contrel</tt> と <tt>fcontrel</tt>
は、中心の座標にカーソルに対する相対座標を使うこと以外は
<tt>cont</tt> と <tt>fcont</tt>
と同じである。
</p>
</dd>
<dt> int <tt>ellarc</tt> (int <var>xc</var>, int <var>yc</var>, int <var>x0</var>, int <var>y0</var>, int <var>x1</var>, int <var>y1</var>);</dt>
<dt> int <tt>fellarc</tt> (double <var>xc</var>, double <var>yc</var>, double <var>x0</var>, double <var>y0</var>, double <var>x1</var>, double <var>y1</var>);</dt>
<dt> int <tt>ellarcrel</tt> (int <var>xc</var>, int <var>yc</var>, int <var>x0</var>, int <var>y0</var>, int <var>x1</var>, int <var>y1</var>);</dt>
<dt> int <tt>fellarcrel</tt> (double <var>xc</var>, double <var>yc</var>, double <var>x0</var>, double <var>y0</var>, double <var>x1</var>, double <var>y1</var>);</dt>
<dd><p><tt>ellarc</tt> と <tt>fellarc</tt> は６つの引数で指定される３つの点
<code>pc</code>=(<var>xc</var>,<var>yc</var>)、
<code>p0</code>=(<var>x0</var>,<var>y0</var>)、
<code>p1</code>=(<var>x1</var>,<var>y1</var>)
で指定される、四半楕円と呼ばれる図形を描く。
これは中心が <code>pc</code>で <code>p0</code> から <code>p1</code> につながる楕円弧である。
もしカーソルが始点 <code>p0</code>
にあって、パスがまだ描き終わってないときは、そのパスの続きとして描かれる。
そうでなければ描画途中のパスの描画は終了し、新しいパスとして描かれる。
いずれにしてもカーソルは終点 <code>p1</code> に移動する。
</p>
<p>四半楕円は四半円をアフィン変換したものである。つまりこれには
<code>p0</code>、<code>p1</code>、<em><code>p0</code>+<code>p1</code>-<code>pc</code></em>
という制御点があることになる。したがって描かれる曲線は点 <code>p0</code> で
<code>p0</code> と <em><code>p0</code>+<code>p1</code>-<code>pc</code></em> を結ぶ線分に接し、
<code>p1</code> で <code>p1</code> と <em><code>p0</code>+<code>p1</code>-<code>pc</code></em>
を結ぶ線分に接することになる。
したがって描かれる四半楕円はこれらの制御点を頂点とする三角形に、
ぴったりとあてはまる。３つめの制御点は、<code>pc</code> を <code>p0</code> と <code>p1</code>
を結ぶ線分で対称な位置に移した点である。
<tt>ellarcrel</tt> と <tt>fellarcrel</tt>
は、カーソルに対する相対座標を使うこと以外は <code>ellarc</code> と <code>fellarc</code>
と同じである。
</p>
</dd>
<dt> int <tt>ellipse</tt> (int <var>xc</var>, int <var>yc</var>, int <var>rx</var>, int <var>ry</var>, int <var>angle</var>);</dt>
<dt> int <tt>fellipse</tt> (double <var>xc</var>, double <var>yc</var>, double <var>rx</var>, double <var>ry</var>, double <var>angle</var>);</dt>
<dt> int <tt>ellipserel</tt> (int <var>xc</var>, int <var>yc</var>, int <var>rx</var>, int <var>ry</var>, int <var>angle</var>);</dt>
<dt> int <tt>fellipserel</tt> (double <var>xc</var>, double <var>yc</var>, double <var>rx</var>, double <var>ry</var>, double <var>angle</var>);</dt>
<dd><p><tt>ellipse</tt> と <tt>fellipse</tt> は５つの引数、つまり中心 (<var>xc</var>, <var>yc</var>)、
長径と短径の長さ (<var>rx</var> および <var>ry</var>)、プログラム側の座標系の
<em>x</em> 軸からの傾き <var>angle</var> で表される楕円を描く。
描画途中のパスの描画は終了し、新しいパスとして楕円が描かれる。
描画終了時にカーソルは (<var>xc</var>, <var>yc</var>) に移動する。
<tt>ellipserel</tt> と <tt>fellipserel</tt>
は、カーソルに対する相対座標を使うこと以外は
<tt>ellipse</tt> と <tt>fellipse</tt>
と同じである。
</p>
</dd>
<dt> int <tt>endpath</tt> ();</dt>
<dd><p>描画途中のパスがあれば、それを終了し、描画する。
また同時にそれまでに描画したパスを描画状態から削除し、
新しいパスの構築を開始する。
</p>
<p>終了するパスは単純パスでも、<tt>endsubpath</tt> (以下を参照)
を使って構築中の複合パスでもよい。単純パスは
<tt>cont</tt>、<tt>line</tt>、<tt>arc</tt>、<tt>ellarc</tt>、<tt>bezier2</tt>、<tt>bezier3</tt>
またはこれらの浮動小数点版のどれかを一つあるいは複数、
連続して呼ぶことで構築される。
単純パスはまた <tt>circle</tt>、<tt>ellipse</tt>、<tt>box</tt>
のいずれかを一回呼び出すだけでも構築される。
</p>
<p><tt>endpath</tt> は自動的に呼ばれることが多いため、
明示的に呼ばねばならないことは少ない。
パスではないオブジェクトを描画したとき、パスの属性を変更したとき、
カーソル位置を変更するために <tt>move</tt> か <tt>fmove</tt> を呼んだときには、
<tt>endpath</tt> を明示的に呼ぶ。
<tt>restorestate</tt> を呼んでスタックから描画状態 (グラフィクス・コンテキスト)
を取り出した場合、<tt>closepl</tt> を呼んでページの描画を終了した場合にも
<tt>endpath</tt> を呼ぶ。したがってときどきは明示的に <tt>endpath</tt> を呼ぶ必要がある。
リアルタイム描画を行う Plotter の場合は、<tt>endpath</tt>
を呼ぶことにより遅延なく完結したパスを描画することになる。
</p>
</dd>
<dt> int <tt>endsubpath</tt> ();</dt>
<dd><p>構築中の単純パスがあれば、それを完結し次の単純パスの構築を開始する。
<tt>endsubpath</tt> の直後なら構築中の状態のまま <tt>move</tt> または <tt>fmove</tt>
でカーソル位置を移動することができる
(複合パスの構築中などのときは <tt>move</tt> や <tt>fmove</tt> を呼ぶと、
自動的に <tt>endpath</tt>
が呼ばれパスは構築中であっても完結されられる)。
</p>
</dd>
<dt> int <tt>label</tt> (const char *<var>s</var>);</dt>
<dd><p>引数で指定された文字列を現在のカーソル位置に描画する。
文字列は左揃えになり、カーソルは文字列の右端に置かれる。
これは後方互換性を確保するために用意されているものであり、
<tt>alabel</tt>(`l',`x',<var>s</var>) とするのと同じである。
</p>
</dd>
<dt> int <tt>labelwidth</tt> (const char *<var>s</var>);</dt>
<dt> double <tt>flabelwidth</tt> (const char *<var>s</var>);</dt>
<dd><p><tt>labelwidth</tt> と <tt>flabelwidth</tt> は引数で指定された文字列の幅を、
プログラム側座標における現在のフォントの場合で計算して返す。なにも描画しない。
</p>
</dd>
<dt> int <tt>line</tt> (int <var>x1</var>, int <var>y1</var>, int <var>x2</var>, int <var>y2</var>);</dt>
<dt> int <tt>fline</tt> (double <var>x1</var>, double y<var>1</var>, double <var>x2</var>, double <var>y2</var>);</dt>
<dt> int <tt>linerel</tt> (int <var>x1</var>, int y<var>1</var>, int <var>x2</var>, int <var>y2</var>);</dt>
<dt> int <tt>flinerel</tt> (double <var>x1</var>, double y<var>1</var>, double <var>x2</var>, double <var>y2</var>);</dt>
<dd><p><tt>line</tt> と <tt>fline</tt> は、４つの引数で指定される２つの点、
つまり始点 (<var>x1</var>, <var>y1</var>) と終点 (<var>x2</var>, <var>y2</var>) を結ぶ線分を描く。
もしカーソルが (<var>x1</var>, <var>y1</var>)
にあって、パスがまだ描き終わってないときは、
そのパスの続きとして描かれる。
そうでなければ描画途中のパスの描画は終了し、
新しいパスとして線分が描かれる。
いずれにしてもカーソルは (<var>x2</var>, <var>y2</var>) に移動する。
<tt>linerel</tt> と <tt>flinerel</tt>
は、カーソルに対する相対座標を使うこと以外は
<tt>line</tt> と <tt>fline</tt>
と同じである。
</p>
</dd>
<dt>  int <tt>marker</tt> (int <var>x</var>, int <var>y</var>, int <var>type</var>, int <var>size</var>);</dt>
<dt> int <tt>fmarker</tt> (double <var>x</var>, double <var>y</var>, int <var>type</var>, double <var>size</var>);</dt>
<dt> int <tt>markerrel</tt> (int <var>x</var>, int <var>y</var>, int <var>type</var>, int <var>size</var>);</dt>
<dt> int <tt>fmarkerrel</tt> (double <var>x</var>, double <var>y</var>, int <var>type</var>, double <var>size</var>);</dt>
<dd><p><tt>marker</tt> と <tt>fmarker</tt> は４つの引数、つまりプログラム側座標系での位置
(<var>x</var>,<var>y</var>)、種類、サイズの指定にしたがって記号を描画する。
描画途中のパスがあればその描画は終了し、記号が描かれる。
カーソルの位置は (<var>x</var>,<var>y</var>) になる。
<tt>markerrel</tt> と <tt>fmarkerrel</tt>
は、カーソルに対する相対座標を使うこと以外は
<tt>marker</tt> と <tt>fmarker</tt>
と同じである。
</p>
<p>描かれる記号は描画領域上の点の位置を示すものであり、どの Plotter でも使える。
これは <tt>point</tt> 関数 (次に述べる) とは違うものである。
描かれる記号の種類番号 0 から 31 までは標準で用意されている記号、
32 以上のものはそのときのフォントのキャラクタ・マップ上の番号とみなされる。
<a href="#SEC72">プロットに使える記号</a> 参照。
</p>
</dd>
<dt> int <tt>point</tt> (int <var>x</var>, int <var>y</var>);</dt>
<dt> int <tt>fpoint</tt> (double <var>x</var>, double <var>y</var>);</dt>
<dt> int <tt>pointrel</tt> (int <var>x</var>, int <var>y</var>);</dt>
<dt> int <tt>fpointrel</tt> (double <var>x</var>, double <var>y</var>);</dt>
<dd><p><tt>point</tt> と <tt>fpoint</tt> は２つの引数で指定される点 (<var>x</var>, <var>y</var>)
に点を描く。
構築中のパスがあれば <tt>endpath</tt> を呼ぶのと同様に完結させられ、
そのパスが描画され、点が描かれる。
カーソルは (<var>x</var>, <var>y</var>) に移動する。
<tt>pointrel</tt> と <tt>fpointrel</tt>
は、カーソルに対する相対座標を使うこと以外は
<tt>point</tt> と <tt>fpoint</tt>
と同じである。
</p>
<p>しかし point という関数名はあまり正しいとは言えない。
X、X Drawable、PNG、PNM、GIF
のビットマップ形式の画像を出力する Plotter では、一つの点は 1
ピクセルとして描かれる。他の Plotter ではほとんどの場合、
描画できる最小の塗りつぶした円として描かれるため、見えないこともある。
そのため <tt>point</tt> は場合によっては <tt>pixel</tt> と呼ぶ方がいいかもしれない。
</p></dd>
</dl>

<hr size="6">
<a name="Attribute-Functions"></a>
<a name="SEC64"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC63" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC65" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC61" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.4.3 属性設定関数 </h3>

<p>以下に <code>libplot</code> の「属性操作」を行う関数を説明する。Plotter
に対してこれらの関数を実行することで
その関数が対象とする描画属性を指定する値に設定したり、
保存、再設定を行ったりできる。
たとえばパスに関連する属性には、
カーソル位置、ペンの色、塗りつぶしの色、塗りつぶし判定規則、
線の太さ、線種、線の端点の形、つなぎ目の形状、角の尖り具合、変換行列がある。
文字列に関する属性には、
ペンの色、フォント名、フォントサイズ、傾き、変換行列がある。
</p>
<p>パスの属性を設定すると、<code>endpath</code>
を呼んだときと同様、パスの描画が途中であれば、それは完結させられ、
描画される。しかし円、楕円、長方形の `orientation' 属性
(時計回り／反時計回り) についてはそうではない。
それにより複合パス中の円、
楕円、長方形のパスの向きをいろいろと変えることができる。
</p>
<p>現在の C バインディングでは、これらの各関数の第一引数は <code>plPlotter</code>
へのポインタである。また各関数の先頭には &quot;pl_&quot; が、末尾には
&quot;_r&quot; が付いている (&quot;_r&quot; は `revised' または `reentrant'
の意味である)。古い C バインディングについては <a href="#SEC49">古い形式の C 言語の API</a>
を参照のこと。C++ バインディングでは、これらは <code>Plotter</code>
クラスとその派生クラスのメンバー関数であり、
先頭にも末尾にも特になにもついていない。
</p>
<dl compact="compact">
<dt> int <tt>capmod</tt> (const char *<var>s</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
それ以降に描画領域に描くパスの先端の形状を変更する。
指定できる形状は
&quot;butt&quot; (これがデフォルト)、
&quot;round&quot;、
&quot;projecting&quot;
のいずれかである。
しかし形状の違いは、ある程度パスを描く線が太くないと見分けがつかない。
&quot;butt&quot; を指定すると、パスの端はまったく、少しも長くならない。
しかし他の形状では少しだけ長くなる。
&quot;round&quot; の場合はパスの端に半円が付け加えられ、&quot;projecting&quot;
ではパスの端に長方形が付け加えられ、線の太さの半分だけパスが長くなる。
</p>
<p>PNG、PNM、GIF、PCL、HP-GL の Plotter
では４つめの形状として &quot;triangular&quot; も指定できる
(しかし PCL または HP-GL 以外の Plotter
では、まだ部分的にしかサポートしていない)。
&quot;triangular&quot; をサポートしていない Plotter で
&quot;triangular&quot; を指定すると、&quot;round&quot; を指定したのと同じことになる。
</p>
<p>ReGIS または Tektronix の Plotter では <tt>capmod</tt> は無効である。
また <code>HPGL_VERSION</code> パラメータの値が 2 より小さいときは、HP-GL
でも無効である。
同様に、<code>CGM_MAX_VERSION</code> の値が
3 より小さいときは、CGM の Plotter でも無効である。
<a href="#SEC66">Plotter パラメータ</a> 参照。
</p>
</dd>
<dt> int <tt>color</tt> (int <var>red</var>, int <var>green</var>, int <var>blue</var>);   </dt>
<dd><p>この関数を使うと、<tt>pencolor</tt> と <tt>fillcolor</tt>
の両方を呼んでこれ以降に描かれるすべての図形の
線の色と塗りつぶしの色をそれぞれ同じ色に設定するのと同じことができる。
塗りつぶしのときに実際に使われる色は
<tt>filltype</tt> を呼んで指定される「塗りつぶし率」によって変わる。
</p>
</dd>
<dt> int <tt>colorname</tt> (const char *<var>name</var>);</dt>
<dd><p>この関数を使うと、<tt>pencolorname</tt> と <tt>fillcolorname</tt>
の両方を呼んでこれ以降に描かれるすべての図形の
線の色と塗りつぶしの色をそれぞれ同じ色に設定するのと同じことができる。
塗りつぶしのときに実際に使われる色は
<tt>filltype</tt> を呼んで指定される「塗りつぶし率」によって変わる。
</p>
</dd>
<dt> int <tt>fillcolor</tt> (int <var>red</var>, int <var>green</var>, int <var>blue</var>);   </dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降に描画領域に描かれるすべての図形の塗りつぶし色を 48-bit RGB
で指定する。引数 <var>red</var>、<var>green</var>、<var>blue</var>
で塗りつぶし色の赤、緑、青の濃さを指定する。それぞれ
<tt>0x0000</tt>&hellip;<tt>0xffff</tt>、つまり 0&hellip;65535 の範囲の整数である。
(0, 0, 0) を指定すると黒に、(65535, 65535, 65535) を指定すると白になる。
塗りつぶしのときに実際に使われる色は
<tt>filltype</tt> を呼んで指定される「塗りつぶし率」によって変わる。
</p>
</dd>
<dt> int <tt>fillcolorname</tt> (const char *<var>name</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降に描画領域に描かれるすべての図形の塗りつぶし色を色名 <var>name</var>
で指定される色に設定する。
無効な色名を指定したときは &quot;black&quot; に置き換えられる。
設定できる色名については <a href="#SEC73">色名</a> を参照のこと。
&quot;#c0c0c0&quot; にように 6 桁の 16 進数で 
24 ビットカラーとしても指定できる。
</p>
<p>塗りつぶしのときに実際に使われる色は
<tt>filltype</tt> を呼んで指定される「塗りつぶし率」によって変わる。
</p>
</dd>
<dt> int <tt>fillmod</tt> (const char *<var>s</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降に描画領域に描かれるすべての図形について、
塗りつぶし判定の仕方を指定する。これは、
描画領域上のある点がパスの「内側」かどうかを判定する方法である。
&quot;even-odd&quot; (どの Plotter でもこれがデフォルト) または &quot;nonzero-winding&quot;
が指定できる。詳しくは <cite>PostScript Language Reference Manual</cite>
を参照のこと。&quot;even-odd&quot; の代わりに &quot;alternate&quot;、 &quot;nonzero-winding&quot; の代わりに
&quot;winding&quot; と指定しても良い。
</p>
<p>CGM、Fig、ReGIS の Plotter では &quot;nonzero-winding&quot; は無効である。これは、
それぞれの画像形式がその機能をサポートしていないからである。
<code>HPGL_VERSION</code> が 2 より小さいときは HP-GL の Plotter でも無効である
(2 がデフォルト)。<a href="#SEC66">Plotter パラメータ</a> 参照。
</p>
<p>LaserJet III
はヒューレット・パッカードの最初の PCL 5 プリンタで、
これ以降の PCL 5 プリンタと違って nonzero-winding をサポートしていない。
</p>
</dd>
<dt> int <tt>filltype</tt> (int <var>level</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降に描画領域に描かれる図形の塗りつぶしの濃さを指定する。<var>level</var>
の値を 0
にすると、図形は塗りつぶされない。
これがデフォルトである。
<var>level</var> の値を 1 にすると 100% の濃さ (<tt>fillcolor</tt> や
<tt>fillcolorname</tt> で指定されるままの色) で塗りつぶされる。
</p>
<p><var>level</var> は <tt>0x0000</tt>&hellip;<tt>0xffff</tt>、つまり 1&hellip;65535
の範囲の整数でも指定できる。非零であれば塗りつぶしが行われる。
<var>level</var>=<tt>0xffff</tt>
とすると白色で塗りつぶされる。<tt>0x0001</tt> から <tt>0xffff</tt>
の間の値は彩度 (の逆) またはグレイスケールと見なされる。たとえば <tt>0x8000</tt>
は彩度を 50% にして塗りつぶす (実際に塗りつぶされる色は <tt>fillcolor</tt> か
<tt>fillcolorname</tt> で指定された色と白色の中間の色になる)。
</p>
<p>パスに囲まれた領域を塗りつぶし、その外枠を描きたくない場合、<tt>filltype</tt>
で塗りつぶしを指定し <tt>pentype</tt> でパスの描画を抑制すればよい。
</p>
<p>Tektronix の Plotter は塗りつぶしができない。また HP-GL の Plotter
はパラメータ <code>HPGL_VERSION</code> が &quot;1.5&quot; か &quot;2&quot; (2 がデフォルト)
のときにだけ有効である (バージョンが &quot;1&quot; のときは、
座標軸上に置かれた円と長方形だけが塗りつぶし可能である)。
白色を含めた<em>不透明</em>塗りつぶしは、<code>HPGL_VERSION</code> が &quot;2&quot; で
パラメータ <code>HPGL_OPAQUE_MODE</code> が &quot;yes&quot; のとき (それがデフォルト)
だけ可能である。<a href="#SEC66">Plotter パラメータ</a> 参照。
</p>
</dd>
<dt> int <tt>fmiterlimit</tt> (double <var>limit</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降に描画領域に描かれるパスの、角の尖り具合を指定する。
パスの連結のモードが &quot;miter&quot;
に設定されている時 (これがデフォルト) のときに有効である。
パスの連結点における角の内側から外側までの長さが「角幅」である。
この角幅の線の太さに対する割合の最大限度をこの関数で設定できる。
角幅が指定の値を超える場合、パスの連結モードが &quot;bevel&quot; に変更され、
角が「切り落とされる」。
</p>
<p><var>limit</var> の値は 10.43 (デフォルト値。
パスの連結する角度が 11度以下になるとこの値を超える)、または 2.0
(同じく 60度)、または 1.414 (同じく 90度) といった値にすることが多い。
この値は、パスの連結する角度の 1/2 の余割 (コセカント) である。
<var>limit</var> の値を 1.0 にすると、連結する角度に関係なくすべて &quot;bebel&quot;
モードになる。
1.0 より小さな値は無効で、そういう値を指定するとデフォルト値が使われる。
</p>
<p>X Drawable または X の Plotter ではこの設定は無効である。X Window
システムの設定は 10.43 のまま変更できないからである。
また Tektronix、ReGIS、Fig の各 Plotter でも無効であり、
<code>HPGL_VERSION</code> が 2 より小さいときは HP-GL の Plotter でも無効である
(2 がデフォルト)。<a href="#SEC66">Plotter パラメータ</a> 参照。
また HP-GL または PCL の Plotter
のときは、実数値が指定されていた場合、
小数点以下は切り捨てられて整数値が使われる。
</p>
</dd>
<dt> int <tt>fontname</tt> (const char *<var>font_name</var>);</dt>
<dt> double <tt>ffontname</tt> (const char *<var>font_name</var>);</dt>
<dd><p>これ以降に描画領域に描かれる文字列のフォントを引数 <var>font_name</var>
で示されるフォントに設定する。フォントの指定では大文字、小文字を区別せず、
一つのフォントだけが指定できる (実際に描画される文字は
<tt>fontname</tt>、<tt>fontsize</tt>、<tt>textangle</tt> で決定される)。
プログラム側座標でのフォントのサイズが返り値になる。
</p>
<p>デフォルトのフォントは Plotter の種類によって異なっている。
PCL の Plotter では &quot;Univers&quot;、
PNG、PNM、GIF、HP-GL、ReGIS、Tektronix、Metafile の Plotter では
&quot;HersheySerif&quot;、
それ以外の Plotter では &quot;Helvetica&quot; がデフォルトである。<var>font_name</var> が
NULL または空文字列のとき、あるいは無効なフォントを指定したときは、
デフォルトのフォントが使われる。使えるフォントの種類も Plotter
の種類によって異なっている。そのリストについては <a href="#SEC68">利用できるフォント</a>
を参照のこと。
</p>
</dd>
<dt> int <tt>fontsize</tt> (int <var>size</var>);</dt>
<dt> double <tt>ffontsize</tt> (double <var>size</var>);</dt>
<dd><p>これ以降に描画領域に描かれる文字列のフォントのサイズを引数 <var>size</var>
に設定する (実際に描画される文字は
<tt>fontname</tt>、<tt>fontsize</tt>、<tt>textangle</tt> で決定される)。
プログラム側座標でのフォントのサイズが返り値になる。
</p>
<p>負の値を <var>size</var> に指定するとデフォルトのサイズに設定されるが、
具体的な値は Plotter の種類によって異なる。
普通はディスプレイ (の縦と横の短い方) のサイズの 1/50 がデフォルトである。
フォントのサイズが 0 の場合の動作も Plotter の種類によって異なるが、
ほとんどの Plotter ではその場合文字列を描画しない。
</p>
</dd>
<dt> int <tt>joinmod</tt> (const char *<var>s</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降に描画領域に描かれるパスのつなぎ方を設定する。&quot;miter&quot;
(これがデフォルト)、&quot;round&quot;、&quot;bevel&quot; の３種類がある。
線の太さがある程度なければ、３つの種類はそれぞれ見分けがつかないだろう。
線のつなぎ目が &quot;miter&quot; モードのときは、つなぎ目は尖った角になる。
&quot;round&quot; モードでは丸く、&quot;bevel&quot; モードでは切り落としたような感じになる。
あまり尖りすぎている角では、&quot;miter&quot;
が指定されていても角が鋭く尖るのではなく、切り落とされる。
どの程度尖ったら切り落とされるのかは、<tt>fmiterlimit</tt>
を呼んで設定することができる。
</p>
<p>PNG、PNM、GIF、PCL、HP-GL の Plotter では &quot;triangular&quot; も指定できる。他の
Plotter で これを指定すると、&quot;round&quot; と同じ扱いになる。
</p>
<p>この機能は Tektronix と ReGIS の Plotter では無効である。またパラメータ
<code>HPGL_VERSION</code> が 2 より小さいときは HP-GL の Plotter でも無効である
(2 がデフォルト)。
同様に、<code>CGM_MAX_VERSION</code> の値が
3 より小さいときは、CGM の Plotter でも無効である。
<a href="#SEC66">Plotter パラメータ</a> 参照。
</p>
</dd>
<dt> int <tt>linedash</tt> (int <var>n</var>, const int *<var>dashes</var>, int <var>offset</var>);</dt>
<dt> int <tt>flinedash</tt> (int <var>n</var>, const double *<var>dashes</var>, double <var>offset</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降に描画領域に描かれるパス、円、楕円の線種を指定する。<tt>linemod</tt> (後述)
よりもこの関数の方がより詳細に描き方を指定できる。引数 <var>dashes</var> はサイズが
<var>n</var> の配列で、その各要素は正の値でなければならない。
その値はプログラム側の座標系における距離とみなされる。
パス、円、楕円を描く線は、この各要素の値
<var>dashes</var>[0]&hellip;<var>dashes</var>[<var>n</var>-1]
で交互に線の長さと線の間の空白の長さを示される破線として描かれる。
配列の終わりまで破線を描いたら、また配列の先頭から繰り返される。
この配列が空の場合、つまり <var>n</var> が 0
のときは、破線にはならず、実線として描かれる
</p>
<p><var>offset</var> は、パスの先端からの破線の「位相」を指定する。
つまり破線パターンのいくらか進んだところをパスの先端に合わせて、
そこから破線を描く。
<var>offset</var> が 0 ならパスの先端で破線パターンが最初から始まり、
プログラム側座標で長さ
<var>dashes</var>[0] のあとには破線の切れ目の空白になる。もし <var>offset</var> が
<var>dashes</var>[0] と同じ値だったら、パスの先頭は長さ <var>dashes</var>[1]
の切れ目から始まり、以下同様である。<var>offset</var> は負の値でも良い。
</p>
<p><tt>linedash</tt> および <tt>flinedash</tt> の機能には Plotter によっては制限がある。
HP-GL と PCL の Plotter では <var>offset</var> は 0 でなければならない。また
X と X Drawable の Plotter では破線パターン中の線と空白はそれぞれ 255
ピクセル以下でなければならない。
Tektronix、ReGIS、Fig の各 Plotter では <tt>linedash</tt> と <tt>flinedash</tt>
は無効である。またパラメータ <code>HPGL_VERSION</code> が 2 より小さいときは
HP-GL の Plotter でも無効である (2 がデフォルト)。
同様に、<code>CGM_MAX_VERSION</code> の値が
3 より小さいときは、CGM の Plotter でも無効である。
<a href="#SEC66">Plotter パラメータ</a> 参照。
</p>
<p><strong>注意</strong>: プログラム側からデバイス上の座標系への変換が一様 (均一)
ではない場合、
パスを描く破線上の線の部分の長さは、デバイス上では線の向きによって変化する。
しかし現在これが可能なのは PostScript の Plotter だけである。現在の他の Plotter
では、破線の線と空白の長さはパスの向きがどうであっても変わらない。
そのときに使われる線の部分の長さは、
プログラム側座標系で指定された長さから変換されうる長さのうち、
もっとも短い長さになる。
</p>
</dd>
<dt> int <tt>linemod</tt> (const char *<var>s</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降に描画領域に描かれるパス、円、楕円の線種を指定する。指定できる線種は
&quot;solid&quot;、&quot;dotted&quot;、&quot;dotdashed&quot;、&quot;shortdashed&quot;、&quot;longdashed&quot;、&quot;dotdotdashed&quot;、&quot;dotdotdotdashed&quot;、&quot;disconnected&quot;
のいずれかである。最後の一つを除くと、それぞれ以下のような破線を意味する。
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&quot;solid&quot;             --------------------------------
&quot;dotted&quot;            -   -   -   -   -   -   -   -   
&quot;dotdashed&quot;         ----   -   ----   -   ----   -
&quot;shortdashed&quot;       ----    ----    ----    ----    
&quot;longdashed&quot;        -------    -------    -------    
&quot;dotdotdashed&quot;      ----   -   -   ----   -   -
&quot;dotdotdotdashed&quot;   ----   -   -   -   ----   -   -   -
</pre></td></tr></table>

<p>上の図中で、ハイフン一つが描かれている線の太さと同じ長さを示す。
ただしこれは線がある程度太い場合のことであり、その場合は、
線の太さに比例して線分の間隔も広くなる。
</p>
<p>&quot;disconnected&quot; は上記とは違って、直径が線の太さの指示値と同じであるような、
塗りつぶされた円でパスを描くことを指示する。パスの連結点
(パスを構成する線分や円弧のつなぎ目) に中心が来るように円が描かれる。
円や楕円の線種に &quot;disconnected&quot; を指定すると、連結点がないので、見えなくなる。
この線種を指定されたパス、円、楕円には塗りつぶしは指示できない。
</p>
<p>上述の線種はすべてどの Plotter にも使えるが、例外がある。
パラメータ <code>HPGL_VERSION</code> が &quot;2&quot; でないときは、
HP-GL の Plotter では &quot;dotdotdotdashed&quot; は使えない (2 がデフォルト)。
Tektronix の Plotter では  &quot;dotdotdotdashed&quot; は無効である。
<a href="#SEC66">Plotter パラメータ</a> 参照。
</p>
</dd>
<dt> int <tt>linewidth</tt> (int <var>size</var>);</dt>
<dt> int <tt>flinewidth</tt> (double <var>size</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降に描画領域に描かれるパス、円、楕円の線の太さを、
プログラム側の座標系における値で指定する。
負の値を指定すると、その値は無視され、デフォルト値に設定される。
デフォルトの太さは Plotter の種類によって異なる。ほとんどの Plotter
では描画領域の (縦か横の短い方の) 幅の長さの 1/850 である。しかし
X、X Drawable、PNG、PNM、GIF のビットマップ画像の Plotter
では、デフォルト値は 0 である。
</p>
<p>太さ 0 の線はその Plotter で描画できるもっとも細い線になるが、
しかし <code>idraw</code> や <code>xfig</code> では、太さ 0 の線は表示されない。
そのため PostScript や Fig の Plotter
の出力画像を編集したいようなときは、太さ 0 の線は避けた方が良い。
</p>
<p>Tektronix、ReGIS の Plotter では線の太さはデフォルト以外は使えない。
またそれは、パラメータ <code>HPGL_VERSION</code> が 2 より小さいときは
HP-GL の Plotter でも同じである (2 がデフォルト)。
<a href="#SEC66">Plotter パラメータ</a> を参照のこと。
</p>
<p><strong>注意</strong>: プログラム側からデバイス上の座標系への変換が一様 (均一)
ではない場合、
パスを描く線の太さは、デバイス上では線の向きによって変化する。
しかし現在これが可能なのは PostScript の Plotter だけである。現在の他の Plotter
では、線の太さはパスの向きがどうであっても変わらない。
そのときに使われる線の太さは、
プログラム側座標系で指定された太さから変換されうる太さのうち、
もっとも短い太さになる。
</p>
</dd>
<dt> int <tt>move</tt> (int <var>x</var>, int <var>y</var>);</dt>
<dt> int <tt>fmove</tt> (double <var>x</var>, double <var>y</var>);</dt>
<dt> int <tt>moverel</tt> (int <var>x</var>, int <var>y</var>);</dt>
<dt> int <tt>fmoverel</tt> (double <var>x</var>, double <var>y</var>);</dt>
<dd><p>二つの引数で指定される一つの点 (<var>x</var>, <var>y</var>) にカーソルを移動する。
描画途中のパスがあった場合には、<tt>endpath</tt>
を呼んだときと同様にそのパスはそこで完結させられ、カーソルが
(<var>x</var>, <var>y</var>) に移動する。これはプロッタがペンを上げて、
線を描かずに指定された点まで移動するのと同じ操作になる。
<tt>moverel</tt> と <tt>fmoverel</tt>
は、カーソルに対する相対座標を使うこと以外は
<tt>move</tt> と <tt>fmove</tt>
と同じである。
</p>
<p><tt>openpl</tt>
操作で新しくページを開始したとき、カーソルの位置はプログラム側座標での (0,0)
にセットされる。描画を行う操作ではほとんどの場合カーソルの位置が移動する。
<a href="#SEC63">図形関数</a> 参照。
</p>
</dd>
<dt> int <tt>orientation</tt> (int <var>direction</var>);</dt>
<dd><p>描画領域に円、楕円、長方形を描くときの線の向きを指定する。
反時計回りは <var>direction</var> を 1 に、時計回りは -1 にする。
デフォルトは 1 である。
</p>
<p>円、楕円、長方形の輪郭を破線などで描く場合や、
それらが複合パスの一部である場合に、線の向きが意味を持つ。
塗りつぶし則に &quot;nonzero-winding&quot; が指定されているときは、
複合パス中の単純パスの向きによって、図形の「内側」、「外側」が決まるため、
線の向きの設定によって視覚的な効果が得られることもある。
</p>
</dd>
<dt> int <tt>pencolor</tt> (int <var>red</var>, int <var>green</var>, int <var>blue</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降の描画に使われるペンの色を、48-bit RGB で指定する。
３つの引数 <var>red</var>、<var>green</var>、<var>blue</var>
で赤、緑、青の濃さを指定する。それぞれ
<tt>0x0000</tt>&hellip;<tt>0xffff</tt>、つまり 0&hellip;65535 の範囲の整数である。
(0, 0, 0) を指定すると黒に、(65535, 65535, 65535) を指定すると白になる。
</p>
<p>HP-GL の Plotter
はパラメータ <code>HPGL_VERSION</code> が &quot;2&quot; で、
パラメータ <code>HPGL_OPAQUE_MODE</code> が &quot;yes&quot; のとき
だけペンの色に白色が使える。
<a href="#SEC66">Plotter パラメータ</a> 参照。
</p>
</dd>
<dt> int <tt>pencolorname</tt> (const char *<var>name</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降の描画に使われるペンの色を、<var>name</var> で指定される色に設定する。
無効な色名を指定したときは &quot;black&quot; に置き換えられる。
&quot;#c0c0c0&quot; にように 6 桁の 16 進数で
24 ビットカラーでも指定できる。
</p>
<p>HP-GL の Plotter
はパラメータ <code>HPGL_VERSION</code> が &quot;2&quot; で、
パラメータ <code>HPGL_OPAQUE_MODE</code> が &quot;yes&quot; のとき
だけペンの色に白色が使える。
<a href="#SEC66">Plotter パラメータ</a> 参照。
</p>
</dd>
<dt> int <tt>pentype</tt> (int <var>level</var>);</dt>
<dd><p>構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了して描画し、
これ以降の描画に使われるペンのレベルを、<var>level</var> で指定される値に設定する。
<var>level</var> の値を 1 に設定すると、これ以前の最後に実行された <tt>pencolor</tt>
または <tt>pencolorname</tt> で指定された色で図形の輪郭線を描く。
これがデフォルトである。<var>level</var> の値を 0 にすると輪郭は描かれない。
</p>
<p>輪郭のない図形を描きたいときは、
<tt>pentype</tt> で輪郭を描かないように指定し、
<tt>filltype</tt> で内部を塗りつぶすように指定するとよい。
</p>
<p><tt>pentype</tt> による指定は記号や点 (ピクセル) の描画にも適用される。
<var>level</var> の値を 0 にするとこれらも描かれなくなる。
</p>
<p><strong>注意</strong>: 将来的には <tt>pentype</tt> の指定は文字列に対しても有効になる予定
(値を 0 にすると文字列も描かれなくなる予定) だが、
現在のバージョンでも Hershey フォントの文字に対しては有効である。Hershey
フォントの文字は線分から構築されるパスで描かれるからである。
</p>
</dd>
<dt> int <tt>restorestate</tt> ();</dt>
<dd><p>現在の描画状態をスタックから取り出して復元する。描画状態は、
この節で説明されている <code>libplot</code> の属性からなる。
スタックからそれらを取り出すことにより、
各種の描画属性の設定が取り出した値 (スタックに積んだときの値) に再設定される。
構築途中のパスも、描画状態の一部として扱われる。
したがって <tt>restorestate</tt> を呼ぶと自動的に <tt>endpath</tt> が呼ばれ、
そのときに構築途中のパスがあったときはその構築はそこで終了する。
また <code>closepl</code> を呼ぶと
それまでに <code>restorestate</code> が呼ばれたときと同様に、
スタックに積まれている描画状態が復元される。
</p>
</dd>
<dt> int <tt>savestate</tt> ();</dt>
<dd><p>現在の描画状態をスタックに積んで保存する。描画状態は、
この節で説明されている <code>libplot</code> の属性からなる。
構築途中のパスがあれば、そのことも描画状態の一部として扱われる。
パスは線分や円弧を一つずつつなげて描かれるものだからである。
<tt>savestate</tt> によって (保存された描画状態の代わりに)
新しく作られる描画状態には、なんのパスも含まれない。
それを含む描画状態が <tt>restorestate</tt>
を呼ぶことでスタックから取り出され復元されるときには、
そのパスは構築途中の状態で復元され、続きを描画することができる。
</p>
</dd>
<dt> int <tt>textangle</tt> (int <var>angle</var>);  </dt>
<dt> double <tt>ftextangle</tt> (double <var>angle</var>);  </dt>
<dd><p>これ以降に描画領域に描画される文字列に対して、それを傾ける角度を、引数
<var>angle</var> で度 (degree) で <em>x</em>
(横)軸からの角度として指定される値に設定する。
デフォルト値は 0 である
(実際に描画される文字は
<tt>fontname</tt>、<tt>fontsize</tt>、<tt>textangle</tt> で決定される)。
プログラム側座標でのフォントのサイズが返り値になる。
</p>
<p><strong>注意</strong>: X Window
では、システムによっては回転角が指定した通りにならないことがある。
そういったシステムでは事実上、回転角には 0 しか指定できない。
</p></dd>
</dl>

<hr size="6">
<a name="Mapping-Functions"></a>
<a name="SEC65"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC64" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC66" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC61" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 9.4.4 座標変換関数 </h3>

<p>以下に <code>libplot</code> の「座標変換関数」について説明する。
これらの関数を Plotter に対して実行すると、
プログラム側の座標系からデバイス上の座標系への変換を操作することができる。
この変換がどう行われるのかは、
プログラム側の座標系上で考えるようになっている。
以下の操作は、その操作を行った後に描画領域に描かれる図形に対して有効になる。
</p>
<p>関数名は、PostScript 言語で定義されている同様の機能の関数と同様になっている。
これらの関数をどう使うと便利か、については PostScript プログラミングの本か、
<cite>PostScript Language Reference Manual</cite> を参照されたい。
</p>
<p>これらの操作を行うときに構築中のパスがあれば、<tt>endpath</tt>
を呼んだときと同様その構築を完了する。
</p>
<p>現在の C バインディングでは、これらの各関数の第一引数は <code>plPlotter</code>
へのポインタである。また各関数の先頭には &quot;pl_&quot; が、末尾には
&quot;_r&quot; が付いている (&quot;_r&quot; は `revised' または `reentrant'
の意味である)。古い C バインディングについては <a href="#SEC49">古い形式の C 言語の API</a>
を参照のこと。C++ バインディングでは、これらは <code>Plotter</code>
クラスとその派生クラスのメンバー関数であり、
先頭にも末尾にも特になにもついていない。
</p>
<dl compact="compact">
<dt> int <tt>fsetmatrix</tt> (double <var>m0</var>, double <var>m1</var>, double <var>m2</var>, double <var>m3</var>, double <var>tx</var>, double <var>ty</var>);</dt>
<dd><p>プログラム側の座標から NDC (normalized device coordinate)
上での値への変換を、変換行列
[<var>m0</var> <var>m1</var> <var>m2</var> <var>m3</var> <var>tx</var> <var>ty</var>]
を使って行うように設定する。
この変換行列によりプログラム側の座標系から、
正規化された出力でバイス上の座標系への変換が設定され、
この操作以降に描画領域に描かれる図形に対して、この変換が適用される。
</p>
<p>NDC 座標系では、描画領域 (または viewport) の四隅はそれぞれ
<code>(0,0)</code>、<code>(1,0)</code>、<code>(1,1)</code>、<code>(0,1)</code>
である。描画領域の大きさや物理的な長さについては
<a href="#SEC74">ページと描画領域のサイズ</a>
を参照のこと。
</p>
<p>プログラム側で使う座標系から NDC への変換行列は、デフォルトでは
[1 0 0 1 0 0] であり、つまりプログラム側の座標系と NDC は一致している。
変換行列は以下の関数や
<tt>space</tt>、<tt>fspace</tt>、<tt>space2</tt>、and <tt>fspace2</tt>
でも指定できる。
</p>
</dd>
<dt> int <tt>fconcat</tt> (double <var>m0</var>, double <var>m1</var>, double <var>m2</var>, double <var>m3</var>, double <var>tx</var>, double <var>ty</var>);</dt>
<dd><p>プログラム側の座標系から NDC への変換の際に、
その変換行列よりも先にプログラム側座標に行列
[<var>m0</var> <var>m1</var> <var>m2</var> <var>m3</var> <var>tx</var> <var>ty</var>]
をかけることで、変換を修正するように設定する。
つまり、プログラム側の座標値に 2 x 2 の行列
[<var>m0</var> <var>m1</var> <var>m2</var> <var>m3</var>]
をかけて、それから <em>x</em> 方向に <var>tx</var>、
<em>y</em> 方向に <var>ty</var> だけ平行移動する線形変換と同じである。
</p>
<p><tt>fconcat</tt> は内部で <tt>fsetmatrix</tt> を呼び出して使っている。
<tt>fconcat</tt> で指定できる変換の一部を簡便に指定する関数として、以下の３つの関数
(<tt>frotate</tt>、<tt>fscale</tt>、<tt>ftranslate</tt>)
が用意されている。
</p>
</dd>
<dt> int <tt>frotate</tt> (double <var>theta</var>);</dt>
<dd><p>プログラム側の座標系から NDC への変換の際に、
その変換行列よりも先にプログラム側座標に行列
[cos(<var>theta</var>) sin(<var>theta</var>) -sin(<var>theta</var>) cos(<var>theta</var>) 0 0]
をかけることで、変換を修正する。
プログラム側座標系の座標軸を <var>theta</var> で指定される角度だけ、
プログラム側座標系の原点を中心に回転させる。
原点の位置と <em>x</em> と <em>y</em> の長さは変わらない。
</p>
</dd>
<dt> int <tt>fscale</tt> (double <var>sx</var>, double <var>sy</var>);</dt>
<dd><p>プログラム側の座標系から NDC への変換の際に、
その変換行列よりも先にプログラム側座標に行列
[<var>sx</var> 0 0 <var>sy</var> 0 0]
をかけることで、変換を修正する。
プログラム側の座標系での <em>x</em> と <em>y</em> の単位長さを、元の座標系における
<var>sx</var> と <var>sy</var> の長さにする。
原点の位置と座標軸の向きは変わらない。
</p>
</dd>
<dt> int <tt>ftranslate</tt> (double <var>tx</var>, double <var>ty</var>);</dt>
<dd><p>プログラム側の座標系から NDC への変換の際に、
その変換行列よりも先にプログラム側座標に行列
[0 0 0 0 <var>tx</var> <var>ty</var>]
をかけることで、変換を修正する。
プログラム側の座標系の原点を、プログラム側座標における <em>x</em> 方向に
<var>tx</var>、<em>y</em> 方向に <var>ty</var> だけ移動する。
<em>x</em> と <em>y</em> の長さと座標軸の向きは変わらない。
</p></dd>
</dl>

<hr size="6">
<a name="Plotter-Parameters"></a>
<a name="SEC66"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC65" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC45" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 9.5 Plotter パラメータ </h2>

<p><code>libplot</code> ライブラリの設計に当たっては、
各描画デバイスの各機能とは独立して描画が行えるようにしているが、各 Plotter
でそれぞれ独立に異なった描画ができるように、
Plotter パラメータでさまざまな動作を個別に指定できるようにしている。
パラメータは型のないポインタ (<code>void *</code>) でその値を指定できるが、
ほとんどのパラメータは文字列型 (<code>char *</code>) である。
</p>
<p>Plotter に対するパラメータの値は、
どのパラメータも、その Plotter が生成されてから破棄されるまで変更できない。
その値は Plotter が生成されるときに決定される。C バインディングでは
<code>pl_setplparam</code> 関数でその値を指定する。<code>pl_setplparam</code>
関数は Plotter のパラメータを保持する <code>plPlotterParams</code>
型を持つオブジェクトに対して操作を行う。<code>pl_newpl_r</code>
関数が呼ばれて Plotter を生成するときに、その <code>plPlotterParams</code>
型のオブジェクトを最後の引数として渡す。
</p>
<p>文字列をとるパラメータの場合、
Plotter の生成時にそれが設定されておらず、
パラメータと同名の環境変数に値がセットされているときは、それが使われる。
また同名の環境変数も設定されていないときは、デフォルト値が使われる。
これにより、実行時にプログラムを制御することができる。
さほど重要でないようなパラメータを、
プログラムの実行時に環境変数で指定するようにすることができる。
</p>
<p>C++ バインディングでは <code>PlotterParams</code> クラスとそのメンバー関数
<code>PlotterParams::setplparam</code> がそれぞれ、<code>plPlotterParams</code> 型と関数
<code>pl_setplparam</code> に相当する。
</p>
<p>以下に、現在有効なパラメータを列挙する (認識されないパラメータは省いてある)。
重要なパラメータは X の Plotter の <code>DISPLAY</code>、
X、PNG、PNM、GIF  の Plotter の <code>BITMAPSIZE</code>、
Illustrator、PostScript、CGM、Fig、HP-GL の Plotter の <code>PAGESIZE</code>、
Metafile 以外のすべての Plotter の <code>ROTATION</code>
である。
最初にこの４つのパラメータの説明を挙げ、
他のものはその後にアルファベット順に述べる。
その中で、たとえば名前が &quot;HPGL&quot; で始まるようなパラメータは、その Plotter
に対してだけ有効である。
</p>
<dl compact="compact">
<dt> <code><tt>DISPLAY</tt></code></dt>
<dd><p>(デフォルト値は NULL)
グラフィクス・ディスプレイのウィンドウが開かれる X Window
システムのディスプレイを指定する。これは X の Plotter
でだけ有効である。
</p>
</dd>
<dt> <code>BITMAPSIZE</code></dt>
<dd><p>(デフォルト値は &quot;570x570&quot;)
ピクセル単位での描画領域のサイズ。これは
X、PNG、PNM、GIF  の Plotter でだけ有効である。X の Plotter
では、これが設定されていなければ X resource の <code>Xplot.geometry</code>
から自動的に設定されるが、これは後方互換性を保つための仕様である。
</p>
<p>X の Plotter ではこのパラメータによりウィンドウの位置も指定できる。
たとえば <code>BITMAPSIZE</code> を &quot;570x570+0+0&quot; と指定すると、
X Window システムの画面の左上隅にウィンドウが開かれる。
</p>
</dd>
<dt> <code>PAGESIZE</code></dt>
<dd><p>(デフォルト値は &quot;letter&quot;)
描画領域 (viewport) が置かれる用紙のサイズ。これは
SVG、Illustrator、PostScript、CGM、Fig、PCL、HP-GL
の Plotter でだけ有効である。
&quot;letter&quot; サイズは 8.5in x 11in である。ISO の&quot;a0&quot;&hellip;&quot;a4&quot;
や ANSI の &quot;a&quot;&hellip;&quot;e&quot; の各サイズも指定できる
(&quot;letter&quot; は &quot;a&quot; を、&quot;tabloid&quot; は &quot;b&quot; を指定するのと同じである)。
&quot;legal&quot;、&quot;ledger&quot;、&quot;b5&quot; も指定できる。
</p>
<p>Illustrator、PostScript、PCL、FIG の各 Plotter では、
描画領域は用紙の中央に置かれ、
用紙の幅いっぱいの大きさの正方形の領域になる
(たとえば <code>PAGESIZE</code> が &quot;letter&quot; のときは、用紙の中央に置かれた一辺が
8in の正方形になる)。HP-GL の Plotter
では、描画領域の大きさは同じだが、デフォルトでは中央には置かれない。
SVG と WebCGM
では、画像がウェブページ上でどこに置かれるかは画像自体では指定されない。
画像の大きさは指定できるが、
それもウェブページ上に表示されるときには変更されるのが普通である。SVG と CMG
の Plotter の描画領域のデフォルトのサイズは、ほかの Plotter と同じである。
</p>
<p>各出力形式での、描画領域のデフォルトの大きさ (と位置)
については <a href="#SEC74">ページと描画領域のサイズ</a> を参照のこと。
描画領域の縦、横の幅はそれぞれ指定できるので、
必ずしもデフォルト値を使う必要はない。たとえば <code>PAGESIZE</code> には
&quot;letter,xsize=4in&quot; や &quot;a4,xsize=10cm,ysize=15cm&quot; といった指定ができる。
長さには負の値も指定できる (そのときは鏡像が描かれる)。
</p>
<p>SVG と CGM 以外の Plotter では用紙上の描画領域の相対的な位置は、
ベクトルとして指定できる。たとえば <code>PAGESIZE</code> には
&quot;letter,yoffset=1.2in&quot; や &quot;a4,xoffset=-5mm,yoffset=2.0cm&quot;
といった指定ができる。長さの単位にはインチ、cm、mm が使える。指定には
&quot;xsize&quot;、&quot;ysize&quot; と &quot;xoffset&quot;、&quot;yoffset&quot; を合わせて使うことができる。
</p>
<p>また用紙の左下隅から見た描画領域の左下隅の位置を指定することで、
描画領域の位置を指定することもできる。たとえば <code>PAGESIZE</code> には
&quot;letter,xorigin=2in,yorigin=3in&quot; や &quot;a4,xorigin=0.5cm,yorigin=0.5cm&quot;
といった指定ができる。
&quot;xorigin&quot;、&quot;yorigin&quot; は &quot;xsize&quot;、&quot;ysize&quot; と合わせて使うことができる。
SVG と WebCGM
では、画像がウェブページ上でどこに置かれるかは画像自体では指定されないため、
&quot;xoffset&quot;、&quot;yoffset&quot;、&quot;xorigin&quot;、&quot;yorigin&quot;
は無視される。
</p>
</dd>
<dt> <code>ROTATION</code></dt>
<dd><p>(デフォルト値は &quot;0.0&quot;)
このパラメータは Metafile
形式では具体的な出力デバイスが想定されていないので無効だが、他のすべての
Plotter に対して有効である。用紙上での描画領域 (viewport) の傾きを、
デフォルトの角度に対する反時計回り方向での相対的な角度 (度数) で指定する。
</p>
<p>描画領域は傾けられても、その四隅の用紙上の位置は変わらない。
傾けられるのはそこに描かれる図形である。
描画領域が正方形ではなく長方形の場合、
単に傾くだけではなく、縦と横で違うスケーリングが行われることになる。
</p>
<p>このパラメータは、用紙の横置きと縦置き (ランドスケープとポートレート)
を切り替えるときに使う。ライブラリの内部で NDC (normalized device coordinate)
からプログラム側座標系へのアフィン変換が設定される。
</p>
</dd>
<dt> <code>BG_COLOR</code></dt>
<dd><p>(デフォルト値は &quot;white&quot;)
各ページが開始されるときの描画領域の背景色を設定する。これは
X、PNG、PNM、GIF、CGM、ReGIS、Metaifle の各 Plotter で有効である。また
X Drawable では背景色は <code>erase</code>
が呼ばれたときにだけ見えるようになる。
指定できる色名については <a href="#SEC73">色名</a> を参照のこと。
背景色は Plotter が生成された後でも <tt>bgcolor</tt> (または <tt>bgcolorname</tt>) と
<tt>erase</tt> を行うことでいつでも変更できる。
</p>
<p>SVG と CGM の Plotter では背景色に &quot;none&quot; を指摘できる。
これにより背景色が無効になり、描かれる画像には背景がなくなる。
ウェブページに載せる画像を生成するときに指定するとよい。
</p>
</dd>
<dt> <code>CGM_ENCODING</code></dt>
<dd><p>(デフォルト値は &quot;binary&quot;)
CGM の Plotter でだけ有効である。&quot;binary&quot; を指定すると、CGM
出力がバイナリ・モードで行われる。&quot;clear_text&quot;
を指定すると、人間に読める形式で出力される。webCGM
プロファイルではバイナリ形式とすることになっているが、CGM
を表示する多くの実装ではどちらの形式でも表示できる。
３つめの標準形式 &quot;character&quot; は現在はサポートしていない。
</p>
</dd>
<dt> <code>CGM_MAX_VERSION</code></dt>
<dd><p>(デフォルト値は &quot;4&quot;)
CGM の Plotter でだけ有効である。生成される CGM 出力形式のバージョンを最大で
いくつまでにするかを指定する。CGM
を表示するソフトウェアの古いものはバージョン 1 しかサポートしていない。
フォントや線種を十分にサポートするのはバージョン 3 以降である。
デフォルトでは、現在の <code>libplot</code> はバージョン 3 形式で出力し、
バージョン 4 の機能は使わない。
</p>
</dd>
<dt> <code>EMULATE_COLOR</code></dt>
<dd><p>(デフォルト値は &quot;no&quot;)
すべての Plotter で有効である。これを &quot;yes&quot;
に設定すると、描画に使われる色が、適切なグレイスケールに置き換えられる。
CIE 輝度の計算法としてよく知られている、<em>0.212671R + 0.715160G
+ 0.072169B</em> という式で変換する。
</p>
<p>このパラメータは、PCL の Plotter で白黒の PCL 5
機器に出力するときはあまり意味がない。
白黒の LaserJet などの白黒の PCL 5
機器では、もともと色のエミュレーションの機能が乏しく、
HP-GL/2 でのペン色を、黄色を含めて７色とも黒に置き換えてしまう。
</p>
</dd>
<dt> <code>GIF_ANIMATION</code></dt>
<dd><p>(デフォルト値は &quot;yes&quot;)
このパラメータは GIF の Plotter でだけ有効である。&quot;yes&quot; に設定すると
<code>erase</code> で行われる処理が変わる。<code>erase</code>
の実行は、その最初のときを除いて、一つの疑似 GIF
ファイルに出力される複数の一連の画像の区切りとして扱われる。
&quot;no&quot; に設定すると、
他のリアルタイム描画を行わない Plotter における場合と同様に、
描画途中の図形を背景色で塗りつぶすことで消去する。
&quot;no&quot; に設定されている場合、一つの画像につき一つの疑似 GIF
ファイルが出力される。
</p>
</dd>
<dt> <code>GIF_DELAY</code></dt>
<dd><p>(デフォルト値は &quot;0&quot;)
このパラメータは GIF の Plotter でだけ有効である。アニメーション疑似 GIF
における各コマの表示時間を 1/100 秒単位で指定する。指定できる範囲は
&quot;0&quot;&hellip;&quot;65535&quot; である。
</p>
</dd>
<dt> <code>GIF_ITERATIONS</code></dt>
<dd><p>(デフォルト値は &quot;0&quot;)
このパラメータは GIF の Plotter でだけ有効である。アニメーション疑似 GIF
において、画像が最後まで表示された後に冒頭からまた繰り返す回数を指定する。
指定できる範囲は &quot;0&quot;&hellip;&quot;65535&quot; である。
</p>
</dd>
<dt> <code>HPGL_ASSIGN_COLORS</code></dt>
<dd><p>(デフォルト値は &quot;no&quot;)
このパラメータは HP-GL の Plotter で
<code>HPGL_VERSION</code> が &quot;2&quot; のときにだけ有効である。
&quot;no&quot; を指定するとパラメータ <code>HPGL_PENS</code>
であらかじめ設定されている色数のペンだけが使えるようになる。&quot;yes&quot;
にすると、使えるペンの色は <code>HPGL_PENS</code> による制約を受けず、
必要に応じて設定される 1&hellip;31
番の範囲の番号で指定される「論理ペン」に色を設定できる。
カラーの LaserJet プリンタおよび DesignJet プロッタ以外では、HP-GL/2
をサポートするデバイスでもこの「論理ペン」機能が使える機種は多くないため、
この機能の利用には注意を払う必要がある。
</p>
</dd>
<dt> <code>HPGL_OPAQUE_MODE</code></dt>
<dd><p>(デフォルト値は &quot;yes&quot;)
このパラメータは HP-GL の Plotter で
<code>HPGL_VERSION</code> が &quot;2&quot; のときにだけ有効である。
&quot;yes&quot; を設定すると HP-GL/2 出力は透明モードから不透明モードに切り替わる。
これにより、白色あるいは他の不透明な色による図形の塗りつぶしができるようになる。
同様に、0 番のペン を使うことで白色の線を描けるようになる。HP-GL/2
をサポートしている機器でも必ずしもこの不透明モードや0 番のペン
による白線が使える訳ではない。
特に HP-GL/2 でも、ペン・プロッタでは無効である。
また古い HP-GL/2
の機器には不透明モードに切り替えるときに不都合があるものがある。
HP-GL の Plotter の出力をそういった機器に使うときは、このパラメータを &quot;no&quot;
にしておくとよい。
</p>
</dd>
<dt> <code>HPGL_PENS</code></dt>
<dd><p>(デフォルト値は
<code>HPGL_VERSION</code> が &quot;1.5&quot; または &quot;2&quot; のとき
&quot;1=black:2=red:3=green:4=yellow:5=blue:6=magenta:7=cyan&quot;、
<code>HPGL_VERSION</code> が &quot;1&quot; のとき
&quot;1=black&quot;)
このパラメータは HP-GL の Plotter でだけ有効である。
利用できるペンを設定する。設定の仕方は、デフォルト値を見て分かる通りである。
1&hellip;31 番の各ペンに色を指定できる。
指定できる色名については <a href="#SEC73">色名</a> を参照のこと。
ペン 1 の指定は、省略してはならない。しかしかならずしも黒でなくてもよい。
2&hellip;31 番の他のペンの指定は省略してもよい。
</p>
</dd>
<dt> <code>HPGL_ROTATE</code></dt>
<dd><p>(デフォルト値は &quot;0&quot;)
このパラメータは HP-GL の Plotter でだけ有効である。
用紙上の描画領域 (viewport) を、指定された角度 (度数) だけ回転させて置く。
指定できる角度は &quot;0&quot;、&quot;90&quot;、&quot;180&quot;、&quot;270&quot; であり、&quot;0&quot; と &quot;90&quot;
の代わりに&quot;no&quot; と &quot;yes&quot; でも指定できる。&quot;180&quot; と &quot;270&quot; は
<code>HPGL_VERSION</code> が &quot;2&quot; のときにだけ有効である。
</p>
<p>このパラメータは <code>ROTATION</code> による指定とは異なる。<code>ROTATION</code>
パラメータでは、描画領域そのものはそこにあるままで回転しないが、
<code>HPGL_ROTATE</code>
では描画領域に対して回転と、用紙と描画領域の左下隅同士の間の距離を指定できる。
これは HP-GL 言語の機能である。
</p>
<p>このパラメータを使うことで、
用紙の向き (ポートレート／ランドスケープ) を簡単に指定できることになる。
デフォルトの用紙の向きは、HP-GL のプロッタでは横向き (ランドスケープ)、
プリンタでは縦 (ポートレート) ことがあるので、
出力機器によってこのパラメータの設定を変えればよい。
</p>
</dd>
<dt> <code>HPGL_VERSION</code></dt>
<dd><p>(デフォルト値は &quot;2&quot;)
このパラメータは HP-GL の Plotter でだけ有効である。
&quot;1&quot; は元々の HP-GL 形式、&quot;1.5&quot; は HP7550A グラフィクス・プロッタや
HP758x、HP7595A、HP7596A といった製図用プロッタ (いくつかの HP-GL/2
拡張機能を備えた HP-GL プロッタ)、
&quot;2&quot; はもっと新しい HP-GL/2 機器に対応した形式で出力を行うことを指定する。
この値が &quot;2&quot; よりも小さい場合は、使えるフォントはベクトル・フォントのみ、
描ける線の太さはデフォルトの太さのみになるため、 
<tt>linewidth</tt>、<tt>capmod</tt>、<tt>joinmod</tt>、<tt>fmiterlimit</tt>
による操作は無効になる。また塗りつぶし判定の方法である
`nonzero winding number rule' がサポートされないため、<tt>fillmod</tt> も無効である。
さらに <code>HPGL_VERSION</code> が &quot;1&quot;
の場合は、任意のパスの内側の塗りつぶしができなくなる
(座標軸上の円と長方形の内部の塗りつぶしだけができる)。
</p>
</dd>
<dt> <code>INTERLACE</code></dt>
<dd><p>(デフォルト値は &quot;no&quot;)
このパラメータは PNG と GIF の各 Plotter でだけ有効である。
このパラメータを &quot;yes&quot;
に設定すると、以降に生成されるファイルはインターレースになる。
そうやって生成されたファイルは、
多くのアプリケーションでインターレース・モード (ノンリニア・モード)
で表示される。
</p>
</dd>
<dt> <code>MAX_LINE_LENGTH</code></dt>
<dd><p>(デフォルト値は &quot;500&quot;)
描画されるまでに一本のパスを構成できる連結点の数の最大数を設定する。
描画されるときにはパスは自動的に (特に何の通知もなく) 複数のパスに分割される。
パスに塗りつぶしが行われるときには、分割は行われない。
</p>
<p>このパラメータは Tektronix と metafile 以外のどの Plotter でも有効である。
このパラメータは、出力デバイスによっては描画用のバッファのサイズが限られている
(たとえば PostScript プリンタや HP-GL のペン・プロッタなど)
ために用意されている。Tektronix と metafile の Plotter
はリアルタイムで描画を行い、したがってバッファを持たないため、
このパラメータは無効である。
</p>
</dd>
<dt> <code>META_PORTABLE</code></dt>
<dd><p>(デフォルト値は &quot;no&quot;)
このパラメータは metafile の Plotter でだけ有効である。
&quot;yes&quot; に設定しておくと、人間に読める形式で画像データが出力される。
デフォルトではバイナリ形式である。<a href="#SEC75">Metafile 形式</a> 参照。
</p>
</dd>
<dt> <code>PCL_ASSIGN_COLORS</code></dt>
<dd><p>(デフォルト値は &quot;no&quot;)
このパラメータは PCL の Plotter でだけ有効である。
&quot;no&quot; に設定しておくと、あらかじめ設定されている限られた色数のペンだけが使える。
&quot;yes&quot; にしておくとこの制限はなくなり、
必要なら様々な色を「論理ペン」に設定できる。
カラーの LaserJet プリンタ以外では、PCL 5
をサポートしていてもこの機能が使えるものは多くない。
したがってこの機能を使うときには注意が必要である。
</p>
</dd>
<dt> <code>PCL_BEZIERS</code></dt>
<dd><p>(デフォルト値は &quot;yes&quot;)
このパラメータは PCL の Plotter でだけ有効である。
&quot;yes&quot; にしておくとベジェ曲線を描くときにそれに特化した命令を使う。
&quot;no&quot; のときにはその命令は使われず、ベジェ曲線は多角形で近似して描かれる。
ヒューレット・パッカードの PCL 5 プリンタは、初代の LaserJet III
を除いてすべての機種でベジェ描画命令をサポートしている。
</p>
</dd>
<dt> <code>PNM_PORTABLE</code></dt>
<dd><p>(デフォルト値は &quot;no&quot;)
このパラメータは PNM の Plotter でだけ有効である。
&quot;yes&quot; に設定しておくと、人間に読める形式で画像データが出力される。
デフォルトではバイナリ形式である。PBM/PGM/PPM の画像形式は、
バイナリ形式でも機種依存性がないように設計されていて十分に portable なので、
このパラメータ名はあまり適切ではない。
</p>
</dd>
<dt> <code>TERM</code></dt>
<dd><p>(デフォルト値は NULL)
このパラメータは Tektronix の Plotter でだけ有効である。
この値を &quot;xterm&quot;、&quot;nxterm&quot;、&quot;kterm&quot; のいずれかで始まる文字列にしておくと、
プログラムが現在、X Window システムの VT100 端末エミュレータの
<code>xterm</code>、<code>nxterm</code>、<code>kterm</code> 上で実行されている、と解釈される。
描画をはじめる前に Tektronix の Plotter はエスケープ・シーケンスを送って、
普段は表に出ていない、Tektronix 描画のためのウィンドウを前面にポップアップする。
描画が終了すると、制御を Tektronix のウィンドウから実行中の VT100
に戻すためのエスケープ・シーケンスが送られる。
Tektronix のウィンドウは消去されず、そのまま画面上に残る。
</p>
<p>このパラメータを &quot;kermit&quot;、&quot;ansi.sys&quot;、&quot;nansi.ssys&quot;
のいずれかにしておくと、プログラムが現在、MS-DOS 版 <code>kermit</code> の VT100
端末エミュレータ上で実行されている、と解釈される。
描画をはじめる前に Tektronix の Plotter はエスケープ・シーケンスを送って、
端末エミュレータを Tektronix モードに切り替える。また <code>kermit</code>
特有の Tektronix 制御コードも送られる。普通は色は使えないが、
この Tektronix モードでは制限はあるが色が使える (<code>ansi.sys</code> の 16
色が使える)。同様に、普通は使えない線種 &quot;dotdotdashed&quot; も使える。
描画が終了すると、Tektronix モードから VT100
モードにに戻すためのエスケープ・シーケンスが送られる。
キーボードから `ALT' - `-' を入力すると、VT100 モードと Tektronix
モードを切り替えることができる。
</p>
</dd>
<dt> <code>TRANSPARENT_COLOR</code></dt>
<dd><p>(デフォルト値は &quot;none&quot;)
このパラメータは PNG と GIF の各 Plotter でだけ有効である。
有効な色名を指定しておくと、
出力ファイル内でその色の部分が透明色として設定され、
多くのソフトウェアでその部分が透明として表示される。
指定できる色名については、<a href="#SEC73">色名</a> を参照のこと。
</p>
<p><code>TRANSPARENT_COLOR</code> を設定してアニメーション疑似 GIF を生成すると、
次の静止画を表示するときに `restore to background'
が適用され、前の静止画が背景色で塗りつぶされる。そうでなければ `unspecified'
が適用され、前の静止画の上に直接次の静止画が描かれる。
</p>
</dd>
<dt> <code>USE_DOUBLE_BUFFERING</code></dt>
<dd><p>(デフォルト値は &quot;no&quot;)
このパラメータは X と X Drawable の Plotter でだけ有効である。
これを &quot;yes&quot; に設定しておくと、描画の際に二重バッファリングが有効になる。
画像ページ内の各フレームは <tt>openpl</tt>&hellip;<tt>closepl</tt>
の間に描かれたものになるが、これがディスプレイに直接ではなく、
一旦バッファ内に描かれる。そして <tt>erase</tt> 操作でフレームの描画が終了したとき、
または <tt>closepl</tt> が行われたときにバッファ内の画像の各ピクセルがその Plotter
のディスプレイにすべてコピーされる。連続する画像が似ていれば、
これによりアニメーションがより滑らかに表示できる。
</p>
<p>X
のディスプレイには二重バッファリングのためのハードウェアを備えているものがある。
それが使えるときには X の Plotter はそれを検知して X11
プロトコルの拡張機能 (DBE または MBX) を利用して描画を行う。この場合、
高価なグラフィック・カードなどを使っていると、
アニメーションの再生が非常に速くなってしまうことがある。
</p>
</dd>
<dt> <code>VANISH_ON_DELETE</code></dt>
<dd><p>(デフォルト値は &quot;no&quot;)
このパラメータは X の Plotter でだけ有効である。
&quot;yes&quot; にしておくと、Plotter
が破棄されるときに、画像が描画されていたウィンドウが閉じられる。&quot;yes&quot;
でなければ、ウィンドウ内でキーボードから <samp>`q'</samp>
を入力するか、マウスクリックをしない限り、ウィンドウは消えない。
</p>
</dd>
<dt> <code>XDRAWABLE_COLORMAP</code></dt>
<dd><p>(デフォルト値は NULL)
このパラメータは X Drawable の Plotter でだけ有効である。
このパラメータが NULL
でなければ、それは定義されている色が保持されているカラーマップへのポインタ
<code>Colormap *</code> であると見なされる。NULL の場合は X
のディスプレイのデフォルトのカラーマップが使われる。
</p>
</dd>
<dt> <code>XDRAWABLE_DISPLAY</code></dt>
<dd><p>(デフォルト値は NULL)
このパラメータは X Drawable の Plotter でだけ有効である。
描画対象となる X のディスプレイ へのポインタ <code>Display *</code> とみなされる。
</p>
</dd>
<dt> <code>XDRAWABLE_DRAWABLE1</code></dt>
<dt> <code>XDRAWABLE_DRAWABLE2</code></dt>
<dd><p>(デフォルト値は NULL)
このパラメータは X Drawable の Plotter でだけ有効である。
設定されていれば、出力先へのポインタ <code>Drawable *</code> と見なされる。出力先
`drawable' は、ウィンドウかまたはビットマップ画像かのどちらかである。X
Drawable の Plotter が生成されるときに、この二つのパラメータのうち、
少なくともどちらか一方は設定されていなければならない。
</p>
<p>XDrawable の Plotter は二つの出力先に同時に描画できるようになっている。X
のウィンドウとビットマップ画像ファイルの両方で同時に同じ画像が生成できると、
便利なこともあるからである。出力先を二つ指定するときは、
その描画領域の大きさ、深度が同じでなければならない。また X
のディスプレイは同じディスプレイでなければならない。
</p>
</dd>
<dt> <code>XDRAWABLE_VISUAL</code></dt>
<dd><p>(デフォルト値は NULL)
このパラメータは X Drawable の Plotter でだけ有効である。
設定されていれば、カラーマップ (上述) の 「visual」へのポインタ <code>Visual *</code>
であると解釈される。このパラメータはかならずしも設定する必要はないが、
<code>XDRAWABLE_COLORMAP</code> を指定するときにはこちらも指定するとよい。
環境によっては、X drawable に対する色の設定 (color cell allocation)
が高速になることがある。
</p>
</dd>
<dt> <code>X_AUTO_FLUSH</code></dt>
<dd><p>(デフォルト値は &quot;yes&quot;)
このパラメータは X の Plotter でだけ有効である。
この値を &quot;yes&quot; に設定すると各描画操作が行われるたびに <code>XFlush</code>
が行われるようになる。これにより各描画操作後すぐに X Window
システムの画面に実際に描画が行われ、画面上に見えるようになる。
しかしこれにより描画の速度はかなり遅くなる。このパラメータを &quot;no&quot;
に設定すると、リアルタイムで画面に描画されなくなる分、描画は速くなる。
</p></dd>
</dl>

<a name="Appendices"></a>
<p>GNU plotting utilities および GNU <code>libplot</code> library
に関する補足的な事項を、付録として収録する。
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC67">A. フォント、文字列、記号</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC73">B. 色名</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC74">C. ページと描画領域のサイズ</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC75">D. Metafile 形式</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                GNU metafile 形式について
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC76">E. 関連するソフトウェア</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC79">F. 開発の経過と関わった人たち</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC80">G. バグ・レポート</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC81">H. GNU Free Documentation License</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  この文書の配布条件
</td></tr>
</table>

<hr size="6">
<a name="Fonts-and-Markers"></a>
<a name="SEC67"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC66" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC68" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC45" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC73" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="appendix"> A. フォント、文字列、記号 </h1>

<p>ベクトル画像を操作するためのライブラリである <code>libplot</code> と
<code>graph</code>、<code>plot</code>、<code>pic2plot</code>、<code>tek2plot</code>、<code>plotfont</code>
などのこれを利用するソフトウェアでは、
文字列を描画するのに様々なフォントを利用できる。
一つのタイプフェイス中で複数のフォントや、上付き、下付き文字や、
ルート記号などを混在させることができる。また多種の記号も描画できる。
以下にその使い方を述べる。
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC68">A.1 利用できるフォント</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC69">A.2 キリル文字と日本語</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC70">A.3 X Window フォント</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC71">A.4 文字列とエスケープ・シーケンス</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC72">A.5 プロットに使える記号</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
</table>

<hr size="6">
<a name="Text-Fonts"></a>
<a name="SEC68"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC67" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC69" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC67" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC73" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class=""> A.1 利用できるフォント </h2>

<p>ベクトル画像を操作するためのライブラリである <code>libplot</code> と
<code>graph</code>、<code>plot</code>、<code>pic2plot</code>、<code>tek2plot</code>、<code>plotfont</code>
などのこれを利用するソフトウェアでは、
文字列を描画するのに様々なフォントを利用できる。
利用できるのは、22 種類の Hershey ベクトル・フォント、
35 種類の PostScript フォント、
45 種類の PCL 5 フォント、
18 種類のヒューレット・パッカードのベクトル・フォントである。
この合計 120 種類のフォントをここでは「組み込みフォント」と呼ぶ。
Hershey フォントは、Dahlgren, VA にある米 Naval Surface Weapons Center で
Dr.
Allen V. Hershey が
1967 年に電子化した、線分を組み合わせて作られたフォントである。
35 種類の PostScript フォントは現在どの PostScript
プリンタにも搭載されているアウトライン・フォントである。
45 種類の PCL 5 フォントは現在どの LaserJet
プリンタ、プロッタにも搭載されている、
ヒューレット・パッカードのアウトライン・フォントである (ただし初代の PCL 5
プリンタである LaserJet III では、この 45 種類のうち 8 種類、Univers と
CGTimes しか使えない)。18 種類のヒューレット・パッカードのベクトル・フォントは、
それより新しいヒューレット・パッカードのプリンタとプロッタに搭載されている。
</p>
<p>Hershey フォントは <code>libplot</code> に実装されているすべての Plotter
で利用できる。PostScript フォントは X、SVG、Illustrator、PostScript、Fig、CGM
の各 Plotter で利用できる。つまりたとえば <code>graph</code>
ではどの出力形式のときにも Hershey フォントが使え、<code>graph -T
X</code>、<code>graph -T svg</code>、<code>graph -T ai</code>、<code>graph -T ps</code>、<code>graph -T
cgm</code>、<code>graph -T fig</code>
のときに PostScript フォントが使える。PCL 5 フォントは
SVG、Illustratos、PCL、HP-GL の各 Plotter で、つまり <code>graph -T
svg</code>、<code>graph -T ai</code>、<code>graph -T pcl</code>、<code>graph -T hpgl</code>
で使える。ヒューレット・パッカードのベクトル・フォントは PCL と HP-GL の
Plotter で、つまり <code>graph -T pcl</code> と <code>graph -T hpgl</code> で使える。
X の Plotter と <code>graph -T X</code> では組み込みの Hershey と
PostScript の両フォントに加えて、X Window システムのフォントが利用できる。
</p>
<p><code>plotfont</code> コマンドを使えば、<samp>`-T'</samp>
で指定する出力形式において利用できるフォントのキャラクタ・マップが表示できる。
<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照。
</p>
<p>文字列を描画する時 (<a href="#SEC71">文字列とエスケープ・シーケンス</a> 参照)、
120 種類の組み込みフォントはそれぞれ書体 (タイプフェイス) で分けられる。
以下の表に示すように、
各書体は複数のフォントからなり、各フォントに番号をつけてある。
フォント 1 は通常のフォント、フォント 2 は斜体 (イタリック)、
フォント 3 は太字 (ボールド)、フォント 4 は太斜体 (ボールド・イタリック)
である。他の書体があればそれには 5 番以降の番号を付けてある。
</p>
<p>22 種類の Hershey ベクトル・フォントには以下の書体がある。
</p>
<ul>
<li> HersheySerif

<ol>
<li> HersheySerif
</li><li> HersheySerif-Italic
</li><li> HersheySerif-Bold
</li><li> HersheySerif-BoldItalic
</li><li> HersheyCyrillic
</li><li> HersheyCyrillic-Oblique
</li><li> HersheyEUC
</li></ol>

</li><li> HersheySans

<ol>
<li> HersheySans
</li><li> HersheySans-Oblique
</li><li> HersheySans-Bold
</li><li> HersheySans-BoldOblique
</li></ol>

</li><li> HersheyScript

<ol>
<li> HersheyScript
</li><li> HersheyScript
</li><li> HersheyScript-Bold
</li><li> HersheyScript-Bold
</li></ol>

</li><li> HersheyGothicEnglish
</li><li> HersheyGothicGerman
</li><li> HersheyGothicItalian

</li><li> HersheySerifSymbol
<ol>
<li> HersheySerifSymbol
</li><li> HersheySerifSymbol-Oblique
</li><li> HersheySerifSymbol-Bold
</li><li> HersheySerifSymbol-BoldOblique
</li></ol>

</li><li> HersheySansSymbol
<ol>
<li> HersheySansSymbol
</li><li> HersheySansSymbol-Oblique
</li></ol>
</li></ul>


<p>Symbol フォントを除くほとんどの Hershey フォントのエンコーディングは
ISO-Latin-1 である (ASCII コードの上位互換のエンコーディング)。
Symbol フォントはギリシャ文字と数学の記号からなる。
そのエンコーディングや使い方の詳細は <cite>PostScript Language Reference Manual</cite>
にある。<code>libplot</code> では、Hershey の各書体には 0 番のフォントとして
symbol フォントが含めてある (HersheySerifSymbol および HersheySansSymbol)。
</p>
<p>Symbol 以外の Hershey 書体で、
HersheyCyrillic、HersheyCyrillic-Oblique、HersheyEUC
(最後のは日本語のフォント) の各書体はエンコーディングが ISO-Latin-1 encoding
ではない。
これらについては <a href="#SEC69">キリル文字と日本語</a> を参照のこと。
</p>
<p>35 種類の PostScript フォントには以下の書体がある。
</p>
<ul>
<li> Helvetica

<ol>
<li>   Helvetica
</li><li>   Helvetica-Oblique
</li><li>   Helvetica-Bold
</li><li>   Helvetica-BoldOblique
</li></ol>

</li><li>   Helvetica-Narrow

<ol>
<li>   Helvetica-Narrow
</li><li>   Helvetica-Narrow-Oblique
</li><li>   Helvetica-Narrow-Bold
</li><li>   Helvetica-Narrow-BoldOblique
</li></ol>

</li><li>   Times

<ol>
<li>   Times-Roman
</li><li>   Times-Italic
</li><li>   Times-Bold
</li><li>   Times-BoldItalic
</li></ol>

</li><li> AvantGarde

<ol>
<li>   AvantGarde-Book
</li><li>   AvantGarde-BookOblique
</li><li>   AvantGarde-Demi
</li><li>   AvantGarde-DemiOblique
</li></ol>

</li><li> Bookman

<ol>
<li>   Bookman-Light
</li><li>   Bookman-LightItalic
</li><li>   Bookman-Demi
</li><li>   Bookman-DemiItalic
</li></ol>

</li><li> Courier

<ol>
<li>   Courier
</li><li>   Courier-Oblique
</li><li>   Courier-Bold
</li><li>   Courier-BoldOblique
</li></ol>

</li><li> NewCenturySchlbk

<ol>
<li>   NewCenturySchlbk-Roman
</li><li>   NewCenturySchlbk-Italic
</li><li>   NewCenturySchlbk-Bold
</li><li>   NewCenturySchlbk-BoldItalic
</li></ol>

</li><li> Palatino

<ol>
<li>   Palatino-Roman
</li><li>   Palatino-Italic
</li><li>   Palatino-Bold
</li><li>   Palatino-BoldItalic
</li></ol>

</li><li>   ZapfChancery-MediumItalic
</li><li>   ZapfDingbats
</li><li>   Symbol
</li></ul>


<p>ZapfDingbats と Symbol フォントを除く PostScript フォントのエンコーディングは
ISO-Latin-1 である。
ZapfDingbats と Symbol フォントのエンコーディングは
<cite>PostScript Language Reference Manual</cite>
にある。<code>libplot</code> では PostScript の各書体には番号
0 番のフォントとして symbol フォントが含めてある。
</p>
<p>45 種類の PCL 5 フォントには以下の書体がある。
</p>
<ul>
<li> Univers

<ol>
<li>   Univers
</li><li>   Univers-Oblique
</li><li>   Univers-Bold
</li><li>   Univers-BoldOblique
</li></ol>

</li><li> UniversCondensed

<ol>
<li>   UniversCondensed
</li><li>   UniversCondensed-Oblique
</li><li>   UniversCondensed-Bold
</li><li>   UniversCondensed-BoldOblique
</li></ol>

</li><li>   CGTimes

<ol>
<li>   CGTimes-Roman
</li><li>   CGTimes-Italic
</li><li>   CGTimes-Bold
</li><li>   CGTimes-BoldItalic
</li></ol>

</li><li> Albertus

<ol>
<li>   AlbertusMedium
</li><li>   AlbertusMedium
</li><li>   AlbertusExtraBold
</li><li>   AlbertusExtraBold
</li></ol>

</li><li> AntiqueOlive

<ol>
<li> AntiqueOlive
</li><li> AntiqueOlive-Italic
</li><li> AntiqueOlive-Bold
</li></ol>

</li><li>   Arial

<ol>
<li>   Arial-Roman
</li><li>   Arial-Italic
</li><li>   Arial-Bold
</li><li>   Arial-BoldItalic
</li></ol>

</li><li>   ClarendonCondensed
</li><li>   Coronet
</li><li> Courier

<ol>
<li>   Courier
</li><li>   Courier-Italic
</li><li>   Courier-Bold
</li><li>   Courier-BoldItalic
</li></ol>

</li><li> Garamond

<ol>
<li>   Garamond
</li><li>   Garamond-Italic
</li><li>   Garamond-Bold
</li><li>   Garamond-BoldItalic
</li></ol>

</li><li> LetterGothic

<ol>
<li>   LetterGothic-Roman
</li><li>   LetterGothic-Italic
</li><li>   LetterGothic-Bold
</li><li>   LetterGothic-BoldItalic
</li></ol>

</li><li>   Marigold
</li><li> CGOmega

<ol>
<li>   CGOmega-Roman
</li><li>   CGOmega-Italic
</li><li>   CGOmega-Bold
</li><li>   CGOmega-BoldItalic
</li></ol>

</li><li> TimesNewRoman

<ol>
<li>   TimesNewRoman
</li><li>   TimesNewRoman-Italic
</li><li>   TimesNewRoman-Bold
</li><li>   TimesNewRoman-BoldItalic
</li></ol>

</li><li>   Wingdings
</li><li>   Symbol
</li></ul>


<p>Wingdings と Symbol フォントを除く PCL 5 フォントのエンコーディングは
ISO-Latin-1 である。
Symbol フォントのエンコーディングは `symbol font encoding' であり、これは
<cite>PostScript Language Reference Manual</cite> に詳しく説明されている。
<code>libplot</code> に PCL の各書体には番号 0 番のフォントとして symbol
フォントが含めてある。
</p>
<p>18 種類のヒューレット・パッカードのベクトル・フォントには以下の書体がある。
</p>
<ul>
<li> Arc

<ol>
<li>   Arc
</li><li>   Arc-Oblique
</li><li>   Arc-Bold
</li><li>   Arc-BoldOblique
</li></ol>

</li><li> Stick

<ol>
<li>   Stick
</li><li>   Stick-Oblique
</li><li>   Stick-Bold
</li><li>   Stick-BoldOblique
</li></ol>

</li><li> ArcANK

<ol>
<li>   ArcANK*
</li><li>   ArcANK-Oblique*
</li><li>   ArcANK-Bold*
</li><li>   ArcANK-BoldOblique*
</li></ol>

</li><li> StickANK

<ol>
<li>   StickANK*
</li><li>   StickANK-Oblique*
</li><li>   StickANK-Bold*
</li><li>   StickANK-BoldOblique*
</li></ol>

</li><li> ArcSymbol*

</li><li> StickSymbol*

</li></ul>


<p>名前にアスタリスクが付いているヒューレット・パッカードのベクトル・フォント
(ANK と Symbol フォント) は、HP-GL/2 形式の出力を行うときか、
または HP7550A グラフィクス・プロッタ、
HP758x、HP7595A、HP7596A 製図プロッタのいずれかに HP-GL
出力を行うときにだけ有効である。
そしてこれらは <code>HPGL_VERSION</code> が &quot;2&quot; または &quot;1.5&quot; のときに有効である。
ANK フォントは日本語フォントである
(<a href="#SEC69">キリル文字と日本語</a> 参照)。Symbol
フォントには様々な数学記号が含まれている。
</p>
<p>ANK と symbol 以外のすべてのヒューレット・パッカードのベクトル・フォント
のエンコーディングは ISO-Latin-1 である。
Arc フォントはプロポーショナル・フォント (可変幅)、Stick
フォントは固定幅である。
出力形式が HP-GL/2 か HP-GL のとき、
Arc フォントでは出力機器に備わっている機能によりカーニングが行われる。
しかし PCL 5 形式のときは、出力機器ではカーニングは行われないと
<code>libplot</code> では想定している。
ヒューレット・パッカードは
PCL 5 機器での HP-GL/2 エミュレーション機能における
カーニング処理機能を削除している。
ヒューレット・パッカードのベクトル・フォントと、
そのカーニング処理 (少なくともペンプロッタの場合) については、
<cite>Hewlett-Packard Journal</cite> の Nov. 1981 発行の号に載っているL. W. Hennessee et al. の論文を参照されたい。
</p>
<p><code>libplot</code> がサポートするフォントでは、
少なくともサポートする範囲では、PostScript、PCL
5、ヒューレット・パッカードのベクトル・フォントのどれにも、
リガチャーは入っていない。しかし 22 種類の Hershey フォントのうち、
6 種類にはリガチャーがある。フォントが HersheySerif または HersheySerif-Italic
のときに &quot;fi&quot;、&quot;ff&quot;、&quot;fl&quot;、&quot;ffi&quot;、&quot;ffl&quot; のどれかが文字列中に出てきたら、
それは自動的にリガチャーに置き換えられる (HersheyCyrillic と HersheyEUC も、
印字可能 ASCII 文字については (ほとんど) HersheySerif と同じと考えられる)。
さらに &quot;tz&quot; と &quot;ch&quot; も HersheyGothicGerman ではリガチャーになる。
ドイツ語のエスツェット character `&szlig;'
はどのフォントでもリガチャーにはならない。エスツェットを描画するには、
エスケープ・シーケンスで &quot;\ss&quot; とすればよい
(<a href="#SEC71">文字列とエスケープ・シーケンス</a>
参照)。またはドイツ語キーボードがあるなら直接エスツェットを入力してもよい。
</p>
<hr size="6">
<a name="Cyrillic-and-Japanese"></a>
<a name="SEC69"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC68" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC70" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC67" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC73" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class=""> A.2 キリル文字と日本語 </h2>

<p>前節の組み込みフォントには、
キリル文字と日本語の文字のベクトル・フォントも含まれている。
それらのエンコード、つまりキャラクタ・マップ上でどの文字がどこにあるのかを、
以下に説明する。
キリル文字と日本語の文字のベクトル・フォントを含むすべてのフォントについて、
そのキャラクタ・マップを <code>plotfont</code> コマンドで表示することができる。
<a href="#SEC27"><code>plotfont</code> コマンド</a> 参照。
</p>
<p>HersheyCyrillic と HersheyCyrillic-Oblique フォントのエンコーディングは
KOI8-R である。これは ASCII コードの上位互換であり、ソ連時代から Unix
上のアプリケーションのデファクト・スタンダードである。
これは、印字可能な ASCII 文字に限っては
HersheySerif ベクトル・フォントと同じであるが、
フォントの後半は異なっている。<tt>0xc0</tt>&hellip;<tt>0xdf</tt>
の範囲の文字はキリル文字の小文字、<tt>0xe0</tt>&hellip;<tt>0xff</tt> は大文字である。
その他のキリル文字が <tt>0xa3</tt> および <tt>0xb3</tt> にある。詳細は
<a href="http://koi8.pp.ru/main.html">the official KOI8-R Web page</a>
および
<a href="http://www.isi.edu">Information Sciences Institute</a>
にある RFC 1489 を参照されたい。
</p>
<p>HersheyEUC は日本語を表示するためのベクトル・フォントである。これは 8 ビットの
EUC-JP でエンコードされている。EUC とは `extended Unix code' のことで、
他の多バイト文字 (ギリシャ文字やキリル文字) でも使われている。EUC
文字列の詳細に付いては Ken Lunde の
<cite>Understanding Japanese Information Processing</cite> (O'Reilly, 1993)
を参照のこと。この本には日本語のテキスト処理についての多くの情報が載っている。
<a href="http://www.praxagora.com/lunde/cjk_inf.html">この本の追加情報</a>
と同じ著者によるより新しい本
<cite>CJKV Information Processing</cite> (O'Reilly, 1999)
も参照されたい。
</p>
<p>HersheyEUC では印刷可能な ASCII 文字は <tt>0x20</tt>&hellip;<tt>0x7e</tt> の範囲であり、
HersheySerif と同様である (HersheyEUC のエンコーディングは `JIS Roman'
と呼ばれ、これは日本工業規格 JIS に定められた標準規格である)。また JIS X0208
では <code>0xa1</code>&hellip;<code>0xfe</code>
の範囲内の連続した２バイトで一つの文字を表している。
JIS X0208 には平仮名、カタカナ、漢字、ローマ字、ギリシャ文字、キリル文字、
句読点類、その他の記号が定義されている。例えば 83 個の平仮名
(濁点、半濁点、小文字なども含めて) が <code>0x2421</code>&hellip;<code>0x2473</code>
にマッピングされている。JIS X0208 に定義されている文字の EUC
コードを得るには、各バイトに <code>0x80</code> を加えればよい
(つまり各バイトの最上位ビットを立てればよい)。したがって 83
個の平仮名のうち最初の文字 (<code>0x2421</code>) は <code>0xa4</code> と <code>0xa1</code>
の連続する２つのバイトで表される。
</p>
<p>HersheyEUC フォントでの JIS X0208 の実装は
Dr. Hershey の電子化によるもので、実用上まったく問題なく使える。83
個の平仮名と 86 個のカタカナのすべてが使えるが、
あまり使う機会のない「半角カナ」はサポートしていない。
使える漢字は 603 個であり、そのうちの 596 個は JIS 第一水準に定められている
(つまりよく使われる) 2965 個から選ばれている。
平仮名、カタカナ、漢字の幅はすべて同じである。<tt>`kanji.doc'</tt>
ファイルにこの 603 個の漢字を列挙してある。このファイルは多くの場合、
<tt>`/usr/share/libplot'</tt> または <tt>`/usr/local/share/libplot'</tt>
にインストールされている。JIS X0208 のうち利用できない漢字は
`undefined character' グリフ (複数の横線) で描画される。
</p>
<p>ArcANK 書体と StickANK 書体の
8 種類のヒューレット・パッカードのベクトル・フォントでも日本語が使える。
HP-GL/2 出力、または
HP7550A グラフィクス・プロッタ、
HP758x、HP7595A、HP7596A 製図プロッタのいずれかに HP-GL
出力を行うときに有効である。
これは <code>HPGL_VERSION</code> が &quot;2&quot; か &quot;1.5&quot; のときに有効である。
</p>
<p>ANK とは Alphabet、Numerals、Katakana のことであり、ANK
フォントでは複数のエンコーディングが使われている。
各フォントの前半は JIS Roman エンコーディングで、後半が半角カナである。
この「半角カナ」には、簡略化された形のカタカナと、いくつかの分音記号
(句読点、濁点、半濁点、カッコなど) が含まれる。
分音記号はそれぞれ独立した文字として含まれている。
</p>
<hr size="6">
<a name="Text-Fonts-in-X"></a>
<a name="SEC70"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC69" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC71" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC67" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC73" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class=""> A.3 X Window フォント </h2>

<p><code>libplot</code> を組み込んでいる
<code>graph -T X</code>、<code>plot -T X</code>、<code>pic2plot -T
X</code>、<code>tek2plot -T X</code>、
<code>plotfont -T X</code> の各コマンドは、X Window
で用意されている多種多様なフォントを利用することができる。
22 種類の Hershey ベクトル・フォントも使える。
35 種類の PostScript フォントも、X で使えるように設定されていれば使える。
プロットを行うプログラムの多くが、
フリーに配布されている 35 種類の Type 1 形式の
PostScript フォントを組み込んでいる。これは X display
にインストールするのも容易である。
</p>
<p>実際には、利用中の X display で使えるフォントはほとんど使うことができる。
XLFD (X Logical Font Description)
名が付いているスケーラブル・フォントも使える。
システム内部の情報を表示する <code>xlsfonts</code>
コマンドを使えばフォント名を調べることができる。フォント名の末尾が
&quot;-0-0-0-0-p-0-iso8859-1&quot; または &quot;-0-0-0-0-m-0-iso8859-1&quot;
のフォントは ISO-Latin-1 エンコーディングのスケーラブル・フォントで、
<code>libplot</code> とこれを組み込んだプログラムから利用できる。
たとえば &quot;CharterBT-Roman&quot; フォントは多くの X display で使えるが、
このフォントの XLFD 名は正確には
&quot;-bitstream-charter-medium-r-normal-0-0-0-0-p-0-iso8859-1&quot; である。
<code>libplot</code> を組み込んでいるプログラムではこれを
ハイフンが３つしかない短縮形の &quot;charter-medium-r-normal&quot;
で認識できる。以下のコマンド
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 1 2 0 | graph -T X -F charter-medium-r-normal
</pre></td></tr></table>

<p>は  X window の画面にウィンドウを開き、
両座標軸と目盛りのラベルをこのフォントで描画する。
</p>
<p>フォント名の末尾が &quot;iso8859-2&quot; や &quot;adobe-fontspecific&quot;
のものも使えるが、これらのエンコーディングは標準の ISO-Latin-1 ではない。
<code>libplot</code> はデフォルトでは &quot;iso8859-1&quot;、つまり指定されるフォントのうち
ISO-Latin-1 エンコーディングのものがあれば、それを使う。
また、正式なフォント名をフルネームで指定することで、ISO-Latin-1 
エンコーディングを明示的に指定してもよい。&quot;fixed&quot; や &quot;9x15&quot;
などの画面描画に使われる X のフォント (ビットマップフォントなど)
を使いたいときも、同様に正確な名前でフォントを指定すればよい。
XFLD 名ではなくフルネームで指定しておくことで、
フォントのグリフのビットマップ・パターンを一度
X のディスプレイから取得すれば、<code>libplot</code>
側で適切なサイズに変更されるようになる。
</p>
<p><code>graph</code> などの GNU plotting utilities のコマンドでは <samp>`--bitmap-size'</samp>
が使える。<samp>`-T X'</samp> が指定されているときは、
このオプションにより表示されるウィンドウのサイズが指定される。
また他の視覚効果を得ることもできる。ploting utilities
の各コマンドでは正方形の描画領域が想定されている。そこでたとえば
<samp>`--bitmap-size 800x400'</samp>
を指定すると、縦と横で違う割合でスケーリングが行われ、
描画される画像は横に引き延ばされる。画像中に X のフォントが使われていれば、
同様に縦と横で違った割合で引き延ばされる。同じような考え方で、<samp>`--rotation'</samp>
オプションを指定すると画像が回転させられ、文字列も同様に回転させられる。
たとえば <samp>`--rotation 45'</samp> を指定すると反時計回りに 45 度回転する。
<samp>`--bitmap-size'</samp> と <samp>`--rotation'</samp> は同時に指定してもよい。
</p>
<p>ISO-Latin-1 の X Window システムのフォントを使うとき、
エスケープ・シーケンスを使えば組み込み ISO-Latin-1 フォントに含まれる ASCII
でない 8 ビット文字を表示させることができる。
使えるエスケープ・シーケンスについては <a href="#SEC71">文字列とエスケープ・シーケンス</a> を参照のこと。
例えば &quot;\Po&quot; と文字列に入れるとイギリスの通貨のポンド記号 symbol `&pound;'
が表示される。以下のコマンド
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 1 | graph -T X -F times-medium-r-normal -L &quot;A \Po1 Plot&quot;
</pre></td></tr></table>

<p>を実行してみると、この記号がプロット内のラベルに使えるのが分かる。
同様にして、使っているフォントが ISO-Latin-1 でもそうでなくても、どの
X Window システムのフォントでも、
エスケープ・シーケンスを使えば数学記号やギリシャ文字が表示できる。
ほとんどすべての X ディスレプイの Symbol フォント中の記号が使える。
</p>
<hr size="6">
<a name="Text-String-Format"></a>
<a name="SEC71"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC70" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC72" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC67" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC73" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class=""> A.4 文字列とエスケープ・シーケンス </h2>

<p><code>libplot</code> やこれを組み込んでいる
<code>graph</code>、<code>plot</code>、<code>pic2plot</code>、<code>tek2plot</code>、<code>plotfont</code>
が描画する文字列は、印字可能な文字でなければならない。
改行文字 (NL および CR) などの制御コードは文字列に使ってはならない。
印刷可能な文字というのは <tt>0x20</tt>&hellip;<tt>0x7e</tt> および <tt>0xa0</tt>&hellip;<tt>0xff</tt>
のいずれかの範囲内にある文字のことである。前者はいわゆる印字可能な ASCII
文字、後者はいわゆる印字可能な 8 ビット文字である。
</p>
<p>しかし文字列には「エスケープ・シーケンス」を入れることができる。
これによりフォント切り替えたり、文字を上付きや下付きにしたり、ASCII
文字でない数学記号などを描画することができる。ということはつまり、<code>graph</code>
の描画における座標軸のラベルにもそういった文字が使えるということである。
<code>pic2plot</code> がラベル・オブジェクト内に置く文字列も同様である。
</p>
<p>エスケープ・シーケンスの指定法は、TeX、<code>troff</code>、<code>groff</code>
などの文書整形システムをを使ったことのある人なら違和感なく理解できるだろう。
エスケープ・シーケンスはそれぞれ、３文字からなる。
１文字目はバックスラッシュである。以下に、よく使われるものを挙げる。
</p>
<dl compact="compact">
<dt> &quot;\sp&quot;</dt>
<dd><p>以降の文字を上付き文字にする (上付き文字モード開始)。
</p></dd>
<dt> &quot;\ep&quot;</dt>
<dd><p>上付き文字モード終了。
</p></dd>
<dt> &quot;\sb&quot;</dt>
<dd><p>以降の文字を下付き文字にする (下付き文字モード開始)。
</p></dd>
<dt> &quot;\eb&quot;</dt>
<dd><p>下付き文字モード終了。
</p></dd>
<dt> &quot;\mk&quot;</dt>
<dd><p>その位置を覚えておく。
</p></dd>
<dt> &quot;\rt&quot;</dt>
<dd><p>覚えておいた位置に戻る。
</p></dd>
</dl>


<p>たとえば &quot;x\sp2\ep&quot; 文字列があったとすると、`x の二乗' として描画される。
下付き文字の下付き、なども指定できる。下付き文字と上付き文字は &quot;\mk&quot; と
&quot;\rt&quot; を使うとうまくそろえることができる。たとえば &quot;a\mk\sbi\eb\rt\sp2\ep&quot;
とすると、a に下付きの i と上付きの 2 が付く。ベキ乗数の `2' は下付きの i
の真上に描かれる。
</p>
<p>同じ書体でフォントを切り替えるエスケープ・シーケンスもある。
何に切り替えられるかについては <a href="#SEC68">利用できるフォント</a> を参照のこと。
たとえば現在のフォントが Times-Roman、つまり `Times' 書体のフォント 1
だとする。&quot;A \f2very\f1 well labeled axis&quot; とすると、この中の `very' は、`Times'
書体のフォント 2 が Times-Italic であるため、斜体 Times-Italic になる。
フォントを切り替えるエスケープ・シーケンスは &quot;\f<var>n</var>&quot; という形式で、
<var>n</var> でどのフォントに切り替えるかを指定する。<code>groff</code>
との互換性を持たせるため、&quot;\f1&quot;、&quot;\f2&quot;、&quot;\f3&quot;
の代わりにそれぞれ &quot;\fR&quot;、&quot;\fI&quot;、&quot;\fB&quot; と指定してもいいようになっている。
&quot;\fP&quot; を使うと、直前の切り替えの前のフォントに戻る
(しかしその前のフォントにまでは戻れない)。
異なる書体間の切り替えは現在のところ、できない。
</p>
<p>横方向に移動するためのエスケープ・シーケンスが他にもいくつかあり、
斜体とそうでないフォントの間をきれいにそろえることなどに使うことができる。
&quot;\r1&quot;、&quot;\r2&quot;、&quot;\r4&quot;、&quot;\r6&quot;、&quot;\r8&quot;、&quot;\r^&quot;
でそれぞれ右方向に
1 em、1/2 em、1/4 em、1/6 em、1/8 em、1/12 em
だけ移動する。
&quot;\l1&quot;、&quot;\l2&quot;、&quot;\l4&quot;、&quot;\l6&quot;、&quot;\l8&quot;、&quot;\l^&quot;
も同様だが、これらは左に移動する。&quot;A \fIvery\r^\fP well labeled axis&quot;
とすると、&quot;A \fIvery\fP well labeled axis&quot;
よりは見栄えがいいはずである。
</p>
<p>平方根の記号は、上述した &quot;\mk&quot; と &quot;\rt&quot; を組み合わせることで描画できる。
平方根記号の最初の部分は &quot;\sr&quot; であり、上線 (`run') を描く&quot;\rn&quot;
で好きなだけ記号を長くできる。たとえば &quot;\sr\mk\rn\rn\rtab&quot;
とすると `ab の平方根' が描画できる。
上線の長さを調整したいときは、&quot;\rn&quot;
の数をいくつか変えてみて、試行錯誤する必要があるだろう。
</p>
<p>下線を引くには、&quot;\ul&quot; を好きな数だけ並べればよい。上で示した &quot;\mk&quot;&hellip;&quot;\rt&quot;
の技が下線でも使える。したがって &quot;\mk\ul\ul\ul\rtabc&quot; とすると、&quot;abc&quot;
に下線が引かれる。
下線の長さを調整したいときは、&quot;\ul&quot;
の数をいくつか変えてみて、試行錯誤する必要があるだろう。
横方向の移動量も同様に、試行錯誤して決めねばならないだろう。たとえば
&quot;HersheySerif&quot; を使っているときは、&quot;\mk\ul\ul\l8\ul\rtabc&quot; よりも
&quot;\mk\ul\ul\ul\rtabc&quot; の方が見栄えがいいはずである。
</p>
<p>上で説明したものの他に、ISO-Latin-1 フォント (Symbol
フォント、HersheyCyrillic、HersheyEUC、ZapfDingbats 以外の組み込みフォント)
の印刷可能な非 ASCII 文字を操作するためのエスケープ・シーケンスもある。
アクセント記号付きの文字などは非 ASCII 文字である。それら
<tt>0xa0</tt>&hellip;<tt>0xff</tt> の範囲にある 8 ビット文字は、
文字列中に直接指定してよい。しかし利用中の端末で表示できないなどの場合には、
直接入力する代わりにエスケープ・シーケンスで指定することもできる。
</p>
<p>エスケープ・シーケンスは数学記号やギリシャ文字も同様に指定できる。
Symbol フォントの文字は通常、エスケープ・シーケンスを使って指定する。
使っているフォントが Hershey フォントかそうでないかによって、
記号を描画するために使われるフォントが異なる。
Hershey フォントを使っているときには HersheySerifSymbol か HersheySansSymbol
が、そうでないときには Symbol フォントが使われる。
</p>
<p>以下に、ISO-Latin-1 フォントを使っているときの非 ASCII
文字を指定するエスケープ・シーケンスを列挙する。
各エスケープ・シーケンスについて ISO-Latin-1
エンコーディングでの対応する文字の番号 (十進数で) と正式な PostScript
名を示している。ほとんどはその名前を見れば何の記号か分かる。
たとえば `eacute' は小文字の `e' に鋭アクセント符号がついたものである。
</p>
<dl compact="compact">
<dt> &quot;\r!&quot; </dt>
<dd><p>[161] exclamdown
</p></dd>
<dt> &quot;\ct&quot; </dt>
<dd><p>[162] cent
</p></dd>
<dt> &quot;\Po&quot; </dt>
<dd><p>[163] sterling
</p></dd>
<dt> &quot;\Cs&quot; </dt>
<dd><p>[164] currency
</p></dd>
<dt> &quot;\Ye&quot; </dt>
<dd><p>[165] yen
</p></dd>
<dt> &quot;\bb&quot; </dt>
<dd><p>[166] brokenbar
</p></dd>
<dt> &quot;\sc&quot; </dt>
<dd><p>[167] section
</p></dd>
<dt> &quot;\ad&quot; </dt>
<dd><p>[168] dieresis
</p></dd>
<dt> &quot;\co&quot; </dt>
<dd><p>[169] copyright
</p></dd>
<dt> &quot;\Of&quot; </dt>
<dd><p>[170] ordfeminine
</p></dd>
<dt> &quot;\Fo&quot; </dt>
<dd><p>[171] guillemotleft
</p></dd>
<dt> &quot;\no&quot; </dt>
<dd><p>[172] logicalnot
</p></dd>
<dt> &quot;\hy&quot; </dt>
<dd><p>[173] hyphen
</p></dd>
<dt> &quot;\rg&quot; </dt>
<dd><p>[174] registered
</p></dd>
<dt> &quot;\a-&quot; </dt>
<dd><p>[175] macron
</p></dd>
<dt> &quot;\de&quot; </dt>
<dd><p>[176] degree
</p></dd>
<dt> &quot;\+-&quot; </dt>
<dd><p>[177] plusminus
</p></dd>
<dt> &quot;\S2&quot; </dt>
<dd><p>[178] twosuperior
</p></dd>
<dt> &quot;\S3&quot; </dt>
<dd><p>[179] threesuperior
</p></dd>
<dt> &quot;\aa&quot; </dt>
<dd><p>[180] acute
</p></dd>
<dt> &quot;\*m&quot; </dt>
<dd><p>[181] mu
</p></dd>
<dt> &quot;\ps&quot; </dt>
<dd><p>[182] paragraph
</p></dd>
<dt> &quot;\md&quot; </dt>
<dd><p>[183] periodcentered
</p></dd>
<dt> &quot;\ac&quot; </dt>
<dd><p>[184] cedilla
</p></dd>
<dt> &quot;\S1&quot; </dt>
<dd><p>[185] onesuperior
</p></dd>
<dt> &quot;\Om&quot; </dt>
<dd><p>[186] ordmasculine
</p></dd>
<dt> &quot;\Fc&quot; </dt>
<dd><p>[187] guillemotright
</p></dd>
<dt> &quot;\14&quot; </dt>
<dd><p>[188] onequarter
</p></dd>
<dt> &quot;\12&quot; </dt>
<dd><p>[189] onehalf
</p></dd>
<dt> &quot;\34&quot; </dt>
<dd><p>[190] threequarters
</p></dd>
<dt> &quot;\r?&quot; </dt>
<dd><p>[191] questiondown
</p></dd>
<dt> &quot;\`A&quot; </dt>
<dd><p>[192] Agrave
</p></dd>
<dt> &quot;\'A&quot; </dt>
<dd><p>[193] Aacute
</p></dd>
<dt> &quot;\^A&quot; </dt>
<dd><p>[194] Acircumflex
</p></dd>
<dt> &quot;\~A&quot; </dt>
<dd><p>[195] Atilde
</p></dd>
<dt> &quot;\:A&quot; </dt>
<dd><p>[196] Adieresis
</p></dd>
<dt> &quot;\oA&quot; </dt>
<dd><p>[197] Aring
</p></dd>
<dt> &quot;\AE&quot; </dt>
<dd><p>[198] AE
</p></dd>
<dt> &quot;\,C&quot; </dt>
<dd><p>[199] Ccedilla
</p></dd>
<dt> &quot;\`E&quot; </dt>
<dd><p>[200] Egrave
</p></dd>
<dt> &quot;\'E&quot; </dt>
<dd><p>[201] Eacute
</p></dd>
<dt> &quot;\^E&quot; </dt>
<dd><p>[202] Ecircumflex
</p></dd>
<dt> &quot;\:E&quot; </dt>
<dd><p>[203] Edieresis
</p></dd>
<dt> &quot;\`I&quot; </dt>
<dd><p>[204] Igrave
</p></dd>
<dt> &quot;\'I&quot; </dt>
<dd><p>[205] Iacute
</p></dd>
<dt> &quot;\^I&quot; </dt>
<dd><p>[206] Icircumflex
</p></dd>
<dt> &quot;\:I&quot; </dt>
<dd><p>[207] Idieresis
</p></dd>
<dt> &quot;\-D&quot; </dt>
<dd><p>[208] Eth
</p></dd>
<dt> &quot;\~N&quot; </dt>
<dd><p>[209] Ntilde
</p></dd>
<dt> &quot;\'O&quot; </dt>
<dd><p>[210] Ograve
</p></dd>
<dt> &quot;\'O&quot; </dt>
<dd><p>[211] Oacute
</p></dd>
<dt> &quot;\^O&quot; </dt>
<dd><p>[212] Ocircumflex
</p></dd>
<dt> &quot;\~O&quot; </dt>
<dd><p>[213] Otilde
</p></dd>
<dt> &quot;\:O&quot; </dt>
<dd><p>[214] Odieresis
</p></dd>
<dt> &quot;\mu&quot; </dt>
<dd><p>[215] multiply
</p></dd>
<dt> &quot;\/O&quot; </dt>
<dd><p>[216] Oslash
</p></dd>
<dt> &quot;\`U&quot; </dt>
<dd><p>[217] Ugrave
</p></dd>
<dt> &quot;\'U&quot; </dt>
<dd><p>[218] Uacute
</p></dd>
<dt> &quot;\^U&quot; </dt>
<dd><p>[219] Ucircumflex
</p></dd>
<dt> &quot;\:U&quot; </dt>
<dd><p>[220] Udieresis
</p></dd>
<dt> &quot;\'Y&quot; </dt>
<dd><p>[221] Yacute
</p></dd>
<dt> &quot;\TP&quot; </dt>
<dd><p>[222] Thorn
</p></dd>
<dt> &quot;\ss&quot; </dt>
<dd><p>[223] germandbls
</p></dd>
<dt> &quot;\`a&quot; </dt>
<dd><p>[224] agrave
</p></dd>
<dt> &quot;\'a&quot; </dt>
<dd><p>[225] aacute
</p></dd>
<dt> &quot;\^a&quot; </dt>
<dd><p>[226] acircumflex
</p></dd>
<dt> &quot;\~a&quot; </dt>
<dd><p>[227] atilde
</p></dd>
<dt> &quot;\:a&quot; </dt>
<dd><p>[228] adieresis
</p></dd>
<dt> &quot;\oa&quot; </dt>
<dd><p>[229] aring
</p></dd>
<dt> &quot;\ae&quot; </dt>
<dd><p>[230] ae
</p></dd>
<dt> &quot;\,c&quot; </dt>
<dd><p>[231] ccedilla
</p></dd>
<dt> &quot;\`e&quot; </dt>
<dd><p>[232] egrave
</p></dd>
<dt> &quot;\'e&quot; </dt>
<dd><p>[233] eacute
</p></dd>
<dt> &quot;\^e&quot; </dt>
<dd><p>[234] ecircumflex
</p></dd>
<dt> &quot;\:e&quot; </dt>
<dd><p>[235] edieresis
</p></dd>
<dt> &quot;\`i&quot; </dt>
<dd><p>[236] igrave
</p></dd>
<dt> &quot;\'i&quot; </dt>
<dd><p>[237] iacute
</p></dd>
<dt> &quot;\^i&quot; </dt>
<dd><p>[238] icircumflex
</p></dd>
<dt> &quot;\:i&quot; </dt>
<dd><p>[239] idieresis
</p></dd>
<dt> &quot;\Sd&quot; </dt>
<dd><p>[240] eth
</p></dd>
<dt> &quot;\~n&quot; </dt>
<dd><p>[241] ntilde
</p></dd>
<dt> &quot;\`o&quot; </dt>
<dd><p>[242] ograve
</p></dd>
<dt> &quot;\'o&quot; </dt>
<dd><p>[243] oacute
</p></dd>
<dt> &quot;\^o&quot; </dt>
<dd><p>[244] ocircumflex
</p></dd>
<dt> &quot;\~o&quot; </dt>
<dd><p>[245] otilde
</p></dd>
<dt> &quot;\:o&quot; </dt>
<dd><p>[246] odieresis
</p></dd>
<dt> &quot;\di&quot; </dt>
<dd><p>[247] divide
</p></dd>
<dt> &quot;\/o&quot; </dt>
<dd><p>[248] oslash
</p></dd>
<dt> &quot;\`u&quot; </dt>
<dd><p>[249] ugrave
</p></dd>
<dt> &quot;\'u&quot; </dt>
<dd><p>[250] uacute
</p></dd>
<dt> &quot;\^u&quot; </dt>
<dd><p>[251] ucircumflex
</p></dd>
<dt> &quot;\:u&quot; </dt>
<dd><p>[252] udieresis
</p></dd>
<dt> &quot;\'y&quot; </dt>
<dd><p>[253] yacute
</p></dd>
<dt> &quot;iTp&quot; </dt>
<dd><p>[254] thorn
</p></dd>
<dt> &quot;\:y&quot; </dt>
<dd><p>[255] ydieresis
</p></dd>
</dl>

<p>フォントが HersheySerifSymbol か HersheySansSymbol (Hershey フォントの場合)、
または Symbol (PostScript フォントの場合)
のときの数学記号とギリシャ文字のエスケープ・シーケンスを以下に列挙する。
各エスケープ・シーケンスについて symbol
エンコーディングでの対応する文字の番号 (八進数で) と正式な PostScript
名を示している。ほとんどはその名前を見れば何の記号か分かる。たとえば &quot;\*a&quot;
は小文字のギリシャ文字のアルファである。<cite>PostScript Language Reference
Manual</cite> に以下に挙げている文字の表がある。
</p>
<dl compact="compact">
<dt> &quot;\fa&quot; </dt>
<dd><p>[0042] universal
</p></dd>
<dt> &quot;\te&quot; </dt>
<dd><p>[0044] existential
</p></dd>
<dt> &quot;\st&quot; </dt>
<dd><p>[0047] suchthat
</p></dd>
<dt> &quot;\**&quot; </dt>
<dd><p>[0052] asteriskmath
</p></dd>
<dt> &quot;\=~&quot; </dt>
<dd><p>[0100] congruent
</p></dd>
<dt> &quot;\*A&quot; </dt>
<dd><p>[0101] Alpha
</p></dd>
<dt> &quot;\*B&quot; </dt>
<dd><p>[0102] Beta
</p></dd>
<dt> &quot;\*X&quot; </dt>
<dd><p>[0103] Chi
</p></dd>
<dt> &quot;\*D&quot; </dt>
<dd><p>[0104] Delta
</p></dd>
<dt> &quot;\*E&quot; </dt>
<dd><p>[0105] Epsilon
</p></dd>
<dt> &quot;\*F&quot; </dt>
<dd><p>[0106] Phi
</p></dd>
<dt> &quot;\*G&quot; </dt>
<dd><p>[0107] Gamma
</p></dd>
<dt> &quot;\*Y&quot; </dt>
<dd><p>[0110] Eta
</p></dd>
<dt> &quot;\*I&quot; </dt>
<dd><p>[0111] Iota
</p></dd>
<dt> &quot;\+h&quot; </dt>
<dd><p>[0112] theta1
</p></dd>
<dt> &quot;\*K&quot; </dt>
<dd><p>[0113] Kappa
</p></dd>
<dt> &quot;\*L&quot; </dt>
<dd><p>[0114] Lambda
</p></dd>
<dt> &quot;\*M&quot; </dt>
<dd><p>[0115] Mu
</p></dd>
<dt> &quot;\*N&quot; </dt>
<dd><p>[0116] Nu
</p></dd>
<dt> &quot;\*O&quot; </dt>
<dd><p>[0117] Omicron
</p></dd>
<dt> &quot;\*P&quot; </dt>
<dd><p>[0120] Pi
</p></dd>
<dt> &quot;\*H&quot; </dt>
<dd><p>[0121] Theta
</p></dd>
<dt> &quot;\*R&quot; </dt>
<dd><p>[0122] Rho
</p></dd>
<dt> &quot;\*S&quot; </dt>
<dd><p>[0123] Sigma
</p></dd>
<dt> &quot;\*T&quot; </dt>
<dd><p>[0124] Tau
</p></dd>
<dt> &quot;\*U&quot; </dt>
<dd><p>[0125] Upsilon
</p></dd>
<dt> &quot;\ts&quot; </dt>
<dd><p>[0126] sigma1
</p></dd>
<dt> &quot;\*W&quot; </dt>
<dd><p>[0127] Omega
</p></dd>
<dt> &quot;\*C&quot; </dt>
<dd><p>[0130] Xi
</p></dd>
<dt> &quot;\*Q&quot; </dt>
<dd><p>[0131] Psi
</p></dd>
<dt> &quot;\*Z&quot; </dt>
<dd><p>[0132] Zeta
</p></dd>
<dt> &quot;\tf&quot; </dt>
<dd><p>[0134] therefore
</p></dd>
<dt> &quot;\pp&quot; </dt>
<dd><p>[0136] perpendicular
</p></dd>
<dt> &quot;\ul&quot; </dt>
<dd><p>[0137] underline
</p></dd>
<dt> &quot;\rx&quot; </dt>
<dd><p>[0140] radicalex
</p></dd>
<dt> &quot;\*a&quot; </dt>
<dd><p>[0141] alpha
</p></dd>
<dt> &quot;\*b&quot; </dt>
<dd><p>[0142] beta
</p></dd>
<dt> &quot;\*x&quot; </dt>
<dd><p>[0143] chi
</p></dd>
<dt> &quot;\*d&quot; </dt>
<dd><p>[0144] delta
</p></dd>
<dt> &quot;\*e&quot; </dt>
<dd><p>[0145] epsilon
</p></dd>
<dt> &quot;\*f&quot; </dt>
<dd><p>[0146] phi
</p></dd>
<dt> &quot;\*g&quot; </dt>
<dd><p>[0147] gamma
</p></dd>
<dt> &quot;\*y&quot; </dt>
<dd><p>[0150] eta
</p></dd>
<dt> &quot;\*i&quot; </dt>
<dd><p>[0151] iota
</p></dd>
<dt> &quot;\+f&quot; </dt>
<dd><p>[0152] phi1
</p></dd>
<dt> &quot;\*k&quot; </dt>
<dd><p>[0153] kappa
</p></dd>
<dt> &quot;\*l&quot; </dt>
<dd><p>[0154] lambda
</p></dd>
<dt> &quot;\*m&quot; </dt>
<dd><p>[0155] mu
</p></dd>
<dt> &quot;\*n&quot; </dt>
<dd><p>[0156] nu
</p></dd>
<dt> &quot;\*o&quot; </dt>
<dd><p>[0157] omicron
</p></dd>
<dt> &quot;\*p&quot; </dt>
<dd><p>[0160] pi
</p></dd>
<dt> &quot;\*h&quot; </dt>
<dd><p>[0161] theta
</p></dd>
<dt> &quot;\*r&quot; </dt>
<dd><p>[0162] rho
</p></dd>
<dt> &quot;\*s&quot; </dt>
<dd><p>[0163] sigma
</p></dd>
<dt> &quot;\*t&quot; </dt>
<dd><p>[0164] tau
</p></dd>
<dt> &quot;\*u&quot; </dt>
<dd><p>[0165] upsilon
</p></dd>
<dt> &quot;\+p&quot; </dt>
<dd><p>[0166] omega1
</p></dd>
<dt> &quot;\*w&quot; </dt>
<dd><p>[0167] omega
</p></dd>
<dt> &quot;\*c&quot; </dt>
<dd><p>[0170] xi
</p></dd>
<dt> &quot;\*q&quot; </dt>
<dd><p>[0171] psi
</p></dd>
<dt> &quot;\*z&quot; </dt>
<dd><p>[0172] zeta
</p></dd>
<dt> &quot;\ap&quot; </dt>
<dd><p>[0176] similar
</p></dd>
<dt> &quot;\+U&quot; </dt>
<dd><p>[0241] Upsilon1
</p></dd>
<dt> &quot;\fm&quot; </dt>
<dd><p>[0242] minute
</p></dd>
<dt> &quot;\&lt;=&quot; </dt>
<dd><p>[0243] lessequal
</p></dd>
<dt> &quot;\f/&quot; </dt>
<dd><p>[0244] fraction
</p></dd>
<dt> &quot;\if&quot; </dt>
<dd><p>[0245] infinity
</p></dd>
<dt> &quot;\Fn&quot; </dt>
<dd><p>[0246] florin
</p></dd>
<dt> &quot;\CL&quot; </dt>
<dd><p>[0247] club
</p></dd>
<dt> &quot;\DI&quot; </dt>
<dd><p>[0250] diamond
</p></dd>
<dt> &quot;\HE&quot; </dt>
<dd><p>[0251] heart
</p></dd>
<dt> &quot;\SP&quot; </dt>
<dd><p>[0252] spade
</p></dd>
<dt> &quot;\&lt;&gt;&quot; </dt>
<dd><p>[0253] arrowboth
</p></dd>
<dt> &quot;\&lt;-&quot; </dt>
<dd><p>[0254] arrowleft
</p></dd>
<dt> &quot;\ua&quot; </dt>
<dd><p>[0255] arrowup
</p></dd>
<dt> &quot;\-&gt;&quot; </dt>
<dd><p>[0256] arrowright
</p></dd>
<dt> &quot;\da&quot; </dt>
<dd><p>[0257] arrowdown
</p></dd>
<dt> &quot;\de&quot; </dt>
<dd><p>[0260] degree
</p></dd>
<dt> &quot;\+-&quot; </dt>
<dd><p>[0261] plusminus
</p></dd>
<dt> &quot;\sd&quot; </dt>
<dd><p>[0262] second
</p></dd>
<dt> &quot;\&gt;=&quot; </dt>
<dd><p>[0263] greaterequal
</p></dd>
<dt> &quot;\mu&quot; </dt>
<dd><p>[0264] multiply
</p></dd>
<dt> &quot;\pt&quot; </dt>
<dd><p>[0265] proportional
</p></dd>
<dt> &quot;\pd&quot; </dt>
<dd><p>[0266] partialdiff
</p></dd>
<dt> &quot;\bu&quot; </dt>
<dd><p>[0267] bullet
</p></dd>
<dt> &quot;\di&quot; </dt>
<dd><p>[0270] divide
</p></dd>
<dt> &quot;\!=&quot; </dt>
<dd><p>[0271] notequal
</p></dd>
<dt> &quot;\==&quot; </dt>
<dd><p>[0272] equivalence
</p></dd>
<dt> &quot;\~~&quot; </dt>
<dd><p>[0273] approxequal
</p></dd>
<dt> &quot;\..&quot; </dt>
<dd><p>[0274] ellipsis
</p></dd>
<dt> NONE </dt>
<dd><p>[0275] arrowvertex
</p></dd>
<dt> &quot;\an&quot; </dt>
<dd><p>[0276] arrowhorizex
</p></dd>
<dt> &quot;\CR&quot; </dt>
<dd><p>[0277] carriagereturn
</p></dd>
<dt> &quot;\Ah&quot; </dt>
<dd><p>[0300] aleph
</p></dd>
<dt> &quot;\Im&quot; </dt>
<dd><p>[0301] Ifraktur
</p></dd>
<dt> &quot;\Re&quot; </dt>
<dd><p>[0302] Rfraktur
</p></dd>
<dt> &quot;\wp&quot; </dt>
<dd><p>[0303] weierstrass
</p></dd>
<dt> &quot;\c*&quot; </dt>
<dd><p>[0304] circlemultiply
</p></dd>
<dt> &quot;\c+&quot; </dt>
<dd><p>[0305] circleplus
</p></dd>
<dt> &quot;\es&quot; </dt>
<dd><p>[0306] emptyset
</p></dd>
<dt> &quot;\ca&quot; </dt>
<dd><p>[0307] cap
</p></dd>
<dt> &quot;\cu&quot; </dt>
<dd><p>[0310] cup
</p></dd>
<dt> &quot;\SS&quot; </dt>
<dd><p>[0311] superset
</p></dd>
<dt> &quot;\ip&quot; </dt>
<dd><p>[0312] reflexsuperset
</p></dd>
<dt> &quot;\n&lt;&quot; </dt>
<dd><p>[0313] notsubset
</p></dd>
<dt> &quot;\SB&quot; </dt>
<dd><p>[0314] subset
</p></dd>
<dt> &quot;\ib&quot; </dt>
<dd><p>[0315] reflexsubset
</p></dd>
<dt> &quot;\mo&quot; </dt>
<dd><p>[0316] element
</p></dd>
<dt> &quot;\nm&quot; </dt>
<dd><p>[0317] notelement
</p></dd>
<dt> &quot;\/_&quot; </dt>
<dd><p>[0320] angle
</p></dd>
<dt> &quot;\gr&quot; </dt>
<dd><p>[0321] nabla
</p></dd>
<dt> &quot;\rg&quot; </dt>
<dd><p>[0322] registerserif
</p></dd>
<dt> &quot;\co&quot; </dt>
<dd><p>[0323] copyrightserif
</p></dd>
<dt> &quot;\tm&quot; </dt>
<dd><p>[0324] trademarkserif
</p></dd>
<dt> &quot;\PR&quot; </dt>
<dd><p>[0325] product
</p></dd>
<dt> &quot;\sr&quot; </dt>
<dd><p>[0326] radical
</p></dd>
<dt> &quot;\md&quot; </dt>
<dd><p>[0327] dotmath
</p></dd>
<dt> &quot;\no&quot; </dt>
<dd><p>[0330] logicalnot
</p></dd>
<dt> &quot;\AN&quot; </dt>
<dd><p>[0331] logicaland
</p></dd>
<dt> &quot;\OR&quot; </dt>
<dd><p>[0332] logicalor
</p></dd>
<dt> &quot;\hA&quot; </dt>
<dd><p>[0333] arrowdblboth
</p></dd>
<dt> &quot;\lA&quot; </dt>
<dd><p>[0334] arrowdblleft
</p></dd>
<dt> &quot;\uA&quot; </dt>
<dd><p>[0335] arrowdblup
</p></dd>
<dt> &quot;\rA&quot; </dt>
<dd><p>[0336] arrowdblright
</p></dd>
<dt> &quot;\dA&quot; </dt>
<dd><p>[0337] arrowdbldown
</p></dd>
<dt> &quot;\lz&quot; </dt>
<dd><p>[0340] lozenge
</p></dd>
<dt> &quot;\la&quot; </dt>
<dd><p>[0341] angleleft
</p></dd>
<dt> &quot;\RG&quot; </dt>
<dd><p>[0342] registersans
</p></dd>
<dt> &quot;\CO&quot; </dt>
<dd><p>[0343] copyrightsans
</p></dd>
<dt> &quot;\TM&quot; </dt>
<dd><p>[0344] trademarksans
</p></dd>
<dt> &quot;\SU&quot; </dt>
<dd><p>[0345] summation
</p></dd>
<dt> NONE </dt>
<dd><p>[0346] parenlefttp
</p></dd>
<dt> NONE </dt>
<dd><p>[0347] parenleftex
</p></dd>
<dt> NONE </dt>
<dd><p>[0350] parenleftbt
</p></dd>
<dt> &quot;\lc&quot; </dt>
<dd><p>[0351] bracketlefttp
</p></dd>
<dt> NONE </dt>
<dd><p>[0352] bracketleftex
</p></dd>
<dt> &quot;\lf&quot; </dt>
<dd><p>[0353] bracketleftbt
</p></dd>
<dt> &quot;\lt&quot; </dt>
<dd><p>[0354] bracelefttp
</p></dd>
<dt> &quot;\lk&quot; </dt>
<dd><p>[0355] braceleftmid
</p></dd>
<dt> &quot;\lb&quot; </dt>
<dd><p>[0356] braceleftbt
</p></dd>
<dt> &quot;\bv&quot; </dt>
<dd><p>[0357] braceex
</p></dd>
<dt> &quot;\eu&quot;</dt>
<dd><p>[0360] euro
</p></dd>
<dt> &quot;\ra&quot; </dt>
<dd><p>[0361] angleright
</p></dd>
<dt> &quot;\is&quot; </dt>
<dd><p>[0362] integral
</p></dd>
<dt> NONE </dt>
<dd><p>[0363] integraltp
</p></dd>
<dt> NONE </dt>
<dd><p>[0364] integralex
</p></dd>
<dt> NONE </dt>
<dd><p>[0365] integralbt
</p></dd>
<dt> NONE </dt>
<dd><p>[0366] parenrighttp
</p></dd>
<dt> NONE </dt>
<dd><p>[0367] parenrightex
</p></dd>
<dt> NONE </dt>
<dd><p>[0370] parenrightbt
</p></dd>
<dt> &quot;\rc&quot; </dt>
<dd><p>[0371] bracketrighttp
</p></dd>
<dt> NONE </dt>
<dd><p>[0372] bracketrightex
</p></dd>
<dt> &quot;\rf&quot; </dt>
<dd><p>[0373] bracketrightbt
</p></dd>
<dt> &quot;\RT&quot; </dt>
<dd><p>[0374] bracerighttp
</p></dd>
<dt> &quot;\rk&quot; </dt>
<dd><p>[0375] bracerightmid
</p></dd>
<dt> &quot;\rb&quot; </dt>
<dd><p>[0376] bracerightbt
</p></dd>
</dl>

<p>最後に Hershey
フォントを使っているときにだけ有効なエスケープ・シーケンスを挙げる。
これを使うと、どのフォントにも入っていない特殊な記号や、
他に指定方法がない記号を使うことができる。これには大きく分けて２種類ある。
一つは雑多な記号類、もう一つは天文学や十二星座の記号である
雑多な記号類を指定するためのエスケープ・シーケンスには、以下のものがある。
</p>
<dl compact="compact">
<dt> &quot;\dd&quot;</dt>
<dd><p>daggerdbl
</p></dd>
<dt> &quot;\dg&quot;</dt>
<dd><p>dagger
</p></dd>
<dt> &quot;\hb&quot;</dt>
<dd><p>hbar
</p></dd>
<dt> &quot;\li&quot;</dt>
<dd><p>lineintegral
</p></dd>
<dt> &quot;\IB&quot;</dt>
<dd><p>interbang
</p></dd>
<dt> &quot;\Lb&quot;</dt>
<dd><p>lambdabar
</p></dd>
<dt> &quot;\~-&quot;</dt>
<dd><p>modifiedcongruent
</p></dd>
<dt> &quot;\-+&quot;</dt>
<dd><p>minusplus
</p></dd>
<dt> &quot;\||&quot;</dt>
<dd><p>parallel
</p></dd>
<dt> &quot;\s-&quot;</dt>
<dd><p>[variant form of s]
</p></dd>
</dl>


<p>上で最後に挙げているエスケープ・シーケンス &quot;\s-&quot;
は、記号ではなく文字を指定する。HersheyGothicGerman フォントでは、
単語の末尾の小文字の `s' の形が若干変わってしまうために用意されている。
たとえばドイツ語の &quot;besonders&quot; を正しく描画するためには、&quot;besonder\s-&quot;
と指定せねばならない。Hershey の２種類の symbol
フォントでギリシャ文字を使うときも同様である
(ギリシャ語では、小文字の末尾の `s' は末尾でない `s' と形が違う)。
末尾と末尾でない `s' の形が変わらない Hershey フォントでは、
&quot;s&quot; と &quot;\s-&quot; は同じである。
</p>
<p>以下に 12
種の星座の記号を含む天文学記号を表すためのエスケープ・シーケンスを以下に示す。
これらも上の雑多な記号類と同様、使っているフォントが Hershey
フォントのときにだけ有効である。
</p>
<dl compact="compact">
<dt> &quot;\SO&quot;</dt>
<dd><p>sun
</p></dd>
<dt> &quot;\ME&quot;</dt>
<dd><p>mercury
</p></dd>
<dt> &quot;\VE&quot;</dt>
<dd><p>venus
</p></dd>
<dt> &quot;\EA&quot;</dt>
<dd><p>earth
</p></dd>
<dt> &quot;\MA&quot;</dt>
<dd><p>mars
</p></dd>
<dt> &quot;\JU&quot;</dt>
<dd><p>jupiter
</p></dd>
<dt> &quot;\SA&quot;</dt>
<dd><p>saturn
</p></dd>
<dt> &quot;\UR&quot;</dt>
<dd><p>uranus
</p></dd>
<dt> &quot;\NE&quot;</dt>
<dd><p>neptune
</p></dd>
<dt> &quot;\PL&quot;</dt>
<dd><p>pluto
</p></dd>
<dt> &quot;\LU&quot;</dt>
<dd><p>moon
</p></dd>
<dt> &quot;\CT&quot;</dt>
<dd><p>comet
</p></dd>
<dt> &quot;\ST&quot;</dt>
<dd><p>star
</p></dd>
<dt> &quot;\AS&quot;</dt>
<dd><p>ascendingnode
</p></dd>
<dt> &quot;\DE&quot;</dt>
<dd><p>descendingnode
</p></dd>
<dt> &quot;\AR&quot;</dt>
<dd><p>aries
</p></dd>
<dt> &quot;\TA&quot;</dt>
<dd><p>taurus
</p></dd>
<dt> &quot;\GE&quot;</dt>
<dd><p>gemini
</p></dd>
<dt> &quot;\CA&quot;</dt>
<dd><p>cancer
</p></dd>
<dt> &quot;\LE&quot;</dt>
<dd><p>leo
</p></dd>
<dt> &quot;\VI&quot;</dt>
<dd><p>virgo
</p></dd>
<dt> &quot;\LI&quot;</dt>
<dd><p>libra
</p></dd>
<dt> &quot;\SC&quot;</dt>
<dd><p>scorpio
</p></dd>
<dt> &quot;\SG&quot;</dt>
<dd><p>sagittarius
</p></dd>
<dt> &quot;\CP&quot;</dt>
<dd><p>capricornus
</p></dd>
<dt> &quot;\AQ&quot;</dt>
<dd><p>aquarius
</p></dd>
<dt> &quot;\PI&quot;</dt>
<dd><p>pisces
</p></dd>
</dl>

<p>上に上げた雑多な記号類および天文学記号は、からなずしも、Hershey
フォントを使っているときにだけ指定できる特殊なフォント外記号である、
というわけではないが、Allen Hershey が電子化したすべてのグリフのライブラリを
GNU <code>libplot</code> は搭載している。したがって文字列にはそれらを指定できる。
指定できる Hershey グリフはそれぞれ、４桁の番号で示される。Hershey グリフ
1 は &quot;\#H0001&quot; と表される。標準の Hershey グリフを表す数値は &quot;\#H0001&quot; から
&quot;\#H3999&quot; だが、その中には欠番もたくさんある。他の人による他のグリフが
&quot;\#H4000&quot;&hellip;&quot;\#H4194&quot; の範囲で指定できる。日本語の仮名は
&quot;\#H4195&quot;&hellip;&quot;\#H4399&quot; の範囲である。
</p>
<p>&quot;\#H0001&quot;&hellip;&quot;\#H3999&quot; の範囲内の、ほとんどすべての Hershey
グリフを記載した表を、
米 National Technical Information Service (電話番号 +1 703 487 4650)
に連絡すれば注文することができる。商品番号は PB251845 で、現在の価格は
US$40 である。この４桁の番号による指定の例を挙げると、以下の文字列
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&quot;\#H0744\#H0745\#H0001\#H0002\#H0003\#H0869\#H0907\#H2330\#H2331&quot;
</pre></td></tr></table>

<p>を描画すると、三つ葉のクローバー、フラ・ダ・リ紋章、地図マークの
A, B, C、ベル、大きな円、ト音記号、ヘ音記号が描かれる。
繰り返すが、これは Hershey フォントを使っている場合である。
</p>
<p>また Hershey
フォントならどれを使っていても日本語の平仮名、カタカナ、漢字が使える。603
個の漢字はどれも使える。使えるのは HersheyEUC フォントと同じものである。
日本語の文字は JIS X0208 に定めるタイポグラフィにしたがって番号が付いており、
２バイトで１文字を表す。GNU plotting utilities に付属している <tt>`kanji.doc'</tt>
ファイルに利用できるすべての漢字を列挙してある。このファイルは多くの場合、
<tt>`/usr/share/libplot'</tt> または <tt>`/usr/local/share/libplot'</tt>
にインストールされている。
</p>
<p>JIS X0208 の文字はどれも、たとえば &quot;\#J357e&quot; のような具合に、
エスケープ・シーケンスで２バイトを４つの十六進数で表すことで指定できる。
IS X0208 の文字を表すためには、２バイトとも <code>0x21</code>&hellip;<code>0x7e</code>
の範囲内でなければならない。漢字は &quot;\#J3021&quot; より上である。JIS X0208
に定められている文字はどれも同様に指定できる。たとえば平仮名とカタカナは
&quot;\#J2421&quot;&hellip;&quot;\#J257e&quot; の範囲内であり、ローマ字は &quot;\#J2321&quot;&hellip;&quot;\#J237e&quot;
である。<tt>`kanji.doc'</tt> ファイルと同じディレクトリにインストールされる
<tt>`kana.doc'</tt> に平仮名とカタカナのエンコーディングを述べている。
JIS X0208 の詳細に付いては Ken Lunde の
<cite>Understanding Japanese Information Processing</cite> (O'Reilly, 1993) と
<a href="http://www.praxagora.com/lunde/cjk_inf.html">この本の追加情報</a>
を参照のこと。
</p>
<p>昔から参照されている A. N. Nelson の <cite>Modern Reader's
Japanese-English Character Dictionary</cite> による漢字の番号も利用できる
(この辞典は C. E. Tuttle and Co. が出版しており、ISBN 0-8048-0408-7 である。
1997年に改訂版 (ISBN 0-8048-2036-8)
が出ているが、番号付けが変わってしまっている)。
この Nelson による番号で感じを指定するやり方も JIS X0208 の場合と同様だが、
４桁の十六進数ではなく、４桁の十進数を使う。<tt>`kanji.doc'</tt> に JIS X0208
とネルソン番号の対応を述べている。たとえばネルソン番号 &quot;\#N0001&quot; の文字は
JIS X0208 の &quot;\#J306c&quot; である。これは Unicode で利用できる漢字の番号でもある。
</p>
<p>利用できる漢字の幅はすべて同じであり、平仮名、カタカナも同じ幅である。
利用できない漢字は
`undefined character' グリフ (複数の横線) で描画される。JIS X0208
の漢字以外の利用できない文字でも同様である。
</p>
<hr size="6">
<a name="Marker-Symbols"></a>
<a name="SEC72"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC71" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC73" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC67" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC67" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC73" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class=""> A.5 プロットに使える記号 </h2>

<p>GNU <code>libplot</code> ライブラリではプロットに使う記号に 1 から 31
まで番号を付け、標準で利用できるようにしている。ここで言う記号とは、
プロット画像内でデータの点を表すために用いる、プロット用の記号のことである。
<code>graph</code> プログラムに
<samp>`-S'</samp> オプションを指定したときに、データの各点を描画するのに使われる。
</p>
<p>文字の場合と同様に、記号にもフォントサイズがある。どの出力形式でも、
フォントサイズが十分に大きければ目に見える大きさで表示される。
しかし 0 番の記号は例外で、
<code>libplot</code> では記号 0 番はどの記号も表さないものとしている。
1&hellip;31 番として定義されている記号を以下にしめす。
</p>
<ol>
<li> dot
</li><li> plus (<em>+</em>)
</li><li> asterisk (<em>*</em>)
</li><li> circle
</li><li> cross
</li><li> square
</li><li> triangle
</li><li> diamond
</li><li> star
</li><li> inverted triangle
</li><li> starburst
</li><li> fancy plus
</li><li> fancy cross
</li><li> fancy square
</li><li> fancy diamond
</li><li> filled circle
</li><li> filled square
</li><li> filled triangle
</li><li> filled diamond
</li><li> filled inverted triangle
</li><li> filled fancy square
</li><li> filled fancy diamond
</li><li> half filled circle
</li><li> half filled square
</li><li> half filled triangle
</li><li> half filled diamond
</li><li> half filled inverted triangle
</li><li> half filled fancy square
</li><li> half filled fancy diamond
</li><li> octagon
</li><li> filled octagon
</li></ol>


<p>1 番から 5 番までの記号はよく知られた GKS (Graphical Kernel System)
と同じである。
</p>
<p>32 番以降の記号は、フォントマップ内でその番号が示す文字になる。
<code>libplot</code> ではそれはそのときに使っているフォントである。
<code>graph</code> ではそれは <samp>`--symbol-font-name'</samp>
オプションで指定されるフォントである。デフォルトでは ZapfDingbats
フォントだが、
<code>graph -T png</code>、<code>graph -T pnm</code>、<code>graph -T gif</code>、<code>graph -T
pcl</code>、<code>graph -T hpgl</code>、<code>graph -T tek</code> では PostScript
フォントが使えないため、代わりに HersheySerif フォントが使われる。
</p>
<p>ZapfDingbats フォントの文字にはプロット記号に適したものが多い。
たとえば 74 番はテキサス・スター (Texas Star) である。以下のようにすると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 2 2 1 3 2 4 0 | graph -T ps -m 0 -S 74 0.1 &gt; plot.ps
</pre></td></tr></table>

<p>５点からなるデータが、線では結ばれずにプロットされ、PostScript
形式で出力される。各データ点は大きな (描画領域の 1/10 の大きさの)
テキサス・スターで示される。
</p>
<p><code>graph -T pcl</code> または <code>graph -T hpgl</code> でそれらの記号を使いたいときは、
PCL 5 や HP-GL/2 で使える Wingdings を試すとよい。以下のようにすると、
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">echo 0 0 1 2 2 1 3 2 4 0 | 
    graph -T pcl -m 0 --symbol-font Wingdings -S 181 0.1 &gt; plot.pcl
</pre></td></tr></table>

<p>上の PostScript の例と同様の描画が PCL 5 形式で行われる。
Wingdings フォントではテキサス・スターは 181 番である。
</p>
<hr size="6">
<a name="Color-Names"></a>
<a name="SEC73"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC72" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC74" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC67" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC74" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="appendix"> B. 色名 </h1>

<p>GNU plotting utilities の多くのアプリケーションでは、色を名前で指定できる。
それは
<code>bgcolorname</code>, <code>pencolorname</code>, <code>fillcolorname</code>
の各関数を、引数に色を渡して呼ぶことで可能である。
</p>
<p>たとえば <code>graph</code> では <samp>`--frame-color'</samp> オプションで色名が使える。
他のプログラムとでは <samp>`--pen-color'</samp> オプションが使えるものがあり
(<code>graph</code> でも使える)、それが使えるものでは <samp>`--bg-color'</samp>
オプションが使える。これらのプログラムが使っている <code>libplot</code>
ライブラリには <code>pencolorname</code>、<code>fillcolorname</code>、<code>bgcolorname</code>
の各機能がある。
</p>
<p><code>libplot</code> やこれを組み込んでいる
<code>graph</code>、<code>plot</code>、<code>pic2plot</code>、<code>tek2plot</code>、<code>plotfont</code>
では、コマンドラインでのオプション指定に色名を使うことができる。
各コマンドではコマンドライン・オプションに <samp>`--bg-color'</samp>
が使え、<code>graph</code> 以外では <samp>`--pen-color'</samp> も使える
(<code>graph</code> では、より複雑な <samp>`--pen-colors'</samp> オプションに加え、
<samp>`--frame-color'</samp> が使える)。
</p>
<p>いずれの場合でも、16 進数で表現される 48
ビットカラーで正確に色を指定することができる。たとえば &quot;#c0c0c0&quot;
は明るい灰色、&quot;#ffffff&quot; は白である。また色は色名でも指定できる。
指定できる色名には &quot;red&quot;、&quot;green&quot;、&quot;blue&quot; などのはっきりしたものだけでなく
&quot;dark magenta&quot;、&quot;forest green&quot;、&quot;olive drab&quot; などの曖昧な感じのものもあり、
合計 665 種類の名前が使える。
色名では大文字、小文字は区別されず、また空白文字も無視される。
したがってたとえば &quot;RosyBrown&quot; と &quot;rosy brown&quot;、&quot;DarkGoldenrod3&quot; と
&quot;dark goldenrod 3&quot; はそれぞれ同じと見なされる。
</p>
<p>GNU plotting utilities に付属している <tt>`colors.txt'</tt>
ファイルに利用できるすべての色名を列挙してある。
このファイルは多くの場合、
<tt>`/usr/share/libplot'</tt> または <tt>`/usr/local/share/libplot'</tt>
にインストールされている。
この色名はほとんど X Window システムでも有効である。X Window
システムで有効な色名は <tt>`/usr/lib/X11/rgb.txt'</tt> に列挙されている。しかし、
色名に &quot;gray&quot; が入っているものについては、X Window では &quot;grey&quot; である。
たとえば &quot;dark slate gray 4&quot; と &quot;dark slate grey 4&quot;
はどちらも色名として有効である。
</p>
<hr size="6">
<a name="Page-and-Viewport-Sizes"></a>
<a name="SEC74"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC73" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC75" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC73" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC75" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="appendix"> C. ページと描画領域のサイズ </h1>

<p>Illustrator、PostScript、PCL 5、HP-GL、Fig の各 Plotter
でベクトル形式の画像出力を行う場合、
出力先におけるページの大きさの指定が重要である。ページの大きさとして &quot;letter&quot;
や &quot;a4&quot; などが指定できる。指定可能なもののリストを後に載せる。GNU <code>libplot</code>
におけるページサイズの指定は <code>PAGESIZE</code> パラメータによって行う。
<code>libplot</code> を組み込んでいる
<code>graph</code>、<code>plot</code>、<code>pic2plot</code>、<code>tek2plot</code>、<code>plotfont</code>
の各コマンドでは、環境変数 <code>PAGESIZE</code> およびコマンドライン・オプション
<samp>`--page-size'</samp> でページサイズが指定できる。
</p>
<p><code>libplot</code> による描画は通常、「描画領域」または `viewport'
に対して行われる。PNG、PNM、疑似 GIF のビットマップ形式での出力を行う場合は
viewport は単に正方形あるいは長方形のビットマップである。しかし
Illustrator、PostScript、PCL 5、HP-GL、Fig
でベクトル形式の出力を行う場合は、
出力先の用紙上の正方形あるいは長方形の領域である
(SVG および WebCGM の場合の viewport については後述)。
HP-GL の場合を除いて、viewport は用紙の中央に置かれるのがデフォルトである。
たとえば用紙サイズが &quot;letter&quot; の場合、viewport は一辺が 8in
の正方形で、8.5in x 11.0in の用紙の中央に置かれる。
viewport の外側に描いた図形がクリッピングされることはないので、
原理的には用紙全体に描画できることになる。
</p>
<p>viewport の縦の長さと横の長さはそれぞれ別に指定できる。たとえば
&quot;letter,xsize=4in&quot; や &quot;a4,xsize=10cm,ysize=15cm&quot;
と言った方法で指定すれば、デフォルト値の代わりにその指定が使われる。
viewport の縦と横の長さは負の値でもよい (負の値を指定すると鏡像になる)。
長さの単位にはインチ、センチメートル、ミリメートルが使える。
</p>
<p>ベクトル形式の出力では、viewport
の位置を用紙の左下隅に対する相対座標値で指定できる。
たとえば、&quot;letter&quot; や &quot;a4&quot; などの用紙サイズだけでなく、
&quot;letter,xorigin=2in,yorigin=3in&quot; や &quot;a4,xorigin=0.5cm,yorigin=0.5cm&quot;
のように指定できる (`xorigin' と `yorigin' は `xsize' や `ysize'
と同時に指定できる)。または、`xorigin' と `yorigin' の代わりに、
のデフォルトの位置に対する相対的な viewport
の位置をベクトルを使って指定することもできる。たとえば用紙サイズの指定で
&quot;letter,yoffset=1.2in&quot; や &quot;a4,xoffset=-5mm,yoffset=2.0cm&quot;
とすることができる。また、<code>ROTATION</code> パラメータやその環境変数、または
(<code>libplot</code> を組み込んでいるプログラムの場合は) <samp>`--rotation'</samp>
オプションを使うと viewport の回転角を指定できる。しかし viewport
は回転させられても、その四隅の用紙上の位置は変化しない。
代わりにそこに描画される図形が、回転して描かれることになる。
もし viewport が正方形でなく長方形だった場合は、
回転の際に必要に応じて縦、横それぞれに拡大・縮小が行われる。
</p>
<p>用紙サイズには ISO の &quot;a0&quot;&hellip;&quot;a4&quot; と ANSI の &quot;a&quot;&hellip;&quot;e&quot; が指定できる
(&quot;letter&quot; は &quot;a&quot; と、&quot;tabloid&quot; は &quot;b&quot; と と同じである。デフォルト値は
&quot;letter&quot;)。また&quot;legal&quot;、&quot;ledger&quot;、JIS (Japanese Industrial Standard) の &quot;b5&quot;
も指定できる。以下が、指定できる用紙サイズと、その用紙サイズを指定したときの
正方形の viewport の大きさである。
</p>
<dl compact="compact">
<dt> &quot;a&quot; (or &quot;letter&quot;; 8.5in by 11.0in)</dt>
<dd><p>8.0in
</p>
</dd>
<dt> &quot;b&quot; (or &quot;tabloid&quot;; 11.0in by 17.0in)</dt>
<dd><p>10.0in
</p>
</dd>
<dt> &quot;c&quot; (17.0in by 22.0in)</dt>
<dd><p>16.0in
</p>
</dd>
<dt> &quot;d&quot; (22.0in by 34.0in)</dt>
<dd><p>20.0in
</p>
</dd>
<dt> &quot;e&quot; (34.0in by 44.0in)</dt>
<dd><p>32.0in
</p>
</dd>
<dt> &quot;legal&quot; (8.5in by 14.0in)</dt>
<dd><p>8.0in
</p>
</dd>
<dt> &quot;ledger&quot; (17.0in by 11.0in)</dt>
<dd><p>10.0in
</p>
</dd>
<dt> &quot;a4&quot; (21.0cm by 29.7cm)</dt>
<dd><p>19.81cm
</p>
</dd>
<dt> &quot;a3&quot; (29.7cm by 42.0cm)</dt>
<dd><p>27.18cm
</p>
</dd>
<dt> &quot;a2&quot; (42.0cm by 59.4cm)</dt>
<dd><p>39.62cm
</p>
</dd>
<dt> &quot;a1&quot; (59.4cm by 84.1cm)</dt>
<dd><p>56.90cm
</p>
</dd>
<dt> &quot;a0&quot; (84.1cm by 118.9cm)</dt>
<dd><p>81.79cm
</p>
</dd>
<dt> &quot;b5&quot; (18.2cm by 25.7cm)</dt>
<dd><p>16.94cm
</p></dd>
</dl>

<p>SVG と WebCGM の場合はこれとは別である。
ウェブページ上で最終的に表示される画像の大きさを、
これらの画像ファイル中に指定しておくことはできない。
画像ファイル中で viewport の大きさを指定はできるが、
多くの場合ウェブページを作るときにその大きさには別の値が指定される。
SVG または WebCGM 形式の出力を行うときは、viewport の大きさは普通に
<code>PAGESIZE</code> または (<code>libplot</code> を組み込んだプログラムによる場合は)
<samp>`--page-size'</samp> で指定する。たとえば用紙サイズに &quot;letter&quot; を指定したときは
SVG または WebCGM での viewport の大きさは一辺が 8in の正方形である。
&quot;letter,xsize=6in,ysize=7in&quot; と指定すると viewport は 6in x 7in
の長方形になる。&quot;xorigin&quot;、&quot;yorigin&quot;、&quot;xoffset&quot;、&quot;yoffset&quot; は無視される。
</p>
<p>同じ理由で HP-GL や HP-GL/2 出力のときにも &quot;xorigin&quot; と &quot;yorigin&quot; は無視される。
HP-GL のデフォルトでは viewport の左下隅は出力機器によって異なる、
`scaling point' P1 と呼ばれる位置である。
これは実際の用紙の左下隅に近いが、そことはずれた場所である。&quot;xoffset&quot; や
&quot;yoffset&quot; の指定も有効ではあるが、これは viewport
の位置をデフォルトの位置からずらすために使う。
</p>
<hr size="6">
<a name="Metafiles"></a>
<a name="SEC75"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC74" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC76" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC74" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC76" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="appendix"> D. Metafile 形式 </h1>

<p>GNU graphics metafile 形式の画像は、
GNU <code>libplot</code> でサポートしている metafile の Plotter
を使うソフトウェアで生成できる。
<code>graph</code>、<code>plot</code>、<code>pic2plot</code>、<code>tek2plot</code>、<code>plotfont</code>
の生データ出力がそれにあたる。
Metafile 形式のファイルは、一種の「監査証跡 (audit trail)」とも言える。つまり、
プロット命令とプロットされるデータが連続したものである。
各プロット命令は１文字の ASCII 文字である `op code' であり、Plotter
に対する操作を表す。
その操作に必要なデータがあれば、プロット命令の引数として指定される。
</p>
<p>Metafile にはバイナリ形式 (デフォルト) とテキスト形式 (人が読める形式)
の二種類がある。バイナリ形式では画像データは &quot;#PLOT 1\n&quot; で始まり、
テキスト形式では &quot;#PLOT 2\n&quot; で始まる。Metafile 形式のデータを、
生成した計算機とは違う環境に移動する場合などは、
バイナリ形式よりもテキスト形式のほうがいいだろう。テキスト形式のデータは
GNU <code>graph</code> や他の plotting utilities のプログラムで <samp>`-O'</samp>
を指定するか、Metafile の Plotter のパラメータ <code>META_PORTABLE</code> に &quot;yes&quot;
を指定すればよい。<code>plot</code>
を使えば、バイナリ形式でもテキスト形式でも、metafile
形式のデータを他の形式に変換できる。
<a href="#SEC15"><code>plot</code> コマンド</a> 参照。
</p>
<p>テキスト形式では、各操作の引数 (整数、浮動小数点実数、文字列)
は、それぞれ空白で区切られ、改行が引数列の終端を示す。バイナリ形式では、
引数は整数、単精度浮動小数点実数、改行で終端が示される文字列である。
<code>libplot</code> で実装している描画操作では、文字列引数は多くても１つで、
その中には改行文字は含められないので、改行文字が引数列の終端として扱われる。
したがって、文字列は引数列中の最後の引数でなければならない。
</p>
<p>全部で 97 種のPlotter に対する操作が実装されている。もっとも重要なのは
<code>openpl</code> および <code>closepl</code> 操作である。これらによって Plotter
がオープン、クローズされ、それによって画像のページが開始、終了する。
<code>openpl</code> および <code>closepl</code> 操作を表す op code はそれぞれ
<samp>`o'</samp> と <samp>`x'</samp> である。<code>erase</code>
操作は、もし行われれば、ページ中のフレームの区切りになる。
リアルタイム描画を行うデバイスでは、
それによりスクリーン上に描画された画像が消える。
この操作の op code は <samp>`e'</samp> である。
</p>
<p>その他の 94 種の Plotter 操作には、12 の例外を除いて op code
が割り当てられている。その 12 の例外は、
(1) <code>flushpl</code> による準備操作、
(2) <code>havecap</code>、<code>labelwidth</code>、<code>flabelwidth</code>
の情報を返すだけの操作、
(3) <code>color</code>、<code>colorname</code>、<code>pencolorname</code>、<code>fillcolorname</code>、<code>bgcolorname</code>
の、内部で <code>pencolor</code>、<code>fillcolor</code>、<code>bgcolor</code>
に割り当てられている操作、
(4) <code>frotate</code>、<code>fscale</code>、<code>ftranslate</code> の内部で
<code>fconcat</code>
に割り当てられている操作、
(5) <code>ffontname</code> (metafile 中では <code>fontname</code>
となにも違うところのない操作) である。
したがって <samp>`o'</samp> および <samp>`x'</samp>
の他に 83 種の op code が利用でき、つまり合計で op code は
85 種類である。以下に <samp>`o'</samp> and <samp>`x'</samp>
以外の 10 個の op code を挙げる。各 op code には <code>libplot</code>
での操作の名称を付けてある。
</p>
<dl compact="compact">
<dt> Op Code</dt>
<dd><p>Operation
</p></dd>
<dt> <samp>`a'</samp></dt>
<dd><p><code>arc</code>
</p></dd>
<dt> <samp>`c'</samp></dt>
<dd><p><code>circle</code>
</p></dd>
<dt> <samp>`e'</samp></dt>
<dd><p><code>erase</code>
</p></dd>
<dt> <samp>`f'</samp></dt>
<dd><p><code>linemod</code>
</p></dd>
<dt> <samp>`l'</samp></dt>
<dd><p><code>line</code>
</p></dd>
<dt> <samp>`m'</samp></dt>
<dd><p><code>move</code>
</p></dd>
<dt> <samp>`n'</samp></dt>
<dd><p><code>cont</code>
</p></dd>
<dt> <samp>`p'</samp></dt>
<dd><p><code>point</code>
</p></dd>
<dt> <samp>`s'</samp></dt>
<dd><p><code>space</code>
</p></dd>
<dt> <samp>`t'</samp></dt>
<dd><p><code>label</code>
</p></dd>
</dl>


<p>85 種類のすべての op code のリストは <code>libplot</code> のヘッダファイル
<tt>`plot.h'</tt> または <code>libplotter</code> のヘッダファイル <tt>`plotter.h'</tt>
にある。
このファイルは多くの場合、
<tt>`/usr/include'</tt> または <tt>`/usr/local/include'</tt>
にインストールされている。
</p>
<p>上に挙げた 10 種類の op code は GNU 版より前の <code>graph</code> と
<code>libplot</code> で使われていた `plot(5)' 形式のものと同じで、
その使い方も `plot(5)' と同じである。
plot(5) 形式のファイル中には
op code の <samp>`o'</samp> および <samp>`x'</samp> や
冒頭に GNU metafile 特有の文字列 (magic string) がないので、GNU
版と簡単に区別することができる。GNU <code>plot</code> を使えば、plot(5) 形式の
metafile を GNU metafile 形式に変換できる。<a href="#SEC15"><code>plot</code> コマンド</a> 参照。
</p>
<hr size="6">
<a name="Auxiliary-Software"></a>
<a name="SEC76"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC75" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC77" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC75" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC79" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="appendix"> E. 関連するソフトウェア </h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC77">E.1 <code>idraw</code> の入手先</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       idraw について
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC78">E.2 <code>xfig</code> の入手先</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        xfig について
</td></tr>
</table>

<hr size="6">
<a name="idraw"></a>
<a name="SEC77"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC76" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC78" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC76" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC76" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC79" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> E.1 <code>idraw</code> の入手先 </h2>

<p><code>idraw</code> についてはこの文書内でも何回か触れているが、これはフリーの
X Window アプリケーションで、画像を編集するソフトウェアである。
これを使って <code>libplot</code> を組み込んだソフトウェア
(<code>graph -T ps</code>、<code>plot -T ps</code>、<code>pic2plot -T ps</code>、<code>tek2plot -T ps</code>、<code>plotfont -T ps</code>)
の PostScript の Plotter で生成された画像を編集することができる。
</p>
<p><code>idraw</code> は現在 Vectaport
社がメンテナンスしており、<a href="http://www.vectaport.com/">Vectaport 社のウェブサイト</a>からダウンロードできる。<code>idraw</code>
はドローソフトを作るためのフレームワーク <code>ivtools</code> の一部である。
<code>idraw</code> は元々、
スタンフォード大学とシリコン・グラフィクス社で開発されていた
<code>InterViews</code> パッケージの一部であった。
その開発は現在すでに行われていないが、
いまでも
<a href="ftp://interviews.stanford.edu/">ウェブ</a>で公開されている。
ダウンロードするなら <code>InterViews</code> よりも <code>ivtools</code>
にしたほうがいいだろう。
</p>
<p><a href="http://www.vectaport.com">Vectaport 社のウェブページ</a>には、<code>idraw</code>
の高機能版である <code>drawtool</code> もある。<code>idraw</code> が X11
のビットマップ形式画像を取り込めるのと同様に、<code>drawtool</code> は TIFF および
PBM/PGM/PPM 形式のビットマップ画像を取り込むことができる。
</p>
<hr size="6">
<a name="xfig"></a>
<a name="SEC78"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC77" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC79" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC76" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC76" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC79" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> E.2 <code>xfig</code> の入手先 </h2>

<p><code>xfig</code> についてもこの文書内でも何回か触れているが、これはフリーの
X Window アプリケーションで、画像を編集するソフトウェアである。
これを使って <code>libplot</code> を組み込んだソフトウェア
(<code>graph -T fig</code>、<code>plot -T fig</code>、<code>pic2plot -T fig</code>、<code>tek2plot -T fig</code>、<code>plotfont -T fig</code>)
の Fig の Plotter で生成された画像を編集することができる。
</p>
<p>最新版は <a href="ftp://ftp.x.org/contrib/applications/drawing_tools/">ftp://ftp.x.org/contrib/applications/drawing_tools/</a>
からダウンロードできる。GIF、X11 ビットマップ、PostScript
の各形式の画像を取り込むことができる。<code>transfig</code>
というパッケージが付属していて、これを使うと <code>xfig</code>
の画像を他の様々な形式の画像に変換することができる。現在 GIF、X11
ビットマップ、LaTeX、PostScript の各形式がサポートされている。
</p>
<p><a href="http://duke.usask.ca/~macphed/soft/fig">Fig 形式についてのウェブページ</a>に <code>xfig</code>
を使うときにあると便利なアプリケーションなどが紹介されている。
</p>
<hr size="6">
<a name="History-and-Acknowledgements"></a>
<a name="SEC79"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC78" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC80" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC76" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC80" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="appendix"> F. 開発の経過と関わった人たち </h1>

<p>GNU plotting utilities の一部は Unix plotting utilities を元にしている。
<code>graph</code> コマンドを含むさまざまなプロット・フィルタは、
Unix が最初にベル研からリリースされたときにすでに含まれていて、
少なくとも Version 4 (1973年) まではあった。
最初は Tektronix 611 storage scope が出力端末であった。
様々なプロット・フィルタをまとめて、<code>libplot</code> の機種依存性をなくしたのは
<a href="mailto:llc@research.att.com">Lorinda Cherry</a> である。
Unix の Version 7 (1979年) とそれに続くバークレー版から、
<code>graph</code>、<code>plot</code>、<code>spline</code> をまとめたパッケージと
機種依存性の残っている <code>libplot</code> が標準で搭載されるようになった。
1980 年代前半では、各種の Tektronix storage scope、初期のグラフィック端末、
Versatec と Varian の 200dpi
静電プリンタ／プロッタ、
ヒューレット・パッカードのペン・プロッタなどがサポートされていた。
</p>
<p>最初の GNU 版の<code>graph</code>、<code>plot</code>、<code>spline</code> とそれらの付属文書は
<a href="mailto:rich@freebsd.org">Rich Murphey</a> が 1989 年に書いた。
Richard Stallman は開発続行を指示し、付属文書の編集をサポートした。
スタンフォード大学で InterViews の開発チームの
<a href="mailto:interran@uluru.stanford.edu">John Interrante</a> は <code>idraw</code>
で使っていた PostScript prologue
ファイルを惜しげもなく提供し、様々な助言も行ってくれた。それは最新の
<code>libplot</code> でも使われている。
1991 年には、パッケージは `GNU graphics' という名前で公開されていた。
</p>
<p>1995 年には <a href="mailto:rsm@math.arizona.edu">Robert S. Maier</a>
が開発を引き受け、現在の機種依存性がほとんどなくなったスタンドアロンの
<code>libplot</code> の設計、実装を行った。彼は <code>graph</code>
をスクラッチから書き直し、新しくなった <code>libplot</code>
を使ってリアルタイム・フィルタとして使えるようにした。彼は <code>spline</code>
も書き直して、テンション、周期スプライン、
三次のベッセル関数による補間の各機能を使えるようにした。
</p>
<p><code>libplot</code> には現在、多角形の塗りつぶしや多角形や円弧を描く X Window
のコードが取り入れられている。ビットマップ画像 (PNG、PNM と疑似 GIF)
を生成するときにこのコードが使われている。このコードは
Brian Kelleher、Joel McCormack、Todd Newman、Keith Packard、Robert
Scheifler、Ken Whaley (以上 Digital Equipment Corp.) と MIT、X Consortium
によるものである (&copy; 1985-89 by the X Consortium)。
文字列のアフィン変換は Alan Richardson による <code>xvertext</code>
パッケージで行われているのと同様の方法を使っていて、
これにより文字列の回転を行っている。
</p>
<p>現在の <code>libplot</code> の 疑似 GIF 機能は、
<a href="mailto:mouse@rodents.montreal.qc.ca">der Maus</a> と
ivo によるランレングス圧縮を採用した `miGIF'
を使っている (&copy; 1998
by Hutchison Avenue Software Corporation)。miGIF
の著作権や利用許諾条件は GNU plotting utilities パッケージに同梱されている。
</p>
<p><code>ode</code> はほとんど <a href="mailto:nbt@reed.edu">Nick Tufillaro</a> が 1978-1994
年にかけて、PDP-11 上の Unix Version 4 用に作ったものである。
Nick の 1994 年版を元に Robert Maier が 1997 年に GNU
用にコーディングとコマンドライン・オプションを修正し、また <code>gnuplot</code>
の特殊関数をすべてサポートし、例外処理を改良した。
</p>
<p>Plotting utilities の開発に貢献した人は他にもたくさんいる。現在 <code>libplot</code>
に組み込まれている Hershey ベクトル・フォントはもちろん、主に 1960
年代後半に Allen V. Hershey が電子化したものが元になっている。
彼には感謝を捧げる。他にも Robert C. Beach が 1970 年代中頃に開発した
SLAC Unified Graphics System や <a href="mailto:wolff@inf.fu-berlin.de">Thomas Wolff</a>
が Ghostscript 用に作ったものから文字や記号が採用されている。
<code>spline</code> コマンドの補間アルゴリズムは
<a href="mailto:cline@cs.utexas.edu">Alan K. Cline</a> のものに基づいており、
それは Apr. 1974 issue of <cite>Communications of the ACM</cite>
に採録されている彼の論文によるものである。<code>tek2plot</code>
の表指向の構文解析ルーチンは 1980 年中頃に <a href="mailto:moy@parc.xerox.com">Edward Moy</a> がバークレーで書いたものである。<code>libplot</code>
で円弧や楕円弧を描くときに使われる `sagitta' アルゴリズムは、URW の Peter
Karnow と Apple の <a href="mailto:turk@apple.com">Ken Turkowski</a> によるものである。
<a href="mailto:toy@rtp.ericsson.se">Raymond Toy</a> は <code>graph</code>
でも目盛りの配置を行うコードに貢献し、また GNU <code>getopt</code> を最初に導入した。
以前 Cornell 大学 LASSP にいた Arthur Smith は、彼が書いた <code>xplot</code>
プログラムのコードを寄贈してくれた。<a href="mailto:beebe@math.utah.edu">Nelson Beebe</a>
はパッケージのインストール法を徹底的にテストしてくれた。
</p>
<p>Robert Maier がこの文書を書いた。この文書には現在 Nick Tufillaro の <code>ode</code>
のマニュアルも含まれている。Julie Sussmann が文書全体の校正を行った。
</p>
<p>以上のすべての部分の英語から日本語への翻訳は、
(独)産業技術総合研究所 (生命情報工学研究センター) の
<a href="mailto:tominaga@cbrc.jp">とみながだいすけ</a> (Daisuke TOMINAGA) が 2009 年
8 月に行った。
</p>

<hr size="6">
<a name="Reporting-Bugs"></a>
<a name="SEC80"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC79" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC81" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC79" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SEC81" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="appendix"> G. バグ・レポート </h1>

<p>GNU plotting utilities に関するバグは、<code>libplot</code>
ライブラリのものも含めてすべて、<a href="mailto:bug-plotutils@gnu.org">bug-plotutils@gnu.org</a>
に送ってほしい。その際、GNU plotting utilities
のどのバージョンを使ったときのバグかを明記するようにお願いする。
GNU plotting utilities に含まれるコマンドライン・プログラムのバージョンは、
<samp>`--version'</samp> オプションを付けてコマンドを実行すると表示される。
</p>
<p>ソースファイルからコンパイルしてインストールしている場合は、
そのときに使ったコンパイラの種類 (とバージョン) も教えてほしい。
もし生じた問題が利用環境に特有なものである場合は、
それに関する情報もすべて教えてほしい。
</p>
<hr size="6">
<a name="GNU-Free-Documentation-License"></a>
<a name="SEC81"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC80" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC82" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC80" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="appendix"> H. GNU Free Documentation License </h1>

<p align="center"> Version 1.2, November 2002
</p>
<table><tr><td>&nbsp;</td><td><pre class="display">Copyright &copy; 2000, 2001, 2002 Free Software Foundation, Inc.
51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></td></tr></table>
<ol>
<li>
PREAMBLE

<p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <em>free</em> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.
</p>
<p>This License is a kind of &quot;copyleft&quot;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.
</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.
</p>
</li><li>
APPLICABILITY AND DEFINITIONS

<p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &quot;Document&quot;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &quot;you&quot;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.
</p>
<p>A &quot;Modified Version&quot; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.
</p>
<p>A &quot;Secondary Section&quot; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.
</p>
<p>The &quot;Invariant Sections&quot; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.
</p>
<p>The &quot;Cover Texts&quot; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.
</p>
<p>A &quot;Transparent&quot; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &quot;Transparent&quot; is called &quot;Opaque&quot;.
</p>
<p>Examples of suitable formats for Transparent copies include plain
<small>ASCII</small> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.
</p>
<p>The &quot;Title Page&quot; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &quot;Title Page&quot; means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.
</p>
<p>A section &quot;Entitled XYZ&quot; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &quot;Acknowledgements&quot;,
&quot;Dedications&quot;, &quot;Endorsements&quot;, or &quot;History&quot;.)  To &quot;Preserve the Title&quot;
of such a section when you modify the Document means that it remains a
section &quot;Entitled XYZ&quot; according to this definition.
</p>
<p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.
</p>
</li><li>
VERBATIM COPYING

<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.
</p>
</li><li>
COPYING IN QUANTITY

<p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.
</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.
</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.
</p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.
</p>
</li><li>
MODIFICATIONS

<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:
</p>
<ol>
<li>
Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

</li><li>
List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

</li><li>
State on the Title page the name of the publisher of the
Modified Version, as the publisher.

</li><li>
Preserve all the copyright notices of the Document.

</li><li>
Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

</li><li>
Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

</li><li>
Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

</li><li>
Include an unaltered copy of this License.

</li><li>
Preserve the section Entitled &quot;History&quot;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &quot;History&quot; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

</li><li>
Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &quot;History&quot; section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

</li><li>
For any section Entitled &quot;Acknowledgements&quot; or &quot;Dedications&quot;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

</li><li>
Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

</li><li>
Delete any section Entitled &quot;Endorsements&quot;.  Such a section
may not be included in the Modified Version.

</li><li>
Do not retitle any existing section to be Entitled &quot;Endorsements&quot; or
to conflict in title with any Invariant Section.

</li><li>
Preserve any Warranty Disclaimers.
</li></ol>

<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice.
These titles must be distinct from any other section titles.
</p>
<p>You may add a section Entitled &quot;Endorsements&quot;, provided it contains
nothing but endorsements of your Modified Version by various
parties--for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.
</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.
</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.
</p>
</li><li>
COMBINING DOCUMENTS

<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.
</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.
</p>
<p>In the combination, you must combine any sections Entitled &quot;History&quot;
in the various original documents, forming one section Entitled
&quot;History&quot;; likewise combine any sections Entitled &quot;Acknowledgements&quot;,
and any sections Entitled &quot;Dedications&quot;.  You must delete all
sections Entitled &quot;Endorsements.&quot;
</p>
</li><li>
COLLECTIONS OF DOCUMENTS

<p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.
</p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.
</p>
</li><li>
AGGREGATION WITH INDEPENDENT WORKS

<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &quot;aggregate&quot; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.
</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.
</p>
</li><li>
TRANSLATION

<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.
</p>
<p>If a section in the Document is Entitled &quot;Acknowledgements&quot;,
&quot;Dedications&quot;, or &quot;History&quot;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.
</p>
</li><li>
TERMINATION

<p>You may not copy, modify, sublicense, or distribute the Document except
as expressly provided for under this License.  Any other attempt to
copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this
License will not have their licenses terminated so long as such
parties remain in full compliance.
</p>
</li><li>
FUTURE REVISIONS OF THIS LICENSE

<p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.
</p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License &quot;or any later version&quot; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.
</p></li></ol>


<hr size="6">
<a name="SEC82"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC81" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[ &gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC81" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC81" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="appendixsec"> H.1 ADDENDUM: How to use this License for your documents </h2>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.2
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></td></tr></table>
<p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &quot;with...Texts.&quot; line with this:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></td></tr></table>
<p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.
</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.
</p>
<hr size="6">
<a name="SEC_Contents"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>Table of Contents</h1>
<div class="contents">

<ul class="toc">
  <li><a name="TOC1" href="#SEC1">1. はじめに</a></li>
  <li><a name="TOC2" href="#SEC2">2. <code>graph</code> コマンド</a>
  <ul class="toc">
    <li><a name="TOC3" href="#SEC3">2.1 <code>graph</code> の使い方</a></li>
    <li><a name="TOC4" href="#SEC4">2.2 プロットの回転、および長方形のプロット</a></li>
    <li><a name="TOC5" href="#SEC5">2.3 複数のデータセット</a></li>
    <li><a name="TOC6" href="#SEC6">2.4 多重プロット</a></li>
    <li><a name="TOC7" href="#SEC7">2.5 読み込めるデータ形式</a></li>
    <li><a name="TOC8" href="#SEC8">2.6 <code>graph</code> のコマンドライン・オプション</a>
    <ul class="toc">
      <li><a name="TOC9" href="#SEC9">2.6.1 プロット全体を制御するオプション</a></li>
      <li><a name="TOC10" href="#SEC10">2.6.2 データセットのオプション</a></li>
      <li><a name="TOC11" href="#SEC11">2.6.3 多重プロットのオプション</a></li>
      <li><a name="TOC12" href="#SEC12">2.6.4 <code>graph</code> の生出力データのオプション</a></li>
      <li><a name="TOC13" href="#SEC13">2.6.5 情報を表示するオプション</a></li>
    </ul></li>
    <li><a name="TOC14" href="#SEC14">2.7 <code>graph</code> の環境変数</a></li>
  </ul></li>
  <li><a name="TOC15" href="#SEC15">3. <code>plot</code> コマンド</a>
  <ul class="toc">
    <li><a name="TOC16" href="#SEC16">3.1 <code>plot</code> コマンドの使い方</a></li>
    <li><a name="TOC17" href="#SEC17">3.2 <code>plot</code> のコマンドライン・オプション</a></li>
    <li><a name="TOC18" href="#SEC18">3.3 <code>plot</code> の環境変数</a></li>
  </ul></li>
  <li><a name="TOC19" href="#SEC19">4. <code>pic2plot</code> コマンド</a>
  <ul class="toc">
    <li><a name="TOC20" href="#SEC20">4.1 <code>pic2plot</code> の使い方</a></li>
    <li><a name="TOC21" href="#SEC21">4.2 <code>pic2plot</code> のコマンドライン・オプション</a></li>
    <li><a name="TOC22" href="#SEC22">4.3 <code>pic2plot</code> の環境変数</a></li>
  </ul></li>
  <li><a name="TOC23" href="#SEC23">5. <code>tek2plot</code> コマンド</a>
  <ul class="toc">
    <li><a name="TOC24" href="#SEC24">5.1 <code>tek2plot</code> の使い方</a></li>
    <li><a name="TOC25" href="#SEC25">5.2 <code>tek2plot</code> のコマンドライン・オプション</a></li>
    <li><a name="TOC26" href="#SEC26">5.3 <code>tek2plot</code> の環境変数</a></li>
  </ul></li>
  <li><a name="TOC27" href="#SEC27">6. <code>plotfont</code> コマンド</a>
  <ul class="toc">
    <li><a name="TOC28" href="#SEC28">6.1 <code>plotfont</code> の使い方</a></li>
    <li><a name="TOC29" href="#SEC29">6.2 <code>plotfont</code> のコマンドライン・オプション</a></li>
    <li><a name="TOC30" href="#SEC30">6.3 <code>plotfont</code> の環境変数</a></li>
  </ul></li>
  <li><a name="TOC31" href="#SEC31">7. <code>spline</code> コマンド</a>
  <ul class="toc">
    <li><a name="TOC32" href="#SEC32">7.1 <code>spline</code> の使い方</a></li>
    <li><a name="TOC33" href="#SEC33">7.2 <code>spline</code> の他の機能</a></li>
    <li><a name="TOC34" href="#SEC34">7.3 <code>spline</code> のコマンドライン・オプション</a></li>
  </ul></li>
  <li><a name="TOC35" href="#SEC35">8. <code>ode</code> コマンド</a>
  <ul class="toc">
    <li><a name="TOC36" href="#SEC36">8.1 数学的基礎</a></li>
    <li><a name="TOC37" href="#SEC37">8.2 <code>ode</code> の使用例</a></li>
    <li><a name="TOC38" href="#SEC38">8.3 一歩進んだ <code>ode</code> の使い方</a></li>
    <li><a name="TOC39" href="#SEC39">8.4 <code>ode</code> のコマンドライン・オプション</a></li>
    <li><a name="TOC40" href="#SEC40">8.5 診断メッセージ</a></li>
    <li><a name="TOC41" href="#SEC41">8.6 数値誤差</a></li>
    <li><a name="TOC42" href="#SEC42">8.7 実行時間</a></li>
    <li><a name="TOC43" href="#SEC43">8.8 <code>ode</code> の記述言語</a></li>
    <li><a name="TOC44" href="#SEC44">8.9 微分方程式について</a></li>
  </ul></li>
  <li><a name="TOC45" href="#SEC45">9. <code>libplot</code> ライブラリ</a>
  <ul class="toc">
    <li><a name="TOC46" href="#SEC46">9.1 <code>libplot</code> プログラミング</a></li>
    <li><a name="TOC47" href="#SEC47">9.2 <code>libplot</code> を使った C プログラミング</a>
    <ul class="toc">
      <li><a name="TOC48" href="#SEC48">9.2.1 C の API</a></li>
      <li><a name="TOC49" href="#SEC49">9.2.2 古い形式の C 言語の API</a></li>
      <li><a name="TOC50" href="#SEC50">9.2.3 C 言語でのコンパイルとリンク</a></li>
      <li><a name="TOC51" href="#SEC51">9.2.4 C 言語でのサンプル描画</a></li>
      <li><a name="TOC52" href="#SEC52">9.2.5 単純パスと複合パス</a></li>
      <li><a name="TOC53" href="#SEC53">9.2.6 実際のページの描画</a></li>
      <li><a name="TOC54" href="#SEC54">9.2.7 アニメーション GIF</a></li>
      <li><a name="TOC55" href="#SEC55">9.2.8 C 言語での X Window システムでのアニメーション</a></li>
      <li><a name="TOC56" href="#SEC56">9.2.9 一歩進んだ X Window システム・プログラミング</a></li>
    </ul></li>
    <li><a name="TOC57" href="#SEC57">9.3 <code>libplotter</code> を使った C++ プログラミング</a>
    <ul class="toc">
      <li><a name="TOC58" href="#SEC58">9.3.1 <code>Plotter</code> クラス</a></li>
      <li><a name="TOC59" href="#SEC59">9.3.2 C++ でのコンパイルとリンク</a></li>
      <li><a name="TOC60" href="#SEC60">9.3.3 C++ でのサンプル・プログラム</a></li>
    </ul></li>
    <li><a name="TOC61" href="#SEC61">9.4 <code>libplot</code> の関数リスト</a>
    <ul class="toc">
      <li><a name="TOC62" href="#SEC62">9.4.1 制御関数</a></li>
      <li><a name="TOC63" href="#SEC63">9.4.2 図形関数</a></li>
      <li><a name="TOC64" href="#SEC64">9.4.3 属性設定関数</a></li>
      <li><a name="TOC65" href="#SEC65">9.4.4 座標変換関数</a></li>
    </ul></li>
    <li><a name="TOC66" href="#SEC66">9.5 Plotter パラメータ</a></li>
  </ul></li>
  <li><a name="TOC67" href="#SEC67">A. フォント、文字列、記号</a>
  <ul class="toc">
    <li><a name="TOC68" href="#SEC68">A.1 利用できるフォント</a></li>
    <li><a name="TOC69" href="#SEC69">A.2 キリル文字と日本語</a></li>
    <li><a name="TOC70" href="#SEC70">A.3 X Window フォント</a></li>
    <li><a name="TOC71" href="#SEC71">A.4 文字列とエスケープ・シーケンス</a></li>
    <li><a name="TOC72" href="#SEC72">A.5 プロットに使える記号</a></li>
  </ul></li>
  <li><a name="TOC73" href="#SEC73">B. 色名</a></li>
  <li><a name="TOC74" href="#SEC74">C. ページと描画領域のサイズ</a></li>
  <li><a name="TOC75" href="#SEC75">D. Metafile 形式</a></li>
  <li><a name="TOC76" href="#SEC76">E. 関連するソフトウェア</a>
  <ul class="toc">
    <li><a name="TOC77" href="#SEC77">E.1 <code>idraw</code> の入手先</a></li>
    <li><a name="TOC78" href="#SEC78">E.2 <code>xfig</code> の入手先</a></li>
  </ul></li>
  <li><a name="TOC79" href="#SEC79">F. 開発の経過と関わった人たち</a></li>
  <li><a name="TOC80" href="#SEC80">G. バグ・レポート</a></li>
  <li><a name="TOC81" href="#SEC81">H. GNU Free Documentation License</a>
  <ul class="toc">
    <li><a name="TOC82" href="#SEC82">H.1 ADDENDUM: How to use this License for your documents</a></li>
  </ul>
</li>
</ul>
</div>
<hr size="1">
<a name="SEC_About"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>About This Document</h1>
<p>
  This document was generated by <em>とみながだいすけ</em> on <em>August, 3 2009</em> using <a href="http://texi2html.cvshome.org/"><em>texi2html 1.76</em></a>.
</p>
<p>
  The buttons in the navigation panels have the following meaning:
</p>
<table border="1">
  <tr>
    <th> Button </th>
    <th> Name </th>
    <th> Go to </th>
    <th> From 1.2.3 go to</th>
  </tr>
  <tr>
    <td align="center"> [ &lt; ] </td>
    <td align="center">Back</td>
    <td>previous section in reading order</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt; ] </td>
    <td align="center">Forward</td>
    <td>next section in reading order</td>
    <td>1.2.4</td>
  </tr>
  <tr>
    <td align="center"> [ &lt;&lt; ] </td>
    <td align="center">FastBack</td>
    <td>beginning of this chapter or previous chapter</td>
    <td>1</td>
  </tr>
  <tr>
    <td align="center"> [ Up ] </td>
    <td align="center">Up</td>
    <td>up section</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt;&gt; ] </td>
    <td align="center">FastForward</td>
    <td>next chapter</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center"> [Top] </td>
    <td align="center">Top</td>
    <td>cover (top) of document</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Contents] </td>
    <td align="center">Contents</td>
    <td>table of contents</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Index] </td>
    <td align="center">Index</td>
    <td>index</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [ ? ] </td>
    <td align="center">About</td>
    <td>about (help)</td>
    <td> &nbsp; </td>
  </tr>
</table>

<p>
  where the <strong> Example </strong> assumes that the current position is at <strong> Subsubsection One-Two-Three </strong> of a document of the following structure:
</p>

<ul>
  <li> 1. Section One
    <ul>
      <li>1.1 Subsection One-One
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2 Subsection One-Two
        <ul>
          <li>1.2.1 Subsubsection One-Two-One</li>
          <li>1.2.2 Subsubsection One-Two-Two</li>
          <li>1.2.3 Subsubsection One-Two-Three &nbsp; &nbsp;
            <strong>&lt;== Current Position </strong></li>
          <li>1.2.4 Subsubsection One-Two-Four</li>
        </ul>
      </li>
      <li>1.3 Subsection One-Three
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.4 Subsection One-Four</li>
    </ul>
  </li>
</ul>

<hr size="1">
<p>
 <font size="-1">
  This document was generated by <em>とみながだいすけ</em> on <em>August, 3 2009</em> using <a href="http://texi2html.cvshome.org/"><em>texi2html 1.76</em></a>.
 </font>
 <br>

</p>
</body>
</html>
