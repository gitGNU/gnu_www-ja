<html lang="en">
<head>
<title>Formatting - GNU Coding Standards</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Coding Standards">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Writing-C.html#Writing-C" title="Writing C">
<link rel="next" href="Comments.html#Comments" title="Comments">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
The GNU coding standards, last updated April 7, 2012.

Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front-Cover Texts, and with no Back-Cover
Texts.  A copy of the license is included in the section entitled
``GNU Free Documentation License''.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Formatting"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Comments.html#Comments">Comments</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Writing-C.html#Writing-C">Writing C</a>
<hr>
</div>

<h3 class="section">5.1 Formatting Your Source Code</h3>

<p><a name="index-formatting-source-code-76"></a>
<a name="index-open-brace-77"></a><a name="index-braces_002c-in-C-source-78"></a><a name="index-function-definitions_002c-formatting-79"></a>It is important to put the open-brace that starts the body of a C
function in column one, so that they will start a defun.  Several
tools look for open-braces in column one to find the beginnings of C
functions.  These tools will not work on code not formatted that way.

   <p>Avoid putting open-brace, open-parenthesis or open-bracket in column
one when they are inside a function, so that they won't start a defun. 
The open-brace that starts a <code>struct</code> body can go in column one
if you find it useful to treat that definition as a defun.

   <p>It is also important for function definitions to start the name of the
function in column one.  This helps people to search for function
definitions, and may also help certain tools recognize them.  Thus,
using Standard C syntax, the format is this:

<pre class="example">     static char *
     concat (char *s1, char *s2)
     {
       ...
     }
</pre>
   <p class="noindent">or, if you want to use traditional C syntax, format the definition like
this:

<pre class="example">     static char *
     concat (s1, s2)        /* Name starts in column one here */
          char *s1, *s2;
     {                     /* Open brace in column one here */
       ...
     }
</pre>
   <p>In Standard C, if the arguments don't fit nicely on one line,
split it like this:

<pre class="example">     int
     lots_of_args (int an_integer, long a_long, short a_short,
                   double a_double, float a_float)
     ...
</pre>
   <p><a name="index-g_t_0040code_007bstruct_007d-types_002c-formatting-80"></a><a name="index-g_t_0040code_007benum_007d-types_002c-formatting-81"></a>For <code>struct</code> and <code>enum</code> types, likewise put the braces in
column one, unless the whole contents fits on one line:

<pre class="example">     struct foo
     {
       int a, b;
     }
<br><span class="roman">or</span><br>
     struct foo { int a, b; }
</pre>
   <p>The rest of this section gives our recommendations for other aspects of
C formatting style, which is also the default style of the <code>indent</code>
program in version 1.2 and newer.  It corresponds to the options

<pre class="smallexample">     -nbad -bap -nbc -bbo -bl -bli2 -bls -ncdb -nce -cp1 -cs -di2
     -ndj -nfc1 -nfca -hnl -i2 -ip5 -lp -pcs -psl -nsc -nsob
</pre>
   <p>We don't think of these recommendations as requirements, because it
causes no problems for users if two different programs have different
formatting styles.

   <p>But whatever style you use, please use it consistently, since a mixture
of styles within one program tends to look ugly.  If you are
contributing changes to an existing program, please follow the style of
that program.

   <p>For the body of the function, our recommended style looks like this:

<pre class="example">     if (x &lt; foo (y, z))
       haha = bar[4] + 5;
     else
       {
         while (z)
           {
             haha += foo (z, z);
             z--;
           }
         return ++x + bar ();
       }
</pre>
   <p><a name="index-spaces-before-open_002dparen-82"></a>We find it easier to read a program when it has spaces before the
open-parentheses and after the commas.  Especially after the commas.

   <p>When you split an expression into multiple lines, split it
before an operator, not after one.  Here is the right way:

   <p><a name="index-expressions_002c-splitting-83"></a>
<pre class="example">     if (foo_this_is_long &amp;&amp; bar &gt; win (x, y, z)
         &amp;&amp; remaining_condition)
</pre>
   <p>Try to avoid having two operators of different precedence at the same
level of indentation.  For example, don't write this:

<pre class="example">     mode = (inmode[j] == VOIDmode
             || GET_MODE_SIZE (outmode[j]) &gt; GET_MODE_SIZE (inmode[j])
             ? outmode[j] : inmode[j]);
</pre>
   <p>Instead, use extra parentheses so that the indentation shows the nesting:

<pre class="example">     mode = ((inmode[j] == VOIDmode
              || (GET_MODE_SIZE (outmode[j]) &gt; GET_MODE_SIZE (inmode[j])))
             ? outmode[j] : inmode[j]);
</pre>
   <p>Insert extra parentheses so that Emacs will indent the code properly. 
For example, the following indentation looks nice if you do it by hand,

<pre class="example">     v = rup-&gt;ru_utime.tv_sec*1000 + rup-&gt;ru_utime.tv_usec/1000
         + rup-&gt;ru_stime.tv_sec*1000 + rup-&gt;ru_stime.tv_usec/1000;
</pre>
   <p class="noindent">but Emacs would alter it.  Adding a set of parentheses produces
something that looks equally nice, and which Emacs will preserve:

<pre class="example">     v = (rup-&gt;ru_utime.tv_sec*1000 + rup-&gt;ru_utime.tv_usec/1000
          + rup-&gt;ru_stime.tv_sec*1000 + rup-&gt;ru_stime.tv_usec/1000);
</pre>
   <p>Format do-while statements like this:

<pre class="example">     do
       {
         a = foo (a);
       }
     while (a &gt; 0);
</pre>
   <p><a name="index-formfeed-84"></a><a name="index-control_002dL-85"></a>Please use formfeed characters (control-L) to divide the program into
pages at logical places (but not within a function).  It does not matter
just how long the pages are, since they do not have to fit on a printed
page.  The formfeeds should appear alone on lines by themselves.

   </body></html>

