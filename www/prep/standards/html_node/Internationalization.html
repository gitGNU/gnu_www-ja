<html lang="en">
<head>
<title>Internationalization - GNU Coding Standards</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Coding Standards">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Writing-C.html#Writing-C" title="Writing C">
<link rel="prev" href="System-Functions.html#System-Functions" title="System Functions">
<link rel="next" href="Character-Set.html#Character-Set" title="Character Set">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
The GNU coding standards, last updated April 7, 2012.

Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front-Cover Texts, and with no Back-Cover
Texts.  A copy of the license is included in the section entitled
``GNU Free Documentation License''.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Internationalization"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Character-Set.html#Character-Set">Character Set</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="System-Functions.html#System-Functions">System Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Writing-C.html#Writing-C">Writing C</a>
<hr>
</div>

<h3 class="section">5.8 Internationalization</h3>

<p><a name="index-internationalization-115"></a>
<a name="index-gettext-116"></a>GNU has a library called GNU gettext that makes it easy to translate the
messages in a program into various languages.  You should use this
library in every program.  Use English for the messages as they appear
in the program, and let gettext provide the way to translate them into
other languages.

   <p>Using GNU gettext involves putting a call to the <code>gettext</code> macro
around each string that might need translation&mdash;like this:

<pre class="example">     printf (gettext ("Processing file '%s'..."), file);
</pre>
   <p class="noindent">This permits GNU gettext to replace the string <code>"Processing file
'%s'..."</code> with a translated version.

   <p>Once a program uses gettext, please make a point of writing calls to
<code>gettext</code> when you add new strings that call for translation.

   <p>Using GNU gettext in a package involves specifying a <dfn>text domain
name</dfn> for the package.  The text domain name is used to separate the
translations for this package from the translations for other packages. 
Normally, the text domain name should be the same as the name of the
package&mdash;for example, &lsquo;<samp><span class="samp">coreutils</span></samp>&rsquo; for the GNU core utilities.

   <p><a name="index-message-text_002c-and-internationalization-117"></a>To enable gettext to work well, avoid writing code that makes
assumptions about the structure of words or sentences.  When you want
the precise text of a sentence to vary depending on the data, use two or
more alternative string constants each containing a complete sentences,
rather than inserting conditionalized words or phrases into a single
sentence framework.

   <p>Here is an example of what not to do:

<pre class="smallexample">     printf ("%s is full", capacity &gt; 5000000 ? "disk" : "floppy disk");
</pre>
   <p>If you apply gettext to all strings, like this,

<pre class="smallexample">     printf (gettext ("%s is full"),
             capacity &gt; 5000000 ? gettext ("disk") : gettext ("floppy disk"));
</pre>
   <p class="noindent">the translator will hardly know that "disk" and "floppy disk" are meant to
be substituted in the other string.  Worse, in some languages (like French)
the construction will not work: the translation of the word "full" depends
on the gender of the first part of the sentence; it happens to be not the
same for "disk" as for "floppy disk".

   <p>Complete sentences can be translated without problems:

<pre class="example">     printf (capacity &gt; 5000000 ? gettext ("disk is full")
             : gettext ("floppy disk is full"));
</pre>
   <p>A similar problem appears at the level of sentence structure with this
code:

<pre class="example">     printf ("#  Implicit rule search has%s been done.\n",
             f-&gt;tried_implicit ? "" : " not");
</pre>
   <p class="noindent">Adding <code>gettext</code> calls to this code cannot give correct results for
all languages, because negation in some languages requires adding words
at more than one place in the sentence.  By contrast, adding
<code>gettext</code> calls does the job straightforwardly if the code starts
out like this:

<pre class="example">     printf (f-&gt;tried_implicit
             ? "#  Implicit rule search has been done.\n",
             : "#  Implicit rule search has not been done.\n");
</pre>
   <p>Another example is this one:

<pre class="example">     printf ("%d file%s processed", nfiles,
             nfiles != 1 ? "s" : "");
</pre>
   <p class="noindent">The problem with this example is that it assumes that plurals are made
by adding `s'.  If you apply gettext to the format string, like this,

<pre class="example">     printf (gettext ("%d file%s processed"), nfiles,
             nfiles != 1 ? "s" : "");
</pre>
   <p class="noindent">the message can use different words, but it will still be forced to use
`s' for the plural.  Here is a better way, with gettext being applied to
the two strings independently:

<pre class="example">     printf ((nfiles != 1 ? gettext ("%d files processed")
              : gettext ("%d file processed")),
             nfiles);
</pre>
   <p class="noindent">But this still doesn't work for languages like Polish, which has three
plural forms: one for nfiles == 1, one for nfiles == 2, 3, 4, 22, 23, 24, ... 
and one for the rest.  The GNU <code>ngettext</code> function solves this problem:

<pre class="example">     printf (ngettext ("%d files processed", "%d file processed", nfiles),
             nfiles);
</pre>
   </body></html>

