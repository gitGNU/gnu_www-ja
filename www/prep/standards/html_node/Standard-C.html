<html lang="en">
<head>
<title>Standard C - GNU Coding Standards</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Coding Standards">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Design-Advice.html#Design-Advice" title="Design Advice">
<link rel="prev" href="Using-Extensions.html#Using-Extensions" title="Using Extensions">
<link rel="next" href="Conditional-Compilation.html#Conditional-Compilation" title="Conditional Compilation">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
The GNU coding standards, last updated April 7, 2012.

Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front-Cover Texts, and with no Back-Cover
Texts.  A copy of the license is included in the section entitled
``GNU Free Documentation License''.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Standard-C"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Conditional-Compilation.html#Conditional-Compilation">Conditional Compilation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Using-Extensions.html#Using-Extensions">Using Extensions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Design-Advice.html#Design-Advice">Design Advice</a>
<hr>
</div>

<h3 class="section">3.4 Standard C and Pre-Standard C</h3>

<p><a name="index-g_t_0040sc_007bansi_007d-C-standard-22"></a>
1989 Standard C is widespread enough now that it is ok to use its
features in new programs.  There is one exception: do not ever use the
&ldquo;trigraph&rdquo; feature of Standard C.

   <p>1999 Standard C is not widespread yet, so please do not require its
features in programs.  It is ok to use its features if they are present.

   <p>However, it is easy to support pre-standard compilers in most programs,
so if you know how to do that, feel free.  If a program you are
maintaining has such support, you should try to keep it working.

   <p><a name="index-function-prototypes-23"></a>To support pre-standard C, instead of writing function definitions in
standard prototype form,

<pre class="example">     int
     foo (int x, int y)
     ...
</pre>
   <p class="noindent">write the definition in pre-standard style like this,

<pre class="example">     int
     foo (x, y)
          int x, y;
     ...
</pre>
   <p class="noindent">and use a separate declaration to specify the argument prototype:

<pre class="example">     int foo (int, int);
</pre>
   <p>You need such a declaration anyway, in a header file, to get the benefit
of prototypes in all the files where the function is called.  And once
you have the declaration, you normally lose nothing by writing the
function definition in the pre-standard style.

   <p>This technique does not work for integer types narrower than <code>int</code>. 
If you think of an argument as being of a type narrower than <code>int</code>,
declare it as <code>int</code> instead.

   <p>There are a few special cases where this technique is hard to use.  For
example, if a function argument needs to hold the system type
<code>dev_t</code>, you run into trouble, because <code>dev_t</code> is shorter than
<code>int</code> on some machines; but you cannot use <code>int</code> instead,
because <code>dev_t</code> is wider than <code>int</code> on some machines.  There
is no type you can safely use on all machines in a non-standard
definition.  The only way to support non-standard C and pass such an
argument is to check the width of <code>dev_t</code> using Autoconf and choose
the argument type accordingly.  This may not be worth the trouble.

   <p>In order to support pre-standard compilers that do not recognize
prototypes, you may want to use a preprocessor macro like this:

<pre class="example">     /* Declare the prototype for a general external function.  */
     #if defined (__STDC__) || defined (WINDOWSNT)
     #define P_(proto) proto
     #else
     #define P_(proto) ()
     #endif
</pre>
   </body></html>

